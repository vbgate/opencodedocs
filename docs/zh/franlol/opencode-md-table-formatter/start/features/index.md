---
title: "åŠŸèƒ½å…¨è§ˆ: 8 å¤§æ ¸å¿ƒåŠŸèƒ½ | opencode-md-table-formatter"
sidebarTitle: "8 å¤§åŠŸèƒ½ä¸€è§ˆ"
subtitle: "åŠŸèƒ½å…¨è§ˆ: 8 å¤§æ ¸å¿ƒåŠŸèƒ½"
description: "å­¦ä¹  opencode-md-table-formatter æ’ä»¶çš„ 8 å¤§æ ¸å¿ƒåŠŸèƒ½ã€‚æŒæ¡è‡ªåŠ¨è¡¨æ ¼æ ¼å¼åŒ–ã€éšè—æ¨¡å¼å…¼å®¹å’Œå¯¹é½æ”¯æŒï¼Œå¿«é€Ÿå¤„ç† Emoji å’Œ Unicodeã€‚"
tags:
  - "è‡ªåŠ¨æ ¼å¼åŒ–"
  - "éšè—æ¨¡å¼"
  - "å¯¹é½æ”¯æŒ"
  - "ä»£ç å—ä¿æŠ¤"
prerequisite:
  - "start-getting-started"
order: 20
---

# åŠŸèƒ½å…¨è§ˆï¼šè‡ªåŠ¨æ ¼å¼åŒ–çš„é­”æ³•

::: info å­¦å®Œä½ èƒ½åšä»€ä¹ˆ
- äº†è§£æ’ä»¶çš„ 8 å¤§æ ¸å¿ƒåŠŸèƒ½
- çŸ¥é“å“ªäº›åœºæ™¯é€‚åˆç”¨è¿™ä¸ªæ’ä»¶
- æ˜ç™½æ’ä»¶çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼ˆä¸èƒ½åšä»€ä¹ˆï¼‰
:::

## ä½ ç°åœ¨çš„å›°å¢ƒ

::: info æ’ä»¶ä¿¡æ¯
æœ¬æ’ä»¶å…¨åä¸º **@franlol/opencode-md-table-formatter**ï¼Œä»¥ä¸‹ç®€ç§°"è¡¨æ ¼æ ¼å¼åŒ–æ’ä»¶"ã€‚
:::

AI ç”Ÿæˆçš„ Markdown è¡¨æ ¼ç»å¸¸æ˜¯è¿™æ ·çš„ï¼š

```markdown
| åç§° | æè¿° | çŠ¶æ€ |
|--- | --- | ---|
| **ç”¨æˆ·ç®¡ç†** | ç®¡ç†ç³»ç»Ÿç”¨æˆ· | âœ… å®Œæˆ |
| API | æ¥å£æ–‡æ¡£ | ğŸš§ è¿›è¡Œä¸­ |
```

åˆ—å®½å‚å·®ä¸é½ï¼Œçœ‹ç€éš¾å—ã€‚æ‰‹åŠ¨è°ƒæ•´ï¼Ÿæ¯æ¬¡ AI ç”Ÿæˆæ–°è¡¨æ ¼éƒ½è¦è°ƒä¸€éï¼Œå¤ªç´¯äº†ã€‚

## ä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸€æ‹›

- AI ç”Ÿæˆäº† Markdown è¡¨æ ¼ï¼Œä½ æƒ³è®©å®ƒæ›´æ•´é½
- ä½ å¼€å¯äº† OpenCode çš„éšè—æ¨¡å¼ï¼ˆConcealment Modeï¼‰ï¼Œè¡¨æ ¼å¯¹é½æ€»æ˜¯å‡ºé—®é¢˜
- ä½ æ‡’å¾—æ‰‹åŠ¨è°ƒæ•´è¡¨æ ¼åˆ—å®½

## æ ¸å¿ƒæ€è·¯

è¿™ä¸ªæ’ä»¶çš„å·¥ä½œåŸç†å¾ˆç®€å•ï¼š

```
AI ç”Ÿæˆæ–‡æœ¬ â†’ æ’ä»¶æ£€æµ‹è¡¨æ ¼ â†’ éªŒè¯ç»“æ„ â†’ æ ¼å¼åŒ– â†’ è¿”å›ç¾åŒ–åçš„æ–‡æœ¬
```

å®ƒæŒ‚è½½åœ¨ OpenCode çš„ `experimental.text.complete` é’©å­ä¸Šï¼ŒAI æ¯æ¬¡ç”Ÿæˆå®Œæ–‡æœ¬ï¼Œæ’ä»¶å°±è‡ªåŠ¨å¤„ç†ã€‚ä½ ä¸éœ€è¦æ‰‹åŠ¨è§¦å‘ï¼Œå…¨ç¨‹æ— æ„Ÿã€‚

## 8 å¤§æ ¸å¿ƒåŠŸèƒ½

### 1. è‡ªåŠ¨è¡¨æ ¼æ ¼å¼åŒ–

æ’ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹ AI ç”Ÿæˆæ–‡æœ¬ä¸­çš„ Markdown è¡¨æ ¼ï¼Œç»Ÿä¸€åˆ—å®½ï¼Œè®©è¡¨æ ¼æ•´é½ç¾è§‚ã€‚

**æ ¼å¼åŒ–å‰**ï¼š

```markdown
| åç§° | æè¿° | çŠ¶æ€ |
|--- | --- | ---|
| **ç”¨æˆ·ç®¡ç†** | ç®¡ç†ç³»ç»Ÿç”¨æˆ· | âœ… å®Œæˆ |
| API | æ¥å£æ–‡æ¡£ | ğŸš§ è¿›è¡Œä¸­ |
```

**æ ¼å¼åŒ–å**ï¼š

```markdown
| åç§°         | æè¿°         | çŠ¶æ€       |
|--- | --- | ---|
| **ç”¨æˆ·ç®¡ç†** | ç®¡ç†ç³»ç»Ÿç”¨æˆ· | âœ… å®Œæˆ    |
| API          | æ¥å£æ–‡æ¡£     | ğŸš§ è¿›è¡Œä¸­  |
```

::: tip è§¦å‘æ¡ä»¶
æ’ä»¶æŒ‚è½½åœ¨ `experimental.text.complete` é’©å­ä¸Šï¼ŒAI ç”Ÿæˆæ–‡æœ¬å®Œæˆåè‡ªåŠ¨è§¦å‘ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚
:::

### 2. éšè—æ¨¡å¼å…¼å®¹

OpenCode é»˜è®¤å¼€å¯éšè—æ¨¡å¼ï¼ˆConcealment Modeï¼‰ï¼Œä¼šéšè— Markdown ç¬¦å·ï¼ˆå¦‚ `**`ã€`*`ã€`~~`ï¼‰ã€‚

æ™®é€šçš„è¡¨æ ¼æ ¼å¼åŒ–å·¥å…·ä¸è€ƒè™‘è¿™ä¸€ç‚¹ï¼Œè®¡ç®—å®½åº¦æ—¶ä¼šæŠŠ `**` ä¹Ÿç®—è¿›å»ï¼Œå¯¼è‡´å¯¹é½é”™ä½ã€‚

è¿™ä¸ªæ’ä»¶ä¸“é—¨ä¸ºéšè—æ¨¡å¼ä¼˜åŒ–ï¼š

- è®¡ç®—å®½åº¦æ—¶ï¼Œå‰¥ç¦» `**ç²—ä½“**`ã€`*æ–œä½“*`ã€`~~åˆ é™¤çº¿~~` ç­‰ç¬¦å·
- è¾“å‡ºæ—¶ä¿ç•™åŸå§‹ Markdown è¯­æ³•
- æœ€ç»ˆæ•ˆæœï¼šéšè—æ¨¡å¼ä¸‹è¡¨æ ¼å®Œç¾å¯¹é½

::: details æŠ€æœ¯ç»†èŠ‚ï¼šå®½åº¦è®¡ç®—é€»è¾‘
```typescript
// å‰¥ç¦» Markdown ç¬¦å·ï¼ˆç”¨äºå®½åº¦è®¡ç®—ï¼‰
visualText = visualText
  .replace(/\*\*\*(.+?)\*\*\*/g, "$1") // ***ç²—æ–œä½“*** â†’ æ–‡æœ¬
  .replace(/\*\*(.+?)\*\*/g, "$1")     // **ç²—ä½“** â†’ ç²—ä½“
  .replace(/\*(.+?)\*/g, "$1")         // *æ–œä½“* â†’ æ–œä½“
  .replace(/~~(.+?)~~/g, "$1")         // ~~åˆ é™¤çº¿~~ â†’ åˆ é™¤çº¿
```
æºç ä½ç½®ï¼š`index.ts:181-185`
:::

### 3. å¯¹é½æ”¯æŒ

æ”¯æŒ Markdown è¡¨æ ¼çš„ä¸‰ç§å¯¹é½æ–¹å¼ï¼š

| è¯­æ³• | å¯¹é½æ–¹å¼ | æ•ˆæœ |
|--- | --- | ---|
| `---` æˆ– `:---` | å·¦å¯¹é½ | æ–‡æœ¬é å·¦ï¼ˆä¸¤ç§è¯­æ³•æ•ˆæœç›¸åŒï¼‰|
| `:---:` | å±…ä¸­ | æ–‡æœ¬å±…ä¸­ |
| `---:` | å³å¯¹é½ | æ–‡æœ¬é å³ |

**ç¤ºä¾‹**ï¼š

```markdown
| å·¦å¯¹é½ | å±…ä¸­ | å³å¯¹é½ |
|--- | --- | ---|
| æ–‡æœ¬ | æ–‡æœ¬ | æ–‡æœ¬ |
```

æ ¼å¼åŒ–åï¼Œæ¯åˆ—ä¼šæŒ‰æŒ‡å®šæ–¹å¼å¯¹é½ï¼Œåˆ†éš”è¡Œä¼šæ ¹æ®å¯¹é½æ–¹å¼é‡æ–°ç”Ÿæˆã€‚

### 4. åµŒå¥— Markdown å¤„ç†

è¡¨æ ¼å•å…ƒæ ¼é‡Œå¯èƒ½æœ‰åµŒå¥—çš„ Markdown è¯­æ³•ï¼Œæ¯”å¦‚ `***ç²—æ–œä½“***`ã€‚

æ’ä»¶ä½¿ç”¨å¤šè½®æ­£åˆ™ç®—æ³•ï¼Œä»å¤–åˆ°å†…é€å±‚å‰¥ç¦»ï¼š

```
***ç²—æ–œä½“*** â†’ **ç²—æ–œä½“** â†’ *ç²—æ–œä½“* â†’ ç²—æ–œä½“
```

è¿™æ ·å³ä½¿åµŒå¥—å¤šå±‚ï¼Œå®½åº¦è®¡ç®—ä¹Ÿæ˜¯å‡†ç¡®çš„ã€‚

### 5. ä»£ç å—ä¿æŠ¤

è¡Œå†…ä»£ç ï¼ˆç”¨åå¼•å·åŒ…è£¹ï¼‰é‡Œçš„ Markdown ç¬¦å·åº”è¯¥ä¿æŒåŸæ ·ï¼Œä¸è¢«å‰¥ç¦»ã€‚

æ¯”å¦‚ `` `**bold**` ``ï¼Œç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯ `**bold**` è¿™ 8 ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯ `bold` è¿™ 4 ä¸ªå­—ç¬¦ã€‚

æ’ä»¶ä¼šå…ˆæå–ä»£ç å—å†…å®¹ï¼Œå‰¥ç¦»å…¶ä»–éƒ¨åˆ†çš„ Markdown ç¬¦å·åï¼Œå†æŠŠä»£ç å—å†…å®¹æ”¾å›å»ã€‚

::: details æŠ€æœ¯ç»†èŠ‚ï¼šä»£ç å—ä¿æŠ¤é€»è¾‘
```typescript
// ç¬¬ 1 æ­¥ï¼šæå–å¹¶ä¿æŠ¤è¡Œå†…ä»£ç 
const codeBlocks: string[] = []
let textWithPlaceholders = text.replace(/`(.+?)`/g, (match, content) => {
  codeBlocks.push(content)
  return `\x00CODE${codeBlocks.length - 1}\x00`
})

// ç¬¬ 2 æ­¥ï¼šå‰¥ç¦»éä»£ç éƒ¨åˆ†çš„ Markdown ç¬¦å·
// ...

// ç¬¬ 3 æ­¥ï¼šæ¢å¤è¡Œå†…ä»£ç å†…å®¹
visualText = visualText.replace(/\x00CODE(\d+)\x00/g, (match, index) => {
  return codeBlocks[parseInt(index)]
})
```
æºç ä½ç½®ï¼š`index.ts:168-193`
:::

### 6. è¾¹ç•Œæƒ…å†µå¤„ç†

æ’ä»¶èƒ½æ­£ç¡®å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µï¼š

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|--- | ---|
| Emoji è¡¨æƒ… | ä½¿ç”¨ `Bun.stringWidth` æ­£ç¡®è®¡ç®—æ˜¾ç¤ºå®½åº¦ |
| Unicode å­—ç¬¦ | ä¸­æ–‡ã€æ—¥æ–‡ç­‰å®½å­—ç¬¦æ­£ç¡®å¯¹é½ |
| ç©ºå•å…ƒæ ¼ | å¡«å……ç©ºæ ¼åˆ°æœ€å°å®½åº¦ï¼ˆ3 å­—ç¬¦ï¼‰ |
| è¶…é•¿å†…å®¹ | æ­£å¸¸å¤„ç†ï¼Œä¸æˆªæ–­ |

### 7. é™é»˜æ“ä½œ

æ’ä»¶åœ¨åå°é™é»˜è¿è¡Œï¼š

- **æ— æ—¥å¿—è¾“å‡º**ï¼šä¸ä¼šåœ¨æ§åˆ¶å°æ‰“å°ä»»ä½•ä¿¡æ¯
- **é”™è¯¯ä¸ä¸­æ–­**ï¼šå³ä½¿æ ¼å¼åŒ–å¤±è´¥ï¼Œä¹Ÿä¸ä¼šå½±å“ AI çš„æ­£å¸¸è¾“å‡º

å¦‚æœæ ¼å¼åŒ–è¿‡ç¨‹ä¸­å‡ºé”™ï¼Œæ’ä»¶ä¼šä¿ç•™åŸæ–‡ï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ ä¸€æ¡ HTML æ³¨é‡Šï¼š

```markdown
<!-- table formatting failed: [é”™è¯¯ä¿¡æ¯] -->
```

### 8. éªŒè¯åé¦ˆ

æ’ä»¶ä¼šéªŒè¯è¡¨æ ¼ç»“æ„æ˜¯å¦æœ‰æ•ˆã€‚æ— æ•ˆçš„è¡¨æ ¼ä¸ä¼šè¢«æ ¼å¼åŒ–ï¼Œè€Œæ˜¯ä¿ç•™åŸæ ·ï¼Œå¹¶æ·»åŠ æç¤ºï¼š

```markdown
<!-- table not formatted: invalid structure -->
```

**æœ‰æ•ˆè¡¨æ ¼çš„è¦æ±‚**ï¼š

- è‡³å°‘ 2 è¡Œï¼ˆå«åˆ†éš”è¡Œï¼‰
- æ‰€æœ‰è¡Œçš„åˆ—æ•°ä¸€è‡´
- å¿…é¡»æœ‰åˆ†éš”è¡Œï¼ˆæ ¼å¼ï¼š`|---|---|`ï¼‰

## æ’ä»¶çš„è¾¹ç•Œ

::: warning ä¸æ”¯æŒçš„åœºæ™¯
- **HTML è¡¨æ ¼**ï¼šåªå¤„ç† Markdown ç®¡é“è¡¨æ ¼ï¼ˆ`| ... |`ï¼‰
- **å¤šè¡Œå•å…ƒæ ¼**ï¼šå« `<br>` æ ‡ç­¾çš„å•å…ƒæ ¼ä¸æ”¯æŒ
- **æ— åˆ†éš”è¡Œè¡¨æ ¼**ï¼šå¿…é¡»æœ‰ `|---|---|` åˆ†éš”è¡Œ
- **æ— è¡¨å¤´è¡¨æ ¼**ï¼šå¿…é¡»æœ‰è¡¨å¤´è¡Œ
:::

## æ£€æŸ¥ç‚¹

å®Œæˆæœ¬è¯¾åï¼Œä½ åº”è¯¥èƒ½å›ç­”ï¼š

- [ ] æ’ä»¶æ˜¯å¦‚ä½•è‡ªåŠ¨è§¦å‘çš„ï¼Ÿï¼ˆç­”ï¼š`experimental.text.complete` é’©å­ï¼‰
- [ ] ä¸ºä»€ä¹ˆéœ€è¦"éšè—æ¨¡å¼å…¼å®¹"ï¼Ÿï¼ˆç­”ï¼šéšè—æ¨¡å¼ä¼šéšè— Markdown ç¬¦å·ï¼Œå½±å“å®½åº¦è®¡ç®—ï¼‰
- [ ] è¡Œå†…ä»£ç é‡Œçš„ Markdown ç¬¦å·ä¼šè¢«å‰¥ç¦»å—ï¼Ÿï¼ˆç­”ï¼šä¸ä¼šï¼Œä»£ç å†…çš„ Markdown ç¬¦å·ä¼šè¢«å®Œæ•´ä¿ç•™ï¼‰
- [ ] æ— æ•ˆè¡¨æ ¼ä¼šæ€ä¹ˆå¤„ç†ï¼Ÿï¼ˆç­”ï¼šä¿ç•™åŸæ ·ï¼Œæ·»åŠ é”™è¯¯æ³¨é‡Šï¼‰

## æœ¬è¯¾å°ç»“

| åŠŸèƒ½ | è¯´æ˜ |
|--- | ---|
| è‡ªåŠ¨æ ¼å¼åŒ– | AI ç”Ÿæˆå®Œæ–‡æœ¬è‡ªåŠ¨è§¦å‘ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ |
| éšè—æ¨¡å¼å…¼å®¹ | æ­£ç¡®è®¡ç®— Markdown ç¬¦å·éšè—åçš„æ˜¾ç¤ºå®½åº¦ |
| å¯¹é½æ”¯æŒ | å·¦å¯¹é½ã€å±…ä¸­ã€å³å¯¹é½ |
| åµŒå¥— Markdown | å¤šè½®æ­£åˆ™å‰¥ç¦»ï¼Œæ”¯æŒåµŒå¥—è¯­æ³• |
| ä»£ç å—ä¿æŠ¤ | è¡Œå†…ä»£ç ä¸­çš„ç¬¦å·ä¿æŒåŸæ · |
| è¾¹ç•Œæƒ…å†µ | Emojiã€Unicodeã€ç©ºå•å…ƒæ ¼ã€è¶…é•¿å†…å®¹ |
| é™é»˜æ“ä½œ | æ— æ—¥å¿—ï¼Œé”™è¯¯ä¸ä¸­æ–­ |
| éªŒè¯åé¦ˆ | æ— æ•ˆè¡¨æ ¼æ·»åŠ é”™è¯¯æ³¨é‡Š |

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬æ·±å…¥ **[éšè—æ¨¡å¼åŸç†](../../advanced/concealment-mode/)**ã€‚
>
> ä½ ä¼šå­¦åˆ°ï¼š
> - OpenCode éšè—æ¨¡å¼çš„å·¥ä½œåŸç†
> - æ’ä»¶å¦‚ä½•æ­£ç¡®è®¡ç®—æ˜¾ç¤ºå®½åº¦
> - `Bun.stringWidth` çš„ä½œç”¨

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-26

| åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ | è¡Œå· |
|--- | --- | ---|
| æ’ä»¶å…¥å£ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L9-L23) | 9-23 |
| è¡¨æ ¼æ£€æµ‹ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L58-L61) | 58-61 |
| è¡¨æ ¼éªŒè¯ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L70-L88) | 70-88 |
| å®½åº¦è®¡ç®—ï¼ˆéšè—æ¨¡å¼ï¼‰ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L161-L196) | 161-196 |
| å¯¹é½æ–¹å¼è§£æ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L141-L149) | 141-149 |
| ä»£ç å—ä¿æŠ¤ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L168-L173) | 168-173 |

**å…³é”®å¸¸é‡**ï¼š
- `colWidths[col] = 3`ï¼šåˆ—æœ€å°å®½åº¦ä¸º 3 å­—ç¬¦ï¼ˆ`index.ts:115`ï¼‰

**å…³é”®å‡½æ•°**ï¼š
- `formatMarkdownTables()`ï¼šä¸»å¤„ç†å‡½æ•°ï¼Œæ ¼å¼åŒ–æ–‡æœ¬ä¸­çš„æ‰€æœ‰è¡¨æ ¼
- `getStringWidth()`ï¼šè®¡ç®—å­—ç¬¦ä¸²æ˜¾ç¤ºå®½åº¦ï¼Œå‰¥ç¦» Markdown ç¬¦å·
- `isValidTable()`ï¼šéªŒè¯è¡¨æ ¼ç»“æ„æ˜¯å¦æœ‰æ•ˆ

</details>
