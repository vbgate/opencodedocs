---
title: "é…ç½®: DCP å¤šå±‚çº§è®¾ç½® | opencode-dcp"
sidebarTitle: "æŒ‰éœ€å®šåˆ¶ DCP"
subtitle: "é…ç½®: DCP å¤šå±‚çº§è®¾ç½®"
description: "å­¦ä¹  opencode-dcp çš„å¤šå±‚çº§é…ç½®ç³»ç»Ÿã€‚æŒæ¡å…¨å±€ã€ç¯å¢ƒå’Œé¡¹ç›®çº§é…ç½®çš„ä¼˜å…ˆçº§è§„åˆ™ï¼Œä¿®å‰ªç­–ç•¥é…ç½®ã€ä¿æŠ¤æœºåˆ¶è®¾ç½®å’Œé€šçŸ¥çº§åˆ«è°ƒæ•´ã€‚"
tags:
  - "é…ç½®"
  - "DCP"
  - "æ’ä»¶è®¾ç½®"
prerequisite:
  - "start-getting-started"
order: 2
---

# DCP é…ç½®å…¨è§£

## å­¦å®Œä½ èƒ½åšä»€ä¹ˆ

- æŒæ¡ DCP çš„ä¸‰çº§é…ç½®ç³»ç»Ÿï¼ˆå…¨å±€ã€é¡¹ç›®ã€ç¯å¢ƒå˜é‡ï¼‰
- ç†è§£é…ç½®ä¼˜å…ˆçº§è§„åˆ™ï¼ŒçŸ¥é“å“ªä¸ªé…ç½®ä¼šç”Ÿæ•ˆ
- æ ¹æ®éœ€æ±‚è°ƒæ•´ä¿®å‰ªç­–ç•¥å’Œä¿æŠ¤æœºåˆ¶
- é…ç½®é€šçŸ¥çº§åˆ«ï¼Œæ§åˆ¶ä¿®å‰ªæç¤ºçš„è¯¦ç»†ç¨‹åº¦

## ä½ ç°åœ¨çš„å›°å¢ƒ

DCP å®‰è£…åé»˜è®¤é…ç½®å°±èƒ½å·¥ä½œï¼Œä½†ä½ å¯èƒ½é‡åˆ°è¿™äº›é—®é¢˜ï¼š

- æƒ³ä¸ºä¸åŒé¡¹ç›®è®¾ç½®ä¸åŒçš„ä¿®å‰ªç­–ç•¥
- ä¸å¸Œæœ›æŸäº›æ–‡ä»¶è¢«ä¿®å‰ª
- ä¿®å‰ªæç¤ºå¤ªé¢‘ç¹æˆ–å¤ªè¯¦ç»†
- æƒ³ç¦ç”¨æŸä¸ªè‡ªåŠ¨ä¿®å‰ªç­–ç•¥

è¿™æ—¶å€™å°±éœ€è¦äº†è§£ DCP çš„é…ç½®ç³»ç»Ÿäº†ã€‚

## ä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸€æ‹›

- **é¡¹ç›®çº§å®šåˆ¶**ï¼šä¸åŒé¡¹ç›®æœ‰ä¸åŒçš„ä¿®å‰ªéœ€æ±‚
- **è°ƒè¯•é—®é¢˜**ï¼šå¯ç”¨ debug æ—¥å¿—å®šä½é—®é¢˜
- **æ€§èƒ½è°ƒä¼˜**ï¼šè°ƒæ•´ç­–ç•¥å¼€å…³å’Œé˜ˆå€¼
- **ä¸ªæ€§åŒ–ä½“éªŒ**ï¼šä¿®æ”¹é€šçŸ¥çº§åˆ«ã€ä¿æŠ¤å…³é”®å·¥å…·

## æ ¸å¿ƒæ€è·¯

DCP é‡‡ç”¨**ä¸‰çº§é…ç½®ç³»ç»Ÿ**ï¼ŒæŒ‰ä¼˜å…ˆçº§ä»ä½åˆ°é«˜ä¾æ¬¡æ˜¯ï¼š

```
é»˜è®¤å€¼ï¼ˆä»£ç ç¡¬ç¼–ç ï¼‰â†’ å…¨å±€é…ç½® â†’ ç¯å¢ƒå˜é‡é…ç½® â†’ é¡¹ç›®é…ç½®
         ä¼˜å…ˆçº§æœ€ä½                              ä¼˜å…ˆçº§æœ€é«˜
```

æ¯çº§é…ç½®éƒ½ä¼šè¦†ç›–ä¸Šä¸€çº§çš„åŒåé…ç½®é¡¹ï¼Œæ‰€ä»¥é¡¹ç›®é…ç½®çš„ä¼˜å…ˆçº§æœ€é«˜ã€‚

::: info ä¸ºä»€ä¹ˆéœ€è¦å¤šå±‚çº§é…ç½®ï¼Ÿ

è¿™æ ·è®¾è®¡çš„ç›®çš„æ˜¯ï¼š
- **å…¨å±€é…ç½®**ï¼šè®¾ç½®é€šç”¨çš„é»˜è®¤è¡Œä¸ºï¼Œé€‚ç”¨äºæ‰€æœ‰é¡¹ç›®
- **é¡¹ç›®é…ç½®**ï¼šé’ˆå¯¹ç‰¹å®šé¡¹ç›®è¿›è¡Œå®šåˆ¶ï¼Œä¸å½±å“å…¶ä»–é¡¹ç›®
- **ç¯å¢ƒå˜é‡**ï¼šåœ¨ä¸åŒç¯å¢ƒï¼ˆå¦‚ CI/CDï¼‰ä¸­å¿«é€Ÿåˆ‡æ¢é…ç½®

:::

## ğŸ’ å¼€å§‹å‰çš„å‡†å¤‡

ç¡®ä¿å·²å®Œæˆ [å®‰è£…ä¸å¿«é€Ÿå¼€å§‹](../getting-started/)ï¼ŒDCP æ’ä»¶å·²æˆåŠŸå®‰è£…å¹¶åœ¨ OpenCode ä¸­è¿è¡Œã€‚

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šæŸ¥çœ‹å½“å‰é…ç½®

**ä¸ºä»€ä¹ˆ**
å…ˆäº†è§£é»˜è®¤é…ç½®ï¼Œå†å†³å®šå¦‚ä½•è°ƒæ•´ã€‚

DCP é¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºå…¨å±€é…ç½®æ–‡ä»¶ã€‚

```bash
# macOS/Linux
cat ~/.config/opencode/dcp.jsonc

# Windows PowerShell
Get-Content "$env:USERPROFILE\.config\opencode\dcp.jsonc"
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šç±»ä¼¼ä¸‹é¢çš„é»˜è®¤é…ç½®

```jsonc
{
    "$schema": "https://raw.githubusercontent.com/Opencode-DCP/opencode-dynamic-context-pruning/master/dcp.schema.json",
    "enabled": true,
    "debug": false,
    "pruneNotification": "detailed",
    "commands": {
        "enabled": true,
        "protectedTools": []
    },
    "turnProtection": {
        "enabled": false,
        "turns": 4
    },
    "protectedFilePatterns": [],
    "tools": {
        "settings": {
            "nudgeEnabled": true,
            "nudgeFrequency": 10,
            "protectedTools": []
        },
        "discard": {
            "enabled": true
        },
        "extract": {
            "enabled": true,
            "showDistillation": false
        }
    },
    "strategies": {
        "deduplication": {
            "enabled": true,
            "protectedTools": []
        },
        "supersedeWrites": {
            "enabled": false
        },
        "purgeErrors": {
            "enabled": true,
            "turns": 4,
            "protectedTools": []
        }
    }
}
```

### ç¬¬ 2 æ­¥ï¼šç†è§£é…ç½®æ–‡ä»¶ä½ç½®

DCP æ”¯æŒä¸‰ä¸ªå±‚çº§çš„é…ç½®æ–‡ä»¶ï¼š

| å±‚çº§ | è·¯å¾„ | ä¼˜å…ˆçº§ | é€‚ç”¨åœºæ™¯ |
|------|------|--------|----------|
| **å…¨å±€** | `~/.config/opencode/dcp.jsonc` æˆ– `dcp.json` | 2 | æ‰€æœ‰é¡¹ç›®çš„é»˜è®¤é…ç½® |
| **ç¯å¢ƒå˜é‡** | `$OPENCODE_CONFIG_DIR/dcp.jsonc` æˆ– `dcp.json` | 3 | ç‰¹å®šç¯å¢ƒçš„é…ç½® |
| **é¡¹ç›®** | `<project>/.opencode/dcp.jsonc` æˆ– `dcp.json` | 4 | å•ä¸ªé¡¹ç›®çš„é…ç½®è¦†ç›– |

::: tip é…ç½®æ–‡ä»¶æ ¼å¼

DCP æ”¯æŒ `.json` å’Œ `.jsonc` ä¸¤ç§æ ¼å¼ï¼š
- `.json`ï¼šæ ‡å‡† JSON æ ¼å¼ï¼Œä¸èƒ½åŒ…å«æ³¨é‡Š
- `.jsonc`ï¼šæ”¯æŒ `//` æ³¨é‡Šçš„ JSON æ ¼å¼ï¼ˆæ¨èä½¿ç”¨ï¼‰

:::

### ç¬¬ 3 æ­¥ï¼šé…ç½®ä¿®å‰ªé€šçŸ¥

**ä¸ºä»€ä¹ˆ**
æ§åˆ¶ DCP æ˜¾ç¤ºä¿®å‰ªæç¤ºçš„è¯¦ç»†ç¨‹åº¦ï¼Œé¿å…è¿‡åº¦æ‰“æ‰°ã€‚

ç¼–è¾‘å…¨å±€é…ç½®æ–‡ä»¶ï¼š

```jsonc
{
    "pruneNotification": "detailed"  // å¯é€‰å€¼: "off", "minimal", "detailed"
}
```

**é€šçŸ¥çº§åˆ«è¯´æ˜**ï¼š

| çº§åˆ« | è¡Œä¸º | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **off** | ä¸æ˜¾ç¤ºä¿®å‰ªé€šçŸ¥ | ä¸“æ³¨å¼€å‘ï¼Œä¸éœ€è¦åé¦ˆ |
| **minimal** | åªæ˜¾ç¤ºç®€è¦ç»Ÿè®¡ï¼ˆèŠ‚çœçš„ Token æ•°ï¼‰ | éœ€è¦ç®€å•åé¦ˆï¼Œä¸æƒ³è¢«å¤ªå¤šä¿¡æ¯æ‰“æ‰° |
| **detailed** | æ˜¾ç¤ºä¿®å‰ªçš„è¯¦ç»†ä¿¡æ¯ï¼ˆå·¥å…·åã€åŸå› ï¼‰ | äº†è§£ä¿®å‰ªè¡Œä¸ºï¼Œè°ƒè¯•é…ç½® |

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šä¿®æ”¹é…ç½®åï¼Œä¸‹æ¬¡è§¦å‘ä¿®å‰ªæ—¶é€šçŸ¥ä¼šæŒ‰æ–°çº§åˆ«æ˜¾ç¤ºã€‚

### ç¬¬ 4 æ­¥ï¼šé…ç½®è‡ªåŠ¨ä¿®å‰ªç­–ç•¥

**ä¸ºä»€ä¹ˆ**
DCP æä¾›ä¸‰ç§è‡ªåŠ¨ä¿®å‰ªç­–ç•¥ï¼Œä½ å¯ä»¥æ ¹æ®éœ€æ±‚å¼€å…³ã€‚

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```jsonc
{
    "strategies": {
        // å»é‡ç­–ç•¥ï¼šç§»é™¤é‡å¤çš„å·¥å…·è°ƒç”¨
        "deduplication": {
            "enabled": true,           // å¯ç”¨/ç¦ç”¨
            "protectedTools": []         // é¢å¤–ä¿æŠ¤çš„å·¥å…·å
        },

        // è¦†ç›–å†™å…¥ç­–ç•¥ï¼šæ¸…ç†å·²è¢«è¯»å–è¦†ç›–çš„å†™æ“ä½œ
        "supersedeWrites": {
            "enabled": false          // é»˜è®¤ç¦ç”¨
        },

        // æ¸…é™¤é”™è¯¯ç­–ç•¥ï¼šæ¸…ç†è¿‡æœŸé”™è¯¯å·¥å…·çš„è¾“å…¥
        "purgeErrors": {
            "enabled": true,           // å¯ç”¨/ç¦ç”¨
            "turns": 4,               // å‡ å›åˆåæ¸…ç†é”™è¯¯
            "protectedTools": []         // é¢å¤–ä¿æŠ¤çš„å·¥å…·å
        }
    }
}
```

**ç­–ç•¥è¯¦è§£**ï¼š

- **deduplicationï¼ˆå»é‡ï¼‰**ï¼šé»˜è®¤å¯ç”¨ã€‚æ£€æµ‹ç›¸åŒå·¥å…·å’Œå‚æ•°çš„è°ƒç”¨ï¼Œä¿ç•™æœ€æ–°ä¸€æ¬¡ã€‚
- **supersedeWritesï¼ˆè¦†ç›–å†™å…¥ï¼‰**ï¼šé»˜è®¤ç¦ç”¨ã€‚å¦‚æœå†™æ“ä½œåæœ‰åç»­è¯»å–ï¼Œæ¸…ç†è¯¥å†™æ“ä½œçš„è¾“å…¥ã€‚
- **purgeErrorsï¼ˆæ¸…é™¤é”™è¯¯ï¼‰**ï¼šé»˜è®¤å¯ç”¨ã€‚è¶…è¿‡æŒ‡å®šå›åˆæ•°çš„é”™è¯¯å·¥å…·ä¼šè¢«ä¿®å‰ªï¼ˆåªä¿ç•™é”™è¯¯æ¶ˆæ¯ï¼Œç§»é™¤å¯èƒ½å¾ˆå¤§çš„è¾“å…¥å‚æ•°ï¼‰ã€‚

### ç¬¬ 5 æ­¥ï¼šé…ç½®ä¿æŠ¤æœºåˆ¶

**ä¸ºä»€ä¹ˆ**
é¿å…è¯¯ä¿®å‰ªå…³é”®å†…å®¹ï¼ˆå¦‚é‡è¦æ–‡ä»¶ã€æ ¸å¿ƒå·¥å…·ï¼‰ã€‚

DCP æä¾›ä¸‰ç§ä¿æŠ¤æœºåˆ¶ï¼š

#### 1. å›åˆä¿æŠ¤ï¼ˆTurn Protectionï¼‰

ä¿æŠ¤æœ€è¿‘å‡ å›åˆçš„å·¥å…·è¾“å‡ºï¼Œç»™ AI è¶³å¤Ÿæ—¶é—´å¼•ç”¨ã€‚

```jsonc
{
    "turnProtection": {
        "enabled": false,   // å¯ç”¨åä¿æŠ¤æœ€è¿‘ 4 å›åˆ
        "turns": 4          // ä¿æŠ¤å›åˆæ•°
    }
}
```

**é€‚ç”¨åœºæ™¯**ï¼šå½“ä½ å‘ç° AI é¢‘ç¹ä¸¢å¤±ä¸Šä¸‹æ–‡æ—¶ï¼Œå¯ä»¥å¯ç”¨ã€‚

#### 2. å—ä¿æŠ¤å·¥å…·ï¼ˆProtected Toolsï¼‰

æŸäº›å·¥å…·é»˜è®¤å§‹ç»ˆä¸ä¼šè¢«ä¿®å‰ªï¼š

```
task, todowrite, todoread, discard, extract, batch, write, edit, plan_enter, plan_exit
```

ä½ å¯ä»¥æ·»åŠ é¢å¤–éœ€è¦ä¿æŠ¤çš„å·¥å…·ï¼š

```jsonc
{
    "tools": {
        "settings": {
            "protectedTools": [
                "myCustomTool",   // æ·»åŠ è‡ªå®šä¹‰å·¥å…·
                "databaseQuery"    // æ·»åŠ éœ€è¦ä¿æŠ¤çš„å·¥å…·
            ]
        }
    },
    "strategies": {
        "deduplication": {
            "protectedTools": ["databaseQuery"]  // ä¸ºç‰¹å®šç­–ç•¥ä¿æŠ¤å·¥å…·
        }
    }
}
```

#### 3. å—ä¿æŠ¤æ–‡ä»¶æ¨¡å¼ï¼ˆProtected File Patternsï¼‰

ä½¿ç”¨ glob æ¨¡å¼ä¿æŠ¤ç‰¹å®šæ–‡ä»¶ï¼š

```jsonc
{
    "protectedFilePatterns": [
        "**/*.config.ts",           // ä¿æŠ¤æ‰€æœ‰ .config.ts æ–‡ä»¶
        "**/secrets/**",           // ä¿æŠ¤ secrets ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
        "**/*.env",                // ä¿æŠ¤ç¯å¢ƒå˜é‡æ–‡ä»¶
        "**/critical/*.json"        // ä¿æŠ¤ critical ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶
    ]
}
```

::: warning æ³¨æ„
protectedFilePatterns åŒ¹é…çš„æ˜¯ `tool.parameters.filePath`ï¼Œè€Œä¸æ˜¯æ–‡ä»¶çš„å®é™…è·¯å¾„ã€‚è¿™æ„å‘³ç€å®ƒåªé€‚ç”¨äºæœ‰ `filePath` å‚æ•°çš„å·¥å…·ï¼ˆå¦‚ readã€writeã€editï¼‰ã€‚

:::

### ç¬¬ 6 æ­¥ï¼šåˆ›å»ºé¡¹ç›®çº§é…ç½®

**ä¸ºä»€ä¹ˆ**
ä¸åŒé¡¹ç›®å¯èƒ½éœ€è¦ä¸åŒçš„ä¿®å‰ªç­–ç•¥ã€‚

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.opencode` ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ï¼Œç„¶ååˆ›å»º `dcp.jsonc`ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
mkdir -p .opencode
cat > .opencode/dcp.jsonc << 'EOF'
{
    "$schema": "https://raw.githubusercontent.com/Opencode-DCP/opencode-dynamic-context-pruning/master/dcp.schema.json",
    // è¿™ä¸ªé¡¹ç›®çš„ç‰¹å®šé…ç½®
    "strategies": {
        "supersedeWrites": {
            "enabled": true   // è¿™ä¸ªé¡¹ç›®å¯ç”¨è¦†ç›–å†™å…¥ç­–ç•¥
        }
    },
    "protectedFilePatterns": [
        "**/config/**/*.ts"   // ä¿æŠ¤è¿™ä¸ªé¡¹ç›®çš„é…ç½®æ–‡ä»¶
    ]
}
EOF
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- é¡¹ç›®çº§é…ç½®ä¼šè¦†ç›–å…¨å±€é…ç½®çš„åŒåé¡¹
- æœªè¦†ç›–çš„é¡¹ç»§ç»­ä½¿ç”¨å…¨å±€é…ç½®

### ç¬¬ 7 æ­¥ï¼šå¯ç”¨è°ƒè¯•æ—¥å¿—

**ä¸ºä»€ä¹ˆ**
é‡åˆ°é—®é¢˜æ—¶ï¼ŒæŸ¥çœ‹è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—ã€‚

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```jsonc
{
    "debug": true
}
```

**æ—¥å¿—ä½ç½®**ï¼š
```
~/.config/opencode/logs/dcp/daily/YYYY-MM-DD.log
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šæ—¥å¿—æ–‡ä»¶ä¸­åŒ…å«è¯¦ç»†çš„ä¿®å‰ªæ“ä½œã€é…ç½®åŠ è½½ç­‰ä¿¡æ¯ã€‚

::: info ç”Ÿäº§ç¯å¢ƒå»ºè®®
è°ƒè¯•å®Œæˆåè®°å¾—å°† `debug` æ”¹å› `false`ï¼Œé¿å…æ—¥å¿—æ–‡ä»¶å¢é•¿è¿‡å¿«ã€‚

:::

## æ£€æŸ¥ç‚¹ âœ…

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œç¡®è®¤ä»¥ä¸‹å†…å®¹ï¼š

- [ ] çŸ¥é“é…ç½®æ–‡ä»¶çš„ä¸‰ä¸ªå±‚çº§å’Œä¼˜å…ˆçº§
- [ ] èƒ½ä¿®æ”¹é€šçŸ¥çº§åˆ«å¹¶çœ‹åˆ°æ•ˆæœ
- [ ] ç†è§£ä¸‰ç§è‡ªåŠ¨ä¿®å‰ªç­–ç•¥çš„ä½œç”¨
- [ ] ä¼šé…ç½®ä¿æŠ¤æœºåˆ¶ï¼ˆå›åˆã€å·¥å…·ã€æ–‡ä»¶ï¼‰
- [ ] èƒ½åˆ›å»ºé¡¹ç›®çº§é…ç½®è¦†ç›–å…¨å±€è®¾ç½®

## è¸©å‘æé†’

### é…ç½®ä¿®æ”¹ä¸ç”Ÿæ•ˆ

**é—®é¢˜**ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶åï¼ŒOpenCode æ²¡æœ‰ååº”ã€‚

**åŸå› **ï¼šOpenCode ä¸ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ã€‚

**è§£å†³**ï¼šä¿®æ”¹é…ç½®åéœ€è¦**é‡å¯ OpenCode**ã€‚

### é…ç½®æ–‡ä»¶è¯­æ³•é”™è¯¯

**é—®é¢˜**ï¼šé…ç½®æ–‡ä»¶æœ‰è¯­æ³•é”™è¯¯ï¼ŒDCP æ— æ³•è§£æã€‚

**è¡¨ç°**ï¼šOpenCode ä¼šæ˜¾ç¤º Toast è­¦å‘Šæç¤º "Invalid config"ã€‚

**è§£å†³**ï¼šæ£€æŸ¥ JSON è¯­æ³•ï¼Œç‰¹åˆ«æ˜¯ï¼š
- å¼•å·ã€é€—å·ã€æ‹¬å·æ˜¯å¦åŒ¹é…
- æ˜¯å¦æœ‰å¤šä½™çš„é€—å·ï¼ˆå¦‚æœ€åä¸€ä¸ªå…ƒç´ åçš„é€—å·ï¼‰
- å¸ƒå°”å€¼ç”¨ `true`/`false`ï¼Œä¸è¦ç”¨å¼•å·

**æ¨èåšæ³•**ï¼šä½¿ç”¨æ”¯æŒ JSONC çš„ç¼–è¾‘å™¨ï¼ˆå¦‚ VS Code + JSONC æ’ä»¶ï¼‰ã€‚

### å—ä¿æŠ¤å·¥å…·ä¸ç”Ÿæ•ˆ

**é—®é¢˜**ï¼šæ·»åŠ äº† `protectedTools`ï¼Œä½†å·¥å…·ä»è¢«ä¿®å‰ªã€‚

**åŸå› **ï¼š
1. å·¥å…·åæ‹¼å†™é”™è¯¯
2. æ·»åŠ åˆ°äº†é”™è¯¯çš„ `protectedTools` æ•°ç»„ï¼ˆå¦‚ `tools.settings.protectedTools` vs `strategies.deduplication.protectedTools`ï¼‰
3. å·¥å…·è°ƒç”¨åœ¨å›åˆä¿æŠ¤æœŸå†…ï¼ˆå¦‚æœå¯ç”¨äº†å›åˆä¿æŠ¤ï¼‰

**è§£å†³**ï¼š
1. ç¡®è®¤å·¥å…·åæ‹¼å†™æ­£ç¡®
2. æ£€æŸ¥æ˜¯å¦æ·»åŠ åˆ°äº†æ­£ç¡®çš„ä½ç½®
3. æŸ¥çœ‹ debug æ—¥å¿—äº†è§£ä¿®å‰ªåŸå› 

## æœ¬è¯¾å°ç»“

DCP é…ç½®ç³»ç»Ÿçš„æ ¸å¿ƒè¦ç‚¹ï¼š

- **ä¸‰çº§é…ç½®**ï¼šé»˜è®¤å€¼ â†’ å…¨å±€ â†’ ç¯å¢ƒå˜é‡ â†’ é¡¹ç›®ï¼Œä¼˜å…ˆçº§é€’å¢
- **çµæ´»è¦†ç›–**ï¼šé¡¹ç›®é…ç½®å¯ä»¥è¦†ç›–å…¨å±€é…ç½®
- **ä¿æŠ¤æœºåˆ¶**ï¼šå›åˆä¿æŠ¤ã€å—ä¿æŠ¤å·¥å…·ã€å—ä¿æŠ¤æ–‡ä»¶æ¨¡å¼ï¼Œé¿å…è¯¯ä¿®å‰ª
- **è‡ªåŠ¨ç­–ç•¥**ï¼šå»é‡ã€è¦†ç›–å†™å…¥ã€æ¸…é™¤é”™è¯¯ï¼ŒæŒ‰éœ€å¼€å…³
- **é‡å¯ç”Ÿæ•ˆ**ï¼šä¿®æ”¹é…ç½®åè®°å¾—é‡å¯ OpenCode

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬å­¦ä¹  **[è‡ªåŠ¨ä¿®å‰ªç­–ç•¥è¯¦è§£](../../platforms/auto-pruning/)**ã€‚
>
> ä½ ä¼šå­¦åˆ°ï¼š
> - å»é‡ç­–ç•¥å¦‚ä½•æ£€æµ‹é‡å¤å·¥å…·è°ƒç”¨
> - è¦†ç›–å†™å…¥ç­–ç•¥çš„å·¥ä½œåŸç†
> - æ¸…é™¤é”™è¯¯ç­–ç•¥çš„è§¦å‘æ¡ä»¶
> - å¦‚ä½•ç›‘æ§ç­–ç•¥æ•ˆæœ

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-23

| åŠŸèƒ½        | æ–‡ä»¶è·¯å¾„                                                                                                            | è¡Œå·      |
| ----------- | ------------------------------------------------------------------------------------------------------------------- | --------- |
| é…ç½®ç®¡ç†æ ¸å¿ƒ | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts)         | 1-798     |
| é…ç½® Schema  | [`dcp.schema.json`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/dcp.schema.json) | 1-232     |
| é»˜è®¤é…ç½®    | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L423-L464) | 423-464   |
| é…ç½®ä¼˜å…ˆçº§  | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L669-L797) | 669-797   |
| é…ç½®éªŒè¯    | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L147-L375) | 147-375   |
| é…ç½®æ–‡ä»¶è·¯å¾„ | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L484-L526) | 484-526   |
| é»˜è®¤å—ä¿æŠ¤å·¥å…· | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L68-L79) | 68-79     |
| åˆå¹¶ç­–ç•¥é…ç½® | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L565-L595) | 565-595   |
| åˆå¹¶å·¥å…·é…ç½® | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L597-L622) | 597-622   |

**å…³é”®å¸¸é‡**ï¼š
- `DEFAULT_PROTECTED_TOOLS`ï¼šé»˜è®¤å—ä¿æŠ¤çš„å·¥å…·ååˆ—è¡¨ï¼ˆ`lib/config.ts:68-79`ï¼‰

**å…³é”®å‡½æ•°**ï¼š
- `getConfig()`ï¼šåŠ è½½å¹¶åˆå¹¶æ‰€æœ‰å±‚çº§çš„é…ç½®ï¼ˆ`lib/config.ts:669-797`ï¼‰
- `getInvalidConfigKeys()`ï¼šéªŒè¯é…ç½®æ–‡ä»¶ä¸­çš„æ— æ•ˆé”®ï¼ˆ`lib/config.ts:135-138`ï¼‰
- `validateConfigTypes()`ï¼šéªŒè¯é…ç½®å€¼çš„ç±»å‹ï¼ˆ`lib/config.ts:147-375`ï¼‰
- `getConfigPaths()`ï¼šè·å–æ‰€æœ‰é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼ˆ`lib/config.ts:484-526`ï¼‰

</details>
