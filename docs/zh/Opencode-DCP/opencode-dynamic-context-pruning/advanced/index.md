---
title: "高级功能: 深度解析 | opencode-dcp"
sidebarTitle: "避免误删关键内容"
subtitle: "高级功能: 深度解析"
description: "学习 DCP 的保护机制、状态持久化等高级特性。掌握复杂场景下的使用技巧，避免误修剪关键内容，优化缓存命中。"
order: 30
---

# 高级功能

本章节深入讲解 DCP 的高级特性，帮助你理解插件的内部机制，并在复杂场景下正确使用 DCP。

::: warning 前置条件
学习本章节前，请确保你已完成：
- [安装与快速开始](../start/getting-started/) - 了解 DCP 的基本安装和使用
- [配置全解](../start/configuration/) - 熟悉 DCP 的配置系统
- [自动修剪策略详解](../platforms/auto-pruning/) - 理解 DCP 的核心修剪策略
:::

## 本章内容

| 课程 | 说明 | 适合场景 |
|------|------|----------|
| [保护机制](./protection/) | 回合保护、受保护工具和受保护文件模式 | 避免误修剪关键内容 |
| [状态持久化](./state-persistence/) | DCP 如何跨会话保留修剪状态和统计数据 | 理解数据存储机制 |
| [Prompt 缓存影响](./prompt-caching/) | DCP 修剪对 Prompt Caching 的影响 | 优化缓存命中率 |
| [子代理处理](./subagent-handling/) | DCP 在子代理会话中的行为和限制 | 使用 Task 工具时 |

## 学习路径建议

```
保护机制 → 状态持久化 → Prompt 缓存影响 → 子代理处理
   ↓           ↓              ↓              ↓
 必学       按需学习       性能优化时学     用子代理时学
```

**推荐顺序**：

1. **保护机制**（必学）- 这是最重要的高级特性，理解它能避免 DCP 误删关键内容
2. **状态持久化**（按需）- 如果你想了解 DCP 如何记录统计数据，或需要调试状态问题
3. **Prompt 缓存影响**（性能优化时）- 当你关注 API 成本优化时，需要权衡修剪和缓存的关系
4. **子代理处理**（用子代理时）- 如果你使用 OpenCode 的 Task 工具派发子任务，需要了解 DCP 的限制

## 下一步

完成本章节后，你可以：

- 查看 [常见问题与排错](../faq/troubleshooting/) 解决使用中遇到的问题
- 阅读 [最佳实践](../faq/best-practices/) 了解如何最大化 Token 节省效果
- 深入 [架构概览](../appendix/architecture/) 了解 DCP 的内部实现
