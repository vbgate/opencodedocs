---
title: "Canvas å¯è§†åŒ–ç•Œé¢ä¸ A2UI | Clawdbot æ•™ç¨‹"
sidebarTitle: "ä¸º AI åˆ›å»ºå¯è§†åŒ–ç•Œé¢"
subtitle: "Canvas å¯è§†åŒ–ç•Œé¢ä¸ A2UI"
description: "å­¦ä¹ ä½¿ç”¨ Clawdbot çš„ Canvas å¯è§†åŒ–ç•Œé¢ï¼Œäº†è§£ A2UI æ¨é€æœºåˆ¶ã€Canvas Host é…ç½®å’ŒèŠ‚ç‚¹ Canvas æ“ä½œï¼Œä¸º AI åŠ©æ‰‹åˆ›å»ºäº¤äº’å¼ UIã€‚æœ¬æ•™ç¨‹æ¶µç›–é™æ€ HTML å’ŒåŠ¨æ€ A2UI ä¸¤ç§æ–¹å¼ï¼ŒåŒ…æ‹¬ canvas å·¥å…·çš„å®Œæ•´å‘½ä»¤å‚è€ƒã€å®‰å…¨æœºåˆ¶ã€é…ç½®é€‰é¡¹å’Œæ•…éšœæ’æŸ¥æŠ€å·§ã€‚"
tags:
  - "Canvas"
  - "A2UI"
  - "å¯è§†åŒ–ç•Œé¢"
  - "èŠ‚ç‚¹"
prerequisite:
  - "start-getting-started"
  - "platforms-ios-node"
  - "platforms-android-node"
order: 240
---

# Canvas å¯è§†åŒ–ç•Œé¢ä¸ A2UI

## å­¦å®Œä½ èƒ½åšä»€ä¹ˆ

å®Œæˆæœ¬è¯¾åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- é…ç½® Canvas Host å¹¶éƒ¨ç½²è‡ªå®šä¹‰ HTML/CSS/JS ç•Œé¢
- ä½¿ç”¨ `canvas` å·¥å…·æ§åˆ¶èŠ‚ç‚¹ Canvasï¼ˆæ˜¾ç¤ºã€éšè—ã€å¯¼èˆªã€æ‰§è¡Œ JSï¼‰
- æŒæ¡ A2UI åè®®ï¼Œè®© AI åŠ¨æ€æ¨é€ UI æ›´æ–°
- æ•è· Canvas æˆªå›¾ç”¨äº AI ä¸Šä¸‹æ–‡
- ç†è§£ Canvas å®‰å…¨æœºåˆ¶å’Œæƒé™æ§åˆ¶

## ä½ ç°åœ¨çš„å›°å¢ƒ

ä½ æœ‰ä¸€ä¸ª AI åŠ©æ‰‹ï¼Œä½†å®ƒåªèƒ½é€šè¿‡æ–‡å­—ä¸ä½ äº¤äº’ã€‚ä½ æƒ³ï¼š

- è®© AI æ˜¾ç¤ºå¯è§†åŒ–ç•Œé¢ï¼Œæ¯”å¦‚è¡¨æ ¼ã€å›¾è¡¨ã€è¡¨å•
- åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçœ‹åˆ° Agent ç”Ÿæˆçš„åŠ¨æ€ UI
- åˆ›å»ºç±»ä¼¼ã€ŒAppã€çš„äº¤äº’ä½“éªŒï¼Œè€Œä¸éœ€è¦ç‹¬ç«‹å¼€å‘

## ä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸€æ‹›

**Canvas + A2UI é€‚åˆè¿™äº›åœºæ™¯**ï¼š

| åœºæ™¯ | ç¤ºä¾‹ |
| ------ | ------ |
| **æ•°æ®å¯è§†åŒ–** | æ˜¾ç¤ºç»Ÿè®¡å›¾è¡¨ã€è¿›åº¦æ¡ã€æ—¶é—´çº¿ |
| **äº¤äº’å¼è¡¨å•** | è®©ç”¨æˆ·ç¡®è®¤æ“ä½œã€é€‰æ‹©é€‰é¡¹ |
| **çŠ¶æ€é¢æ¿** | å®æ—¶æ˜¾ç¤ºä»»åŠ¡è¿›åº¦ã€ç³»ç»ŸçŠ¶æ€ |
| **æ¸¸æˆå’Œå¨±ä¹** | ç®€å•å°æ¸¸æˆã€äº’åŠ¨æ¼”ç¤º |

::: tip A2UI vs. é™æ€ HTML
- **A2UI**ï¼ˆAgent-to-UIï¼‰ï¼šAI åŠ¨æ€ç”Ÿæˆå’Œæ›´æ–° UIï¼Œé€‚åˆå®æ—¶æ•°æ®
- **é™æ€ HTML**ï¼šé¢„å…ˆå†™å¥½çš„ç•Œé¢ï¼Œé€‚åˆå›ºå®šå¸ƒå±€å’Œå¤æ‚äº¤äº’
:::

## ğŸ’ å¼€å§‹å‰çš„å‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ å·²å®Œæˆï¼š

- [ ] **Gateway å·²å¯åŠ¨**ï¼šCanvas Host é»˜è®¤éš Gateway è‡ªåŠ¨å¯åŠ¨ï¼ˆç«¯å£ 18793ï¼‰
- [ ] **èŠ‚ç‚¹å·²é…å¯¹**ï¼šmacOS/iOS/Android èŠ‚ç‚¹å·²è¿æ¥åˆ° Gateway
- [ ] **èŠ‚ç‚¹æ”¯æŒ Canvas**ï¼šç¡®è®¤èŠ‚ç‚¹æœ‰ `canvas` èƒ½åŠ›ï¼ˆ`clawdbot nodes list`ï¼‰

::: warning å‰ç½®çŸ¥è¯†
æœ¬æ•™ç¨‹å‡è®¾ä½ å·²äº†è§£ï¼š
- [èŠ‚ç‚¹é…å¯¹åŸºç¡€](../../platforms/android-node/)
- [AI å·¥å…·è°ƒç”¨æœºåˆ¶](../tools-browser/)
:::

## æ ¸å¿ƒæ€è·¯

Canvas ç³»ç»ŸåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Canvas Host  â”‚ â”€â”€â”€â”€â–¶ HTTP æœåŠ¡å™¨ (ç«¯å£ 18793)
â”‚   (Gateway)   â”‚        â””â”€â”€ æœåŠ¡ ~/clawd/canvas/ æ–‡ä»¶
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ WebSocket é€šä¿¡
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Node App   â”‚ â”€â”€â”€â”€â–¶ WKWebView æ¸²æŸ“ Canvas
â”‚ (iOS/Android) â”‚        â””â”€â”€ é€šè¿‡ A2UI æ¥æ”¶æ¨é€
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ userAction äº‹ä»¶
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI Agent    â”‚ â”€â”€â”€â”€â–¶ canvas å·¥å…·è°ƒç”¨
â”‚  (pi-mono)   â”‚        â””â”€â”€ æ¨é€ A2UI æ›´æ–°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æ¦‚å¿µ**ï¼š

1. **Canvas Host**ï¼ˆGateway ç«¯ï¼‰
   - æä¾›é™æ€æ–‡ä»¶æœåŠ¡ï¼š`http://<gateway-host>:18793/__clawdbot__/canvas/`
   - æ‰˜ç®¡ A2UI ä¸»æœºï¼š`http://<gateway-host>:18793/__clawdbot__/a2ui/`
   - æ”¯æŒçƒ­é‡è½½ï¼šæ–‡ä»¶ä¿®æ”¹åè‡ªåŠ¨åˆ·æ–°

2. **Canvas Panel**ï¼ˆèŠ‚ç‚¹ç«¯ï¼‰
   - macOS/iOS/Android èŠ‚ç‚¹åµŒå…¥ WKWebView
   - é€šè¿‡ WebSocket è¿æ¥ Gatewayï¼ˆå®æ—¶é‡è½½ã€A2UI é€šä¿¡ï¼‰
   - æ”¯æŒ `eval` æ‰§è¡Œ JSã€`snapshot` æ•è·ç”»é¢

3. **A2UI åè®®**ï¼ˆv0.8ï¼‰
   - Agent é€šè¿‡ WebSocket æ¨é€ UI æ›´æ–°
   - æ”¯æŒï¼š`beginRendering`ã€`surfaceUpdate`ã€`dataModelUpdate`ã€`deleteSurface`

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šéªŒè¯ Canvas Host çŠ¶æ€

**ä¸ºä»€ä¹ˆ**
ç¡®ä¿ Canvas Host æ­£åœ¨è¿è¡Œï¼ŒèŠ‚ç‚¹æ‰èƒ½åŠ è½½ Canvas å†…å®¹ã€‚

```bash
# æ£€æŸ¥ç«¯å£ 18793 æ˜¯å¦è¢«ç›‘å¬
lsof -i :18793
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

```text
COMMAND   PID   USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
node     12345  user   16u  IPv6  0x1234      0t0  TCP *:18793 (LISTEN)
```

::: info é…ç½®è·¯å¾„
- **Canvas æ ¹ç›®å½•**ï¼š`~/clawd/canvas/`ï¼ˆå¯é€šè¿‡ `canvasHost.root` ä¿®æ”¹ï¼‰
- **ç«¯å£**ï¼š`18793` = `gateway.port + 4`ï¼ˆå¯é€šè¿‡ `canvasHost.port` ä¿®æ”¹ï¼‰
- **çƒ­é‡è½½**ï¼šé»˜è®¤å¼€å¯ï¼ˆå¯é€šè¿‡ `canvasHost.liveReload: false` å…³é—­ï¼‰
:::

### ç¬¬ 2 æ­¥ï¼šåˆ›å»ºç¬¬ä¸€ä¸ª Canvas é¡µé¢

**ä¸ºä»€ä¹ˆ**
åˆ›å»ºè‡ªå®šä¹‰ HTML ç•Œé¢ï¼Œè®©èŠ‚ç‚¹æ˜¾ç¤ºä½ çš„å†…å®¹ã€‚

```bash
# åˆ›å»º Canvas æ ¹ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
mkdir -p ~/clawd/canvas

# åˆ›å»ºç®€å•çš„ HTML æ–‡ä»¶
cat > ~/clawd/canvas/hello.html <<'EOF'
<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hello Canvas</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    padding: 20px;
    background: #000;
    color: #fff;
    text-align: center;
  }
  h1 { color: #24e08a; }
</style>
<h1>ğŸ‰ Hello from Canvas!</h1>
<p>è¿™æ˜¯ä½ çš„ç¬¬ä¸€ä¸ª Canvas é¡µé¢ã€‚</p>
<button onclick="alert('æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼')">ç‚¹å‡»æˆ‘</button>
EOF
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

```text
æ–‡ä»¶å·²åˆ›å»ºï¼š~/clawd/canvas/hello.html
```

### ç¬¬ 3 æ­¥ï¼šåœ¨èŠ‚ç‚¹ä¸Šæ˜¾ç¤º Canvas

**ä¸ºä»€ä¹ˆ**
è®©èŠ‚ç‚¹åŠ è½½å¹¶æ˜¾ç¤ºä½ åˆšåˆ›å»ºçš„é¡µé¢ã€‚

é¦–å…ˆæŸ¥æ‰¾ä½ çš„èŠ‚ç‚¹ IDï¼š

```bash
clawdbot nodes list
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

```text
ID                                  Name          Type       Capabilities
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
abc123-def456-ghi789               iOS Phone     canvas, camera, screen
jkl012-mno345-pqr678               Android Tab   canvas, camera
```

ç„¶åæ˜¾ç¤º Canvasï¼ˆä»¥ iOS èŠ‚ç‚¹ä¸ºä¾‹ï¼‰ï¼š

```bash
# æ–¹å¼ 1ï¼šé€šè¿‡ CLI å‘½ä»¤
clawdbot nodes canvas present --node abc123-def456-ghi789 --target http://127.0.0.1:18793/__clawdbot__/canvas/hello.html
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

- iOS è®¾å¤‡ä¸Šå¼¹å‡ºä¸€ä¸ªæ— è¾¹æ¡†é¢æ¿ï¼Œæ˜¾ç¤ºä½ çš„ HTML å†…å®¹
- é¢æ¿é è¿‘èœå•æ æˆ–é¼ æ ‡ä½ç½®
- å†…å®¹å±…ä¸­å¯¹é½ï¼Œå¸¦æœ‰ç»¿è‰²æ ‡é¢˜å’ŒæŒ‰é’®

**AI è°ƒç”¨ç¤ºä¾‹**ï¼š

```
AI: æˆ‘åœ¨ iOS è®¾å¤‡ä¸Šä¸ºä½ æ‰“å¼€äº†ä¸€ä¸ª Canvas é¢æ¿ï¼Œæ˜¾ç¤ºæ¬¢è¿é¡µé¢ã€‚
```

::: tip Canvas URL æ ¼å¼
- **æœ¬åœ°æ–‡ä»¶**ï¼š`http://<gateway-host>:18793/__clawdbot__/canvas/hello.html`
- **å¤–éƒ¨ç½‘å€**ï¼š`https://example.com`ï¼ˆéœ€è¦èŠ‚ç‚¹æœ‰ç½‘ç»œè®¿é—®æƒé™ï¼‰
- **è¿”å›é»˜è®¤**ï¼š`/` æˆ–ç©ºå­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºå†…ç½®è„šæ‰‹æ¶é¡µé¢
:::

### ç¬¬ 4 æ­¥ï¼šä½¿ç”¨ A2UI æ¨é€åŠ¨æ€ UI

**ä¸ºä»€ä¹ˆ**
AI å¯ä»¥ä¸ä¿®æ”¹æ–‡ä»¶ï¼Œç›´æ¥æ¨é€ UI æ›´æ–°åˆ° Canvasï¼Œé€‚åˆå®æ—¶æ•°æ®å’Œäº¤äº’ã€‚

**æ–¹å¼ Aï¼šå¿«é€Ÿæ–‡æœ¬æ¨é€**

```bash
clawdbot nodes canvas a2ui push --node abc123-def456-ghi789 --text "Hello from A2UI"
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

- Canvas æ˜¾ç¤ºè“è‰² A2UI ç•Œé¢
- æ–‡æœ¬å±…ä¸­æ˜¾ç¤ºï¼š`Hello from A2UI`

**æ–¹å¼ Bï¼šå®Œæ•´ JSONL æ¨é€**

åˆ›å»º A2UI å®šä¹‰æ–‡ä»¶ï¼š

```bash
cat > /tmp/a2ui-demo.jsonl <<'EOF'
{"surfaceUpdate":{"surfaceId":"main","components":[{"id":"root","component":{"Column":{"children":{"explicitList":["title","status","button"]}}}},{"id":"title","component":{"Text":{"text":{"literalString":"A2UI æ¼”ç¤º"},"usageHint":"h1"}}},{"id":"status","component":{"Text":{"text":{"literalString":"ç³»ç»ŸçŠ¶æ€ï¼šè¿è¡Œä¸­"},"usageHint":"body"}}},{"id":"button","component":{"Button":{"label":{"literalString":"æµ‹è¯•æŒ‰é’®"},"onClick":{"action":{"name":"testAction","sourceComponentId":"demo.test"}}}}}]}
{"beginRendering":{"surfaceId":"main","root":"root"}}
EOF
```

æ¨é€ A2UIï¼š

```bash
clawdbot nodes canvas a2ui push --node abc123-def456-ghi789 --jsonl /tmp/a2ui-demo.jsonl
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     A2UI æ¼”ç¤º         â”‚
â”‚                        â”‚
â”‚  ç³»ç»ŸçŠ¶æ€ï¼šè¿è¡Œä¸­       â”‚
â”‚                        â”‚
â”‚   [ æµ‹è¯•æŒ‰é’® ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

::: details A2UI JSONL æ ¼å¼è¯´æ˜
JSONLï¼ˆJSON Linesï¼‰æ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œé€‚åˆæµå¼æ›´æ–°ï¼š

```jsonl
{"surfaceUpdate":{...}}   // æ›´æ–°è¡¨é¢ç»„ä»¶
{"beginRendering":{...}}   // å¼€å§‹æ¸²æŸ“
{"dataModelUpdate":{...}} // æ›´æ–°æ•°æ®æ¨¡å‹
{"deleteSurface":{...}}   // åˆ é™¤è¡¨é¢
```
:::

### ç¬¬ 5 æ­¥ï¼šæ‰§è¡Œ Canvas JavaScript

**ä¸ºä»€ä¹ˆ**
åœ¨ Canvas ä¸­æ‰§è¡Œè‡ªå®šä¹‰ JSï¼Œæ¯”å¦‚ä¿®æ”¹ DOMã€è¯»å–çŠ¶æ€ã€‚

```bash
clawdbot nodes canvas eval --node abc123-def456-ghi789 --js "document.title"
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

```text
"Hello from Canvas"
```

::: tip JS æ‰§è¡Œç¤ºä¾‹
- è¯»å–å…ƒç´ ï¼š`document.querySelector('h1').textContent`
- ä¿®æ”¹æ ·å¼ï¼š`document.body.style.background = '#333'`
- è®¡ç®—å€¼ï¼š`innerWidth + 'x' + innerHeight`
- é—­åŒ…æ‰§è¡Œï¼š`(() => { ... })()`
:::

### ç¬¬ 6 æ­¥ï¼šæ•è· Canvas æˆªå›¾

**ä¸ºä»€ä¹ˆ**
è®© AI çœ‹åˆ°å½“å‰çš„ Canvas çŠ¶æ€ï¼Œç”¨äºä¸Šä¸‹æ–‡ç†è§£ã€‚

```bash
# é»˜è®¤æ ¼å¼ï¼ˆJPEGï¼‰
clawdbot nodes canvas snapshot --node abc123-def456-ghi789

# PNG æ ¼å¼ + æœ€å¤§å®½åº¦é™åˆ¶
clawdbot nodes canvas snapshot --node abc123-def456-ghi789 --format png --max-width 1200

# é«˜è´¨é‡ JPEG
clawdbot nodes canvas snapshot --node abc123-def456-ghi789 --format jpg --quality 0.9
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

```text
Canvas snapshot saved to: /var/folders/.../canvas-snapshot.jpg
```

æ–‡ä»¶è·¯å¾„ç”±ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œé€šå¸¸åœ¨ä¸´æ—¶ç›®å½•ã€‚

### ç¬¬ 7 æ­¥ï¼šéšè— Canvas

**ä¸ºä»€ä¹ˆ**
å…³é—­ Canvas é¢æ¿ï¼Œé‡Šæ”¾å±å¹•ç©ºé—´ã€‚

```bash
clawdbot nodes canvas hide --node abc123-def456-ghi789
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

- iOS è®¾å¤‡ä¸Šçš„ Canvas é¢æ¿æ¶ˆå¤±
- èŠ‚ç‚¹çŠ¶æ€æ¢å¤ï¼ˆå¦‚æœä¹‹å‰è¢«å ç”¨ï¼‰

## æ£€æŸ¥ç‚¹ âœ…

**éªŒè¯ Canvas åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ**ï¼š

| æ£€æŸ¥é¡¹ | éªŒè¯æ–¹æ³• |
| ------- | -------- |
| Canvas Host è¿è¡Œ | `lsof -i :18793` æœ‰è¾“å‡º |
| èŠ‚ç‚¹ Canvas èƒ½åŠ› | `clawdbot nodes list` æ˜¾ç¤º `canvas` |
| é¡µé¢åŠ è½½æˆåŠŸ | èŠ‚ç‚¹æ˜¾ç¤º HTML å†…å®¹ |
| A2UI æ¨é€æˆåŠŸ | Canvas æ˜¾ç¤ºè“è‰² A2UI ç•Œé¢ |
| JS æ‰§è¡Œè¿”å›ç»“æœ | `eval` å‘½ä»¤è¿”å›å€¼ |
| æˆªå›¾ç”Ÿæˆæ–‡ä»¶ | ä¸´æ—¶ç›®å½•æœ‰ `.jpg` æˆ– `.png` æ–‡ä»¶ |

## è¸©å‘æé†’

::: warning å‰å°/åå°é™åˆ¶
- **iOS/Android èŠ‚ç‚¹**ï¼š`canvas.*` å’Œ `camera.*` å‘½ä»¤**å¿…é¡»åœ¨å‰å°è¿è¡Œ**
- åå°è°ƒç”¨ä¼šè¿”å›ï¼š`NODE_BACKGROUND_UNAVAILABLE`
- è§£å†³æ–¹æ³•ï¼šå°†è®¾å¤‡å”¤é†’åˆ°å‰å°
:::

::: danger å®‰å…¨æ³¨æ„äº‹é¡¹
- **ç›®å½•éå†ä¿æŠ¤**ï¼šCanvas URL ç¦æ­¢ `..` è®¿é—®ä¸Šçº§ç›®å½•
- **è‡ªå®šä¹‰ Scheme**ï¼š`clawdbot-canvas://` ä»…é™èŠ‚ç‚¹å†…éƒ¨ä½¿ç”¨
- **HTTPS é™åˆ¶**ï¼šå¤–éƒ¨ HTTPS URL éœ€è¦èŠ‚ç‚¹ç½‘ç»œæƒé™
- **æ–‡ä»¶è®¿é—®**ï¼šCanvas Host ä»…å…è®¸è®¿é—® `canvasHost.root` ä¸‹çš„æ–‡ä»¶
:::

::: tip è°ƒè¯•æŠ€å·§
- **æŸ¥çœ‹ Gateway æ—¥å¿—**ï¼š`clawdbot gateway logs`
- **æŸ¥çœ‹èŠ‚ç‚¹æ—¥å¿—**ï¼šiOS è®¾ç½® â†’ Debug Logsï¼ŒAndroid åº”ç”¨å†…æ—¥å¿—
- **æµ‹è¯• URL**ï¼šåœ¨æµè§ˆå™¨ç›´æ¥è®¿é—® `http://<gateway-host>:18793/__clawdbot__/canvas/`
:::

## æœ¬è¯¾å°ç»“

æœ¬è¯¾ä½ å­¦ä¼šäº†ï¼š

1. **Canvas æ¶æ„**ï¼šç†è§£ Canvas Hostã€Node App å’Œ A2UI åè®®çš„å…³ç³»
2. **é…ç½® Canvas Host**ï¼šè°ƒæ•´æ ¹ç›®å½•ã€ç«¯å£å’Œçƒ­é‡è½½è®¾ç½®
3. **åˆ›å»ºè‡ªå®šä¹‰é¡µé¢**ï¼šç¼–å†™ HTML/CSS/JS å¹¶éƒ¨ç½²åˆ°èŠ‚ç‚¹
4. **ä½¿ç”¨ A2UI**ï¼šé€šè¿‡ JSONL æ¨é€åŠ¨æ€ UI æ›´æ–°
5. **æ‰§è¡Œ JavaScript**ï¼šåœ¨ Canvas ä¸­è¿è¡Œä»£ç ï¼Œè¯»å–å’Œä¿®æ”¹çŠ¶æ€
6. **æ•è·æˆªå›¾**ï¼šè®© AI çœ‹åˆ°å½“å‰ Canvas çŠ¶æ€

**æ ¸å¿ƒè¦ç‚¹**ï¼š

- Canvas Host éš Gateway è‡ªåŠ¨å¯åŠ¨ï¼Œæ— éœ€é¢å¤–é…ç½®
- A2UI é€‚åˆå®æ—¶æ•°æ®ï¼Œé™æ€ HTML é€‚åˆå¤æ‚äº¤äº’
- èŠ‚ç‚¹å¿…é¡»åœ¨å‰å°æ‰èƒ½æ‰§è¡Œ Canvas æ“ä½œ
- ä½¿ç”¨ `canvas snapshot` å°† UI çŠ¶æ€ä¼ é€’ç»™ AI

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬å­¦ä¹  **[è¯­éŸ³å”¤é†’ä¸æ–‡æœ¬è½¬è¯­éŸ³](../voice-tts/)**ã€‚
>
> ä½ ä¼šå­¦åˆ°ï¼š
> - é…ç½® Voice Wake å”¤é†’å…³é”®è¯
> - ä½¿ç”¨ Talk Mode è¿›è¡ŒæŒç»­è¯­éŸ³å¯¹è¯
> - é›†æˆå¤šç§ TTS æä¾›å•†ï¼ˆEdgeã€Deepgramã€ElevenLabsï¼‰

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-27

| åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ | è¡Œå· |
| ----- | --------- | ---- |
| Canvas Host æœåŠ¡å™¨ | [`src/canvas-host/server.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/canvas-host/server.ts) | 372-441 |
| A2UI åè®®å¤„ç† | [`src/canvas-host/a2ui.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/canvas-host/a2ui.ts) | 150-203 |
| Canvas å·¥å…·å®šä¹‰ | [`src/agents/tools/canvas-tool.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/agents/tools/canvas-tool.ts) | 52-179 |
| Canvas è·¯å¾„å¸¸é‡ | [`src/canvas-host/a2ui.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/canvas-host/a2ui.ts) | 8-10 |

**å…³é”®å¸¸é‡**ï¼š
- `A2UI_PATH = "/__clawdbot__/a2ui"`ï¼šA2UI ä¸»æœºè·¯å¾„
- `CANVAS_HOST_PATH = "/__clawdbot__/canvas"`ï¼šCanvas æ–‡ä»¶è·¯å¾„
- `CANVAS_WS_PATH = "/__clawdbot__/ws"`ï¼šWebSocket çƒ­é‡è½½è·¯å¾„

**å…³é”®å‡½æ•°**ï¼š
- `createCanvasHost()`ï¼šå¯åŠ¨ Canvas HTTP æœåŠ¡å™¨ï¼ˆç«¯å£ 18793ï¼‰
- `injectCanvasLiveReload()`ï¼šæ³¨å…¥ WebSocket çƒ­é‡è½½è„šæœ¬åˆ° HTML
- `handleA2uiHttpRequest()`ï¼šå¤„ç† A2UI èµ„æºè¯·æ±‚
- `createCanvasTool()`ï¼šæ³¨å†Œ `canvas` å·¥å…·ï¼ˆpresent/hide/navigate/eval/snapshot/a2ui_push/a2ui_resetï¼‰

**æ”¯æŒçš„ Canvas Actions**ï¼š
- `present`ï¼šæ˜¾ç¤º Canvasï¼ˆå¯é€‰ URLã€ä½ç½®ã€å°ºå¯¸ï¼‰
- `hide`ï¼šéšè— Canvas
- `navigate`ï¼šå¯¼èˆªåˆ° URLï¼ˆæœ¬åœ°è·¯å¾„/HTTP/file://ï¼‰
- `eval`ï¼šæ‰§è¡Œ JavaScript
- `snapshot`ï¼šæ•è·æˆªå›¾ï¼ˆPNG/JPEGï¼Œå¯é€‰ maxWidth/qualityï¼‰
- `a2ui_push`ï¼šæ¨é€ A2UI æ›´æ–°ï¼ˆJSONL æˆ–æ–‡æœ¬ï¼‰
- `a2ui_reset`ï¼šé‡ç½® A2UI çŠ¶æ€

**é…ç½® Schema**ï¼š
- `canvasHost.root`ï¼šCanvas æ ¹ç›®å½•ï¼ˆé»˜è®¤ `~/clawd/canvas`ï¼‰
- `canvasHost.port`ï¼šHTTP ç«¯å£ï¼ˆé»˜è®¤ 18793ï¼‰
- `canvasHost.liveReload`ï¼šæ˜¯å¦å¯ç”¨çƒ­é‡è½½ï¼ˆé»˜è®¤ trueï¼‰
- `canvasHost.enabled`ï¼šæ˜¯å¦å¯ç”¨ Canvas Hostï¼ˆé»˜è®¤ trueï¼‰

**A2UI v0.8 æ”¯æŒçš„æ¶ˆæ¯**ï¼š
- `beginRendering`ï¼šå¼€å§‹æ¸²æŸ“æŒ‡å®šè¡¨é¢
- `surfaceUpdate`ï¼šæ›´æ–°è¡¨é¢ç»„ä»¶ï¼ˆColumnã€Textã€Button ç­‰ï¼‰
- `dataModelUpdate`ï¼šæ›´æ–°æ•°æ®æ¨¡å‹
- `deleteSurface`ï¼šåˆ é™¤æŒ‡å®šè¡¨é¢

</details>
