---
title: "Signal æ¸ é“é…ç½®ï¼šåŸºäº signal-cli çš„å®‰å…¨ AI åŠ©æ‰‹é›†æˆ | Clawdbot æ•™ç¨‹"
sidebarTitle: "è¿æ¥ç§å¯†çš„ Signal AI"
subtitle: "Signal æ¸ é“é…ç½®ï¼šåŸºäº signal-cli çš„å®‰å…¨ AI åŠ©æ‰‹é›†æˆ | Clawdbot æ•™ç¨‹"
description: "å­¦ä¹ å¦‚ä½•åœ¨ Clawdbot ä¸­é…ç½® Signal æ¸ é“ï¼ŒåŒ…æ‹¬ signal-cli å®‰è£…ã€è´¦æˆ·é“¾æ¥ã€å¤šè´¦æˆ·æ”¯æŒã€DM é…å¯¹æœºåˆ¶ã€ç¾¤ç»„æ¶ˆæ¯å’Œè®¿é—®æ§åˆ¶ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚æœ¬æ•™ç¨‹è¯¦ç»†è®²è§£ä»å®‰è£…åˆ°ä½¿ç”¨çš„å®Œæ•´æµç¨‹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿæ­å»ºåŸºäº Signal çš„ä¸ªäºº AI åŠ©æ‰‹ã€‚"
tags:
  - "Signal"
  - "signal-cli"
  - "æ¸ é“é…ç½®"
  - "æ¶ˆæ¯å¹³å°"
prerequisite:
  - "start-getting-started"
order: 120
---

# Signal æ¸ é“é…ç½®ï¼šä½¿ç”¨ signal-cli è¿æ¥ä¸ªäºº AI åŠ©æ‰‹ | Clawdbot æ•™ç¨‹

## å­¦å®Œä½ èƒ½åšä»€ä¹ˆ

å®Œæˆæœ¬è¯¾åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- âœ… å®‰è£…å¹¶é…ç½® signal-cli
- âœ… åœ¨ Clawdbot ä¸­è®¾ç½® Signal æ¸ é“
- âœ… é€šè¿‡ç§èŠå’Œç¾¤ç»„ä¸ AI åŠ©æ‰‹äº¤äº’
- âœ… ä½¿ç”¨ DM é…å¯¹æœºåˆ¶ä¿æŠ¤ä½ çš„è´¦æˆ·
- âœ… é…ç½®å¤šè´¦æˆ· Signal æ”¯æŒ
- âœ… ä½¿ç”¨ Signal çš„æ‰“å­—æŒ‡ç¤ºå™¨ã€å·²è¯»å›æ‰§å’Œ Reactions

## ä½ ç°åœ¨çš„å›°å¢ƒ

ä½ æƒ³åœ¨ Signal ä¸Šä½¿ç”¨ AI åŠ©æ‰‹ï¼Œä½†é‡åˆ°äº†è¿™äº›é—®é¢˜ï¼š

- âŒ ä¸çŸ¥é“å¦‚ä½•è¿æ¥ Signal å’Œ Clawdbot
- âŒ æ‹…å¿ƒéšç§é—®é¢˜ï¼Œä¸æƒ³å°†æ•°æ®ä¸Šä¼ åˆ°äº‘ç«¯
- âŒ ä¸ç¡®å®šå¦‚ä½•æ§åˆ¶è°èƒ½å‘ AI åŠ©æ‰‹å‘é€æ¶ˆæ¯
- âŒ éœ€è¦åœ¨å¤šä¸ª Signal è´¦æˆ·ä¹‹é—´åˆ‡æ¢

::: info ä¸ºä»€ä¹ˆé€‰æ‹© Signalï¼Ÿ
Signal æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯åŠ å¯†çš„å³æ—¶é€šè®¯åº”ç”¨ï¼Œæ‰€æœ‰é€šä¿¡éƒ½ç»è¿‡åŠ å¯†ï¼Œåªæœ‰å‘é€æ–¹å’Œæ¥æ”¶æ–¹èƒ½è¯»å–æ¶ˆæ¯ã€‚Clawdbot é€šè¿‡ signal-cli é›†æˆï¼Œè®©ä½ åœ¨ä¿æŒéšç§çš„åŒæ—¶äº«å— AI åŠ©æ‰‹çš„åŠŸèƒ½ã€‚
:::

## ä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸€æ‹›

**é€‚åˆä½¿ç”¨ Signal æ¸ é“çš„åœºæ™¯**ï¼š

- ä½ éœ€è¦ä¸€ä¸ªéšç§ä¼˜å…ˆçš„é€šä¿¡æ¸ é“
- ä½ çš„å›¢é˜Ÿæˆ–æœ‹å‹ç¾¤ç»„ä½¿ç”¨ Signal
- ä½ éœ€è¦åœ¨ä¸ªäººè®¾å¤‡ä¸Šè¿è¡Œ AI åŠ©æ‰‹ï¼ˆæœ¬åœ°ä¼˜å…ˆï¼‰
- ä½ éœ€è¦é€šè¿‡å—ä¿æŠ¤çš„ DM é…å¯¹æœºåˆ¶æ§åˆ¶è®¿é—®

::: tip ç‹¬ç«‹çš„ Signal è´¦å·
æ¨èä½¿ç”¨ä¸€ä¸ª**ç‹¬ç«‹çš„ Signal å·ç **ä½œä¸º bot è´¦æˆ·ï¼Œè€Œä¸æ˜¯ä½ çš„ä¸ªäººå·ç ã€‚è¿™æ ·å¯ä»¥é¿å…æ¶ˆæ¯å¾ªç¯ï¼ˆbot å¿½ç•¥è‡ªå·±çš„æ¶ˆæ¯ï¼‰ï¼Œå¹¶ä¿æŒå·¥ä½œå’Œä¸ªäººé€šä¿¡åˆ†ç¦»ã€‚
:::

## å¼€å§‹å‰çš„å‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®è®¤ä½ å·²ç»å®Œæˆäº†ä»¥ä¸‹æ­¥éª¤ï¼š

::: warning å‰ç½®æ¡ä»¶
- âœ… å·²å®Œæˆ [å¿«é€Ÿå¼€å§‹](../../start/getting-started/) æ•™ç¨‹
- âœ… Clawdbot å·²å®‰è£…å¹¶å¯ä»¥æ­£å¸¸è¿è¡Œ
- âœ… å·²é…ç½®è‡³å°‘ä¸€ä¸ª AI æ¨¡å‹æä¾›å•†ï¼ˆAnthropicã€OpenAIã€OpenRouter ç­‰ï¼‰
- âœ… å·²å®‰è£… Javaï¼ˆsignal-cli éœ€è¦ï¼‰
:::

## æ ¸å¿ƒæ€è·¯

Clawdbot çš„ Signal é›†æˆåŸºäº **signal-cli**ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼å·¥ä½œï¼š

1. **å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼**ï¼šsignal-cli ä½œä¸ºåå°å®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼Œæä¾› HTTP JSON-RPC æ¥å£
2. **äº‹ä»¶æµï¼ˆSSEï¼‰**ï¼šClawdbot é€šè¿‡ Server-Sent Eventsï¼ˆSSEï¼‰æ¥æ”¶ä¿¡å·äº‹ä»¶
3. **æ ‡å‡†åŒ–æ¶ˆæ¯**ï¼šSignal æ¶ˆæ¯è¢«è½¬æ¢ä¸ºç»Ÿä¸€çš„å†…éƒ¨æ ¼å¼ï¼Œç„¶åè·¯ç”±åˆ° AI Agent
4. **ç¡®å®šæ€§è·¯ç”±**ï¼šæ‰€æœ‰å›å¤éƒ½ä¼šå‘é€å›åŸå§‹æ¶ˆæ¯çš„å‘é€è€…æˆ–ç¾¤ç»„

**å…³é”®è®¾è®¡åŸåˆ™**ï¼š

- **æœ¬åœ°ä¼˜å…ˆ**ï¼šsignal-cli åœ¨ä½ çš„è®¾å¤‡ä¸Šè¿è¡Œï¼Œæ‰€æœ‰é€šä¿¡éƒ½ç»è¿‡åŠ å¯†
- **å¤šè´¦æˆ·æ”¯æŒ**ï¼šå¯ä»¥é…ç½®å¤šä¸ª Signal è´¦æˆ·
- **è®¿é—®æ§åˆ¶**ï¼šé»˜è®¤å¯ç”¨ DM é…å¯¹æœºåˆ¶ï¼Œé™Œç”Ÿäººéœ€è¦æ‰¹å‡†æ‰èƒ½å‘é€æ¶ˆæ¯
- **ä¸Šä¸‹æ–‡éš”ç¦»**ï¼šç¾¤ç»„æ¶ˆæ¯æœ‰ç‹¬ç«‹çš„ä¼šè¯ä¸Šä¸‹æ–‡ï¼Œä¸ä¼šä¸ç§èŠæ··åˆ

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šå®‰è£… signal-cli

**ä¸ºä»€ä¹ˆ**
signal-cli æ˜¯ Signal çš„å‘½ä»¤è¡Œæ¥å£ï¼ŒClawdbot é€šè¿‡å®ƒä¸ Signal ç½‘ç»œé€šä¿¡ã€‚

**å®‰è£…æ–¹æ³•**

::: code-group

```bash [macOS (Homebrew)]
brew install signal-cli
```

```bash [Linux (Ubuntu/Debian)]
# è®¿é—® https://github.com/AsamK/signal-cli/releases æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬
# ä¸‹è½½æœ€æ–°çš„ signal-cli å‘å¸ƒåŒ…ï¼ˆå°† VERSION æ›¿æ¢ä¸ºå®é™…ç‰ˆæœ¬å·ï¼‰
wget https://github.com/AsamK/signal-cli/releases/download/vVERSION/signal-cli-VERSION.tar.gz

# è§£å‹åˆ° /opt ç›®å½•
sudo tar -xvf signal-cli-VERSION.tar.gz -C /opt/

# åˆ›å»ºç¬¦å·é“¾æ¥ï¼ˆå¯é€‰ï¼‰
sudo ln -s /opt/signal-cli-VERSION/bin/signal-cli /usr/local/bin/signal-cli
```

```bash [Windows (WSL2)]
# åœ¨ WSL2 ä¸­ä½¿ç”¨ Linux å®‰è£…æ–¹æ³•
# æ³¨æ„ï¼šWindows ä½¿ç”¨ WSL2ï¼Œsignal-cli å®‰è£…éµå¾ª Linux æµç¨‹
```

:::

**éªŒè¯å®‰è£…**

```bash
signal-cli --version
# åº”è¯¥çœ‹åˆ°ï¼šsignal-cli ç‰ˆæœ¬å·ï¼ˆå¦‚ 0.13.x æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šsignal-cli çš„ç‰ˆæœ¬å·è¾“å‡ºã€‚

::: danger Java è¦æ±‚
signal-cli éœ€è¦ Java è¿è¡Œæ—¶ï¼ˆé€šå¸¸ä¸º Java 11 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ã€‚è¯·ç¡®ä¿å·²å®‰è£…å¹¶é…ç½®å¥½ Javaï¼š

```bash
java -version
# åº”è¯¥çœ‹åˆ°ï¼šopenjdk version "11.x.x" æˆ–æ›´é«˜ç‰ˆæœ¬
```

**æ³¨æ„**ï¼šå…·ä½“ Java ç‰ˆæœ¬è¦æ±‚è¯·å‚è€ƒ [signal-cli å®˜æ–¹æ–‡æ¡£](https://github.com/AsamK/signal-cli#readme)ã€‚
:::

### ç¬¬ 2 æ­¥ï¼šé“¾æ¥ Signal è´¦æˆ·

**ä¸ºä»€ä¹ˆ**
é“¾æ¥è´¦æˆ·åï¼Œsignal-cli æ‰èƒ½ä»£è¡¨ä½ çš„ Signal å·ç å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚

**æ¨èåšæ³•**ï¼šä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„ Signal å·ç ä½œä¸º bot è´¦æˆ·ã€‚

**é“¾æ¥æ­¥éª¤**

1. **ç”Ÿæˆé“¾æ¥å‘½ä»¤**ï¼š

```bash
signal-cli link -n "Clawdbot"
```

`-n "Clawdbot"` æŒ‡å®šè®¾å¤‡åç§°ä¸º "Clawdbot"ï¼ˆä½ å¯ä»¥è‡ªå®šä¹‰ï¼‰ã€‚

2. **æ‰«æ QR ç **ï¼š

è¿è¡Œå‘½ä»¤åï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºä¸€ä¸ª QR ç ï¼š

```
tsconfig: 2369:35 - warning - *! is deprecated: Use .nonNull().
  (deprecated-non-null)

To link your device, navigate to
  Signal Settings > Linked Devices > (+) Link New Device
  on your phone and scan the QR code displayed below.

â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
...
```

3. **åœ¨ Signal æ‰‹æœºåº”ç”¨ä¸­**ï¼š

   - æ‰“å¼€ Signal è®¾ç½®
   - é€‰æ‹©"å·²å…³è”çš„è®¾å¤‡"ï¼ˆLinked Devicesï¼‰
   - ç‚¹å‡»"(+) å…³è”æ–°è®¾å¤‡"ï¼ˆLink New Deviceï¼‰
   - æ‰«æç»ˆç«¯æ˜¾ç¤ºçš„ QR ç 

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šé“¾æ¥æˆåŠŸåï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
INFO  Account restored (Number: +15551234567)
INFO  Configuration created at: ~/.local/share/signal-cli/data
```

::: tip å¤šè®¾å¤‡æ”¯æŒ
Signal å…è®¸æœ€å¤šå…³è” 4 ä¸ªè®¾å¤‡ã€‚Clawdbot ä¼šä½œä¸ºå…¶ä¸­ä¸€ä¸ªè®¾å¤‡è¿è¡Œã€‚ä½ å¯ä»¥åœ¨ Signal æ‰‹æœºåº”ç”¨çš„"å·²å…³è”çš„è®¾å¤‡"ä¸­æŸ¥çœ‹å’Œç®¡ç†è¿™äº›è®¾å¤‡ã€‚
:::

### ç¬¬ 3 æ­¥ï¼šé…ç½® Clawdbot çš„ Signal æ¸ é“

**ä¸ºä»€ä¹ˆ**
é…ç½®æ–‡ä»¶å‘Šè¯‰ Clawdbot å¦‚ä½•è¿æ¥åˆ° signal-cliï¼Œä»¥åŠå¦‚ä½•å¤„ç†æ¥è‡ª Signal çš„æ¶ˆæ¯ã€‚

**é…ç½®æ–¹å¼**

æœ‰ä¸‰ç§é…ç½®æ–¹å¼ï¼Œé€‰æ‹©æœ€é€‚åˆä½ çš„ï¼š

#### æ–¹å¼ 1ï¼šå¿«é€Ÿé…ç½®ï¼ˆå•è´¦æˆ·ï¼‰

è¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œé€‚åˆå•è´¦æˆ·åœºæ™¯ã€‚

ç¼–è¾‘ `~/.clawdbot/clawdbot.json`ï¼š

```json
{
  "channels": {
    "signal": {
      "enabled": true,
      "account": "+15551234567",
      "cliPath": "signal-cli",
      "dmPolicy": "pairing",
      "allowFrom": ["+15557654321"]
    }
  }
}
```

**é…ç½®è¯´æ˜**ï¼š

| å­—æ®µ | å€¼ | è¯´æ˜ |
|------|-----|------|
| `enabled` | `true` | å¯ç”¨ Signal æ¸ é“ |
| `account` | `"+15551234567"` | ä½ çš„ Signal è´¦å·ï¼ˆE.164 æ ¼å¼ï¼‰ |
| `cliPath` | `"signal-cli"` | signal-cli å‘½ä»¤è·¯å¾„ |
| `dmPolicy` | `"pairing"` | DM è®¿é—®ç­–ç•¥ï¼ˆé»˜è®¤é…å¯¹æ¨¡å¼ï¼‰ |
| `allowFrom` | `["+15557654321"]` | å…è®¸å‘é€ DM çš„å·ç ç™½åå• |

#### æ–¹å¼ 2ï¼šå¤šè´¦æˆ·é…ç½®

å¦‚æœä½ éœ€è¦ç®¡ç†å¤šä¸ª Signal è´¦æˆ·ï¼Œä½¿ç”¨ `accounts` å¯¹è±¡ï¼š

```json
{
  "channels": {
    "signal": {
      "enabled": true,
      "accounts": {
        "work": {
          "account": "+15551234567",
          "name": "Work Bot",
          "httpPort": 8080,
          "dmPolicy": "pairing",
          "allowFrom": ["+15557654321"]
        },
        "personal": {
          "account": "+15559876543",
          "name": "Personal Bot",
          "httpPort": 8081,
          "dmPolicy": "allowlist",
          "allowFrom": ["*"]
        }
      }
    }
  }
}
```

**é…ç½®è¯´æ˜**ï¼š

- æ¯ä¸ªè´¦æˆ·æœ‰ä¸€ä¸ªå”¯ä¸€çš„ IDï¼ˆå¦‚ `work`ã€`personal`ï¼‰
- æ¯ä¸ªè´¦æˆ·å¯ä»¥æœ‰ä¸åŒçš„ç«¯å£ã€ç­–ç•¥å’Œæƒé™
- `name` æ˜¯å¯é€‰çš„æ˜¾ç¤ºåç§°ï¼Œç”¨äº CLI/UI åˆ—è¡¨

#### æ–¹å¼ 3ï¼šå¤–éƒ¨å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼

å¦‚æœä½ æƒ³è‡ªå·±ç®¡ç† signal-cliï¼ˆä¾‹å¦‚åœ¨å®¹å™¨ä¸­æˆ–å…±äº« CPUï¼‰ï¼Œç¦ç”¨è‡ªåŠ¨å¯åŠ¨ï¼š

```json
{
  "channels": {
    "signal": {
      "enabled": true,
      "httpUrl": "http://127.0.0.1:8080",
      "autoStart": false
    }
  }
}
```

**é…ç½®è¯´æ˜**ï¼š

- `httpUrl`ï¼šå®Œæ•´çš„å®ˆæŠ¤è¿›ç¨‹ URLï¼ˆè¦†ç›– `httpHost` å’Œ `httpPort`ï¼‰
- `autoStart`ï¼šè®¾ä¸º `false` ç¦ç”¨è‡ªåŠ¨å¯åŠ¨ signal-cli
- Clawdbot ä¼šè¿æ¥åˆ°å·²è¿è¡Œçš„ signal-cli å®ˆæŠ¤è¿›ç¨‹

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šé…ç½®æ–‡ä»¶ä¿å­˜åï¼Œæ²¡æœ‰è¯­æ³•é”™è¯¯ã€‚

::: tip é…ç½®éªŒè¯
Clawdbot ä¼šåœ¨å¯åŠ¨æ—¶éªŒè¯é…ç½®ã€‚å¦‚æœé…ç½®æœ‰è¯¯ï¼Œä¼šåœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ã€‚
:::

### ç¬¬ 4 æ­¥ï¼šå¯åŠ¨ Gateway

**ä¸ºä»€ä¹ˆ**
å¯åŠ¨ Gateway åï¼ŒClawdbot ä¼šè‡ªåŠ¨å¯åŠ¨ signal-cli å®ˆæŠ¤è¿›ç¨‹ï¼ˆé™¤éä½ ç¦ç”¨äº† `autoStart`ï¼‰ï¼Œå¹¶å¼€å§‹ç›‘å¬ Signal æ¶ˆæ¯ã€‚

**å¯åŠ¨å‘½ä»¤**

```bash
clawdbot gateway start
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
[INFO] Starting Clawdbot Gateway...
[INFO] Starting signal-cli daemon...
[INFO] signal-cli: INFO  Starting daemon...
[INFO] signal-cli: INFO  Daemon started on http://127.0.0.1:8080
[INFO] Signal channel ready (account: +15551234567)
[INFO] Gateway listening on ws://127.0.0.1:18789
[INFO] Clawdbot Gateway started successfully
```

**æ£€æŸ¥ Channel çŠ¶æ€**

```bash
clawdbot channels status
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
Signal Channels:
  â”œâ”€ +15551234567 (Work Bot)
  â”‚   â”œâ”€ Status: Connected
  â”‚   â”œâ”€ Daemon: http://127.0.0.1:8080
  â”‚   â””â”€ Mode: Auto-start
```

### ç¬¬ 5 æ­¥ï¼šå‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯

**ä¸ºä»€ä¹ˆ**
éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ Clawdbot èƒ½æ¥æ”¶å’Œå¤„ç† Signal æ¶ˆæ¯ã€‚

**å‘é€æ¶ˆæ¯**

1. **ä»ä½ çš„ Signal æ‰‹æœºåº”ç”¨**ï¼Œå‘é€æ¶ˆæ¯ç»™ä½ çš„ bot å·ç ï¼š

```
ä½ å¥½ï¼ŒClawdbotï¼
```

2. **é¦–æ¬¡æ¶ˆæ¯å¤„ç†**ï¼š

   å¦‚æœ `dmPolicy="pairing"`ï¼ˆé»˜è®¤ï¼‰ï¼Œé™Œç”Ÿäººä¼šæ”¶åˆ°é…å¯¹ä»£ç ï¼š

   ```
   âŒ æœªæˆæƒçš„å‘é€è€…

   è¦ç»§ç»­ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ä»£ç æ‰¹å‡†æ­¤é…å¯¹ï¼š

   ğŸ“ é…å¯¹ä»£ç ï¼šABC123

   ä»£ç å°†åœ¨ 1 å°æ—¶åè¿‡æœŸã€‚

   è¦æ‰¹å‡†ï¼Œè¯·è¿è¡Œï¼š
   clawdbot pairing approve signal ABC123
   ```

3. **æ‰¹å‡†é…å¯¹**ï¼š

   ```bash
   clawdbot pairing list signal
   ```

   åˆ—å‡ºå¾…æ‰¹å‡†çš„é…å¯¹è¯·æ±‚ï¼š

   ```
   Pending Pairings (Signal):
     â”œâ”€ ABC123
     â”‚   â”œâ”€ Sender: +15557654321
     â”‚   â”œâ”€ UUID: uuid:123e4567-e89b-12d3-a456-426614174000
     â”‚   â””â”€ Expires: 2026-01-27 12:00:00
   ```

   æ‰¹å‡†é…å¯¹ï¼š

   ```bash
   clawdbot pairing approve signal ABC123
   ```

4. **å‘é€ç¬¬äºŒæ¡æ¶ˆæ¯**ï¼š

   é…å¯¹æˆåŠŸåï¼Œå†æ¬¡å‘é€æ¶ˆæ¯ï¼š

   ```
   ä½ å¥½ï¼ŒClawdbotï¼
   ```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š

- Signal æ‰‹æœºåº”ç”¨æ”¶åˆ° AI çš„å›å¤ï¼š
  ```
  ä½ å¥½ï¼æˆ‘æ˜¯ Clawdbotï¼Œä½ çš„ä¸ªäºº AI åŠ©æ‰‹ã€‚æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ
  ```

- Gateway æ—¥å¿—æ˜¾ç¤ºï¼š
  ```
  [INFO] Received Signal message from +15557654321
  [INFO] Processing message through Agent...
  [INFO] Sending Signal response to +15557654321
  ```

**æ£€æŸ¥ç‚¹ âœ…**ï¼š

- [ ] signal-cli å®ˆæŠ¤è¿›ç¨‹è¿è¡Œä¸­
- [ ] Channel çŠ¶æ€æ˜¾ç¤º "Connected"
- [ ] å‘é€æ¶ˆæ¯åæ”¶åˆ° AI å›å¤
- [ ] Gateway æ—¥å¿—æ²¡æœ‰é”™è¯¯ä¿¡æ¯

::: danger è‡ªå·±çš„æ¶ˆæ¯ä¼šè¢«å¿½ç•¥
å¦‚æœä½ åœ¨ä¸ªäºº Signal å·ç ä¸Šè¿è¡Œ botï¼Œbot ä¼šå¿½ç•¥ä½ è‡ªå·±å‘é€çš„æ¶ˆæ¯ï¼ˆå¾ªç¯ä¿æŠ¤ï¼‰ã€‚æ¨èä½¿ç”¨ç‹¬ç«‹çš„ bot å·ç ã€‚
:::

## è¸©å‘æé†’

### å‘ 1ï¼šsignal-cli å¯åŠ¨å¤±è´¥

**é—®é¢˜**ï¼šsignal-cli å®ˆæŠ¤è¿›ç¨‹æ— æ³•å¯åŠ¨

**å¯èƒ½åŸå› **ï¼š

1. Java æœªå®‰è£…æˆ–ç‰ˆæœ¬è¿‡ä½
2. ç«¯å£å·²è¢«å ç”¨
3. signal-cli è·¯å¾„ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ£€æŸ¥ Java ç‰ˆæœ¬
java -version

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080  # macOS/Linux
netstat -ano | findstr :8080  # Windows (PowerShell)

# æ£€æŸ¥ signal-cli è·¯å¾„
which signal-cli
```

### å‘ 2ï¼šé…å¯¹ä»£ç è¿‡æœŸ

**é—®é¢˜**ï¼šé…å¯¹ä»£ç åœ¨ 1 å°æ—¶åè¿‡æœŸ

**è§£å†³æ–¹æ¡ˆ**ï¼š

é‡æ–°å‘é€æ¶ˆæ¯ï¼Œè·å–æ–°çš„é…å¯¹ä»£ç ï¼Œå¹¶åœ¨ 1 å°æ—¶å†…æ‰¹å‡†ã€‚

### å‘ 3ï¼šç¾¤ç»„æ¶ˆæ¯ä¸å“åº”

**é—®é¢˜**ï¼šåœ¨ Signal ç¾¤ç»„ä¸­ @ æåŠ botï¼Œä½†æ²¡æœ‰å“åº”

**å¯èƒ½åŸå› **ï¼š

- `groupPolicy` è®¾ç½®ä¸º `allowlist`ï¼Œä½†ä½ ä¸åœ¨ `groupAllowFrom` ä¸­
- Signal ä¸æ”¯æŒåŸç”Ÿ @ æåŠï¼ˆä¸åƒ Discord/Slackï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š

é…ç½®ç¾¤ç»„ç­–ç•¥ï¼š

```json
{
  "channels": {
    "signal": {
      "groupPolicy": "allowlist",
      "groupAllowFrom": ["+15557654321"]
    }
  }
}
```

æˆ–ä½¿ç”¨å‘½ä»¤è§¦å‘ï¼ˆå¦‚æœé…ç½®äº† `commands.config: true`ï¼‰ï¼š

```
@clawdbot help
```

### å‘ 4ï¼šåª’ä½“æ–‡ä»¶ä¸‹è½½å¤±è´¥

**é—®é¢˜**ï¼šSignal æ¶ˆæ¯ä¸­çš„å›¾ç‰‡æˆ–é™„ä»¶æ— æ³•å¤„ç†

**å¯èƒ½åŸå› **ï¼š

- æ–‡ä»¶å¤§å°è¶…è¿‡ `mediaMaxMb` é™åˆ¶ï¼ˆé»˜è®¤ 8MBï¼‰
- `ignoreAttachments` è®¾ç½®ä¸º `true`

**è§£å†³æ–¹æ¡ˆ**ï¼š

```json
{
  "channels": {
    "signal": {
      "mediaMaxMb": 20,
      "ignoreAttachments": false
    }
  }
}
```

### å‘ 5ï¼šé•¿æ¶ˆæ¯è¢«æˆªæ–­

**é—®é¢˜**ï¼šå‘é€çš„æ¶ˆæ¯è¢«åˆ†å‰²æˆå¤šæ®µ

**åŸå› **ï¼šSignal æœ‰æ¶ˆæ¯é•¿åº¦é™åˆ¶ï¼ˆé»˜è®¤ 4000 å­—ç¬¦ï¼‰ï¼ŒClawdbot ä¼šè‡ªåŠ¨åˆ†å—

**è§£å†³æ–¹æ¡ˆ**ï¼š

è°ƒæ•´åˆ†å—é…ç½®ï¼š

```json
{
  "channels": {
    "signal": {
      "textChunkLimit": 2000,
      "chunkMode": "newline"
    }
  }
}
```

`chunkMode` é€‰é¡¹ï¼š
- `length`ï¼ˆé»˜è®¤ï¼‰ï¼šæŒ‰é•¿åº¦åˆ†å—
- `newline`ï¼šå…ˆæŒ‰ç©ºè¡Œåˆ†å‰²ï¼ˆæ®µè½è¾¹ç•Œï¼‰ï¼Œå†æŒ‰é•¿åº¦åˆ†å—

## æœ¬è¯¾å°ç»“

æœ¬è¯¾æˆ‘ä»¬å®Œæˆäº† Signal æ¸ é“çš„é…ç½®å’Œä½¿ç”¨ï¼š

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- Signal æ¸ é“åŸºäº signal-cliï¼Œé€šè¿‡ HTTP JSON-RPC + SSE é€šä¿¡
- æ¨èä½¿ç”¨ç‹¬ç«‹çš„ bot å·ç ï¼Œé¿å…æ¶ˆæ¯å¾ªç¯
- é»˜è®¤å¯ç”¨ DM é…å¯¹æœºåˆ¶ï¼Œä¿æŠ¤ä½ çš„è´¦æˆ·å®‰å…¨

**å…³é”®é…ç½®**ï¼š
- `account`ï¼šSignal è´¦å·ï¼ˆE.164 æ ¼å¼ï¼‰
- `cliPath`ï¼šsignal-cli è·¯å¾„
- `dmPolicy`ï¼šDM è®¿é—®ç­–ç•¥ï¼ˆé»˜è®¤ `pairing`ï¼‰
- `allowFrom`ï¼šDM ç™½åå•
- `groupPolicy` / `groupAllowFrom`ï¼šç¾¤ç»„ç­–ç•¥

**å®ç”¨åŠŸèƒ½**ï¼š
- å¤šè´¦æˆ·æ”¯æŒ
- ç¾¤ç»„æ¶ˆæ¯ï¼ˆç‹¬ç«‹ä¸Šä¸‹æ–‡ï¼‰
- æ‰“å­—æŒ‡ç¤ºå™¨
- å·²è¯»å›æ‰§
- Reactionsï¼ˆè¡¨æƒ…ååº”ï¼‰

**æ•…éšœæ’æŸ¥**ï¼š
- ä½¿ç”¨ `clawdbot channels status` æ£€æŸ¥ Channel çŠ¶æ€
- ä½¿ç”¨ `clawdbot pairing list signal` æŸ¥çœ‹å¾…æ‰¹å‡†çš„é…å¯¹è¯·æ±‚
- æŸ¥çœ‹ Gateway æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬å­¦ä¹  **[iMessage æ¸ é“](../imessage/)**ã€‚
>
> ä½ ä¼šå­¦åˆ°ï¼š
> - å¦‚ä½•åœ¨ macOS ä¸Šé…ç½® iMessage æ¸ é“
> - ä½¿ç”¨ BlueBubbles æ‰©å±•æ”¯æŒ
> - iMessage çš„ç‰¹æ®ŠåŠŸèƒ½ï¼ˆå·²è¯»å›æ‰§ã€æ‰“å­—æŒ‡ç¤ºå™¨ç­‰ï¼‰
> - iOS èŠ‚ç‚¹é›†æˆï¼ˆCameraã€Canvasã€Voice Wakeï¼‰

ç»§ç»­æ¢ç´¢ Clawdbot çš„å¼ºå¤§åŠŸèƒ½å§ï¼ğŸš€

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-27

| åŠŸèƒ½        | æ–‡ä»¶è·¯å¾„                                                                                    | è¡Œå·    |
| ----------- | ------------------------------------------------------------------------------------------- | ------- |
| Signal RPC å®¢æˆ·ç«¯ | [`src/signal/client.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/client.ts)         | 1-186   |
| Signal å®ˆæŠ¤è¿›ç¨‹ç®¡ç† | [`src/signal/daemon.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/daemon.ts)         | 1-85    |
| å¤šè´¦æˆ·æ”¯æŒ | [`src/signal/accounts.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/accounts.ts)       | 1-84    |
| Signal ç›‘æ§å’Œäº‹ä»¶å¤„ç† | [`src/signal/monitor.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/monitor.ts)       | -       |
| æ¶ˆæ¯å‘é€ | [`src/signal/send.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/send.ts)             | -       |
| Reactions å‘é€ | [`src/signal/send-reactions.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/send-reactions.ts) | -       |
| Reaction çº§åˆ«é…ç½® | [`src/signal/reaction-level.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/reaction-level.ts) | -       |

**é…ç½®ç±»å‹å®šä¹‰**ï¼š
- `SignalAccountConfig`: [`src/config/types.signal.ts:13-87`](https://github.com/clawd/clawdbot/blob/main/src/config/types.signal.ts#L13-L87)
- `SignalConfig`: [`src/config/types.signal.ts:89-93`](https://github.com/clawd/clawdbot/blob/main/src/config/types.signal.ts#L89-L93)

**å…³é”®å¸¸é‡**ï¼š
- `DEFAULT_TIMEOUT_MS = 10_000`ï¼šSignal RPC è¯·æ±‚é»˜è®¤è¶…æ—¶æ—¶é—´ï¼ˆ10 ç§’ï¼‰æ¥æºï¼š`src/signal/client.ts:29`
- é»˜è®¤ HTTP ç«¯å£ï¼š`8080` æ¥æºï¼š`src/signal/accounts.ts:59`
- é»˜è®¤æ–‡æœ¬åˆ†å—å¤§å°ï¼š`4000` å­—ç¬¦ æ¥æºï¼š`docs/channels/signal.md:113`

**å…³é”®å‡½æ•°**ï¼š
- `signalRpcRequest<T>()`ï¼šå‘é€ JSON-RPC è¯·æ±‚åˆ° signal-cli æ¥æºï¼š`src/signal/client.ts:54-90`
- `streamSignalEvents()`ï¼šé€šè¿‡ SSE è®¢é˜… Signal äº‹ä»¶ æ¥æºï¼š`src/signal/client.ts:112-185`
- `spawnSignalDaemon()`ï¼šå¯åŠ¨ signal-cli å®ˆæŠ¤è¿›ç¨‹ æ¥æºï¼š`src/signal/daemon.ts:50-84`
- `resolveSignalAccount()`ï¼šè§£æ Signal è´¦æˆ·é…ç½® æ¥æºï¼š`src/signal/accounts.ts:49-77`
- `listEnabledSignalAccounts()`ï¼šåˆ—å‡ºå·²å¯ç”¨çš„ Signal è´¦æˆ· æ¥æºï¼š`src/signal/accounts.ts:79-83`

</details>
