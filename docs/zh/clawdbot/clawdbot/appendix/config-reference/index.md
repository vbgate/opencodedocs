---
title: "Clawdbot å®Œæ•´é…ç½®å‚è€ƒï¼šæ‰€æœ‰é…ç½®é¡¹è¯¦è§£ | é…ç½®æ•™ç¨‹"
sidebarTitle: "æŒæ§æ‰€æœ‰é…ç½®"
subtitle: "å®Œæ•´é…ç½®å‚è€ƒ"
description: "å­¦ä¹  Clawdbot å®Œæ•´é…ç½®ç³»ç»Ÿã€‚æœ¬å‚è€ƒæ–‡æ¡£è¯¦ç»†è¯´æ˜æ‰€æœ‰é…ç½®èŠ‚ã€å­—æ®µç±»å‹ã€é»˜è®¤å€¼å’Œå®ç”¨ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ è‡ªå®šä¹‰å’Œä¼˜åŒ– Clawdbot çš„è¡Œä¸ºã€‚åŒ…æ‹¬è®¤è¯é…ç½®ã€æ¨¡å‹è®¾ç½®ã€æ¸ é“é€‰é¡¹ã€å·¥å…·ç­–ç•¥ã€æ²™ç®±éš”ç¦»ã€ä¼šè¯ç®¡ç†ã€æ¶ˆæ¯å¤„ç†ã€Cron ä»»åŠ¡ã€Hooksã€Gatewayã€Tailscaleã€Skillsã€Pluginsã€Node Hostã€Canvasã€Talkã€å¹¿æ’­ã€æ—¥å¿—ã€æ›´æ–°ã€UI ç­‰ 50+ ä¸ªæ ¸å¿ƒé…ç½®èŠ‚ï¼Œæ¶µç›–ä»åŸºç¡€åˆ°é«˜çº§çš„æ‰€æœ‰é€‰é¡¹ã€‚é€‚åˆå¿«é€ŸæŸ¥é˜…æ‰€æœ‰å¯ç”¨é…ç½®é¡¹ï¼Œå®šä½éœ€è¦çš„è®¾ç½®ï¼Œæå‡ä½¿ç”¨æ•ˆç‡ï¼Œå®ç°ä¸ªæ€§åŒ–é…ç½®ã€‚äº†è§£æ¯ä¸ªé…ç½®é¡¹çš„ä½œç”¨å’Œå½±å“ï¼Œå¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„é€‰é¡¹ï¼Œé¿å…é…ç½®é”™è¯¯ã€‚æ— è®ºæ–°æ‰‹è¿˜æ˜¯é«˜çº§ç”¨æˆ·ï¼Œéƒ½èƒ½ä»ä¸­å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„é…ç½®é¡¹ï¼Œæå‡å·¥ä½œæ•ˆç‡ï¼Œè§£å†³é…ç½®éš¾é¢˜ã€‚é…ç½®å‚è€ƒæ–‡æ¡£å¸®åŠ©ä½ å…¨é¢äº†è§£å’ŒæŒæ¡ Clawdbot çš„é…ç½®ç³»ç»Ÿï¼Œå®ç°ä¸ªæ€§åŒ–å®šåˆ¶ã€‚é€‚åˆæŸ¥é˜…ã€è°ƒè¯•å’Œé«˜çº§é…ç½®ã€‚æ¨èæ‰€æœ‰ç”¨æˆ·é˜…è¯»æœ¬é…ç½®å‚è€ƒï¼Œäº†è§£æ¯ä¸ªé…ç½®é¡¹çš„å«ä¹‰å’Œç”¨æ³•ï¼Œå……åˆ†åˆ©ç”¨ Clawdbot çš„å¼ºå¤§åŠŸèƒ½ã€‚"
tags:
  - "é…ç½®"
  - "å‚è€ƒ"
  - "å®Œæ•´æŒ‡å—"
order: 340
---

# å®Œæ•´é…ç½®å‚è€ƒ

Clawdbot è¯»å–å¯é€‰çš„ JSON5 é…ç½®æ–‡ä»¶ï¼ˆæ”¯æŒæ³¨é‡Šå’Œå°¾éšé€—å·ï¼‰ï¼š`~/.clawdbot/clawdbot.json`

å¦‚æœé…ç½®æ–‡ä»¶ç¼ºå¤±ï¼ŒClawdbot ä½¿ç”¨å®‰å…¨çš„é»˜è®¤å€¼ï¼ˆåµŒå…¥å¼ Pi agent + æŒ‰å‘é€è€…ä¼šè¯ + å·¥ä½œåŒº `~/clawd`ï¼‰ã€‚ä½ é€šå¸¸åªéœ€è¦é…ç½®æ¥ï¼š
- é™åˆ¶è°å¯ä»¥è§¦å‘æœºå™¨äººï¼ˆ`channels.whatsapp.allowFrom`ï¼Œ`channels.telegram.allowFrom` ç­‰ï¼‰
- æ§åˆ¶ç¾¤ç»„ç™½åå• + æåŠè¡Œä¸ºï¼ˆ`channels.whatsapp.groups`ï¼Œ`channels.telegram.groups`ï¼Œ`channels.discord.guilds`ï¼‰
- è‡ªå®šä¹‰æ¶ˆæ¯å‰ç¼€ï¼ˆ`messages`ï¼‰
- è®¾ç½®ä»£ç†çš„å·¥ä½œåŒºï¼ˆ`agents.defaults.workspace` æˆ– `agents.list[].workspace`ï¼‰
- è°ƒæ•´åµŒå…¥å¼ä»£ç†é»˜è®¤å€¼ï¼ˆ`agents.defaults`ï¼‰å’Œä¼šè¯è¡Œä¸ºï¼ˆ`session`ï¼‰
- è®¾ç½®æ¯ä¸ªä»£ç†çš„èº«ä»½ï¼ˆ`agents.list[].identity`ï¼‰

::: tip æ–°æ‰‹å…¥é—¨ï¼Ÿ
å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡é…ç½®ï¼Œå»ºè®®å…ˆé˜…è¯» [å¿«é€Ÿå¼€å§‹](../../start/getting-started/) å’Œ [å‘å¯¼å¼é…ç½®](../../start/onboarding-wizard/) æ•™ç¨‹ã€‚

## é…ç½®éªŒè¯æœºåˆ¶

Clawdbot åªæ¥å—å®Œå…¨åŒ¹é… Schema çš„é…ç½®ã€‚æœªçŸ¥é”®ã€æ ¼å¼é”™è¯¯çš„ç±»å‹æˆ–æ— æ•ˆå€¼ä¼šå¯¼è‡´ Gateway **æ‹’ç»å¯åŠ¨**ä»¥ç¡®ä¿å®‰å…¨ã€‚

å½“éªŒè¯å¤±è´¥æ—¶ï¼š
- Gateway ä¸ä¼šå¯åŠ¨
- åªå…è®¸è¯Šæ–­å‘½ä»¤ï¼ˆä¾‹å¦‚ï¼š`clawdbot doctor`ï¼Œ`clawdbot logs`ï¼Œ`clawdbot health`ï¼Œ`clawdbot status`ï¼Œ`clawdbot service`ï¼Œ`clawdbot help`ï¼‰
- è¿è¡Œ `clawdbot doctor` æŸ¥çœ‹ç¡®åˆ‡çš„é—®é¢˜
- è¿è¡Œ `clawdbot doctor --fix`ï¼ˆæˆ– `--yes`ï¼‰åº”ç”¨è¿ç§»/ä¿®å¤

::: warning è­¦å‘Š
Doctor é™¤éä½ æ˜ç¡®é€‰æ‹© `--fix`/`--yes`ï¼Œå¦åˆ™ä¸ä¼šå†™å…¥ä»»ä½•æ›´æ”¹ã€‚

## é…ç½®æ–‡ä»¶ç»“æ„

Clawdbot é…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªåˆ†å±‚å¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ä¸»è¦é…ç½®èŠ‚ï¼š

```json5
{
  // æ ¸å¿ƒé…ç½®
  meta: {},
  env: {},
  wizard: {},
  diagnostics: {},
  logging: {},
  update: {},
  
  // åŠŸèƒ½é…ç½®
  browser: {},
  ui: {},
  auth: {},
  models: {},
  nodeHost: {},
  agents: {},
  tools: {},
  bindings: {},
  broadcast: {},
  audio: {},
  media: {},
  messages: {},
  commands: {},
  approvals: {},
  session: {},
  cron: {},
  hooks: {},
  web: {},
  channels: {},
  discovery: {},
  canvasHost: {},
  talk: {},
  gateway: {},
  skills: {},
  plugins: {}
}
```

## æ ¸å¿ƒé…ç½®

### `meta`

é…ç½®æ–‡ä»¶çš„å…ƒæ•°æ®ï¼ˆç”± CLI å‘å¯¼è‡ªåŠ¨å†™å…¥ï¼‰ã€‚

```json5
{
  meta: {
    lastTouchedVersion: "2026.1.24",
    lastTouchedAt: "2026-01-27T00:00:00.000Z"
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `lastTouchedVersion` | string | - | æœ€åä¿®æ”¹æ­¤é…ç½®çš„ Clawdbot ç‰ˆæœ¬ |
| `lastTouchedAt` | string | - | æœ€åä¿®æ”¹æ­¤é…ç½®çš„æ—¶é—´ï¼ˆISO 8601ï¼‰ |

### `env`

ç¯å¢ƒå˜é‡é…ç½®å’Œ shell ç¯å¢ƒå¯¼å…¥ã€‚

```json5
{
  env: {
    shellEnv: {
      enabled: true,
      timeoutMs: 15000
    },
    vars: {
      OPENAI_API_KEY: "sk-...",
      ANTHROPIC_API_KEY: "sk-ant-..."
    },
    // ä»»æ„é”®å€¼å¯¹
    CUSTOM_VAR: "value"
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `shellEnv.enabled` | boolean | `false` | æ˜¯å¦ä»ç™»å½• shell å¯¼å…¥ç¯å¢ƒå˜é‡ï¼ˆä»…å¯¼å…¥ç¼ºå¤±çš„é”®ï¼‰ |
| `shellEnv.timeoutMs` | number | `15000` | shell ç¯å¢ƒå¯¼å…¥è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰ |
| `vars` | object | - | å†…è”ç¯å¢ƒå˜é‡ï¼ˆé”®å€¼å¯¹ï¼‰ |

**æ³¨æ„**ï¼š`vars` ä»…åœ¨è¿›ç¨‹ç¯å¢ƒå˜é‡ä¸­ç¼ºå¤±å¯¹åº”é”®æ—¶åº”ç”¨ã€‚æ°¸è¿œä¸ä¼šè¦†ç›–ç°æœ‰ç¯å¢ƒå˜é‡ã€‚

::: info ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§
è¿›ç¨‹ç¯å¢ƒå˜é‡ > `.env` æ–‡ä»¶ > `~/.clawdbot/.env` > é…ç½®æ–‡ä»¶ä¸­çš„ `env.vars`

### `wizard`

ç”± CLI å‘å¯¼ï¼ˆ`onboard`ï¼Œ`configure`ï¼Œ`doctor`ï¼‰å†™å…¥çš„å…ƒæ•°æ®ã€‚

```json5
{
  wizard: {
    lastRunAt: "2026-01-01T00:00:00.000Z",
    lastRunVersion: "2026.1.4",
    lastRunCommit: "abc1234",
    lastRunCommand: "configure",
    lastRunMode: "local"
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `lastRunAt` | string | - | æœ€åè¿è¡Œå‘å¯¼çš„æ—¶é—´ |
| `lastRunVersion` | string | - | æœ€åè¿è¡Œå‘å¯¼æ—¶çš„ Clawdbot ç‰ˆæœ¬ |
| `lastRunCommit` | string | - | æœ€åè¿è¡Œå‘å¯¼æ—¶çš„ Git commit hash |
| `lastRunCommand` | string | - | æœ€åè¿è¡Œçš„å‘å¯¼å‘½ä»¤ |
| `lastRunMode` | string | - | å‘å¯¼è¿è¡Œæ¨¡å¼ï¼ˆ`local` \| `remote`ï¼‰ |

### `diagnostics`

è¯Šæ–­é¥æµ‹å’Œ OpenTelemetry é…ç½®ã€‚

```json5
{
  diagnostics: {
    enabled: true,
    flags: ["debug-mode", "verbose-tool-calls"],
    otel: {
      enabled: false,
      endpoint: "https://otel.example.com",
      protocol: "http/protobuf",
      headers: {
        "X-Custom-Header": "value"
      },
      serviceName: "clawdbot",
      traces: true,
      metrics: true,
      logs: false,
      sampleRate: 0.1,
      flushIntervalMs: 5000
    },
    cacheTrace: {
      enabled: false,
      filePath: "/tmp/clawdbot/trace-cache.json",
      includeMessages: true,
      includePrompt: true,
      includeSystem: false
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `enabled` | boolean | `false` | å¯ç”¨è¯Šæ–­åŠŸèƒ½ |
| `flags` | string[] | - | è¯Šæ–­æ ‡å¿—åˆ—è¡¨ |
| `otel.enabled` | boolean | `false` | å¯ç”¨ OpenTelemetry é¥æµ‹ |
| `otel.endpoint` | string | - | OTEL æ”¶é›†å™¨ç«¯ç‚¹ |
| `otel.protocol` | string | - | OTEL åè®®ï¼ˆ`http/protobuf` \| `grpc`ï¼‰ |
| `otel.headers` | object | - | OTEL è¯·æ±‚å¤´ |
| `otel.serviceName` | string | - | OTEL æœåŠ¡åç§° |
| `otel.traces` | boolean | - | æ”¶é›†è¿½è¸ªæ•°æ® |
| `otel.metrics` | boolean | - | æ”¶é›†æŒ‡æ ‡æ•°æ® |
| `otel.logs` | boolean | - | æ”¶é›†æ—¥å¿—æ•°æ® |
| `otel.sampleRate` | number | - | é‡‡æ ·ç‡ï¼ˆ0-1ï¼‰ |
| `otel.flushIntervalMs` | number | - | åˆ·æ–°é—´éš”ï¼ˆæ¯«ç§’ï¼‰ |
| `cacheTrace.enabled` | boolean | `false` | å¯ç”¨è¿½è¸ªç¼“å­˜ |
| `cacheTrace.filePath` | string | - | è¿½è¸ªç¼“å­˜æ–‡ä»¶è·¯å¾„ |
| `cacheTrace.includeMessages` | boolean | - | åœ¨ç¼“å­˜ä¸­åŒ…å«æ¶ˆæ¯ |
| `cacheTrace.includePrompt` | boolean | - | åœ¨ç¼“å­˜ä¸­åŒ…å«æç¤º |
| `cacheTrace.includeSystem` | boolean | - | åœ¨ç¼“å­˜ä¸­åŒ…å«ç³»ç»Ÿæç¤º |

### `logging`

æ—¥å¿—é…ç½®ã€‚

```json5
{
  logging: {
    level: "info",
    file: "/tmp/clawdbot/clawdbot.log",
    consoleLevel: "info",
    consoleStyle: "pretty",
    redactSensitive: "tools",
    redactPatterns: [
      "\\bTOKEN\\b\\s*[=:]\\s*([\"']?)([^\\s\"']+)\\1",
      "/\\bsk-[A-Za-z0-9_-]{8,}\\b/gi"
    ]
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `level` | string | `info` | æ—¥å¿—çº§åˆ«ï¼ˆ`silent` \| `fatal` \| `error` \| `warn` \| `info` \| `debug` \| `trace`ï¼‰ |
| `file` | string | - | æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ï¼š`/tmp/clawdbot/clawdbot-YYYY-MM-DD.log`ï¼‰ |
| `consoleLevel` | string | `info` | æ§åˆ¶å°æ—¥å¿—çº§åˆ«ï¼ˆä¸ `level` é€‰é¡¹ç›¸åŒï¼‰ |
| `consoleStyle` | string | `pretty` | æ§åˆ¶å°è¾“å‡ºæ ·å¼ï¼ˆ`pretty` \| `compact` \| `json`ï¼‰ |
| `redactSensitive` | string | `tools` | æ•æ„Ÿä¿¡æ¯è„±æ•æ¨¡å¼ï¼ˆ`off` \| `tools`ï¼‰ |
| `redactPatterns` | string[] | - | è‡ªå®šä¹‰è„±æ•æ­£åˆ™æ¨¡å¼ï¼ˆè¦†ç›–é»˜è®¤å€¼ï¼‰ |

::: tip æ—¥å¿—æ–‡ä»¶è·¯å¾„
å¦‚æœä½ æƒ³è¦ä¸€ä¸ªç¨³å®šçš„æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œè®¾ç½® `logging.file` ä¸º `/tmp/clawdbot/clawdbot.log`ï¼ˆè€Œä¸æ˜¯é»˜è®¤çš„æ¯æ—¥è½®è½¬è·¯å¾„ï¼‰ã€‚

### `update`

æ›´æ–°é€šé“å’Œè‡ªåŠ¨æ£€æŸ¥é…ç½®ã€‚

```json5
{
  update: {
    channel: "stable",
    checkOnStart: true
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `channel` | string | `stable` | æ›´æ–°é€šé“ï¼ˆ`stable` \| `beta` \| `dev`ï¼‰ |
| `checkOnStart` | boolean | - | å¯åŠ¨æ—¶æ£€æŸ¥æ›´æ–° |

### `browser`

æµè§ˆå™¨è‡ªåŠ¨åŒ–é…ç½®ï¼ˆåŸºäº Playwrightï¼‰ã€‚

```json5
{
  browser: {
    enabled: true,
    controlUrl: "ws://localhost:9222",
    controlToken: "secret-token",
    cdpUrl: "http://localhost:9222",
    remoteCdpTimeoutMs: 10000,
    remoteCdpHandshakeTimeoutMs: 5000,
    color: "#3b82f6",
    executablePath: "/usr/bin/google-chrome",
    headless: true,
    noSandbox: false,
    attachOnly: false,
    defaultProfile: "default",
    snapshotDefaults: {
      mode: "efficient"
    },
    profiles: {
      "profile-1": {
        cdpPort: 9222,
        cdpUrl: "http://localhost:9222",
        driver: "clawd",
        color: "#ff0000"
      }
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `enabled` | boolean | - | å¯ç”¨æµè§ˆå™¨å·¥å…· |
| `controlUrl` | string | - | æµè§ˆå™¨æ§åˆ¶ WebSocket URL |
| `controlToken` | string | - | æµè§ˆå™¨æ§åˆ¶è®¤è¯ä»¤ç‰Œ |
| `cdpUrl` | string | - | Chrome DevTools Protocol URL |
| `remoteCdpTimeoutMs` | number | - | è¿œç¨‹ CDP è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰ |
| `remoteCdpHandshakeTimeoutMs` | number | - | è¿œç¨‹ CDP æ¡æ‰‹è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰ |
| `color` | string | - | UI ä¸­æ˜¾ç¤ºçš„åå…­è¿›åˆ¶é¢œè‰² |
| `executablePath` | string | - | æµè§ˆå™¨å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ |
| `headless` | boolean | - | æ— å¤´æ¨¡å¼ |
| `noSandbox` | boolean | - | ç¦ç”¨æ²™ç®±ï¼ˆLinux ä¸Šéœ€è¦ï¼‰ |
| `attachOnly` | boolean | - | ä»…é™„åŠ åˆ°ç°æœ‰æµè§ˆå™¨å®ä¾‹ |
| `defaultProfile` | string | - | é»˜è®¤é…ç½®æ–‡ä»¶ ID |
| `snapshotDefaults.mode` | string | - | å¿«ç…§æ¨¡å¼ï¼ˆ`efficient`ï¼‰ |
| `profiles` | object | - | é…ç½®æ–‡ä»¶æ˜ å°„ï¼ˆé”®ï¼šé…ç½®æ–‡ä»¶åç§°ï¼Œå€¼ï¼šé…ç½®ï¼‰ |

**Profile é…ç½®**ï¼š
- `cdpPort`ï¼šCDP ç«¯å£ï¼ˆ1-65535ï¼‰
- `cdpUrl`ï¼šCDP URL
- `driver`ï¼šé©±åŠ¨ç±»å‹ï¼ˆ`clawd` \| `extension`ï¼‰
- `color`ï¼šé…ç½®æ–‡ä»¶çš„åå…­è¿›åˆ¶é¢œè‰²

::: warning æµè§ˆå™¨ Profile å‘½å
Profile åç§°å¿…é¡»åªåŒ…å«å°å†™å­—æ¯ã€æ•°å­—å’Œè¿å­—ç¬¦ï¼š`^[a-z0-9-]+$`

### `ui`

UI è‡ªå®šä¹‰é…ç½®ï¼ˆControl UIã€WebChatï¼‰ã€‚

```json5
{
  ui: {
    seamColor: "#3b82f6",
    assistant: {
      name: "Clawdbot",
      avatar: "avatars/clawdbot.png"
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `seamColor` | string | - | Seam é¢œè‰²çš„åå…­è¿›åˆ¶å€¼ |
| `assistant.name` | string | - | åŠ©æ‰‹æ˜¾ç¤ºåç§°ï¼ˆæœ€å¤š 50 å­—ç¬¦ï¼‰ |
| `assistant.avatar` | string | - | åŠ©æ‰‹å¤´åƒè·¯å¾„æˆ– URLï¼ˆæœ€å¤š 200 å­—ç¬¦ï¼‰ |

**å¤´åƒæ”¯æŒ**ï¼š
- å·¥ä½œåŒºç›¸å¯¹è·¯å¾„ï¼ˆå¿…é¡»åœ¨ä»£ç†å·¥ä½œåŒºå†…ï¼‰
- `http(s)` URL
- `data:` URI

## è®¤è¯é…ç½®

### `auth`

è®¤è¯é…ç½®æ–‡ä»¶å…ƒæ•°æ®ï¼ˆä¸å­˜å‚¨å¯†é’¥ï¼Œä»…æ˜ å°„é…ç½®æ–‡ä»¶åˆ°æä¾›å•†å’Œæ¨¡å¼ï¼‰ã€‚

```json5
{
  auth: {
    profiles: {
      "anthropic:me@example.com": {
        provider: "anthropic",
        mode: "oauth",
        email: "me@example.com"
      },
      "anthropic:work": {
        provider: "anthropic",
        mode: "api_key"
      },
      "openai:default": {
        provider: "openai",
        mode: "api_key"
      }
    },
    order: {
      anthropic: ["anthropic:me@example.com", "anthropic:work"],
      openai: ["openai:default"]
    },
    cooldowns: {
      billingBackoffHours: 24,
      billingBackoffHoursByProvider: {
        anthropic: 48
      },
      billingMaxHours: 168,
      failureWindowHours: 1
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `profiles` | object | - | é…ç½®æ–‡ä»¶æ˜ å°„ï¼ˆé”®ï¼šé…ç½®æ–‡ä»¶ IDï¼Œå€¼ï¼šé…ç½®ï¼‰ |
| `profiles.<profileId>.provider` | string | - | æä¾›å•†åç§° |
| `profiles.<profileId>.mode` | string | - | è®¤è¯æ¨¡å¼ï¼ˆ`api_key` \| `oauth` \| `token`ï¼‰ |
| `profiles.<profileId>.email` | string | - | OAuth é‚®ç®±ï¼ˆå¯é€‰ï¼‰ |
| `order` | object | - | æä¾›å•†æ•…éšœè½¬ç§»é¡ºåº |
| `cooldowns.billingBackoffHours` | number | - | è®¡è´¹é—®é¢˜é€€é¿æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ |
| `cooldowns.billingBackoffHoursByProvider` | object | - | æ¯ä¸ªæä¾›å•†çš„è®¡è´¹é€€é¿æ—¶é•¿ |
| `cooldowns.billingMaxHours` | number | - | æœ€å¤§è®¡è´¹é€€é¿æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ |
| `cooldowns.failureWindowHours` | number | - | å¤±è´¥çª—å£æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ |

::: tip Claude Code CLI è‡ªåŠ¨åŒæ­¥
Clawdbot è‡ªåŠ¨å°† OAuth ä»¤ç‰Œä» Claude Code CLI åŒæ­¥åˆ° `auth-profiles.json`ï¼ˆå½“å­˜åœ¨äº Gateway ä¸»æœºä¸Šæ—¶ï¼‰ï¼š
- macOSï¼šKeychain é¡¹ç›® "Claude Code-credentials"ï¼ˆé€‰æ‹©"å§‹ç»ˆå…è®¸"ä»¥é¿å… launchd æç¤ºï¼‰
- Linux/Windowsï¼š`~/.claude/.credentials.json`

**è®¤è¯å­˜å‚¨ä½ç½®**ï¼š
- `<agentDir>/auth-profiles.json`ï¼ˆé»˜è®¤ï¼š`~/.clawdbot/agents/<agentId>/agent/auth-profiles.json`ï¼‰
- é—ç•™å¯¼å…¥ï¼š`~/.clawdbot/credentials/oauth.json`

**åµŒå…¥ä»£ç†è¿è¡Œæ—¶ç¼“å­˜**ï¼š
- `<agentDir>/auth.json`ï¼ˆè‡ªåŠ¨ç®¡ç†ï¼›ä¸è¦æ‰‹åŠ¨ç¼–è¾‘ï¼‰

## æ¨¡å‹é…ç½®

### `models`

AI æ¨¡å‹æä¾›å•†å’Œé…ç½®ã€‚

```json5
{
  models: {
    mode: "merge",
    providers: {
      "openai": {
        baseUrl: "https://api.openai.com/v1",
        apiKey: "${OPENAI_API_KEY}",
        auth: "api_key",
        api: "openai-completions",
        headers: {
          "X-Custom-Header": "value"
        },
        models: [
          {
            id: "gpt-4",
            name: "GPT-4",
            api: "openai-completions",
            reasoning: false,
            input: ["text"],
            cost: {
              input: 0.000005,
              output: 0.000015,
              cacheRead: 0.000001,
              cacheWrite: 0.000005
            },
            contextWindow: 128000,
            maxTokens: 4096,
            compat: {
              supportsStore: true,
              supportsDeveloperRole: true,
              supportsReasoningEffort: true,
              maxTokensField: "max_tokens"
            }
          }
        ]
      },
      "anthropic": {
        apiKey: "${ANTHROPIC_API_KEY}",
        auth: "oauth",
        api: "anthropic-messages",
        models: [
          {
            id: "claude-opus-4-5",
            name: "Claude Opus 4.5",
            api: "anthropic-messages",
            reasoning: true,
            input: ["text", "image"],
            contextWindow: 200000,
            maxTokens: 8192
          }
        ]
      },
      "ollama": {
        baseUrl: "http://localhost:11434",
        apiKey: "ollama"
      },
      "vercel-gateway": {
        apiKey: "${VERCEL_GATEWAY_API_KEY}"
      }
    },
    bedrockDiscovery: {
      enabled: false,
      region: "us-east-1",
      providerFilter: ["anthropic"],
      refreshInterval: 3600000,
      defaultContextWindow: 200000,
      defaultMaxTokens: 4096
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `mode` | string | - | æ¨¡å‹åˆå¹¶æ¨¡å¼ï¼ˆ`merge` \| `replace`ï¼‰ |
| `providers` | object | - | æä¾›å•†æ˜ å°„ï¼ˆé”®ï¼šæä¾›å•† IDï¼Œå€¼ï¼šæä¾›å•†é…ç½®ï¼‰ |
| `providers.<providerId>.baseUrl` | string | - | API åŸºç¡€ URL |
| `providers.<providerId>.apiKey` | string | - | API å¯†é’¥ï¼ˆæ”¯æŒç¯å¢ƒå˜é‡æ›¿æ¢ï¼‰ |
| `providers.<providerId>.auth` | string | - | è®¤è¯ç±»å‹ï¼ˆ`api_key` \| `aws-sdk` \| `oauth` \| `token`ï¼‰ |
| `providers.<providerId>.api` | string | - | API ç±»å‹ï¼ˆ`openai-completions` \| `openai-responses` \| `anthropic-messages` \| `google-generative-ai` \| `github-copilot` \| `bedrock-converse-stream`ï¼‰ |
| `providers.<providerId>.authHeader` | boolean | - | æ˜¯å¦ä½¿ç”¨è®¤è¯å¤´ |
| `providers.<providerId>.headers` | object | - | è‡ªå®šä¹‰ HTTP å¤´ |
| `providers.<providerId>.models` | array | - | æ¨¡å‹å®šä¹‰åˆ—è¡¨ |
| `bedrockDiscovery.enabled` | boolean | `false` | å¯ç”¨ AWS Bedrock æ¨¡å‹å‘ç° |
| `bedrockDiscovery.region` | string | - | AWS åŒºåŸŸ |
| `bedrockDiscovery.providerFilter` | string[] | - | Bedrock æä¾›å•†è¿‡æ»¤å™¨ |
| `bedrockDiscovery.refreshInterval` | number | - | åˆ·æ–°é—´éš”ï¼ˆæ¯«ç§’ï¼‰ |
| `bedrockDiscovery.defaultContextWindow` | number | - | é»˜è®¤ä¸Šä¸‹æ–‡çª—å£ |
| `bedrockDiscovery.defaultMaxTokens` | number | - | é»˜è®¤æœ€å¤§ä»¤ç‰Œæ•° |

**æ¨¡å‹å®šä¹‰å­—æ®µ**ï¼š
- `id`ï¼šæ¨¡å‹ IDï¼ˆå¿…å¡«ï¼‰
- `name`ï¼šæ¨¡å‹æ˜¾ç¤ºåç§°ï¼ˆå¿…å¡«ï¼‰
- `api`ï¼šAPI ç±»å‹
- `reasoning`ï¼šæ˜¯å¦ä¸ºæ¨ç†æ¨¡å‹
- `input`ï¼šæ”¯æŒçš„è¾“å…¥ç±»å‹ï¼ˆ`text` \| `image`ï¼‰
- `cost.input`ï¼šè¾“å…¥æˆæœ¬
- `cost.output`ï¼šè¾“å‡ºæˆæœ¬
- `cost.cacheRead`ï¼šç¼“å­˜è¯»å–æˆæœ¬
- `cost.cacheWrite`ï¼šç¼“å­˜å†™å…¥æˆæœ¬
- `contextWindow`ï¼šä¸Šä¸‹æ–‡çª—å£å¤§å°
- `maxTokens`ï¼šæœ€å¤§ä»¤ç‰Œæ•°
- `compat`ï¼šå…¼å®¹æ€§æ ‡å¿—

## ä»£ç†é…ç½®

### `agents`

ä»£ç†åˆ—è¡¨å’Œé»˜è®¤é…ç½®ã€‚

```json5
{
  agents: {
    defaults: {
      workspace: "~/clawd",
      repoRoot: "~/Projects/clawdbot",
      skipBootstrap: false,
      bootstrapMaxChars: 20000,
      userTimezone: "America/Chicago",
      timeFormat: "auto",
      model: {
        primary: "anthropic/claude-opus-4-5",
        fallbacks: [
          "openai/gpt-4",
          "vercel-gateway/gpt-4"
        ]
      },
      identity: {
        name: "Clawdbot",
        theme: "helpful sloth",
        emoji: "ğŸ¦",
        avatar: "avatars/clawdbot.png"
      },
      groupChat: {
        mentionPatterns: ["@clawd", "clawdbot"]
      },
      sandbox: {
        mode: "off",
        scope: "session",
        workspaceAccess: "rw",
        workspaceRoot: "/tmp/clawdbot-sandbox",
        docker: {
          image: "clawdbot/agent:latest",
          network: "bridge",
          env: {
            "CUSTOM_VAR": "value"
          },
          setupCommand: "npm install",
          limits: {
            memory: "512m",
            cpu: "0.5"
          }
        },
        browser: {
          enabled: true
        },
        prune: {
          enabled: true,
          keepLastN: 3
        }
      },
      subagents: {
        allowAgents: ["*"]
      },
      tools: {
        profile: "full-access",
        allow: ["read", "write", "edit", "browser"],
        deny: ["exec"]
      },
      concurrency: {
        maxConcurrentSessions: 5,
        maxConcurrentToolCalls: 10
      },
      cli: {
        backend: {
          command: "clawdbot agent",
          args: ["--thinking", "high"],
          output: "json",
          resumeOutput: "json",
          input: "stdin",
          maxPromptArgChars: 10000,
          env: {},
          clearEnv: ["NODE_ENV"],
          modelArg: "--model",
          modelAliases: {
            "opus": "anthropic/claude-opus-4-5"
          },
          sessionArg: "--session",
          sessionArgs: ["--verbose"],
          resumeArgs: [],
          sessionMode: "existing",
          sessionIdFields: ["agent", "channel", "accountId", "peer"],
          systemPromptArg: "--system-prompt",
          systemPromptMode: "append",
          systemPromptWhen: "always",
          imageArg: "--image",
          imageMode: "repeat",
          serialize: false
        }
      }
    },
    list: [
      {
        id: "main",
        default: true,
        name: "Main Assistant",
        workspace: "~/clawd-main",
        agentDir: "~/.clawdbot/agents/main/agent",
        model: "anthropic/claude-opus-4-5",
        identity: {
          name: "Samantha",
          theme: "helpful sloth",
          emoji: "ğŸ¦¥",
          avatar: "avatars/samantha.png"
        },
        groupChat: {
          mentionPatterns: ["@samantha", "sam", "assistant"]
        },
        sandbox: {
          mode: "non-main"
        },
        subagents: {
          allowAgents: ["research", "writer"]
        },
        tools: {
          allow: ["read", "write", "browser"],
          deny: []
        }
      },
      {
        id: "work",
        workspace: "~/clawd-work",
        model: {
          primary: "openai/gpt-4",
          fallbacks: []
        }
      }
    ]
  }
}
```

**é»˜è®¤é…ç½®**ï¼ˆ`agents.defaults`ï¼‰ï¼š

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `workspace` | string | `~/clawd` | ä»£ç†å·¥ä½œåŒºç›®å½• |
| `repoRoot` | string | - | Git ä»“åº“æ ¹ç›®å½•ï¼ˆç”¨äºç³»ç»Ÿæç¤ºï¼‰ |
| `skipBootstrap` | boolean | `false` | è·³è¿‡å·¥ä½œåŒºå¼•å¯¼æ–‡ä»¶åˆ›å»º |
| `bootstrapMaxChars` | number | `20000` | æ¯ä¸ªå¼•å¯¼æ–‡ä»¶çš„æœ€å¤§å­—ç¬¦æ•° |
| `userTimezone` | string | - | ç”¨æˆ·æ—¶åŒºï¼ˆç³»ç»Ÿæç¤ºä¸Šä¸‹æ–‡ï¼‰ |
| `timeFormat` | string | `auto` | æ—¶é—´æ ¼å¼ï¼ˆ`auto` \| `12` \| `24`ï¼‰ |
| `model.primary` | string | - | ä¸»è¦æ¨¡å‹ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼š`provider/model`ï¼‰ |
| `model.fallbacks` | string[] | - | æ•…éšœè½¬ç§»æ¨¡å‹åˆ—è¡¨ |
| `identity.name` | string | - | ä»£ç†åç§° |
| `identity.theme` | string | - | ä»£ç†ä¸»é¢˜ |
| `identity.emoji` | string | - | ä»£ç† emoji |
| `identity.avatar` | string | - | ä»£ç†å¤´åƒè·¯å¾„æˆ– URL |
| `groupChat.mentionPatterns` | string[] | - | ç¾¤ç»„æåŠæ¨¡å¼ï¼ˆæ­£åˆ™ï¼‰ |
| `groupChat.historyLimit` | number | - | ç¾¤ç»„å†å²é™åˆ¶ |
| `sandbox.mode` | string | - | æ²™ç®±æ¨¡å¼ï¼ˆ`off` \| `non-main` \| `all`ï¼‰ |
| `sandbox.scope` | string | - | æ²™ç®±èŒƒå›´ï¼ˆ`session` \| `agent` \| `shared`ï¼‰ |
| `sandbox.workspaceAccess` | string | - | å·¥ä½œåŒºè®¿é—®æƒé™ï¼ˆ`none` \| `ro` \| `rw`ï¼‰ |
| `sandbox.workspaceRoot` | string | - | è‡ªå®šä¹‰æ²™ç®±å·¥ä½œåŒºæ ¹ç›®å½• |
| `subagents.allowAgents` | string[] | - | å…è®¸çš„å­ä»£ç† IDï¼ˆ`["*"]` = ä»»æ„ï¼‰ |
| `tools.profile` | string | - | å·¥å…·é…ç½®æ–‡ä»¶ï¼ˆåº”ç”¨åœ¨ allow/deny ä¹‹å‰ï¼‰ |
| `tools.allow` | string[] | - | å…è®¸çš„å·¥å…·åˆ—è¡¨ |
| `tools.deny` | string[] | - | æ‹’ç»çš„å·¥å…·åˆ—è¡¨ï¼ˆdeny ä¼˜å…ˆï¼‰ |
| `concurrency.maxConcurrentSessions` | number | - | æœ€å¤§å¹¶å‘ä¼šè¯æ•° |
| `concurrency.maxConcurrentToolCalls` | number | - | æœ€å¤§å¹¶å‘å·¥å…·è°ƒç”¨æ•° |

**ä»£ç†åˆ—è¡¨**ï¼ˆ`agents.list`ï¼‰ï¼š

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `id` | string | å¿…å¡« | ä»£ç† IDï¼ˆç¨³å®šæ ‡è¯†ç¬¦ï¼‰ |
| `default` | boolean | `false` | æ˜¯å¦ä¸ºé»˜è®¤ä»£ç†ï¼ˆå¤šä¸ªæ—¶ç¬¬ä¸€ä¸ªè·èƒœï¼‰ |
| `name` | string | - | ä»£ç†æ˜¾ç¤ºåç§° |
| `workspace` | string | `~/clawd-<agentId>` | ä»£ç†å·¥ä½œåŒºï¼ˆè¦†ç›–é»˜è®¤å€¼ï¼‰ |
| `agentDir` | string | `~/.clawdbot/agents/<agentId>/agent` | ä»£ç†ç›®å½• |
| `model` | string/object | - | æ¯ä¸ªä»£ç†çš„æ¨¡å‹é…ç½® |
| `identity` | object | - | æ¯ä¸ªä»£ç†çš„èº«ä»½é…ç½® |
| `groupChat` | object | - | æ¯ä¸ªä»£ç†çš„ç¾¤ç»„èŠå¤©é…ç½® |
| `sandbox` | object | - | æ¯ä¸ªä»£ç†çš„æ²™ç®±é…ç½® |
| `subagents` | object | - | æ¯ä¸ªä»£ç†çš„å­ä»£ç†é…ç½® |
| `tools` | object | - | æ¯ä¸ªä»£ç†çš„å·¥å…·é™åˆ¶ |

::: tip æ¨¡å‹é…ç½®å½¢å¼
ä»£ç†çš„ `model` å­—æ®µå¯ä»¥é‡‡ç”¨ä¸¤ç§å½¢å¼ï¼š
- **å­—ç¬¦ä¸²å½¢å¼**ï¼š`"provider/model"`ï¼ˆä»…è¦†ç›– `primary`ï¼‰
- **å¯¹è±¡å½¢å¼**ï¼š`{ primary, fallbacks }`ï¼ˆè¦†ç›– `primary` å’Œ `fallbacks`ï¼›`[]` ç¦ç”¨è¯¥ä»£ç†çš„å…¨å±€æ•…éšœè½¬ç§»ï¼‰

## ç»‘å®šé…ç½®

### `bindings`

å°†å…¥ç«™æ¶ˆæ¯è·¯ç”±åˆ°ç‰¹å®šä»£ç†ã€‚

```json5
{
  bindings: [
    {
      agentId: "main",
      match: {
        channel: "whatsapp",
        accountId: "personal",
        peer: {
          kind: "dm",
          id: "+15555550123"
        },
        guildId: "123456789012345678",
        teamId: "T12345"
      }
    },
    {
      agentId: "work",
      match: {
        channel: "whatsapp",
        accountId: "biz"
      }
    },
    {
      agentId: "main",
      match: {
        channel: "telegram"
      }
    }
  ]
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `agentId` | string | å¿…å¡« | ç›®æ ‡ä»£ç† IDï¼ˆå¿…é¡»åœ¨ `agents.list` ä¸­ï¼‰ |
| `match.channel` | string | å¿…å¡« | åŒ¹é…çš„æ¸ é“ |
| `match.accountId` | string | - | åŒ¹é…çš„è´¦æˆ· IDï¼ˆ`*` = ä»»æ„è´¦æˆ·ï¼›çœç•¥ = é»˜è®¤è´¦æˆ·ï¼‰ |
| `match.peer` | object | - | åŒ¹é…çš„åŒè¡Œï¼ˆå¯¹ç­‰æ–¹ï¼‰ |
| `match.peer.kind` | string | - | åŒè¡Œç±»å‹ï¼ˆ`dm` \| `group` \| `channel`ï¼‰ |
| `match.peer.id` | string | - | åŒè¡Œ ID |
| `match.guildId` | string | - | Discord æœåŠ¡å™¨ ID |
| `match.teamId` | string | - | Slack/Microsoft Teams å›¢é˜Ÿ ID |

**ç¡®å®šæ€§åŒ¹é…é¡ºåº**ï¼š
1. `match.peer`ï¼ˆæœ€å…·ä½“ï¼‰
2. `match.guildId`
3. `match.teamId`
4. `match.accountId`ï¼ˆç²¾ç¡®ï¼Œæ— åŒè¡Œ/guild/teamï¼‰
5. `match.accountId: "*"`ï¼ˆæ¸ é“èŒƒå›´ï¼Œæ— åŒè¡Œ/guild/teamï¼‰
6. é»˜è®¤ä»£ç†ï¼ˆ`agents.list[].default`ï¼Œå¦åˆ™ç¬¬ä¸€ä¸ªåˆ—è¡¨æ¡ç›®ï¼Œå¦åˆ™ `"main"`ï¼‰

åœ¨æ¯ä¸ªåŒ¹é…å±‚å†…ï¼Œ`bindings` ä¸­çš„ç¬¬ä¸€ä¸ªåŒ¹é…æ¡ç›®è·èƒœã€‚

## å·¥å…·é…ç½®

### `tools`

å·¥å…·æ‰§è¡Œå’Œå®‰å…¨ç­–ç•¥ã€‚

```json5
{
  tools: {
    exec: {
      elevated: {
        enabled: false,
        allowFrom: {
          whatsapp: ["+15555550123"],
          telegram: ["tg:123456789"]
        }
      }
    },
    browser: {
      enabled: true
    },
    agentToAgent: {
      enabled: false,
      allow: ["main", "work"]
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `exec.elevated.enabled` | boolean | `false` | å¯ç”¨æå‡ bashï¼ˆ`! <cmd>`ï¼‰ |
| `exec.elevated.allowFrom` | object | - | æ¯ä¸ªæ¸ é“çš„æå‡ allowlist |
| `browser.enabled` | boolean | - | å¯ç”¨æµè§ˆå™¨å·¥å…· |
| `agentToAgent.enabled` | boolean | - | å¯ç”¨ä»£ç†åˆ°ä»£ç†æ¶ˆæ¯ä¼ é€’ |
| `agentToAgent.allow` | string[] | - | å…è®¸çš„ä»£ç† ID åˆ—è¡¨ |

## å¹¿æ’­é…ç½®

### `broadcast`

å°†æ¶ˆæ¯å‘é€åˆ°å¤šä¸ªæ¸ é“/ä»£ç†ã€‚

```json5
{
  broadcast: {
    strategy: "parallel",
    "+15555550123": ["main", "work"],
    "120363403215116621@g.us": ["transcribe"],
    "strategy": "sequential"
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `strategy` | string | - | å¹¿æ’­ç­–ç•¥ï¼ˆ`parallel` \| `sequential`ï¼‰ |
| `<peerId>` | string[] | - | å°†æ¶ˆæ¯å‘é€åˆ°è¿™äº›ä»£ç†ï¼ˆåŠ¨æ€é”®ï¼‰ |

::: info å¹¿æ’­é”®
- é”®æ ¼å¼ï¼š`<peerId>`ï¼ˆä¾‹å¦‚ï¼š`+15555550123` æˆ– `"120363403215116621@g.us"`ï¼‰
- å€¼ï¼šä»£ç† ID æ•°ç»„
- ç‰¹æ®Šé”® `"strategy"`ï¼šæ§åˆ¶å¹¶è¡Œä¸é¡ºåºæ‰§è¡Œ

## éŸ³é¢‘é…ç½®

### `audio`

éŸ³é¢‘å’Œè½¬å½•é…ç½®ã€‚

```json5
{
  audio: {
    transcription: {
      enabled: true,
      provider: "whisper",
      model: "base"
    }
  }
}
```

::: info å­—æ®µè¯¦æƒ…
å®Œæ•´çš„è½¬å½•é…ç½®å­—æ®µè¯·å‚è€ƒ `zod-schema.core.ts` ä¸­çš„ `TranscribeAudioSchema`ã€‚

## æ¶ˆæ¯é…ç½®

### `messages`

æ¶ˆæ¯å‰ç¼€ã€ç¡®è®¤å’Œé˜Ÿåˆ—è¡Œä¸ºã€‚

```json5
{
  messages: {
    responsePrefix: "ğŸ¦",
    ackReaction: "ğŸ‘€",
    ackReactionScope: "group-mentions",
    removeAckAfterReply: false,
    queue: {
      mode: "collect",
      debounceMs: 1000,
      cap: 20,
      drop: "summarize",
      byChannel: {
        whatsapp: "collect",
        telegram: "collect",
        discord: "collect",
        imessage: "collect",
        webchat: "collect"
      }
    },
    inbound: {
      debounceMs: 2000,
      byChannel: {
        whatsapp: 5000,
        slack: 1500,
        discord: 1500
      }
    },
    groupChat: {
      historyLimit: 50
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `responsePrefix` | string | - | æ‰€æœ‰å‡ºç«™å›å¤çš„å‰ç¼€ï¼ˆæ”¯æŒæ¨¡æ¿å˜é‡ï¼‰ |
| `ackReaction` | string | - | ç¡®è®¤å…¥ç«™æ¶ˆæ¯çš„ emoji |
| `ackReactionScope` | string | - | ä½•æ—¶å‘é€ç¡®è®¤ï¼ˆ`group-mentions` \| `group-all` \| `direct` \| `all`ï¼‰ |
| `removeAckAfterReply` | boolean | `false` | å‘é€å›å¤åç§»é™¤ç¡®è®¤ |
| `queue.mode` | string | - | é˜Ÿåˆ—æ¨¡å¼ï¼ˆ`steer` \| `followup` \| `collect` \| `steer-backlog` \| `queue` \| `interrupt`ï¼‰ |
| `queue.debounceMs` | number | - | é˜Ÿåˆ—å»æŠ–åŠ¨ï¼ˆæ¯«ç§’ï¼‰ |
| `queue.cap` | number | - | é˜Ÿåˆ—ä¸Šé™ |
| `queue.drop` | string | - | ä¸¢å¼ƒç­–ç•¥ï¼ˆ`old` \| `new` \| `summarize`ï¼‰ |
| `queue.byChannel` | object | - | æ¯ä¸ªæ¸ é“çš„é˜Ÿåˆ—æ¨¡å¼ |
| `inbound.debounceMs` | number | - | å…¥ç«™æ¶ˆæ¯å»æŠ–åŠ¨ï¼ˆæ¯«ç§’ï¼›0 ç¦ç”¨ï¼‰ |
| `inbound.byChannel` | object | - | æ¯ä¸ªæ¸ é“çš„å»æŠ–åŠ¨æ—¶é•¿ |
| `groupChat.historyLimit` | number | - | ç¾¤ç»„å†å²ä¸Šä¸‹æ–‡é™åˆ¶ï¼ˆ0 ç¦ç”¨ï¼‰ |

**æ¨¡æ¿å˜é‡**ï¼ˆç”¨äº `responsePrefix`ï¼‰ï¼š

| å˜é‡ | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `{model}` | çŸ­æ¨¡å‹åç§° | `claude-opus-4-5`ï¼Œ`gpt-4` |
| `{modelFull}` | å®Œæ•´æ¨¡å‹æ ‡è¯†ç¬¦ | `anthropic/claude-opus-4-5` |
| `{provider}` | æä¾›å•†åç§° | `anthropic`ï¼Œ`openai` |
| `{thinkingLevel}` | å½“å‰æ¨ç†çº§åˆ« | `high`ï¼Œ`low`ï¼Œ`off` |
| `{identity.name}` | ä»£ç†èº«ä»½åç§° | ï¼ˆä¸ `"auto"` æ¨¡å¼ç›¸åŒï¼‰ |

::: tip WhatsApp è‡ªæˆ‘èŠå¤©
è‡ªæˆ‘èŠå¤©å›å¤é»˜è®¤ä½¿ç”¨ `[{identity.name}]`ï¼Œå¦åˆ™ä¸º `[clawdbot]`ï¼Œè¿™æ ·ç›¸åŒå·ç çš„å¯¹è¯ä¿æŒå¯è¯»æ€§ã€‚

## å‘½ä»¤é…ç½®

### `commands`

èŠå¤©å‘½ä»¤å¤„ç†é…ç½®ã€‚

```json5
{
  commands: {
    native: "auto",
    text: true,
    bash: false,
    bashForegroundMs: 2000,
    config: false,
    debug: false,
    restart: false,
    useAccessGroups: true
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `native` | string | `auto` | åŸç”Ÿå‘½ä»¤ï¼ˆ`auto` \| `true` \| `false`ï¼‰ |
| `text` | boolean | `true` | è§£æèŠå¤©æ¶ˆæ¯ä¸­çš„æ–œæ å‘½ä»¤ |
| `bash` | boolean | `false` | å…è®¸ `!`ï¼ˆ`/bash` çš„åˆ«åï¼‰ |
| `bashForegroundMs` | number | `2000` | bash å‰å°çª—å£ï¼ˆæ¯«ç§’ï¼‰ |
| `config` | boolean | `false` | å…è®¸ `/config`ï¼ˆå†™å…¥ç£ç›˜ï¼‰ |
| `debug` | boolean | `false` | å…è®¸ `/debug`ï¼ˆä»…è¿è¡Œæ—¶è¦†ç›–ï¼‰ |
| `restart` | boolean | `false` | å…è®¸ `/restart` + Gateway é‡å¯å·¥å…· |
| `useAccessGroups` | boolean | `true` | å¯¹å‘½ä»¤å¼ºåˆ¶è®¿é—®ç»„ allowlist/ç­–ç•¥ |

::: warning bash å‘½ä»¤
`commands.bash: true` å¯ç”¨ `! <cmd>` ä»¥è¿è¡Œä¸»æœº shell å‘½ä»¤ï¼ˆ`/bash <cmd>` ä¹Ÿä½œä¸ºåˆ«åå·¥ä½œï¼‰ã€‚éœ€è¦ `tools.elevated.enabled` å’Œå…è®¸åˆ—è¡¨ä¸­çš„å‘é€è€…ã€‚

## ä¼šè¯é…ç½®

### `session`

ä¼šè¯æŒä¹…åŒ–å’Œè¡Œä¸ºã€‚

```json5
{
  session: {
    activation: {
      defaultMode: "auto",
      defaultDurationMs: 900000,
      keepAlive: true
    },
    compaction: {
      auto: true,
      threshold: 0.8,
      strategy: "summary"
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `activation.defaultMode` | string | `auto` | é»˜è®¤æ¿€æ´»æ¨¡å¼ï¼ˆ`auto` \| `always` \| `manual`ï¼‰ |
| `activation.defaultDurationMs` | number | - | é»˜è®¤æ¿€æ´»æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰ |
| `activation.keepAlive` | boolean | - | ä¿æŒæ´»åŠ¨çŠ¶æ€ |
| `compaction.auto` | boolean | `true` | è‡ªåŠ¨å‹ç¼© |
| `compaction.threshold` | number | - | å‹ç¼©é˜ˆå€¼ï¼ˆ0-1ï¼‰ |
| `compaction.strategy` | string | - | å‹ç¼©ç­–ç•¥ |

::: info ä¼šè¯å‹ç¼©
ä¸Šä¸‹æ–‡æº¢å‡ºæ—¶è‡ªåŠ¨å‹ç¼©ï¼Œç„¶åå¤±è´¥ã€‚å‚è§ `CHANGELOG.md:122`ã€‚

## Cron é…ç½®

### `cron`

å®šæ—¶ä»»åŠ¡è°ƒåº¦ã€‚

```json5
{
  cron: {
    enabled: true,
    store: "~/.clawdbot/cron.json",
    maxConcurrentRuns: 5
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `enabled` | boolean | - | å¯ç”¨ Cron å¼•æ“ |
| `store` | string | - | Cron å­˜å‚¨æ–‡ä»¶è·¯å¾„ |
| `maxConcurrentRuns` | number | - | æœ€å¤§å¹¶å‘è¿è¡Œæ•° |

## Hooks é…ç½®

### `hooks`

Webhook å’Œäº‹ä»¶è½¬å‘ã€‚

```json5
{
  hooks: {
    enabled: true,
    path: "~/.clawdbot/hooks",
    token: "webhook-secret-token",
    maxBodyBytes: 1048576,
    presets: ["slack-alerts", "discord-notifications"],
    transformsDir: "~/.clawdbot/hook-transforms",
    mappings: [
      {
        pattern: "^agent:.*$",
        target: "https://hooks.example.com/agent-events",
        headers: {
          "Authorization": "Bearer ${WEBHOOK_AUTH}"
        }
      }
    ],
    gmail: {
      enabled: false,
      credentialsPath: "~/.clawdbot/gmail-credentials.json",
      subscriptionIds: ["subscription-1", "subscription-2"]
    },
    internal: {
      onMessage: "log-message",
      onToolCall: "log-tool-call",
      onError: "log-error"
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `enabled` | boolean | - | å¯ç”¨ Hooks |
| `path` | string | - | Hooks ç›®å½•è·¯å¾„ |
| `token` | string | - | Webhook è®¤è¯ä»¤ç‰Œ |
| `maxBodyBytes` | number | - | æœ€å¤§è¯·æ±‚ä½“å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| `presets` | string[] | - | é¢„è®¾ Hook åˆ—è¡¨ |
| `transformsDir` | string | - | Hook è½¬æ¢è„šæœ¬ç›®å½• |
| `mappings` | array | - | è‡ªå®šä¹‰ Hook æ˜ å°„ |
| `gmail.enabled` | boolean | - | å¯ç”¨ Gmail Pub/Sub |
| `gmail.credentialsPath` | string | - | Gmail å‡­è¯è·¯å¾„ |
| `gmail.subscriptionIds` | string[] | - | Gmail è®¢é˜… ID åˆ—è¡¨ |
| `internal.onMessage` | string | - | æ¶ˆæ¯å†…éƒ¨ Hook |
| `internal.onToolCall` | string | - | å·¥å…·è°ƒç”¨å†…éƒ¨ Hook |
| `internal.onError` | string | - | é”™è¯¯å†…éƒ¨ Hook |

## æ¸ é“é…ç½®

### `channels`

å¤šæ¸ é“æ¶ˆæ¯é›†æˆé…ç½®ã€‚

```json5
{
  channels: {
    whatsapp: {
      enabled: true,
      botToken: "123456:ABC...",
      dmPolicy: "pairing",
      allowFrom: ["+15555550123"],
      groups: {
        "*": { requireMention: true },
        "-1001234567890": {
          allowFrom: ["@admin"],
          systemPrompt: "Keep answers brief.",
          topics: {
            "99": {
              requireMention: false,
              skills: ["search"],
              systemPrompt: "Stay on topic."
            }
          }
        }
      },
      sendReadReceipts: true,
      textChunkLimit: 4000,
      chunkMode: "length",
      mediaMaxMb: 50,
      historyLimit: 50,
      replyToMode: "first",
      accounts: {
        default: {},
        personal: {},
        biz: {
          authDir: "~/.clawdbot/credentials/whatsapp/biz"
        }
      }
    },
    telegram: {
      enabled: true,
      botToken: "123456:ABC...",
      dmPolicy: "pairing",
      allowFrom: ["tg:123456789"],
      groups: {
        "*": { requireMention: true }
      },
      customCommands: [
        { command: "backup", description: "Git backup" },
        { command: "generate", description: "Create an image" }
      ],
      historyLimit: 50,
      replyToMode: "first",
      linkPreview: true,
      streamMode: "partial",
      draftChunk: {
        minChars: 200,
        maxChars: 800,
        breakPreference: "paragraph"
      }
    },
    discord: {
      enabled: true,
      token: "your-bot-token",
      mediaMaxMb: 8,
      allowBots: false,
      actions: {
        reactions: true,
        messages: true,
        threads: true,
        pins: true
      },
      guilds: {
        "123456789012345678": {
          requireMention: false,
          users: ["987654321098765432"],
          channels: {
            general: { allow: true },
            help: {
              allow: true,
              requireMention: true,
              users: ["987654321098765432"]
            }
          }
        }
      },
      historyLimit: 20,
      dm: {
        enabled: true,
        policy: "pairing",
        allowFrom: ["1234567890", "username"],
        groupEnabled: false,
        groupChannels: ["clawd-dm"]
      }
    },
    slack: {
      enabled: true,
      botToken: "xoxb-...",
      appToken: "xapp-...",
      channels: {
        "#general": { allow: true, requireMention: true }
      },
      historyLimit: 50,
      allowBots: false,
      reactionNotifications: "own",
      slashCommand: {
        enabled: true,
        name: "clawd",
        sessionPrefix: "slack:slash",
        ephemeral: true
      }
    },
    signal: {
      reactionNotifications: "own",
      reactionAllowlist: ["+15551234567"],
      historyLimit: 50
    },
    imessage: {
      enabled: true,
      cliPath: "imsg",
      dbPath: "~/Library/Messages/chat.db",
      dmPolicy: "pairing",
      allowFrom: ["+15555550123"],
      historyLimit: 50,
      includeAttachments: false,
      mediaMaxMb: 16
    }
  }
}
```

::: tip æ¸ é“ç‰¹å®šæ–‡æ¡£
æ¯ä¸ªæ¸ é“éƒ½æœ‰è¯¦ç»†çš„é…ç½®é€‰é¡¹ã€‚è¯·å‚è€ƒï¼š
- [WhatsApp æ¸ é“](../../platforms/whatsapp/)
- [Telegram æ¸ é“](../../platforms/telegram/)
- [Slack æ¸ é“](../../platforms/slack/)
- [Discord æ¸ é“](../../platforms/discord/)
- [Google Chat æ¸ é“](../../platforms/googlechat/)
- [Signal æ¸ é“](../../platforms/signal/)
- [iMessage æ¸ é“](../../platforms/imessage/)

**é€šç”¨æ¸ é“å­—æ®µ**ï¼š
- `enabled`ï¼šå¯ç”¨æ¸ é“
- `dmPolicy`ï¼šDM ç­–ç•¥ï¼ˆ`pairing` \| `allowlist` \| `open` \| `disabled`ï¼‰
- `allowFrom`ï¼šDM allowlistï¼ˆ`pairing` æ¨¡å¼ä¸‹æœªçŸ¥å‘é€è€…æ”¶åˆ°é…å¯¹ä»£ç ï¼‰
- `groupPolicy`ï¼šç¾¤ç»„ç­–ç•¥ï¼ˆ`open` \| `disabled` \| `allowlist`ï¼‰
- `historyLimit`ï¼šå†å²ä¸Šä¸‹æ–‡é™åˆ¶ï¼ˆ0 ç¦ç”¨ï¼‰

## Gateway é…ç½®

### `gateway`

Gateway WebSocket æœåŠ¡å™¨å’Œè®¤è¯ã€‚

```json5
{
  gateway: {
    port: 18789,
    mode: "local",
    bind: "loopback",
    controlUi: {
      enabled: true,
      basePath: "/",
      allowInsecureAuth: false,
      dangerouslyDisableDeviceAuth: false
    },
    auth: {
      mode: "token",
      token: "secret-gateway-token",
      password: "gateway-password",
      allowTailscale: false
    },
    trustedProxies: ["127.0.0.1", "10.0.0.0/8"],
    tailscale: {
      mode: "off",
      resetOnExit: false
    },
    remote: {
      url: "ws://gateway.example.com:18789",
      transport: "ssh",
      token: "remote-token",
      password: "remote-password",
      tlsFingerprint: "SHA256:...",
      sshTarget: "user@gateway-host",
      sshIdentity: "~/.ssh/id_ed25519"
    },
    reload: {
      mode: "hot",
      debounceMs: 1000
    },
    tls: {
      enabled: false,
      autoGenerate: true,
      certPath: "/path/to/cert.pem",
      keyPath: "/path/to/key.pem",
      caPath: "/path/to/ca.pem"
    },
    http: {
      endpoints: {
        chatCompletions: {
          enabled: true
        },
        responses: {
          enabled: true,
          maxBodyBytes: 10485760,
          files: {
            allowUrl: true,
            allowedMimes: ["text/*", "application/pdf"],
            maxBytes: 10485760,
            maxChars: 100000,
            maxRedirects: 10,
            timeoutMs: 30000,
            pdf: {
              maxPages: 50,
              maxPixels: 67108864,
              minTextChars: 0
            }
          },
          images: {
            allowUrl: true,
            allowedMimes: ["image/*"],
            maxBytes: 10485760,
            maxRedirects: 5,
            timeoutMs: 30000
          }
        }
      }
    },
    nodes: {
      browser: {
        mode: "auto",
        node: "macos-1"
      },
      allowCommands: [],
      denyCommands: ["rm -rf", ":(){ :|:& };:"]
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `port` | number | `18789` | Gateway WebSocket ç«¯å£ |
| `mode` | string | `local` | Gateway æ¨¡å¼ï¼ˆ`local` \| `remote`ï¼‰ |
| `bind` | string | - | ç»‘å®šåœ°å€ï¼ˆ`auto` \| `lan` \| `loopback` \| `custom` \| `tailnet`ï¼‰ |
| `controlUi.enabled` | boolean | - | å¯ç”¨æ§åˆ¶ UI |
| `controlUi.basePath` | string | - | UI åŸºç¡€è·¯å¾„ |
| `controlUi.allowInsecureAuth` | boolean | - | å…è®¸ä¸å®‰å…¨è®¤è¯ |
| `auth.mode` | string | - | è®¤è¯æ¨¡å¼ï¼ˆ`token` \| `password`ï¼‰ |
| `auth.token` | string | - | è®¤è¯ä»¤ç‰Œ |
| `auth.password` | string | - | è®¤è¯å¯†ç  |
| `auth.allowTailscale` | boolean | - | å…è®¸ Tailscale èº«ä»½éªŒè¯ |
| `tailscale.mode` | string | `off` | Tailscale æ¨¡å¼ï¼ˆ`off` \| `serve` \| `funnel`ï¼‰ |
| `tailscale.resetOnExit` | boolean | - | é€€å‡ºæ—¶é‡ç½® Serve/Funnel |
| `remote.url` | string | - | è¿œç¨‹ Gateway URL |
| `remote.transport` | string | - | è¿œç¨‹ä¼ è¾“ï¼ˆ`ssh` \| `direct`ï¼‰ |
| `remote.token` | string | - | è¿œç¨‹ä»¤ç‰Œ |
| `remote.password` | string | - | è¿œç¨‹å¯†ç  |
| `remote.tlsFingerprint` | string | - | è¿œç¨‹ TLS æŒ‡çº¹ |
| `remote.sshTarget` | string | - | SSH ç›®æ ‡ |
| `remote.sshIdentity` | string | - | SSH èº«ä»½æ–‡ä»¶è·¯å¾„ |
| `reload.mode` | string | - | é‡è½½æ¨¡å¼ï¼ˆ`off` \| `restart` \| `hot` \| `hybrid`ï¼‰ |
| `reload.debounceMs` | number | - | é‡è½½å»æŠ–åŠ¨ï¼ˆæ¯«ç§’ï¼‰ |
| `tls.enabled` | boolean | - | å¯ç”¨ TLS |
| `tls.autoGenerate` | boolean | - | è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦ |
| `nodes.browser.mode` | string | - | æµè§ˆå™¨èŠ‚ç‚¹æ¨¡å¼ï¼ˆ`auto` \| `manual` \| `off`ï¼‰ |
| `nodes.allowCommands` | string[] | - | å…è®¸çš„èŠ‚ç‚¹å‘½ä»¤ |
| `nodes.denyCommands` | string[] | - | æ‹’ç»çš„èŠ‚ç‚¹å‘½ä»¤ |

::: warning Tailscale ç»‘å®šé™åˆ¶
å¯ç”¨ Serve/Funnel æ—¶ï¼Œ`gateway.bind` å¿…é¡»ä¿æŒ `loopback`ï¼ˆClawdbot å¼ºåˆ¶æ‰§è¡Œæ­¤è§„åˆ™ï¼‰ã€‚

## æŠ€èƒ½é…ç½®

### `skills`

æŠ€èƒ½å¹³å°å’Œå®‰è£…ã€‚

```json5
{
  skills: {
    allowBundled: ["bird", "sherpa-onnx-tts"],
    load: {
      extraDirs: ["~/custom-skills"],
      watch: true,
      watchDebounceMs: 500
    },
    install: {
      preferBrew: false,
      nodeManager: "pnpm"
    },
    entries: {
      "search": {
        enabled: true,
        apiKey: "${SEARCH_API_KEY}",
        env: {
          "SEARCH_ENGINE": "google"
        },
        config: {
          "maxResults": 10
        }
      }
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `allowBundled` | string[] | - | å…è®¸çš„å†…ç½®æŠ€èƒ½åˆ—è¡¨ |
| `load.extraDirs` | string[] | - | é¢å¤–çš„æŠ€èƒ½ç›®å½• |
| `load.watch` | boolean | - | ç›‘è§†æŠ€èƒ½æ–‡ä»¶æ›´æ”¹ |
| `load.watchDebounceMs` | number | - | ç›‘è§†å»æŠ–åŠ¨ï¼ˆæ¯«ç§’ï¼‰ |
| `install.preferBrew` | boolean | - | é¦–é€‰ Homebrew å®‰è£… |
| `install.nodeManager` | string | - | èŠ‚ç‚¹ç®¡ç†å™¨ï¼ˆ`npm` \| `pnpm` \| `yarn` \| `bun`ï¼‰ |
| `entries.<skillId>.enabled` | boolean | - | å¯ç”¨æŠ€èƒ½ |
| `entries.<skillId>.apiKey` | string | - | æŠ€èƒ½ API å¯†é’¥ |
| `entries.<skillId>.env` | object | - | æŠ€èƒ½ç¯å¢ƒå˜é‡ |
| `entries.<skillId>.config` | object | - | æŠ€èƒ½é…ç½® |

## æ’ä»¶é…ç½®

### `plugins`

æ’ä»¶ç³»ç»Ÿé…ç½®ã€‚

```json5
{
  plugins: {
    enabled: true,
    allow: ["whatsapp", "telegram", "discord"],
    deny: [],
    load: {
      paths: ["~/.clawdbot/plugins", "./custom-plugins"]
    },
    slots: {
      memory: "custom-memory-provider"
    }
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `enabled` | boolean | - | å¯ç”¨æ’ä»¶ç³»ç»Ÿ |
| `allow` | string[] | - | å…è®¸çš„æ’ä»¶åˆ—è¡¨ |
| `deny` | string[] | - | æ‹’ç»çš„æ’ä»¶åˆ—è¡¨ |
| `load.paths` | string[] | - | æ’ä»¶åŠ è½½è·¯å¾„ |
| `slots.memory` | string | - | è‡ªå®šä¹‰å†…å­˜æä¾›ç¨‹åº |

## é…ç½® Includesï¼ˆ`$include`ï¼‰

ä½¿ç”¨ `$include` æŒ‡ä»¤å°†é…ç½®æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ã€‚

```json5
// ~/.clawdbot/clawdbot.json
{
  gateway: { port: 18789 },
  
  // åŒ…å«å•ä¸ªæ–‡ä»¶ï¼ˆæ›¿æ¢åŒ…å«é”®çš„å€¼ï¼‰
  agents: { "$include": "./agents.json5" },
  
  // åŒ…å«å¤šä¸ªæ–‡ä»¶ï¼ˆæŒ‰é¡ºåºæ·±åº¦åˆå¹¶ï¼‰
  broadcast: { 
    "$include": [
      "./clients/mueller.json5",
      "./clients/schmidt.json5"
    ]
  }
}
```

```json5
// ~/.clawdbot/agents.json5
{
  defaults: { sandbox: { mode: "all", scope: "session" } },
  list: [
    { id: "main", workspace: "~/clawd" }
  ]
}
```

**åˆå¹¶è¡Œä¸º**ï¼š
- **å•ä¸ªæ–‡ä»¶**ï¼šæ›¿æ¢åŒ…å« `$include` çš„å¯¹è±¡
- **æ–‡ä»¶æ•°ç»„**ï¼šæŒ‰é¡ºåºæ·±åº¦åˆå¹¶æ–‡ä»¶ï¼ˆåé¢çš„æ–‡ä»¶è¦†ç›–å‰é¢çš„ï¼‰
- **å…„å¼Ÿé”®**ï¼šåœ¨åŒ…å«ä¹‹ååˆå¹¶å…„å¼Ÿé”®ï¼ˆè¦†ç›–åŒ…å«çš„å€¼ï¼‰
- **å…„å¼Ÿé”® + æ•°ç»„/åŸºæœ¬ç±»å‹**ï¼šä¸æ”¯æŒï¼ˆåŒ…å«çš„å†…å®¹å¿…é¡»æ˜¯å¯¹è±¡ï¼‰

**è·¯å¾„è§£æ**ï¼š
- **ç›¸å¯¹è·¯å¾„**ï¼šç›¸å¯¹äºåŒ…å«æ–‡ä»¶è§£æ
- **ç»å¯¹è·¯å¾„**ï¼šæŒ‰åŸæ ·ä½¿ç”¨
- **çˆ¶ç›®å½•**ï¼š`../` å¼•ç”¨æŒ‰é¢„æœŸå·¥ä½œ

**åµŒå¥—åŒ…å«**ï¼š
åŒ…å«çš„æ–‡ä»¶æœ¬èº«å¯ä»¥åŒ…å« `$include` æŒ‡ä»¤ï¼ˆæœ€å¤š 10 å±‚æ·±åº¦ï¼‰ã€‚

## ç¯å¢ƒå˜é‡æ›¿æ¢

ä½ å¯ä»¥åœ¨ä»»ä½•é…ç½®å­—ç¬¦ä¸²å€¼ä¸­ç›´æ¥ä½¿ç”¨ `${VAR_NAME}` è¯­æ³•å¼•ç”¨ç¯å¢ƒå˜é‡ã€‚å˜é‡åœ¨é…ç½®åŠ è½½æ—¶æ›¿æ¢ï¼Œåœ¨éªŒè¯ä¹‹å‰ã€‚

```json5
{
  models: {
    providers: {
      "vercel-gateway": {
        apiKey: "${VERCEL_GATEWAY_API_KEY}"
      }
    }
  },
  gateway: {
    auth: {
      token: "${CLAWDBOT_GATEWAY_TOKEN}"
    }
  }
}
```

**è§„åˆ™**ï¼š
- åªåŒ¹é…å¤§å†™ç¯å¢ƒå˜é‡åç§°ï¼š`[A-Z_][A-Z0-9_]*`
- ç¼ºå¤±æˆ–ç©ºçš„ç¯å¢ƒå˜é‡åœ¨é…ç½®åŠ è½½æ—¶æŠ›å‡ºé”™è¯¯
- ä½¿ç”¨ `$${VAR}` è½¬ä¹‰ä»¥è¾“å‡ºå­—é¢é‡ `${VAR}`
- é€‚ç”¨äº `$include`ï¼ˆåŒ…å«çš„æ–‡ä»¶ä¹Ÿè·å–æ›¿æ¢ï¼‰

::: warning ç¼ºå¤±å˜é‡
ç¼ºå¤±æˆ–ç©ºçš„ç¯å¢ƒå˜é‡ä¼šåœ¨é…ç½®åŠ è½½æ—¶æŠ›å‡ºé”™è¯¯ã€‚

## é…ç½®éªŒè¯å’Œè¯Šæ–­

å½“é…ç½®éªŒè¯å¤±è´¥æ—¶ï¼Œä½¿ç”¨ `clawdbot doctor` æŸ¥çœ‹ç¡®åˆ‡çš„é—®é¢˜ã€‚

```bash
## è¯Šæ–­é…ç½®
clawdbot doctor

## è‡ªåŠ¨ä¿®å¤é—®é¢˜ï¼ˆéœ€æ‰‹åŠ¨ç¡®è®¤ï¼‰
clawdbot doctor --fix

## è‡ªåŠ¨ä¿®å¤ï¼ˆè·³è¿‡ç¡®è®¤ï¼‰
clawdbot doctor --yes
```

**è¯Šæ–­åŠŸèƒ½**ï¼š
- æ£€æµ‹æœªçŸ¥é…ç½®é”®
- éªŒè¯æ•°æ®ç±»å‹
- æ£€æµ‹ç¼ºå¤±çš„å¿…éœ€å­—æ®µ
- åº”ç”¨é…ç½®è¿ç§»
- æ£€æµ‹ä¸å®‰å…¨çš„ DM ç­–ç•¥
- éªŒè¯æ¸ é“é…ç½®

## é…ç½®æ–‡ä»¶è·¯å¾„

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|--------|------|
| ä¸»é…ç½® | `~/.clawdbot/clawdbot.json` | ä¸»é…ç½®æ–‡ä»¶ |
| ç¯å¢ƒå˜é‡ | `~/.clawdbot/.env` | å…¨å±€ç¯å¢ƒå˜é‡ |
| å·¥ä½œåŒºç¯å¢ƒ | `~/clawd/.env` | å·¥ä½œåŒºç¯å¢ƒå˜é‡ |
| è®¤è¯é…ç½®æ–‡ä»¶ | `<agentDir>/auth-profiles.json` | è®¤è¯é…ç½®æ–‡ä»¶ |
| è¿è¡Œæ—¶ç¼“å­˜ | `<agentDir>/auth.json` | åµŒå…¥ä»£ç†è¿è¡Œæ—¶ç¼“å­˜ |
| é—ç•™ OAuth | `~/.clawdbot/credentials/oauth.json` | é—ç•™ OAuth å¯¼å…¥ |
| Cron å­˜å‚¨ | `~/.clawdbot/cron.json` | Cron ä»»åŠ¡å­˜å‚¨ |
| Hooks è·¯å¾„ | `~/.clawdbot/hooks` | Hooks ç›®å½• |

---

## æœ¬è¯¾å°ç»“

æœ¬æ•™ç¨‹è¯¦ç»†ä»‹ç»äº† Clawdbot çš„å®Œæ•´é…ç½®ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

- âœ… é…ç½®æ–‡ä»¶ç»“æ„å’ŒéªŒè¯æœºåˆ¶
- âœ… æ‰€æœ‰æ ¸å¿ƒé…ç½®èŠ‚ï¼ˆè®¤è¯ã€ä»£ç†ã€æ¸ é“ã€ä¼šè¯ã€å·¥å…·ã€Cronã€Hooks ç­‰ï¼‰
- âœ… ç¯å¢ƒå˜é‡æ›¿æ¢å’Œé…ç½®ä¼˜å…ˆçº§
- âœ… å¸¸è§é…ç½®ç¤ºä¾‹å’Œæœ€ä½³å®è·µ
- âœ… é…ç½®æ–‡ä»¶è·¯å¾„å’Œå­˜å‚¨ä½ç½®

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬å­¦ä¹  **[Gateway WebSocket API åè®®](./api-protocol/)**ã€‚
>
> ä½ ä¼šå­¦åˆ°ï¼š
> - WebSocket è¿æ¥æ¡æ‰‹å’Œè®¤è¯
> - æ¶ˆæ¯å¸§æ ¼å¼ï¼ˆè¯·æ±‚ã€å“åº”ã€äº‹ä»¶ï¼‰
> - æ ¸å¿ƒæ–¹æ³•å‚è€ƒå’Œè°ƒç”¨ç¤ºä¾‹
> - æƒé™ç³»ç»Ÿå’Œè§’è‰²ç®¡ç†
> - é”™è¯¯å¤„ç†å’Œé‡è¯•ç­–ç•¥

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-27

| é…ç½®èŠ‚ | æ–‡ä»¶è·¯å¾„ | è¡Œå· |
|---------|-----------|------|
| ä¸» Schema | [`src/config/zod-schema.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/config/zod-schema.ts) | 1-556 |
| æ ¸å¿ƒ Schema | [`src/config/zod-schema.core.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/config/zod-schema.core.ts) | 1-300 |
| ä»£ç† Schema | [`src/config/zod-schema.agents.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/config/zod-schema.agents.ts) | 1-54 |
| æ¸ é“ Schema | [`src/config/zod-schema.channels.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/config/zod-schema.channels.ts) | 1-11 |
| ä¼šè¯ Schema | [`src/config/zod-schema.session.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/config/zod-schema.session.ts) | - |
| å·¥å…· Schema | [`src/config/zod-schema.agent-runtime.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/config/zod-schema.agent-runtime.ts) | - |
| Hooks Schema | [`src/config/zod-schema.hooks.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/config/zod-schema.hooks.ts) | - |
| æä¾›å•† Schema | [`src/config/zod-schema.providers.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/config/zod-schema.providers.ts) | - |
| é…ç½®æ–‡æ¡£ | [`docs/gateway/configuration.md`](https://github.com/clawdbot/clawdbot/blob/main/docs/gateway/configuration.md) | - |

**å…³é”®å¸¸é‡**ï¼š
- é»˜è®¤ç«¯å£ï¼š`18789`ï¼ˆ`gateway.server-startup-log.ts`ï¼‰
- é»˜è®¤å·¥ä½œåŒºï¼š`~/clawd`
- é»˜è®¤ Gateway ç»‘å®šï¼š`loopback`ï¼ˆ127.0.0.1ï¼‰

**å…³é”®å‡½æ•°**ï¼š
- `ClawdbotSchema`ï¼šä¸»é…ç½® Schema å®šä¹‰
- `normalizeAllowFrom()`ï¼šæ ‡å‡†åŒ– allowlist å€¼
- `requireOpenAllowFrom()`ï¼šéªŒè¯ open æ¨¡å¼çš„ allowlist
</details>
