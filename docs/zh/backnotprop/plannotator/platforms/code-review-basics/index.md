---
title: "ä»£ç è¯„å®¡: Git Diff å¯è§†åŒ–å®¡æŸ¥ | plannotator"
sidebarTitle: "è¯„å®¡ Agent æ”¹çš„ä»£ç "
subtitle: "ä»£ç è¯„å®¡: Git Diff å¯è§†åŒ–å®¡æŸ¥"
description: "å­¦ä¹  Plannotator çš„ä»£ç è¯„å®¡åŠŸèƒ½ã€‚ä½¿ç”¨å¯è§†åŒ–ç•Œé¢è¯„å®¡ Git Diffï¼Œåœ¨ side-by-side å’Œ unified è§†å›¾é—´åˆ‡æ¢ï¼Œæ·»åŠ è¡Œçº§æ³¨é‡Šï¼Œå¹¶å°†åé¦ˆå‘é€ç»™ AI Agentã€‚"
tags:
  - "ä»£ç è¯„å®¡"
  - "Git Diff"
  - "è¡Œçº§æ³¨é‡Š"
  - "Side-by-side"
  - "Unified"
  - "Claude Code"
  - "OpenCode"
prerequisite:
  - "start-getting-started"
order: 4
---

# ä»£ç è¯„å®¡åŸºç¡€ï¼šä½¿ç”¨ /plannotator-review è¯„å®¡ Git Diff

## å­¦å®Œä½ èƒ½åšä»€ä¹ˆ

- âœ… ä½¿ç”¨ `/plannotator-review` å‘½ä»¤è¯„å®¡ Git Diff
- âœ… åœ¨ side-by-side å’Œ unified è§†å›¾é—´åˆ‡æ¢
- âœ… ç‚¹å‡»è¡Œå·é€‰æ‹©ä»£ç èŒƒå›´ï¼Œæ·»åŠ è¡Œçº§æ³¨é‡Š
- âœ… æ·»åŠ ä¸åŒç±»å‹çš„æ³¨é‡Šï¼ˆcomment/suggestion/concernï¼‰
- âœ… åˆ‡æ¢ä¸åŒçš„ diff ç±»å‹ï¼ˆuncommitted/staged/last commit/branchï¼‰
- âœ… å°†è¯„å®¡åé¦ˆå‘é€ç»™ AI Agent

## ä½ ç°åœ¨çš„å›°å¢ƒ

**é—®é¢˜ 1**ï¼šç”¨ `git diff` æŸ¥çœ‹ä»£ç å˜æ›´æ—¶ï¼Œè¾“å‡ºåœ¨ç»ˆç«¯é‡Œæ»šåŠ¨ï¼Œéš¾ä»¥å…¨é¢ç†è§£æ”¹åŠ¨å†…å®¹ã€‚

**é—®é¢˜ 2**ï¼šæƒ³ç»™ Agent åé¦ˆä»£ç é—®é¢˜æ—¶ï¼Œåªèƒ½ç”¨æ–‡å­—æè¿°"ç¬¬ 10 è¡Œæœ‰é—®é¢˜"ã€"ä¿®æ”¹è¿™ä¸ªå‡½æ•°"ï¼Œå®¹æ˜“äº§ç”Ÿæ­§ä¹‰ã€‚

**é—®é¢˜ 3**ï¼šä¸çŸ¥é“ Agent å…·ä½“æ”¹äº†å“ªäº›æ–‡ä»¶ï¼Œåœ¨å¤§é‡æ”¹åŠ¨ä¸­éš¾ä»¥èšç„¦å…³é”®éƒ¨åˆ†ã€‚

**é—®é¢˜ 4**ï¼šè¯„å®¡ä»£ç åï¼Œæƒ³æŠŠç»“æ„åŒ–åé¦ˆå‘é€ç»™ Agentï¼Œè®©å®ƒæ ¹æ®å»ºè®®é‡æ–°ä¿®æ”¹ã€‚

**Plannotator èƒ½å¸®ä½ **ï¼š
- å¯è§†åŒ– Git Diffï¼Œæ”¯æŒ side-by-side å’Œ unified ä¸¤ç§è§†å›¾
- ç‚¹å‡»è¡Œå·å³å¯é€‰ä¸­ä»£ç èŒƒå›´ï¼Œç²¾ç¡®æ ‡æ³¨é—®é¢˜ä½ç½®
- æ·»åŠ è¡Œçº§æ³¨é‡Šï¼ˆcomment/suggestion/concernï¼‰ï¼Œé™„å¸¦å»ºè®®ä»£ç 
- ä¸€é”®åˆ‡æ¢ diff ç±»å‹ï¼ˆuncommittedã€stagedã€last commitã€branchï¼‰
- æ³¨é‡Šè‡ªåŠ¨è½¬æ¢ä¸º Markdownï¼ŒAgent å‡†ç¡®ç†è§£ä½ çš„åé¦ˆ

## ä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸€æ‹›

**ä½¿ç”¨åœºæ™¯**ï¼š
- Agent å®Œæˆä»£ç ä¿®æ”¹åï¼Œä½ éœ€è¦è¯„å®¡æ”¹åŠ¨å†…å®¹
- æäº¤ä»£ç å‰ï¼Œæƒ³å…¨é¢æ£€æŸ¥è‡ªå·±çš„å˜æ›´
- ä¸å›¢é˜Ÿåä½œæ—¶ï¼Œéœ€è¦ç»“æ„åŒ–åé¦ˆä»£ç é—®é¢˜
- æƒ³åœ¨å¤šä¸ª diff ç±»å‹é—´åˆ‡æ¢ï¼ˆæœªæäº¤ vs å·²æš‚å­˜ vs ä¸Šæ¬¡æäº¤ï¼‰

**ä¸é€‚ç”¨åœºæ™¯**ï¼š
- è¯„å®¡ AI ç”Ÿæˆçš„å®æ–½è®¡åˆ’ï¼ˆä½¿ç”¨è®¡åˆ’è¯„å®¡åŠŸèƒ½ï¼‰
- ç›´æ¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ `git diff`ï¼ˆä¸éœ€è¦å¯è§†åŒ–ç•Œé¢ï¼‰

## ğŸ’ å¼€å§‹å‰çš„å‡†å¤‡

**å‰ç½®æ¡ä»¶**ï¼š
- âœ… å·²å®‰è£… Plannotator CLIï¼ˆè¯¦è§ [å¿«é€Ÿå¼€å§‹](../../start/getting-started/)ï¼‰
- âœ… å·²é…ç½® Claude Code æˆ– OpenCode æ’ä»¶ï¼ˆè¯¦è§å¯¹åº”å®‰è£…æŒ‡å—ï¼‰
- âœ… å½“å‰ç›®å½•åœ¨ Git ä»“åº“ä¸­

**è§¦å‘æ–¹å¼**ï¼š
- åœ¨ Claude Code æˆ– OpenCode ä¸­æ‰§è¡Œ `/plannotator-review` å‘½ä»¤

## æ ¸å¿ƒæ€è·¯

### ä»£ç è¯„å®¡æ˜¯ä»€ä¹ˆ

**ä»£ç è¯„å®¡**æ˜¯ Plannotator æä¾›çš„å¯è§†åŒ– Git Diff è¯„å®¡å·¥å…·ï¼Œè®©ä½ åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ä»£ç å˜æ›´å¹¶æ·»åŠ è¡Œçº§æ³¨é‡Šã€‚

::: info ä¸ºä»€ä¹ˆéœ€è¦ä»£ç è¯„å®¡ï¼Ÿ
AI Agent å®Œæˆä»£ç ä¿®æ”¹åï¼Œé€šå¸¸ä¼šç”¨ç»ˆç«¯è¾“å‡º git diff å†…å®¹ã€‚è¿™ç§çº¯æ–‡æœ¬æ–¹å¼éš¾ä»¥å…¨é¢ç†è§£æ”¹åŠ¨ï¼Œä¹Ÿä¸æ–¹ä¾¿ç²¾ç¡®æ ‡æ³¨é—®é¢˜ä½ç½®ã€‚Plannotator æä¾›å¯è§†åŒ–ç•Œé¢ï¼ˆside-by-side æˆ– unifiedï¼‰ï¼Œæ”¯æŒç‚¹å‡»è¡Œå·æ·»åŠ æ³¨é‡Šï¼Œå¹¶å°†ç»“æ„åŒ–åé¦ˆå‘é€ç»™ Agentï¼Œè®©å®ƒæ ¹æ®å»ºè®®é‡æ–°ä¿®æ”¹ä»£ç ã€‚
:::

### å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·          â”‚
â”‚  (æ‰§è¡Œå‘½ä»¤)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ /plannotator-review
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLI          â”‚
â”‚  (è¿è¡Œ git)    â”‚
â”‚  git diff HEAD â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ rawPatch + gitRef
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Review Server  â”‚  â† æœ¬åœ°æœåŠ¡å™¨å¯åŠ¨
â”‚  /api/diff     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ æµè§ˆå™¨æ‰“å¼€ UI
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Review UI     â”‚
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ File Tree  â”‚  â”‚
â”‚ â”‚ (æ–‡ä»¶åˆ—è¡¨) â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚         â”‚
â”‚       â–¼         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ DiffViewer â”‚  â”‚
â”‚ â”‚ (ä»£ç å¯¹æ¯”) â”‚  â”‚
â”‚ â”‚ split/     â”‚  â”‚
â”‚ â”‚ unified   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚         â”‚
â”‚       â”‚ ç‚¹å‡»è¡Œå·
â”‚       â–¼         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ æ·»åŠ æ³¨é‡Š   â”‚  â”‚
â”‚ â”‚ comment/   â”‚  â”‚
â”‚ â”‚ suggestion/â”‚  â”‚
â”‚ â”‚ concern    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚         â”‚
â”‚       â–¼         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ å‘é€åé¦ˆ   â”‚  â”‚
â”‚ â”‚ Send       â”‚  â”‚
â”‚ â”‚ Feedback   â”‚  â”‚
â”‚ â”‚ æˆ– LGTM    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Markdown æ ¼å¼åé¦ˆ
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Agent     â”‚
â”‚  (æ ¹æ®å»ºè®®ä¿®æ”¹) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è§†å›¾æ¨¡å¼

| è§†å›¾æ¨¡å¼ | æè¿° | é€‚ç”¨åœºæ™¯ |
| -------- | ---- | -------- |
| **Split (Side-by-side)** | å·¦å³åˆ†å±ï¼Œæ—§ä»£ç åœ¨å·¦ï¼Œæ–°ä»£ç åœ¨å³ | å¯¹æ¯”å¤§æ®µæ”¹åŠ¨ï¼Œæ¸…æ™°çœ‹åˆ°ä¿®æ”¹å‰å |
| **Unified** | ä¸Šä¸‹åˆå¹¶ï¼Œåˆ é™¤å’Œæ·»åŠ åœ¨åŒä¸€åˆ— | æŸ¥çœ‹å°æ”¹åŠ¨ï¼ŒèŠ‚çœå‚ç›´ç©ºé—´ |

### æ³¨é‡Šç±»å‹

Plannotator æ”¯æŒä¸‰ç§ä»£ç æ³¨é‡Šç±»å‹ï¼š

| æ³¨é‡Šç±»å‹ | ç”¨é€” | UI è¡¨ç° |
| --------- | ---- | ------- |
| **Comment** | è¯„è®ºæŸè¡Œä»£ç ï¼Œæå‡ºé—®é¢˜æˆ–è¯´æ˜ | ç´«è‰²/è“è‰²è¾¹æ¡†æ ‡è®° |
| **Suggestion** | æä¾›å…·ä½“çš„ä»£ç ä¿®æ”¹å»ºè®® | ç»¿è‰²è¾¹æ¡†æ ‡è®°ï¼Œé™„å¸¦å»ºè®®ä»£ç å— |
| **Concern** | æ ‡è®°éœ€è¦å…³æ³¨çš„æ½œåœ¨é—®é¢˜ | é»„è‰²/æ©™è‰²è¾¹æ¡†æ ‡è®° |

::: tip æ³¨é‡Šç±»å‹çš„åŒºåˆ«
- **Comment**ï¼šç”¨äºæé—®ã€è¯´æ˜ã€ä¸€èˆ¬æ€§åé¦ˆ
- **Suggestion**ï¼šç”¨äºæä¾›å…·ä½“çš„ä»£ç ä¿®æ”¹æ–¹æ¡ˆï¼ˆé™„å¸¦å»ºè®®ä»£ç ï¼‰
- **Concern**ï¼šç”¨äºæ ‡è®°éœ€è¦ä¿®å¤çš„é—®é¢˜æˆ–æ½œåœ¨é£é™©
:::

### Diff ç±»å‹

| Diff ç±»å‹ | Git å‘½ä»¤ | æè¿° |
| --------- | --------- | ---- |
| **Uncommitted** | `git diff HEAD` | æœªæäº¤çš„å˜æ›´ï¼ˆé»˜è®¤ï¼‰ |
| **Staged** | `git diff --staged` | å·²æš‚å­˜çš„å˜æ›´ |
| **Unstaged** | `git diff` | æœªæš‚å­˜çš„å˜æ›´ |
| **Last commit** | `git diff HEAD~1..HEAD` | ä¸Šæ¬¡æäº¤çš„å†…å®¹ |
| **Branch** | `git diff main..HEAD` | å½“å‰åˆ†æ”¯ä¸é»˜è®¤åˆ†æ”¯çš„å¯¹æ¯” |

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šè§¦å‘ä»£ç è¯„å®¡

åœ¨ Claude Code æˆ– OpenCode ä¸­æ‰§è¡Œ `/plannotator-review` å‘½ä»¤ï¼š

```
ç”¨æˆ·ï¼š/plannotator-review

CLIï¼šæ­£åœ¨è¿è¡Œ git diff...
      æµè§ˆå™¨å·²æ‰“å¼€
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
1. æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ Plannotator ä»£ç è¯„å®¡ç•Œé¢
2. å·¦ä¾§æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨ï¼ˆFile Treeï¼‰
3. å³ä¾§æ˜¾ç¤º Diff Viewerï¼ˆé»˜è®¤ä¸º split è§†å›¾ï¼‰
4. é¡¶éƒ¨æœ‰è§†å›¾åˆ‡æ¢æŒ‰é’®ï¼ˆSplit/Unifiedï¼‰
5. åº•éƒ¨æœ‰ "Send Feedback" å’Œ "LGTM" æŒ‰é’®

### ç¬¬ 2 æ­¥ï¼šæµè§ˆæ–‡ä»¶åˆ—è¡¨

åœ¨å·¦ä¾§çš„ File Tree ä¸­æŸ¥çœ‹æ”¹åŠ¨çš„æ–‡ä»¶ï¼š

- æ–‡ä»¶æŒ‰è·¯å¾„åˆ†ç»„æ˜¾ç¤º
- æ¯ä¸ªæ–‡ä»¶æ˜¾ç¤ºå˜æ›´ç»Ÿè®¡ï¼ˆadditions/deletionsï¼‰
- ç‚¹å‡»æ–‡ä»¶åˆ‡æ¢åˆ°å¯¹åº”çš„ diff å†…å®¹

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
```
src/
  auth/
    login.ts          (+12, -5)  â† ç‚¹å‡»æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶çš„ diff
    user.ts          (+8, -2)
  api/
    routes.ts        (+25, -10)
```

### ç¬¬ 3 æ­¥ï¼šåˆ‡æ¢è§†å›¾æ¨¡å¼

åœ¨é¡µé¢é¡¶éƒ¨ç‚¹å‡» "Split" æˆ– "Unified" æŒ‰é’®åˆ‡æ¢è§†å›¾ï¼š

**Split è§†å›¾**ï¼ˆSide-by-sideï¼‰ï¼š
- æ—§ä»£ç åœ¨å·¦ï¼ˆç°è‰²èƒŒæ™¯ï¼Œçº¢è‰²åˆ é™¤çº¿ï¼‰
- æ–°ä»£ç åœ¨å³ï¼ˆç™½è‰²èƒŒæ™¯ï¼Œç»¿è‰²æ·»åŠ çº¿ï¼‰
- é€‚åˆå¯¹æ¯”å¤§æ®µæ”¹åŠ¨

**Unified è§†å›¾**ï¼ˆåˆå¹¶ï¼‰ï¼š
- æ—§ä»£ç å’Œæ–°ä»£ç åœ¨åŒä¸€åˆ—
- åˆ é™¤çš„è¡Œç”¨çº¢è‰²èƒŒæ™¯ï¼Œæ·»åŠ çš„è¡Œç”¨ç»¿è‰²èƒŒæ™¯
- é€‚åˆæŸ¥çœ‹å°æ”¹åŠ¨

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- Split è§†å›¾ï¼šå·¦å³åˆ†å±ï¼Œæ¸…æ™°å¯¹æ¯”ä¿®æ”¹å‰å
- Unified è§†å›¾ï¼šä¸Šä¸‹åˆå¹¶ï¼ŒèŠ‚çœå‚ç›´ç©ºé—´

### ç¬¬ 4 æ­¥ï¼šé€‰ä¸­ä»£ç è¡Œï¼Œæ·»åŠ æ³¨é‡Š

**æ·»åŠ  Comment æ³¨é‡Š**ï¼š

1. å°†é¼ æ ‡æ‚¬åœåœ¨ä»£ç è¡Œä¸Šï¼Œè¡Œå·æ—ä¼šå‡ºç° `+` æŒ‰é’®
2. ç‚¹å‡» `+` æŒ‰é’®ï¼Œæˆ–ç›´æ¥ç‚¹å‡»è¡Œå·é€‰ä¸­è¯¥è¡Œ
3. é€‰ä¸­å¤šè¡Œï¼šç‚¹å‡»èµ·å§‹è¡Œå·ï¼ŒæŒ‰ä½ Shift ç‚¹å‡»ç»“æŸè¡Œå·
4. åœ¨å¼¹å‡ºçš„å·¥å…·æ ä¸­è¾“å…¥è¯„è®ºå†…å®¹
5. ç‚¹å‡» "Add Comment" æŒ‰é’®

**æ·»åŠ  Suggestion æ³¨é‡Šï¼ˆé™„å¸¦å»ºè®®ä»£ç ï¼‰**ï¼š

1. æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ·»åŠ æ³¨é‡Š
2. åœ¨å·¥å…·æ ä¸­ç‚¹å‡» "Add suggested code" æŒ‰é’®
3. åœ¨å¼¹å‡ºçš„ä»£ç æ¡†ä¸­è¾“å…¥å»ºè®®çš„ä»£ç 
4. ç‚¹å‡» "Add Comment" æŒ‰é’®

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- æ³¨é‡Šæ˜¾ç¤ºåœ¨ä»£ç è¡Œä¸‹æ–¹
- Comment æ³¨é‡Šï¼šç´«è‰²/è“è‰²è¾¹æ¡†æ ‡è®°ï¼Œæ˜¾ç¤ºè¯„è®ºå†…å®¹
- Suggestion æ³¨é‡Šï¼šç»¿è‰²è¾¹æ¡†æ ‡è®°ï¼Œæ˜¾ç¤ºè¯„è®ºå†…å®¹å’Œå»ºè®®ä»£ç å—
- å³ä¾§ä¾§è¾¹æ ä¼šæ˜¾ç¤ºæ‰€æœ‰æ³¨é‡Šåˆ—è¡¨

### ç¬¬ 5 æ­¥ï¼šåˆ‡æ¢ Diff ç±»å‹

åœ¨é¡µé¢é¡¶éƒ¨é€‰æ‹©ä¸åŒçš„ diff ç±»å‹ï¼š

- **Uncommitted changes**ï¼ˆé»˜è®¤ï¼‰ï¼šæœªæäº¤çš„å˜æ›´
- **Staged changes**ï¼šå·²æš‚å­˜çš„å˜æ›´
- **Last commit**ï¼šä¸Šæ¬¡æäº¤çš„å†…å®¹
- **vs main**ï¼ˆå¦‚æœä¸åœ¨é»˜è®¤åˆ†æ”¯ï¼‰ï¼šä¸é»˜è®¤åˆ†æ”¯çš„å¯¹æ¯”

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- Diff Viewer æ›´æ–°ä¸ºæ–°é€‰æ‹©çš„ diff å†…å®¹
- æ–‡ä»¶åˆ—è¡¨åˆ·æ–°æ˜¾ç¤ºæ–°çš„å˜æ›´ç»Ÿè®¡

### ç¬¬ 6 æ­¥ï¼šå‘é€åé¦ˆç»™ Agent

**Send Feedbackï¼ˆå‘é€åé¦ˆï¼‰**ï¼š

1. æ·»åŠ å¿…è¦çš„æ³¨é‡Šï¼ˆComment/Suggestion/Concernï¼‰
2. ç‚¹å‡»é¡µé¢åº•éƒ¨çš„ "Send Feedback" æŒ‰é’®
3. å¦‚æœæ²¡æœ‰æ³¨é‡Šï¼Œä¼šå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†è¯¢é—®æ˜¯å¦ç»§ç»­

**LGTMï¼ˆLooks Good To Meï¼‰**ï¼š

å¦‚æœä»£ç æ²¡æœ‰é—®é¢˜ï¼Œç‚¹å‡» "LGTM" æŒ‰é’®ã€‚

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- æµè§ˆå™¨è‡ªåŠ¨å…³é—­ï¼ˆ1.5 ç§’å»¶è¿Ÿï¼‰
- ç»ˆç«¯æ˜¾ç¤ºåé¦ˆå†…å®¹æˆ– "LGTM - no changes requested."
- Agent æ”¶åˆ°åé¦ˆåå¼€å§‹ä¿®æ”¹ä»£ç 

### ç¬¬ 7 æ­¥ï¼šæŸ¥çœ‹åé¦ˆå†…å®¹ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³æŸ¥çœ‹ Plannotator å‘é€ç»™ Agent çš„åé¦ˆå†…å®¹ï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹ï¼š

```
# Code Review Feedback

## src/auth/login.ts

### Line 15 (new)
è¿™é‡Œéœ€è¦æ·»åŠ é”™è¯¯å¤„ç†é€»è¾‘ã€‚

### Line 20-25 (old)
**Suggested code:**
```typescript
try {
  await authenticate(req);
} catch (error) {
  return res.status(401).json({ error: 'Authentication failed' });
}
```

## src/api/routes.ts

### Line 10 (new)
è¿™ä¸ªå‡½æ•°ç¼ºå°‘è¾“å…¥éªŒè¯ã€‚
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- åé¦ˆæŒ‰æ–‡ä»¶åˆ†ç»„
- æ¯ä¸ªæ³¨é‡Šæ˜¾ç¤ºæ–‡ä»¶è·¯å¾„ã€è¡Œå·ã€ç±»å‹
- Suggestion æ³¨é‡Šé™„å¸¦å»ºè®®ä»£ç å—

## æ£€æŸ¥ç‚¹ âœ…

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

- [ ] æ‰§è¡Œ `/plannotator-review` å‘½ä»¤ï¼Œæµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ä»£ç è¯„å®¡ç•Œé¢
- [ ] åœ¨ File Tree ä¸­æŸ¥çœ‹æ”¹åŠ¨çš„æ–‡ä»¶åˆ—è¡¨
- [ ] åœ¨ Split å’Œ Unified è§†å›¾é—´åˆ‡æ¢
- [ ] ç‚¹å‡»è¡Œå·æˆ– `+` æŒ‰é’®é€‰ä¸­ä»£ç è¡Œ
- [ ] æ·»åŠ  Commentã€Suggestionã€Concern æ³¨é‡Š
- [ ] åœ¨æ³¨é‡Šä¸­æ·»åŠ å»ºè®®ä»£ç 
- [ ] åˆ‡æ¢ä¸åŒçš„ diff ç±»å‹ï¼ˆuncommitted/staged/last commit/branchï¼‰
- [ ] ç‚¹å‡» Send Feedbackï¼Œæµè§ˆå™¨å…³é—­ï¼Œç»ˆç«¯æ˜¾ç¤ºåé¦ˆå†…å®¹
- [ ] ç‚¹å‡» LGTMï¼Œæµè§ˆå™¨å…³é—­ï¼Œç»ˆç«¯æ˜¾ç¤º "LGTM - no changes requested."

**å¦‚æœæŸä¸€æ­¥å¤±è´¥**ï¼Œè¯¦è§ï¼š
- [å¸¸è§é—®é¢˜](../../faq/common-problems/)
- [Claude Code å®‰è£…æŒ‡å—](../../start/installation-claude-code/)
- [OpenCode å®‰è£…æŒ‡å—](../../start/installation-opencode/)

## è¸©å‘æé†’

**å¸¸è§é”™è¯¯ 1**ï¼šæ‰§è¡Œ `/plannotator-review` åï¼Œæµè§ˆå™¨æ²¡æœ‰æ‰“å¼€

**åŸå› **ï¼šå¯èƒ½æ˜¯ç«¯å£å ç”¨æˆ–æœåŠ¡å™¨å¯åŠ¨å¤±è´¥ã€‚

**è§£å†³**ï¼š
- æ£€æŸ¥ç»ˆç«¯ä¸­æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- å°è¯•æ‰‹åŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ˜¾ç¤ºçš„ URL
- å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯¦è§ [æ•…éšœæ’æŸ¥](../../faq/troubleshooting/)

**å¸¸è§é”™è¯¯ 2**ï¼šç‚¹å‡»è¡Œå·åï¼Œæ²¡æœ‰å¼¹å‡ºå·¥å…·æ 

**åŸå› **ï¼šå¯èƒ½æ˜¯å› ä¸ºé€‰ä¸­çš„æ˜¯ç©ºè¡Œï¼Œæˆ–è€…æµè§ˆå™¨çª—å£å¤ªå°ã€‚

**è§£å†³**ï¼š
- å°è¯•é€‰ä¸­åŒ…å«ä»£ç çš„è¡Œ
- æ”¾å¤§æµè§ˆå™¨çª—å£
- ç¡®ä¿æ²¡æœ‰ç¦ç”¨ JavaScript

**å¸¸è§é”™è¯¯ 3**ï¼šæ·»åŠ æ³¨é‡Šåï¼Œæ³¨é‡Šæ²¡æœ‰æ˜¾ç¤ºåœ¨ä»£ç ä¸‹æ–¹

**åŸå› **ï¼šå¯èƒ½æ˜¯å› ä¸ºé€‰ä¸­çš„æ˜¯ç©ºè¡Œï¼Œæˆ–è€…æµè§ˆå™¨çª—å£å¤ªå°ã€‚

**è§£å†³**ï¼š
- å°è¯•é€‰ä¸­åŒ…å«ä»£ç çš„è¡Œ
- æ”¾å¤§æµè§ˆå™¨çª—å£
- ç¡®ä¿æ²¡æœ‰ç¦ç”¨ JavaScript
- æ£€æŸ¥å³ä¾§ä¾§è¾¹æ æ˜¯å¦æ˜¾ç¤ºäº†æ³¨é‡Šåˆ—è¡¨

**å¸¸è§é”™è¯¯ 4**ï¼šç‚¹å‡» Send Feedback åï¼Œç»ˆç«¯æ²¡æœ‰æ˜¾ç¤ºåé¦ˆå†…å®¹

**åŸå› **ï¼šå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–æœåŠ¡å™¨é”™è¯¯ã€‚

**è§£å†³**ï¼š
- æ£€æŸ¥ç»ˆç«¯ä¸­æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- å°è¯•é‡æ–°å‘é€åé¦ˆ
- å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯¦è§ [æ•…éšœæ’æŸ¥](../../faq/troubleshooting/)

**å¸¸è§é”™è¯¯ 5**ï¼šAgent æ”¶åˆ°åé¦ˆåï¼Œæ²¡æœ‰æŒ‰ç…§å»ºè®®ä¿®æ”¹ä»£ç 

**åŸå› **ï¼šAgent å¯èƒ½æ²¡æœ‰æ­£ç¡®ç†è§£æ³¨é‡Šçš„æ„å›¾ã€‚

**è§£å†³**ï¼š
- å°è¯•ä½¿ç”¨æ›´æ˜ç¡®çš„æ³¨é‡Šï¼ˆSuggestion æ¯” Comment æ›´æ˜ç¡®ï¼‰
- ä½¿ç”¨ Comment æ·»åŠ è¯¦ç»†è¯´æ˜
- åœ¨ Suggestion ä¸­æä¾›å®Œæ•´çš„å»ºè®®ä»£ç 
- å¦‚æœé—®é¢˜æŒç»­ï¼Œå¯ä»¥å†æ¬¡è¿è¡Œ `/plannotator-review` è¯„å®¡æ–°çš„æ”¹åŠ¨

**å¸¸è§é”™è¯¯ 6**ï¼šåˆ‡æ¢ diff ç±»å‹åï¼Œæ–‡ä»¶åˆ—è¡¨ä¸ºç©º

**åŸå› **ï¼šå¯èƒ½æ˜¯å› ä¸ºé€‰ä¸­çš„ diff ç±»å‹æ²¡æœ‰å˜æ›´å†…å®¹ã€‚

**è§£å†³**ï¼š
- å°è¯•åˆ‡æ¢å› "Uncommitted changes"
- æ£€æŸ¥ git çŠ¶æ€ï¼Œç¡®è®¤æ˜¯å¦æœ‰å˜æ›´
- ä½¿ç”¨ `git status` æŸ¥çœ‹å½“å‰çŠ¶æ€

## æœ¬è¯¾å°ç»“

ä»£ç è¯„å®¡æ˜¯ Plannotator æä¾›çš„å¯è§†åŒ– Git Diff è¯„å®¡å·¥å…·ï¼š

**æ ¸å¿ƒæ“ä½œ**ï¼š
1. **è§¦å‘**ï¼šæ‰§è¡Œ `/plannotator-review`ï¼Œæµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ UI
2. **æµè§ˆ**ï¼šåœ¨ File Tree ä¸­æŸ¥çœ‹æ”¹åŠ¨çš„æ–‡ä»¶åˆ—è¡¨
3. **è§†å›¾**ï¼šåœ¨ Splitï¼ˆside-by-sideï¼‰å’Œ Unified è§†å›¾é—´åˆ‡æ¢
4. **æ³¨é‡Š**ï¼šç‚¹å‡»è¡Œå·é€‰ä¸­ä»£ç è¡Œï¼Œæ·»åŠ  Comment/Suggestion/Concern æ³¨é‡Š
5. **åˆ‡æ¢**ï¼šé€‰æ‹©ä¸åŒçš„ diff ç±»å‹ï¼ˆuncommitted/staged/last commit/branchï¼‰
6. **åé¦ˆ**ï¼šç‚¹å‡» Send Feedback æˆ– LGTMï¼Œåé¦ˆå‘é€ç»™ Agent

**è§†å›¾æ¨¡å¼**ï¼š
- **Splitï¼ˆSide-by-sideï¼‰**ï¼šå·¦å³åˆ†å±ï¼Œæ—§ä»£ç åœ¨å·¦ï¼Œæ–°ä»£ç åœ¨å³
- **Unified**ï¼šä¸Šä¸‹åˆå¹¶ï¼Œåˆ é™¤å’Œæ·»åŠ åœ¨åŒä¸€åˆ—

**æ³¨é‡Šç±»å‹**ï¼š
- **Comment**ï¼šè¯„è®ºæŸè¡Œä»£ç ï¼Œæå‡ºé—®é¢˜æˆ–è¯´æ˜
- **Suggestion**ï¼šæä¾›å…·ä½“çš„ä»£ç ä¿®æ”¹å»ºè®®ï¼ˆé™„å¸¦å»ºè®®ä»£ç ï¼‰
- **Concern**ï¼šæ ‡è®°éœ€è¦å…³æ³¨çš„æ½œåœ¨é—®é¢˜

**Diff ç±»å‹**ï¼š
- **Uncommitted**ï¼šæœªæäº¤çš„å˜æ›´ï¼ˆé»˜è®¤ï¼‰
- **Staged**ï¼šå·²æš‚å­˜çš„å˜æ›´
- **Unstaged**ï¼šæœªæš‚å­˜çš„å˜æ›´
- **Last commit**ï¼šä¸Šæ¬¡æäº¤çš„å†…å®¹
- **Branch**ï¼šå½“å‰åˆ†æ”¯ä¸é»˜è®¤åˆ†æ”¯çš„å¯¹æ¯”

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬å­¦ä¹  **[æ·»åŠ ä»£ç æ³¨é‡Š](../code-review-annotations/)**ã€‚
>
> ä½ ä¼šå­¦åˆ°ï¼š
> - å¦‚ä½•ç²¾ç¡®ä½¿ç”¨ Commentã€Suggestionã€Concern æ³¨é‡Š
> - å¦‚ä½•æ·»åŠ å»ºè®®ä»£ç å¹¶æ ¼å¼åŒ–æ˜¾ç¤º
> - å¦‚ä½•ç¼–è¾‘å’Œåˆ é™¤æ³¨é‡Š
> - æ³¨é‡Šçš„æœ€ä½³å®è·µå’Œå¸¸è§åœºæ™¯
> - å¦‚ä½•åœ¨ side-by-side è§†å›¾ä¸­é€‰æ‹© old/new ä¾§

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-24

| åŠŸèƒ½              | æ–‡ä»¶è·¯å¾„                                                                                              | è¡Œå·    |
| ----------------- | ----------------------------------------------------------------------------------------------------- | ------- |
| ä»£ç è¯„å®¡æœåŠ¡å™¨     | [`packages/server/review.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/server/review.ts#L1-L302)           | 1-302   |
| ä»£ç è¯„å®¡ UI       | [`packages/review-editor/App.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/App.tsx#L1-L150) | 1-150   |
| DiffViewer ç»„ä»¶    | [`packages/review-editor/components/DiffViewer.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/components/DiffViewer.tsx#L1-L349) | 1-349   |
| Git å·¥å…·         | [`packages/server/git.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/server/git.ts#L1-L148)                 | 1-148   |
| Hook å…¥å£ï¼ˆreviewï¼‰ | [`apps/hook/server/index.ts`](https://github.com/backnotprop/plannotator/blob/main/apps/hook/server/index.ts#L46-L84)         | 46-84   |
| ä»£ç æ³¨é‡Šç±»å‹å®šä¹‰    | [`packages/ui/types.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/types.ts#L53-L83)                  | 53-83   |

**å…³é”®ç±»å‹**ï¼š
- `CodeAnnotationType`ï¼šä»£ç æ³¨é‡Šç±»å‹æšä¸¾ï¼ˆcommentã€suggestionã€concernï¼‰ï¼ˆ`packages/ui/types.ts:53`ï¼‰
- `CodeAnnotation`ï¼šä»£ç æ³¨é‡Šæ¥å£ï¼ˆ`packages/ui/types.ts:55-66`ï¼‰
- `DiffType`ï¼šDiff ç±»å‹æšä¸¾ï¼ˆuncommittedã€stagedã€unstagedã€last-commitã€branchï¼‰ï¼ˆ`packages/server/git.ts:10-15`ï¼‰
- `GitContext`ï¼šGit ä¸Šä¸‹æ–‡æ¥å£ï¼ˆ`packages/server/git.ts:22-26`ï¼‰

**å…³é”®å‡½æ•°**ï¼š
- `startReviewServer()`ï¼šå¯åŠ¨ä»£ç è¯„å®¡æœåŠ¡å™¨ï¼ˆ`packages/server/review.ts:79`ï¼‰
- `runGitDiff()`ï¼šè¿è¡Œ git diff å‘½ä»¤ï¼ˆ`packages/server/git.ts:101`ï¼‰
- `getGitContext()`ï¼šè·å– Git ä¸Šä¸‹æ–‡ï¼ˆåˆ†æ”¯ä¿¡æ¯å’Œ diff é€‰é¡¹ï¼‰ï¼ˆ`packages/server/git.ts:79`ï¼‰
- `parseDiffToFiles()`ï¼šå°† diff è§£æä¸ºæ–‡ä»¶åˆ—è¡¨ï¼ˆ`packages/review-editor/App.tsx:48`ï¼‰
- `exportReviewFeedback()`ï¼šå°†æ³¨é‡Šå¯¼å‡ºä¸º Markdown åé¦ˆï¼ˆ`packages/review-editor/App.tsx:86`ï¼‰

**API è·¯ç”±**ï¼š
- `GET /api/diff`ï¼šè·å– diff å†…å®¹ï¼ˆ`packages/server/review.ts:118`ï¼‰
- `POST /api/diff/switch`ï¼šåˆ‡æ¢ diff ç±»å‹ï¼ˆ`packages/server/review.ts:130`ï¼‰
- `POST /api/feedback`ï¼šæäº¤è¯„å®¡åé¦ˆï¼ˆ`packages/server/review.ts:222`ï¼‰
- `GET /api/image`ï¼šè·å–å›¾ç‰‡ï¼ˆ`packages/server/review.ts:164`ï¼‰
- `POST /api/upload`ï¼šä¸Šä¼ å›¾ç‰‡ï¼ˆ`packages/server/review.ts:181`ï¼‰
- `GET /api/agents`ï¼šè·å–å¯ç”¨ agentsï¼ˆOpenCodeï¼‰ï¼ˆ`packages/server/review.ts:204`ï¼‰

**ä¸šåŠ¡è§„åˆ™**ï¼š
- é»˜è®¤æŸ¥çœ‹æœªæäº¤çš„ diffï¼ˆ`apps/hook/server/index.ts:55`ï¼‰
- æ”¯æŒåˆ‡æ¢åˆ° vs main diffï¼ˆ`packages/server/git.ts:131`ï¼‰
- åé¦ˆæ ¼å¼åŒ–ä¸º Markdownï¼ˆ`packages/review-editor/App.tsx:86`ï¼‰
- æ‰¹å‡†æ—¶å‘é€ "LGTM" æ–‡æœ¬ï¼ˆ`packages/review-editor/App.tsx:430`ï¼‰

</details>
