---
title: "è®¡åˆ’æ‰¹æ³¨: å››ç§æ³¨é‡Šç±»å‹ | plannotator"
sidebarTitle: "æ·»åŠ å››ç§æ³¨é‡Šç±»å‹"
subtitle: "è®¡åˆ’æ‰¹æ³¨: å››ç§æ³¨é‡Šç±»å‹"
description: "æŒæ¡ Plannotator å››ç§æ³¨é‡Šç±»å‹çš„ä½¿ç”¨æ–¹æ³•ã€‚å­¦ä¹ åˆ é™¤ã€æ›¿æ¢ã€æ’å…¥ã€è¯„è®ºçš„æ·»åŠ æŠ€å·§ï¼Œæ”¯æŒ type-to-comment å¿«æ·è¾“å…¥å’Œå›¾ç‰‡é™„ä»¶ï¼Œæå‡è®¡åˆ’è¯„å®¡æ•ˆç‡ã€‚"
tags:
  - "è®¡åˆ’æ³¨é‡Š"
  - "æ³¨é‡Šç±»å‹"
  - "åˆ é™¤"
  - "æ›¿æ¢"
  - "æ’å…¥"
  - "è¯„è®º"
  - "type-to-comment"
  - "å›¾ç‰‡é™„ä»¶"
prerequisite:
  - "platforms-plan-review-basics"
order: 2
---

# æ·»åŠ è®¡åˆ’æ³¨é‡Šï¼šæŒæ¡å››ç§æ³¨é‡Šç±»å‹

## å­¦å®Œä½ èƒ½åšä»€ä¹ˆ

- âœ… é€‰ä¸­è®¡åˆ’æ–‡æœ¬ï¼Œæ·»åŠ å››ç§ä¸åŒç±»å‹çš„æ³¨é‡Šï¼ˆåˆ é™¤ã€æ›¿æ¢ã€æ’å…¥ã€è¯„è®ºï¼‰
- âœ… ä½¿ç”¨ type-to-comment å¿«æ·é”®ç›´æ¥è¾“å…¥è¯„è®º
- âœ… åœ¨æ³¨é‡Šä¸­é™„åŠ å›¾ç‰‡ï¼ˆå‚è€ƒå›¾ã€æˆªå›¾ç­‰ï¼‰
- âœ… ç†è§£æ¯ç§æ³¨é‡Šç±»å‹çš„å«ä¹‰å’Œä½¿ç”¨åœºæ™¯
- âœ… æŸ¥çœ‹æ³¨é‡Šå¯¼å‡ºåçš„ Markdown æ ¼å¼

## ä½ ç°åœ¨çš„å›°å¢ƒ

**é—®é¢˜ 1**ï¼šçŸ¥é“è¦åˆ é™¤æŸæ®µå†…å®¹ï¼Œä½†é€‰ä¸­æ–‡æœ¬åä¸çŸ¥é“ç‚¹å‡»å“ªä¸ªæŒ‰é’®ã€‚

**é—®é¢˜ 2**ï¼šæƒ³æ›¿æ¢ä¸€æ®µä»£ç ï¼Œä½†å·¥å…·æ é‡Œåªæœ‰"åˆ é™¤"å’Œ"è¯„è®º"ï¼Œæ²¡æœ‰"æ›¿æ¢"é€‰é¡¹ã€‚

**é—®é¢˜ 3**ï¼šé€‰ä¸­å¤šè¡Œæ–‡æœ¬æƒ³ç›´æ¥è¾“å…¥è¯„è®ºï¼Œæ¯æ¬¡éƒ½è¦å…ˆç‚¹å‡»"Comment"æŒ‰é’®ï¼Œæ•ˆç‡ä½ã€‚

**é—®é¢˜ 4**ï¼šæƒ³ç»™æŸæ®µä»£ç é™„åŠ å‚è€ƒå›¾ï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆä¸Šä¼ å›¾ç‰‡ã€‚

**Plannotator èƒ½å¸®ä½ **ï¼š
- æ¸…æ™°çš„æŒ‰é’®å›¾æ ‡ï¼Œä¸€çœ¼çœ‹å‡ºåˆ é™¤ã€æ›¿æ¢ã€æ’å…¥ã€è¯„è®ºçš„åŒºåˆ«
- type-to-comment å¿«æ·é”®ï¼Œç›´æ¥è¾“å…¥æ— éœ€ç‚¹å‡»æŒ‰é’®
- æ³¨é‡Šä¸­æ”¯æŒå›¾ç‰‡é™„ä»¶ï¼Œæ–¹ä¾¿æ·»åŠ å‚è€ƒå›¾
- æ³¨é‡Šè‡ªåŠ¨è½¬æ¢ä¸ºç»“æ„åŒ– Markdownï¼ŒAI å‡†ç¡®ç†è§£

## ä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸€æ‹›

**ä½¿ç”¨åœºæ™¯**ï¼š
- è¯„å®¡ AI ç”Ÿæˆçš„å®æ–½è®¡åˆ’ï¼Œéœ€è¦ç²¾ç¡®åé¦ˆä¿®æ”¹æ„è§
- æŸæ®µå†…å®¹ä¸éœ€è¦ï¼ˆåˆ é™¤ï¼‰
- æŸæ®µå†…å®¹éœ€è¦æ”¹æˆå¦ä¸€ç§å†™æ³•ï¼ˆæ›¿æ¢ï¼‰
- æŸæ®µå†…å®¹åé¢éœ€è¦è¡¥å……è¯´æ˜ï¼ˆæ’å…¥ï¼‰
- å¯¹æŸæ®µå†…å®¹æœ‰ç–‘é—®æˆ–å»ºè®®ï¼ˆè¯„è®ºï¼‰

**ä¸é€‚ç”¨åœºæ™¯**ï¼š
- åªæ˜¯æ•´ä½“æ‰¹å‡†æˆ–æ‹’ç»è®¡åˆ’ï¼ˆæ— éœ€æ³¨é‡Šï¼Œç›´æ¥å†³ç­–å³å¯ï¼‰
- å·²ç»åœ¨è¯„å®¡ä»£ç å˜æ›´ï¼ˆä½¿ç”¨ä»£ç è¯„å®¡åŠŸèƒ½ï¼‰

## ğŸ’ å¼€å§‹å‰çš„å‡†å¤‡

**å‰ç½®æ¡ä»¶**ï¼š
- âœ… å·²å®Œæˆ [è®¡åˆ’è¯„å®¡åŸºç¡€](../plan-review-basics/) æ•™ç¨‹
- âœ… äº†è§£å¦‚ä½•è§¦å‘ Plannotator è®¡åˆ’è¯„å®¡ç•Œé¢

**æœ¬è¯¾å‡è®¾**ï¼š
- ä½ å·²ç»æ‰“å¼€äº† Plannotator è®¡åˆ’è¯„å®¡é¡µé¢
- é¡µé¢ä¸­æ˜¾ç¤ºäº†ä¸€ä¸ª AI ç”Ÿæˆçš„ Markdown è®¡åˆ’

## æ ¸å¿ƒæ€è·¯

### æ³¨é‡Šç±»å‹è¯¦è§£

Plannotator æ”¯æŒå››ç§è®¡åˆ’æ³¨é‡Šç±»å‹ï¼ˆå¤–åŠ ä¸€ç§å…¨å±€è¯„è®ºï¼‰ï¼š

| æ³¨é‡Šç±»å‹ | å›¾æ ‡ | ç”¨é€” | æ˜¯å¦éœ€è¦è¾“å…¥å†…å®¹ |
|--- | --- | --- | ---|
| **åˆ é™¤ (DELETION)** | ğŸ—‘ï¸ | æ ‡è®°æ­¤å†…å®¹åº”ä»è®¡åˆ’ä¸­ç§»é™¤ | âŒ ä¸éœ€è¦ |
| **è¯„è®º (COMMENT)** | ğŸ’¬ | å¯¹é€‰ä¸­å†…å®¹æå‡ºé—®é¢˜æˆ–å»ºè®® | âœ… éœ€è¦è¾“å…¥è¯„è®º |
| **æ›¿æ¢ (REPLACEMENT)** | é€šè¿‡è¯„è®ºå®ç° | ç”¨æ–°å†…å®¹æ›¿æ¢é€‰ä¸­å†…å®¹ | âœ… éœ€è¦è¾“å…¥æ–°å†…å®¹ |
| **æ’å…¥ (INSERTION)** | é€šè¿‡è¯„è®ºå®ç° | åœ¨é€‰ä¸­å†…å®¹åæ’å…¥æ–°å†…å®¹ | âœ… éœ€è¦è¾“å…¥æ–°å†…å®¹ |
| **å…¨å±€è¯„è®º (GLOBAL_COMMENT)** | é¡µé¢åº•éƒ¨è¾“å…¥æ¡† | å¯¹æ•´ä¸ªè®¡åˆ’æå‡ºåé¦ˆ | âœ… éœ€è¦è¾“å…¥è¯„è®º |

**ä¸ºä»€ä¹ˆæ›¿æ¢å’Œæ’å…¥æ²¡æœ‰ç‹¬ç«‹æŒ‰é’®ï¼Ÿ**

å› ä¸ºä»æºç å®ç°æ¥çœ‹ï¼Œæ›¿æ¢å’Œæ’å…¥æœ¬è´¨ä¸Šæ˜¯ç‰¹æ®Šçš„è¯„è®ºç±»å‹ï¼ˆ`packages/ui/utils/parser.ts:287-296`ï¼‰ï¼š
- **æ›¿æ¢**ï¼šè¯„è®ºå†…å®¹ä½œä¸ºæ›¿æ¢çš„æ–°æ–‡æœ¬
- **æ’å…¥**ï¼šè¯„è®ºå†…å®¹ä½œä¸ºæ’å…¥çš„æ–°æ–‡æœ¬

å®ƒä»¬éƒ½ä½¿ç”¨ **è¯„è®º (COMMENT)** æŒ‰é’®åˆ›å»ºï¼ŒåŒºåˆ«åœ¨äºä½ å¦‚ä½•æè¿°æ„å›¾ã€‚

### å·¥å…·æ å·¥ä½œæµç¨‹

```
é€‰ä¸­æ–‡æœ¬ â†’ å·¥å…·æ å¼¹å‡ºï¼ˆèœå•æ­¥éª¤ï¼‰
                 â”‚
                 â”œâ”€â”€ ç‚¹å‡» Delete â†’ ç«‹å³åˆ›å»ºåˆ é™¤æ³¨é‡Š
                 â”œâ”€â”€ ç‚¹å‡» Comment â†’ è¿›å…¥è¾“å…¥æ­¥éª¤ â†’ è¾“å…¥å†…å®¹ â†’ ä¿å­˜
                 â””â”€â”€ ç›´æ¥è¾“å…¥å­—ç¬¦ â†’ type-to-comment â†’ è‡ªåŠ¨è¿›å…¥è¾“å…¥æ­¥éª¤
```

**ä¸¤ä¸ªæ­¥éª¤çš„åŒºåˆ«**ï¼š
- **èœå•æ­¥éª¤**ï¼šé€‰æ‹©æ“ä½œç±»å‹ï¼ˆåˆ é™¤ã€è¯„è®ºã€å–æ¶ˆï¼‰
- **è¾“å…¥æ­¥éª¤**ï¼šè¾“å…¥è¯„è®ºå†…å®¹æˆ–é™„åŠ å›¾ç‰‡ï¼ˆä»è¯„è®º/æ›¿æ¢/è¿›å…¥ï¼‰

### type-to-comment å¿«æ·é”®

è¿™æ˜¯æå‡æ•ˆç‡çš„å…³é”®åŠŸèƒ½ã€‚å½“ä½ é€‰ä¸­ä¸€æ®µæ–‡æœ¬åï¼Œ**ç›´æ¥å¼€å§‹æ‰“å­—**ï¼ˆä¸éœ€è¦ç‚¹å‡»ä»»ä½•æŒ‰é’®ï¼‰ï¼Œå·¥å…·æ ä¼šè‡ªåŠ¨ï¼š
1. åˆ‡æ¢åˆ°"è¯„è®º"æ¨¡å¼
2. å°†ä½ è¾“å…¥çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ”¾å…¥è¾“å…¥æ¡†
3. å…‰æ ‡è‡ªåŠ¨å®šä½åˆ°è¾“å…¥æ¡†æœ«å°¾

æºç å®ç°ä½ç½®ï¼š`packages/ui/components/AnnotationToolbar.tsx:127-147`

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šå¯åŠ¨è®¡åˆ’è¯„å®¡

**ä¸ºä»€ä¹ˆ**
éœ€è¦ä¸€ä¸ªå®é™…çš„è®¡åˆ’æ¥ç»ƒä¹ æ·»åŠ æ³¨é‡Šã€‚

**æ“ä½œ**

åœ¨ Claude Code æˆ– OpenCode ä¸­è§¦å‘è®¡åˆ’è¯„å®¡ï¼š

```bash
# Claude Code ç¤ºä¾‹ï¼šè®© AI ç”Ÿæˆè®¡åˆ’åï¼Œå®ƒä¼šè°ƒç”¨ ExitPlanMode
"è¯·ç”Ÿæˆä¸€ä¸ªç”¨æˆ·è®¤è¯åŠŸèƒ½çš„å®æ–½è®¡åˆ’"

# ç­‰å¾… AI å®Œæˆè®¡åˆ’ï¼ŒPlannotator ä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- æµè§ˆå™¨æ‰“å¼€è®¡åˆ’è¯„å®¡é¡µé¢
- é¡µé¢æ˜¾ç¤ºä¸€ä¸ª Markdown æ ¼å¼çš„å®æ–½è®¡åˆ’

### ç¬¬ 2 æ­¥ï¼šæ·»åŠ åˆ é™¤æ³¨é‡Š

**ä¸ºä»€ä¹ˆ**
åˆ é™¤æ³¨é‡Šç”¨äºæ ‡è®°ä¸å¸Œæœ›å‡ºç°åœ¨æœ€ç»ˆè®¡åˆ’ä¸­çš„å†…å®¹ã€‚

**æ“ä½œ**

1. åœ¨è®¡åˆ’ä¸­æ‰¾åˆ°ä½ ä¸éœ€è¦çš„æ®µè½ï¼ˆä¾‹å¦‚æŸä¸ªä¸ç›¸å…³çš„åŠŸèƒ½æè¿°ï¼‰
2. é¼ æ ‡é€‰ä¸­æ–‡æœ¬
3. å·¥å…·æ è‡ªåŠ¨å¼¹å‡ºï¼Œç‚¹å‡» **åˆ é™¤æŒ‰é’®ï¼ˆğŸ—‘ï¸ï¼‰**

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- è¢«é€‰ä¸­çš„æ–‡æœ¬æ˜¾ç¤ºä¸ºåˆ é™¤æ ·å¼ï¼ˆé€šå¸¸æ˜¯åˆ é™¤çº¿æˆ–çº¢è‰²èƒŒæ™¯ï¼‰
- å·¥å…·æ è‡ªåŠ¨å…³é—­

::: tip åˆ é™¤æ³¨é‡Šçš„ç‰¹ç‚¹
åˆ é™¤æ³¨é‡Š**ä¸éœ€è¦è¾“å…¥ä»»ä½•å†…å®¹**ã€‚ç‚¹å‡»åˆ é™¤æŒ‰é’®åï¼Œæ³¨é‡Šç«‹å³åˆ›å»ºå®Œæˆã€‚
:::

### ç¬¬ 3 æ­¥ï¼šä½¿ç”¨ type-to-comment æ·»åŠ è¯„è®º

**ä¸ºä»€ä¹ˆ**
è¯„è®ºæ˜¯æœ€å¸¸ç”¨çš„æ³¨é‡Šç±»å‹ï¼Œtype-to-comment èƒ½è®©ä½ å°‘ç‚¹ä¸€æ¬¡æŒ‰é’®ã€‚

**æ“ä½œ**

1. åœ¨è®¡åˆ’ä¸­é€‰ä¸­æ–‡æœ¬ï¼ˆä¾‹å¦‚æŸä¸ªå‡½æ•°åæˆ–æè¿°ï¼‰
2. **ä¸è¦ç‚¹å‡»ä»»ä½•æŒ‰é’®ï¼Œç›´æ¥å¼€å§‹æ‰“å­—**
3. è¾“å…¥ä½ çš„è¯„è®ºå†…å®¹ï¼ˆä¾‹å¦‚ï¼š"è¿™ä¸ªå‡½æ•°åä¸å¤Ÿæ¸…æ™°"ï¼‰
4. æŒ‰ `Enter` é”®ä¿å­˜ï¼Œæˆ–ç‚¹å‡» **Save** æŒ‰é’®

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- å·¥å…·æ è‡ªåŠ¨åˆ‡æ¢åˆ°è¾“å…¥æ¡†æ¨¡å¼
- ä½ è¾“å…¥çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å·²ç»åœ¨è¾“å…¥æ¡†ä¸­
- å…‰æ ‡è‡ªåŠ¨å®šä½åˆ°è¾“å…¥æ¡†æœ«å°¾
- æŒ‰ `Enter` åï¼Œé€‰ä¸­çš„æ–‡æœ¬æ˜¾ç¤ºä¸ºè¯„è®ºæ ·å¼ï¼ˆé€šå¸¸æ˜¯é»„è‰²èƒŒæ™¯ï¼‰

::: tip type-to-comment çš„å¿«æ·é”®
- `Enter`ï¼šä¿å­˜æ³¨é‡Šï¼ˆå¦‚æœè¾“å…¥æ¡†æœ‰å†…å®¹ï¼‰
- `Shift + Enter`ï¼šæ¢è¡Œï¼ˆè¾“å…¥å¤šè¡Œè¯„è®ºæ—¶ä½¿ç”¨ï¼‰
- `Escape`ï¼šå–æ¶ˆè¾“å…¥ï¼Œè¿”å›èœå•æ­¥éª¤
:::

### ç¬¬ 4 æ­¥ï¼šæ·»åŠ æ›¿æ¢æ³¨é‡Š

**ä¸ºä»€ä¹ˆ**
æ›¿æ¢æ³¨é‡Šç”¨äºç”¨æ–°å†…å®¹æ›¿æ¢é€‰ä¸­å†…å®¹ï¼ŒAI ä¼šæ ¹æ®ä½ çš„æ³¨é‡Šä¿®æ”¹è®¡åˆ’ã€‚

**æ“ä½œ**

1. åœ¨è®¡åˆ’ä¸­é€‰ä¸­æ–‡æœ¬ï¼ˆä¾‹å¦‚ "ä½¿ç”¨ JWT token è¿›è¡Œè®¤è¯"ï¼‰
2. ä½¿ç”¨ type-to-comment æˆ–ç‚¹å‡»è¯„è®ºæŒ‰é’®
3. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ–°çš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼š"ä½¿ç”¨ session cookie è¿›è¡Œè®¤è¯"ï¼‰
4. æŒ‰ `Enter` ä¿å­˜

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- é€‰ä¸­çš„æ–‡æœ¬æ˜¾ç¤ºä¸ºè¯„è®ºæ ·å¼
- æ³¨é‡Šä¾§è¾¹æ ä¸­æ˜¾ç¤ºä½ çš„è¯„è®ºå†…å®¹

**å¯¼å‡ºåçš„æ ¼å¼**ï¼ˆ`packages/ui/utils/parser.ts:292-296`ï¼‰ï¼š

```markdown
## 1. Change this

**From:**
```
ä½¿ç”¨ JWT token è¿›è¡Œè®¤è¯
```

**To:**
```
ä½¿ç”¨ session cookie è¿›è¡Œè®¤è¯
```
```

::: info æ›¿æ¢ä¸åˆ é™¤çš„åŒºåˆ«
- **åˆ é™¤**ï¼šç›´æ¥ç§»é™¤å†…å®¹ï¼Œä¸éœ€è¦è¯´æ˜ç†ç”±
- **æ›¿æ¢**ï¼šç”¨æ–°å†…å®¹æ›¿æ¢æ—§å†…å®¹ï¼Œéœ€è¦æŒ‡å®šæ–°å†…å®¹
:::

### ç¬¬ 5 æ­¥ï¼šæ·»åŠ æ’å…¥æ³¨é‡Š

**ä¸ºä»€ä¹ˆ**
æ’å…¥æ³¨é‡Šç”¨äºåœ¨é€‰ä¸­å†…å®¹åè¡¥å……è¯´æ˜æˆ–ä»£ç ç‰‡æ®µã€‚

**æ“ä½œ**

1. åœ¨è®¡åˆ’ä¸­é€‰ä¸­æ–‡æœ¬ï¼ˆä¾‹å¦‚å‡½æ•°ç­¾åçš„æœ«å°¾ï¼‰
2. ä½¿ç”¨ type-to-comment æˆ–ç‚¹å‡»è¯„è®ºæŒ‰é’®
3. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥è¦æ’å…¥çš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼š"ï¼Œéœ€è¦å¤„ç†è®¤è¯å¤±è´¥çš„æƒ…å†µ"ï¼‰
4. æŒ‰ `Enter` ä¿å­˜

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- é€‰ä¸­çš„æ–‡æœ¬æ˜¾ç¤ºä¸ºè¯„è®ºæ ·å¼
- æ³¨é‡Šä¾§è¾¹æ ä¸­æ˜¾ç¤ºä½ çš„è¯„è®º

**å¯¼å‡ºåçš„æ ¼å¼**ï¼ˆ`packages/ui/utils/parser.ts:287-290`ï¼‰ï¼š

```markdown
## 1. Add this

```
ï¼Œéœ€è¦å¤„ç†è®¤è¯å¤±è´¥çš„æƒ…å†µ
```
```

### ç¬¬ 6 æ­¥ï¼šåœ¨æ³¨é‡Šä¸­é™„åŠ å›¾ç‰‡

**ä¸ºä»€ä¹ˆ**
æœ‰æ—¶å€™æ–‡å­—æè¿°ä¸å¤Ÿç›´è§‚ï¼Œéœ€è¦é™„åŠ å‚è€ƒå›¾æˆ–æˆªå›¾ã€‚

**æ“ä½œ**

1. é€‰ä¸­ä»»æ„æ–‡æœ¬ï¼Œè¿›å…¥è¾“å…¥æ­¥éª¤ï¼ˆç‚¹å‡»è¯„è®ºæŒ‰é’®æˆ– type-to-commentï¼‰
2. åœ¨å·¥å…·æ è¾“å…¥æ¡†æ—è¾¹ï¼Œç‚¹å‡» **é™„ä»¶æŒ‰é’®ï¼ˆğŸ“ï¼‰**
3. é€‰æ‹©è¦ä¸Šä¼ çš„å›¾ç‰‡ï¼ˆæ”¯æŒ PNGã€JPEGã€WebP æ ¼å¼ï¼‰
4. å¯ä»¥ç»§ç»­è¾“å…¥è¯„è®ºå†…å®¹
5. æŒ‰ `Enter` ä¿å­˜

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- å›¾ç‰‡ç¼©ç•¥å›¾æ˜¾ç¤ºåœ¨è¾“å…¥æ¡†ä¸­
- ä¿å­˜åï¼Œå›¾ç‰‡æ˜¾ç¤ºåœ¨æ³¨é‡Šä¾§è¾¹æ ä¸­

::: warning å›¾ç‰‡å­˜å‚¨ä½ç½®
ä¸Šä¼ çš„å›¾ç‰‡ä¿å­˜åœ¨æœ¬åœ° `/tmp/plannotator` ç›®å½•ï¼ˆæºç ä½ç½®ï¼š`packages/server/index.ts:163`ï¼‰ã€‚å¦‚æœæ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼Œå›¾ç‰‡ä¼šä¸¢å¤±ã€‚
:::

### ç¬¬ 7 æ­¥ï¼šæ·»åŠ å…¨å±€è¯„è®º

**ä¸ºä»€ä¹ˆ**
å½“ä½ å¯¹æ•´ä¸ªè®¡åˆ’æœ‰åé¦ˆï¼ˆä¸æ˜¯é’ˆå¯¹å…·ä½“æŸæ®µæ–‡æœ¬ï¼‰æ—¶ï¼Œä½¿ç”¨å…¨å±€è¯„è®ºã€‚

**æ“ä½œ**

1. åœ¨é¡µé¢åº•éƒ¨æ‰¾åˆ°è¾“å…¥æ¡†ï¼ˆæ ‡ç­¾å¯èƒ½æ˜¯ "Add a general comment about the plan..."ï¼‰
2. è¾“å…¥ä½ çš„è¯„è®ºå†…å®¹
3. æŒ‰ `Enter` ä¿å­˜æˆ–ç‚¹å‡»å‘é€æŒ‰é’®

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- è¯„è®ºå‡ºç°åœ¨é¡µé¢åº•éƒ¨çš„å…¨å±€è¯„è®ºåŒºåŸŸ
- è¯„è®ºæ˜¾ç¤ºä¸ºç‹¬ç«‹å¡ç‰‡ï¼Œä¸å…³è”ä»»ä½•æ–‡æœ¬å—

::: tip å…¨å±€è¯„è®º vs æ–‡æœ¬è¯„è®º
- **å…¨å±€è¯„è®º**ï¼šå¯¹æ•´ä¸ªè®¡åˆ’çš„åé¦ˆï¼Œä¸å…³è”å…·ä½“æ–‡æœ¬ï¼ˆä¾‹å¦‚"æ•´ä¸ªè®¡åˆ’ç¼ºå°‘æ€§èƒ½è€ƒè™‘"ï¼‰
- **æ–‡æœ¬è¯„è®º**ï¼šå¯¹æŸæ®µæ–‡æœ¬çš„åé¦ˆï¼Œä¼šé«˜äº®æ˜¾ç¤ºå¯¹åº”çš„æ–‡æœ¬
:::

## æ£€æŸ¥ç‚¹ âœ…

å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œä½ åº”è¯¥ï¼š

- [ ] æˆåŠŸæ·»åŠ äº†è‡³å°‘ä¸€ä¸ªåˆ é™¤æ³¨é‡Š
- [ ] ä½¿ç”¨ type-to-comment æ·»åŠ äº†è¯„è®º
- [ ] æ·»åŠ äº†æ›¿æ¢å’Œæ’å…¥æ³¨é‡Š
- [ ] åœ¨æ³¨é‡Šä¸­é™„åŠ äº†å›¾ç‰‡
- [ ] æ·»åŠ äº†å…¨å±€è¯„è®º
- [ ] åœ¨å³ä¾§ä¾§è¾¹æ çœ‹åˆ°æ‰€æœ‰æ³¨é‡Šåˆ—è¡¨

## è¸©å‘æé†’

### å‘ 1ï¼šæ‰¾ä¸åˆ°"æ›¿æ¢"æŒ‰é’®

**é”™è¯¯æ“ä½œ**ï¼š
- é€‰ä¸­æ–‡æœ¬åï¼Œå·¥å…·æ åªæœ‰ Delete å’Œ Commentï¼Œæ²¡æœ‰ Replace æˆ– Insert æŒ‰é’®

**æ­£ç¡®åšæ³•**ï¼š
- æ›¿æ¢å’Œæ’å…¥é€šè¿‡ **è¯„è®º (COMMENT)** æŒ‰é’®å®ç°
- åœ¨è¯„è®ºå†…å®¹ä¸­æè¿°ä½ çš„æ„å›¾ï¼ˆæ›¿æ¢æˆ–æ’å…¥ï¼‰
- AI ä¼šæ ¹æ®è¯„è®ºå†…å®¹ç†è§£ä½ çš„æ„å›¾

### å‘ 2ï¼štype-to-comment å¤±æ•ˆ

**å¯èƒ½åŸå› **ï¼š
1. æ²¡æœ‰é€‰ä¸­æ–‡æœ¬
2. å…ˆç‚¹å‡»äº†æŸä¸ªæŒ‰é’®ï¼Œå·¥å…·æ å·²è¿›å…¥è¾“å…¥æ­¥éª¤
3. è¾“å…¥äº†ç‰¹æ®Šé”®ï¼ˆ`Ctrl`ã€`Alt`ã€`Escape` ç­‰ï¼‰

**æ­£ç¡®åšæ³•**ï¼š
1. å…ˆé€‰ä¸­æ–‡æœ¬ï¼Œç¡®ä¿å·¥å…·æ æ˜¾ç¤ºåœ¨èœå•æ­¥éª¤ï¼ˆæœ‰ Deleteã€Comment æŒ‰é’®ï¼‰
2. ç›´æ¥è¾“å…¥æ™®é€šå­—ç¬¦ï¼ˆå­—æ¯ã€æ•°å­—ã€æ ‡ç‚¹ï¼‰
3. ä¸è¦æŒ‰åŠŸèƒ½é”®

### å‘ 3ï¼šå›¾ç‰‡ä¸Šä¼ åæ‰¾ä¸åˆ°

**å¯èƒ½åŸå› **ï¼š
- å›¾ç‰‡ä¿å­˜åœ¨ `/tmp/plannotator` ç›®å½•
- ç³»ç»Ÿæ¸…ç†äº†ä¸´æ—¶æ–‡ä»¶

**æ­£ç¡®åšæ³•**ï¼š
- å¦‚æœéœ€è¦é•¿æœŸä¿å­˜å›¾ç‰‡ï¼Œå»ºè®®å¤åˆ¶åˆ°é¡¹ç›®ç›®å½•
- å¯¼å‡ºæ³¨é‡Šæ—¶ï¼Œå›¾ç‰‡è·¯å¾„æ˜¯ç»å¯¹è·¯å¾„ï¼Œç¡®ä¿å…¶ä»–å·¥å…·å¯ä»¥è®¿é—®

### å‘ 4ï¼šæŒ‰ `Enter` æ¢è¡Œå´ä¿å­˜äº†æ³¨é‡Š

**é”™è¯¯æ“ä½œ**ï¼š
- åœ¨è¾“å…¥æ¡†ä¸­æƒ³æ¢è¡Œï¼Œç›´æ¥æŒ‰ `Enter`ï¼Œç»“æœæ³¨é‡Šè¢«ä¿å­˜

**æ­£ç¡®åšæ³•**ï¼š
- ä½¿ç”¨ `Shift + Enter` æ¢è¡Œ
- `Enter` é”®ä¸“ç”¨äºä¿å­˜æ³¨é‡Š

## æœ¬è¯¾å°ç»“

**å››ç§æ³¨é‡Šç±»å‹**ï¼š
- **åˆ é™¤ (DELETION)**ï¼šæ ‡è®°ä¸å¸Œæœ›å‡ºç°åœ¨è®¡åˆ’ä¸­çš„å†…å®¹
- **æ›¿æ¢ (REPLACEMENT)**ï¼šç”¨æ–°å†…å®¹æ›¿æ¢é€‰ä¸­å†…å®¹ï¼ˆé€šè¿‡è¯„è®ºå®ç°ï¼‰
- **æ’å…¥ (INSERTION)**ï¼šåœ¨é€‰ä¸­å†…å®¹åè¡¥å……å†…å®¹ï¼ˆé€šè¿‡è¯„è®ºå®ç°ï¼‰
- **è¯„è®º (COMMENT)**ï¼šå¯¹é€‰ä¸­å†…å®¹æå‡ºé—®é¢˜æˆ–å»ºè®®
- **å…¨å±€è¯„è®º (GLOBAL_COMMENT)**ï¼šå¯¹æ•´ä¸ªè®¡åˆ’çš„åé¦ˆ

**å…³é”®æ“ä½œ**ï¼š
- é€‰ä¸­ â†’ å·¥å…·æ å¼¹å‡º â†’ é€‰æ‹©æ“ä½œç±»å‹
- type-to-commentï¼šç›´æ¥è¾“å…¥å­—ç¬¦ï¼Œè‡ªåŠ¨è¿›å…¥è¯„è®ºæ¨¡å¼
- `Shift + Enter`ï¼šæ¢è¡Œï¼›`Enter`ï¼šä¿å­˜
- é™„ä»¶æŒ‰é’®ï¼šä¸Šä¼ å›¾ç‰‡åˆ°æ³¨é‡Š

**æ³¨é‡Šå¯¼å‡ºæ ¼å¼**ï¼š
- åˆ é™¤ï¼š`## Remove this` + åŸæ–‡æœ¬
- æ’å…¥ï¼š`## Add this` + æ–°æ–‡æœ¬
- æ›¿æ¢ï¼š`## Change this` + From/To å¯¹æ¯”
- è¯„è®ºï¼š`## Feedback on: "..."` + è¯„è®ºå†…å®¹

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬å­¦ä¹  **[æ·»åŠ å›¾åƒæ ‡æ³¨](../plan-review-images/)**ã€‚
>
> ä½ ä¼šå­¦åˆ°ï¼š
> - å¦‚ä½•åœ¨è®¡åˆ’è¯„å®¡ä¸­é™„åŠ å›¾åƒ
> - ä½¿ç”¨ç”»ç¬”ã€ç®­å¤´ã€åœ†å½¢å·¥å…·è¿›è¡Œæ ‡æ³¨
> - æ ‡æ³¨å›¾åƒä½œä¸ºå‚è€ƒåé¦ˆ

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-24

| åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ | è¡Œå· |
|--- | --- | ---|
| æ³¨é‡Šç±»å‹æšä¸¾å®šä¹‰ | [`packages/ui/types.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/types.ts#L1-L7) | 1-7 |
| Annotation æ¥å£ | [`packages/ui/types.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/types.ts#L11-L33) | 11-33 |
| æ³¨é‡Šå·¥å…·æ ç»„ä»¶ | [`packages/ui/components/AnnotationToolbar.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/components/AnnotationToolbar.tsx#L29-L272) | 29-272 |
|--- | --- | ---|
| æ³¨é‡Šå¯¼å‡ºæ ¼å¼åŒ– | [`packages/ui/utils/parser.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/utils/parser.ts#L246-L323) | 246-323 |
| Markdown è§£æä¸º Blocks | [`packages/ui/utils/parser.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/utils/parser.ts#L70-L244) | 70-244 |
| Viewer ç»„ä»¶ï¼ˆæ–‡æœ¬é€‰æ‹©å¤„ç†ï¼‰ | [`packages/ui/components/Viewer.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/components/Viewer.tsx#L66-L350) | 66-350 |

**å…³é”®å¸¸é‡**ï¼š
- `AnnotationType.DELETION = 'DELETION'`ï¼šåˆ é™¤æ³¨é‡Šç±»å‹
- `AnnotationType.INSERTION = 'INSERTION'`ï¼šæ’å…¥æ³¨é‡Šç±»å‹
- `AnnotationType.REPLACEMENT = 'REPLACEMENT'`ï¼šæ›¿æ¢æ³¨é‡Šç±»å‹
- `AnnotationType.COMMENT = 'COMMENT'`ï¼šè¯„è®ºæ³¨é‡Šç±»å‹
- `AnnotationType.GLOBAL_COMMENT = 'GLOBAL_COMMENT'`ï¼šå…¨å±€è¯„è®ºç±»å‹

**å…³é”®å‡½æ•°**ï¼š
- `exportDiff(blocks, annotations)`ï¼šå°†æ³¨é‡Šå¯¼å‡ºä¸º Markdown æ ¼å¼ï¼ŒåŒ…å« From/To å¯¹æ¯”
- `parseMarkdownToBlocks(markdown)`ï¼šå°† Markdown è§£æä¸ºçº¿æ€§ Block æ•°ç»„
- `createAnnotationFromSource()`ï¼šä»æ–‡æœ¬é€‰æ‹©åˆ›å»º Annotation å¯¹è±¡

</details>
