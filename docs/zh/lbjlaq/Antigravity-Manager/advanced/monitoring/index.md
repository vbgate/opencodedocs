---
title: "ç›‘æ§æ’éšœ: è¯·æ±‚æ—¥å¿—åˆ†æ | Antigravity-Manager"
sidebarTitle: "è¯·æ±‚æ—¥å¿—æŸ¥é”™"
subtitle: "ç›‘æ§æ’éšœ: è¯·æ±‚æ—¥å¿—åˆ†æ"
description: "å­¦ä¹  Antigravity Tools çš„ Proxy Monitor ç›‘æ§æ’éšœã€‚é€šè¿‡è¯·æ±‚æ—¥å¿—ã€ç­›é€‰å’Œè¯¦æƒ…è¿˜åŸåŠŸèƒ½ï¼Œå®šä½ 401/429/5xx é”™è¯¯ä¸æµå¼ä¸­æ–­é—®é¢˜ã€‚"
tags:
  - "è¿›é˜¶"
  - "ç›‘æ§"
  - "æ’éšœ"
  - "Proxy"
  - "æ—¥å¿—"
prerequisite:
  - "start-proxy-and-first-client"
  - "start-first-run-data"
  - "advanced-config"
order: 6
---

# Proxy Monitorï¼šè¯·æ±‚æ—¥å¿—ã€ç­›é€‰ã€è¯¦æƒ…è¿˜åŸä¸å¯¼å‡º

ä½ å·²ç»æŠŠæœ¬åœ°åä»£è·‘èµ·æ¥äº†ï¼Œä½†ä¸€æ—¦å‡ºç° 401/429/500ã€æµå¼ä¸­æ–­ã€æˆ–è€…â€œæ€ä¹ˆçªç„¶æ¢äº†è´¦å·/æ¢äº†æ¨¡å‹â€ï¼Œæ’éšœå°±å¾ˆå®¹æ˜“å˜æˆç›²çŒœã€‚

è¿™èŠ‚è¯¾åªè®²ä¸€ä»¶äº‹ï¼šç”¨ **Proxy Monitor** æŠŠæ¯æ¬¡è°ƒç”¨è¿˜åŸæˆâ€œå¯å¤ç›˜çš„è¯æ®â€ï¼Œè®©ä½ çŸ¥é“è¯·æ±‚ä»å“ªæ¥ã€æ‰“åˆ°å“ªä¸ªç«¯ç‚¹ã€ç”¨äº†å“ªä¸ªè´¦å·ã€æ¨¡å‹æœ‰æ²¡æœ‰è¢«æ˜ å°„ã€ä»¥åŠ Token æ¶ˆè€—å¤§æ¦‚æ˜¯å¤šå°‘ã€‚

## å­¦å®Œä½ èƒ½åšä»€ä¹ˆ

- åœ¨ `/monitor` é¡µé¢æ‰“å¼€/æš‚åœå½•åˆ¶ï¼Œå¹¶ç†è§£å®ƒä¼šä¸ä¼šå½±å“ Token Stats
- ç”¨æœç´¢æ¡†ã€å¿«é€Ÿç­›é€‰ã€è´¦å·ç­›é€‰ï¼Œå¿«é€Ÿå®šä½ä¸€æ¡è¯·æ±‚è®°å½•
- åœ¨è¯¦æƒ…å¼¹çª—é‡ŒæŸ¥çœ‹å¹¶å¤åˆ¶ Request/Response æŠ¥æ–‡ï¼Œå¤ç›˜å¤±è´¥åŸå› 
- çŸ¥é“ Proxy Monitor çš„æ•°æ®è½ç›˜ä½ç½®ï¼ˆ`proxy_logs.db`ï¼‰ä¸æ¸…ç©ºè¡Œä¸º
- äº†è§£å½“å‰ç‰ˆæœ¬â€œå¯¼å‡ºæ—¥å¿—â€çš„çœŸå®èƒ½åŠ›è¾¹ç•Œï¼ˆGUI vs åç«¯å‘½ä»¤ï¼‰

## ä½ ç°åœ¨çš„å›°å¢ƒ

- ä½ åªçœ‹åˆ°â€œè°ƒç”¨å¤±è´¥/è¶…æ—¶â€ï¼Œä½†ä¸çŸ¥é“åˆ°åº•å¤±è´¥åœ¨ä¸Šæ¸¸ã€ä»£ç†ã€è¿˜æ˜¯å®¢æˆ·ç«¯é…ç½®
- ä½ æ€€ç–‘è§¦å‘äº†æ¨¡å‹æ˜ å°„æˆ–è´¦å·è½®æ¢ï¼Œä½†æ²¡æœ‰è¯æ®é“¾
- ä½ æƒ³å¤ç›˜ä¸€æ¡è¯·æ±‚çš„å®Œæ•´ payloadï¼ˆå°¤å…¶æ˜¯æµå¼/Thinkingï¼‰ï¼Œä½†æ—¥å¿—é‡Œçœ‹ä¸åˆ°

## ä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸€æ‹›

- ä½ è¦æ’æŸ¥ï¼š401 é‰´æƒå¤±è´¥ã€429 é™æµã€5xx ä¸Šæ¸¸é”™è¯¯ã€æµå¼ä¸­æ–­
- ä½ æƒ³ç¡®è®¤ï¼šæŸæ¬¡è¯·æ±‚åˆ°åº•ç”¨äº†å“ªä¸ªè´¦å·ï¼ˆ`X-Account-Email`ï¼‰
- ä½ åœ¨åšæ¨¡å‹è·¯ç”±ç­–ç•¥ï¼Œæƒ³éªŒè¯â€œå®¢æˆ·ç«¯æ¨¡å‹å -> å®é™…æ˜ å°„æ¨¡å‹åâ€

## ğŸ’ å¼€å§‹å‰çš„å‡†å¤‡

::: warning å‰ç½®æ¡ä»¶
Proxy Monitor è®°å½•çš„æ˜¯â€œåä»£æœåŠ¡æ”¶åˆ°çš„è¯·æ±‚â€ã€‚æ‰€ä»¥ä½ è‡³å°‘è¦å…ˆè·‘é€šï¼š

- åä»£æœåŠ¡å·²å¯åŠ¨ï¼Œå¹¶èƒ½è®¿é—® `/healthz`
- ä½ çŸ¥é“å½“å‰åä»£çš„ Base URL å’Œç«¯å£

å¦‚æœè¿˜æ²¡è·‘é€šï¼Œå…ˆçœ‹ **[å¯åŠ¨æœ¬åœ°åä»£å¹¶æ¥å…¥ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯](/zh/lbjlaq/Antigravity-Manager/start/proxy-and-first-client/)**ã€‚
:::

## ä»€ä¹ˆæ˜¯ Proxy Monitorï¼Ÿ

**Proxy Monitor** æ˜¯ Antigravity Tools å†…ç½®çš„â€œè¯·æ±‚æ—¥å¿—çœ‹æ¿â€ã€‚æ¯æ¬¡è¯·æ±‚è¿›åˆ°æœ¬åœ°åä»£åï¼Œå®ƒä¼šè®°å½•æ—¶é—´ã€è·¯å¾„ã€çŠ¶æ€ç ã€è€—æ—¶ã€æ¨¡å‹ä¸åè®®ï¼Œå¹¶å°½é‡ä»å“åº”é‡Œæå– Token ç”¨é‡ï¼›ä½ è¿˜èƒ½ç‚¹å¼€å•æ¡è®°å½•æŸ¥çœ‹è¯·æ±‚ä¸å“åº”æŠ¥æ–‡ï¼Œç”¨å®ƒæ¥å¤ç›˜å¤±è´¥åŸå› å’Œè·¯ç”±/è´¦å·é€‰æ‹©ç»“æœã€‚

::: info æ•°æ®è½ç›˜ä½ç½®
Proxy Monitor çš„æ—¥å¿—ä¼šå†™å…¥æ•°æ®ç›®å½•ä¸‹çš„ SQLiteï¼š`proxy_logs.db`ã€‚æ•°æ®ç›®å½•æ€ä¹ˆæ‰¾ã€æ€ä¹ˆå¤‡ä»½ï¼Œå»ºè®®å…ˆå¤ä¹  **[é¦–æ¬¡å¯åŠ¨å¿…æ‡‚ï¼šæ•°æ®ç›®å½•ã€æ—¥å¿—ã€æ‰˜ç›˜ä¸è‡ªåŠ¨å¯åŠ¨](/zh/lbjlaq/Antigravity-Manager/start/first-run-data/)**ã€‚
:::

## æ ¸å¿ƒæ€è·¯ï¼šä½ éœ€è¦ç›¯ä½çš„ 6 ä¸ªå­—æ®µ

Proxy Monitor çš„ä¸€æ¡è®°å½•ï¼ˆåç«¯ç»“æ„ä½“ `ProxyRequestLog`ï¼‰é‡Œï¼Œæœ€å®ç”¨çš„æ˜¯ä¸‹é¢è¿™äº›å­—æ®µï¼š

| å­—æ®µ | ä½ ç”¨å®ƒå›ç­”ä»€ä¹ˆé—®é¢˜ |
|--- | ---|
| `status` | è¿™æ¬¡è¯·æ±‚æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼ˆ200-399 vs å…¶ä»–ï¼‰ |
| `url` / `method` | ä½ åˆ°åº•æ‰“åˆ°äº†å“ªä¸ªç«¯ç‚¹ï¼ˆä¾‹å¦‚ `/v1/messages`ã€`/v1/chat/completions`ï¼‰ |
| `protocol` | è¿™æ˜¯ OpenAI / Claude(Anthropic) / Gemini å“ªå¥—åè®® |
| `account_email` | è¿™æ¬¡è¯·æ±‚æœ€ç»ˆç”¨äº†å“ªä¸ªè´¦å·ï¼ˆæ¥è‡ª `X-Account-Email` å“åº”å¤´ï¼‰ |
| `model` / `mapped_model` | å®¢æˆ·ç«¯è¯·æ±‚çš„æ¨¡å‹åæœ‰æ²¡æœ‰è¢«â€œè·¯ç”±/æ˜ å°„â€æˆå¦ä¸€ä¸ªæ¨¡å‹ |
| `input_tokens` / `output_tokens` | è¿™æ¬¡è¯·æ±‚çš„ Token ç”¨é‡ï¼ˆèƒ½æå–åˆ°æ‰æœ‰ï¼‰ |

::: tip å…ˆç”¨â€œæ‘˜è¦â€ï¼Œéœ€è¦æ—¶å†ç‚¹â€œè¯¦æƒ…â€
åˆ—è¡¨é¡µåªå±•ç¤ºæ‘˜è¦ï¼ˆä¸å¸¦ request/response bodyï¼‰ï¼Œç‚¹å¼€ä¸€æ¡è®°å½•æ‰ä¼šå»åç«¯åŠ è½½å®Œæ•´è¯¦æƒ…ï¼Œé¿å…åˆ—è¡¨ä¸€æ¬¡æ€§æ‹‰å¤ªå¤šå¤§å­—æ®µã€‚
:::

## è·Ÿæˆ‘åšï¼šç”¨ä¸€æ¬¡è°ƒç”¨è·‘é€šâ€œç›‘æ§é—­ç¯â€

### ç¬¬ 1 æ­¥ï¼šå…ˆåˆ¶é€ ä¸€æ¡â€œä½ ç¡®å®šä¼šå‡ºç°â€çš„è¯·æ±‚

**ä¸ºä»€ä¹ˆ**
Proxy Monitor åªè®°å½•åä»£æœåŠ¡æ”¶åˆ°çš„è¯·æ±‚ã€‚å…ˆç”¨ä¸€ä¸ªæœ€ç®€å•çš„è¯·æ±‚æŠŠâ€œæœ‰æ²¡æœ‰è®°å½•â€è¿™ä»¶äº‹éªŒè¯æ‰ï¼Œåé¢æ‰è°ˆç­›é€‰å’Œè¯¦æƒ…ã€‚

::: code-group

```bash [macOS/Linux]
## 1) æ¢æ´»ï¼ˆä¸€å®šå­˜åœ¨çš„ç«¯ç‚¹ï¼‰
curl "http://127.0.0.1:PORT/healthz"

## 2) å†è¯·æ±‚ä¸€æ¬¡ modelsï¼ˆå¦‚æœä½ å¼€å¯äº†é‰´æƒï¼Œè®°å¾—åŠ  headerï¼‰
curl "http://127.0.0.1:PORT/v1/models"
```

```powershell [Windows]
## 1) æ¢æ´»ï¼ˆä¸€å®šå­˜åœ¨çš„ç«¯ç‚¹ï¼‰
curl "http://127.0.0.1:PORT/healthz"

## 2) å†è¯·æ±‚ä¸€æ¬¡ modelsï¼ˆå¦‚æœä½ å¼€å¯äº†é‰´æƒï¼Œè®°å¾—åŠ  headerï¼‰
curl "http://127.0.0.1:PORT/v1/models"
```

:::

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šç»ˆç«¯è¿”å› `{"status":"ok"}`ï¼ˆæˆ–ç±»ä¼¼ JSONï¼‰ï¼Œä»¥åŠ `/v1/models` çš„å“åº”ï¼ˆæˆåŠŸæˆ– 401 éƒ½è¡Œï¼‰ã€‚

### ç¬¬ 2 æ­¥ï¼šæ‰“å¼€ Monitor é¡µé¢å¹¶ç¡®è®¤â€œå½•åˆ¶çŠ¶æ€â€

**ä¸ºä»€ä¹ˆ**
Proxy Monitor æœ‰â€œå½•åˆ¶/æš‚åœâ€å¼€å…³ã€‚ä½ éœ€è¦å…ˆç¡®è®¤å½“å‰çŠ¶æ€ï¼Œå¦åˆ™ä½ å¯èƒ½ä¸€ç›´åœ¨è¯·æ±‚ï¼Œä½†åˆ—è¡¨æ°¸è¿œæ˜¯ç©ºçš„ã€‚

åœ¨ Antigravity Tools é‡Œæ‰“å¼€ä¾§è¾¹æ çš„ **API ç›‘æ§çœ‹æ¿**ï¼ˆè·¯ç”±ä¸º `/monitor`ï¼‰ã€‚

é¡µé¢é¡¶éƒ¨ä¼šæœ‰ä¸€ä¸ªå¸¦åœ†ç‚¹çš„æŒ‰é’®ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â— æ­£åœ¨å½•åˆ¶   [æœç´¢æ¡†]  [åˆ·æ–°] [æ¸…é™¤]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å¦‚æœä½ çœ‹åˆ°çš„æ˜¯â€œå·²æš‚åœâ€ï¼Œç‚¹ä¸€ä¸‹åˆ‡æ¢åˆ°â€œæ­£åœ¨å½•åˆ¶â€ã€‚

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šæŒ‰é’®çŠ¶æ€å˜æˆâ€œæ­£åœ¨å½•åˆ¶â€ï¼›åˆ—è¡¨é‡Œå¼€å§‹å‡ºç°åˆšæ‰çš„è¯·æ±‚è®°å½•ã€‚

### ç¬¬ 3 æ­¥ï¼šç”¨â€œæœç´¢ + å¿«é€Ÿç­›é€‰â€å®šä½ä¸€æ¡è®°å½•

**ä¸ºä»€ä¹ˆ**
çœŸå®æ’éšœæ—¶ï¼Œä½ é€šå¸¸åªè®°å¾—ä¸€ä¸ªç‰‡æ®µï¼šè·¯å¾„é‡Œæœ‰ `messages`ï¼Œæˆ–è€…çŠ¶æ€ç æ˜¯ `401`ï¼Œæˆ–è€…æ¨¡å‹åé‡Œæœ‰ `gemini`ã€‚æœç´¢æ¡†å°±æ˜¯ä¸ºè¿™ç§è®°å¿†è®¾è®¡çš„ã€‚

Proxy Monitor çš„æœç´¢ï¼Œä¼šæŠŠä½ çš„è¾“å…¥å½“æˆä¸€ä¸ªâ€œæ¨¡ç³Šå…³é”®è¯â€ï¼Œåœ¨åç«¯ç”¨ SQL `LIKE` åŒ¹é…è¿™äº›å­—æ®µï¼š

- `url`
- `method`
- `model`
- `status`
- `account_email`

ä½ å¯ä»¥è¯•å‡ ä¸ªå…¸å‹å…³é”®è¯ï¼š

- `healthz`
- `models`
- `401`ï¼ˆå¦‚æœä½ åˆšå¥½åˆ¶é€ äº†ä¸€ä¸ª 401ï¼‰

ä¹Ÿå¯ä»¥ç‚¹â€œå¿«é€Ÿè¿‡æ»¤â€æŒ‰é’®ï¼š**ä»…é”™è¯¯ / Chat / Gemini / Claude / ç»˜å›¾**ã€‚

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šåˆ—è¡¨åªå‰©ä¸‹ä½ æœŸæœ›çš„é‚£ä¸€ç±»è¯·æ±‚ã€‚

### ç¬¬ 4 æ­¥ï¼šç‚¹å¼€è¯¦æƒ…ï¼Œè¿˜åŸâ€œè¯·æ±‚æŠ¥æ–‡ + å“åº”æŠ¥æ–‡â€

**ä¸ºä»€ä¹ˆ**
åˆ—è¡¨åªå¤Ÿå›ç­”â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€ã€‚è¦å›ç­”â€œä¸ºä»€ä¹ˆâ€ï¼Œä½ é€šå¸¸éœ€è¦çœ‹å®Œæ•´è¯·æ±‚/å“åº” payloadã€‚

ç‚¹å¼€ä»»æ„ä¸€æ¡è®°å½•ï¼Œä¼šå¼¹å‡ºè¯¦æƒ…çª—å£ã€‚ä½ å¯ä»¥é‡ç‚¹æ£€æŸ¥ï¼š

- `åè®®`ï¼ˆOpenAI/Claude/Geminiï¼‰
- `ä½¿ç”¨æ¨¡å‹` ä¸ `æ˜ å°„æ¨¡å‹`
- `ä½¿ç”¨è´¦å·`
- `Token æ¶ˆè€— (è¾“å…¥/è¾“å‡º)`

ç„¶åç”¨æŒ‰é’®å¤åˆ¶ï¼š

- `è¯·æ±‚æŠ¥æ–‡ (Request)`
- `å“åº”æŠ¥æ–‡ (Response)`

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šè¯¦æƒ…é‡Œæœ‰ä¸¤å— JSONï¼ˆæˆ–æ–‡æœ¬ï¼‰é¢„è§ˆï¼›å¤åˆ¶åä½ å¯ä»¥ç²˜è´´åˆ°å·¥å•/ç¬”è®°é‡Œåšå¤ç›˜ã€‚

### ç¬¬ 5 æ­¥ï¼šéœ€è¦â€œä»é›¶å¼€å§‹å¤ç°â€æ—¶ï¼Œæ¸…ç©ºæ—¥å¿—

**ä¸ºä»€ä¹ˆ**
æ’éšœæ—¶æœ€æ€•â€œæ—§æ•°æ®å¹²æ‰°åˆ¤æ–­â€ã€‚æ¸…ç©ºåå¤ç°ä¸€æ¬¡ï¼ŒæˆåŠŸ/å¤±è´¥ä¼šéå¸¸æ¸…æ¥šã€‚

ç‚¹å‡»é¡¶éƒ¨çš„â€œæ¸…é™¤â€æŒ‰é’®ï¼Œä¼šå¼¹å‡ºç¡®è®¤æ¡†ã€‚

::: danger è¿™æ˜¯ä¸å¯é€†æ“ä½œ
æ¸…é™¤ä¼šåˆ é™¤ `proxy_logs.db` é‡Œçš„æ‰€æœ‰è®°å½•ã€‚
:::

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šç¡®è®¤ååˆ—è¡¨æ¸…ç©ºï¼Œç»Ÿè®¡æ•°å­—å›åˆ° 0ã€‚

## æ£€æŸ¥ç‚¹ âœ…

- [ ] ä½ èƒ½åœ¨ `/monitor` çœ‹åˆ°è‡ªå·±åˆšå‘å‡ºçš„ `/healthz` æˆ– `/v1/models` è®°å½•
- [ ] ä½ èƒ½ç”¨æœç´¢æ¡†æŠŠæŸæ¡è®°å½•ç­›å‡ºæ¥ï¼ˆä¾‹å¦‚è¾“å…¥ `healthz`ï¼‰
- [ ] ä½ èƒ½ç‚¹å¼€ä¸€æ¡è®°å½•çœ‹åˆ°è¯·æ±‚/å“åº”æŠ¥æ–‡ï¼Œå¹¶å¤åˆ¶å‡ºæ¥
- [ ] ä½ çŸ¥é“æ¸…ç©ºæ—¥å¿—ä¼šç›´æ¥åˆ é™¤æ‰€æœ‰å†å²è®°å½•

## è¸©å‘æé†’

| åœºæ™¯ | ä½ å¯èƒ½ä¼šæ€ä¹ˆç†è§£ï¼ˆâŒï¼‰ | å®é™…è¡¨ç°ï¼ˆâœ“ï¼‰ |
|--- | --- | ---|
| "å·²æš‚åœ"= å®Œå…¨æ²¡æœ‰ç›‘æ§å¼€é”€ | ä»¥ä¸ºæš‚åœåè¯·æ±‚å°±ä¸ä¼šè¢«è§£æ | æš‚åœåªå½±å“"æ˜¯å¦å†™å…¥ Proxy Monitor æ—¥å¿—"ã€‚ä½†è¯·æ±‚/å“åº”è§£æï¼ˆåŒ…æ‹¬æµå¼æ•°æ®çš„ SSE è§£æï¼‰ä»ä¼šå‘ç”Ÿï¼Œåªæ˜¯è§£æåçš„æ•°æ®ä¸è¢«ä¿å­˜ã€‚Token Stats ä¹Ÿä»ä¼šè®°å½•ï¼ˆæ— è®ºç›‘æ§æ˜¯å¦å¯ç”¨ï¼‰ã€‚ |
| äºŒè¿›åˆ¶/å¤§åŒ…ä½“æ—¥å¿—ä¸ºç©º | ä»¥ä¸ºæ˜¯ç›‘æ§åäº† | äºŒè¿›åˆ¶è¯·æ±‚/å“åº”ä¼šæ˜¾ç¤ºä¸º `[Binary Request Data]` / `[Binary Response Data]`ã€‚å“åº”ä½“è¶…è¿‡ 100MB ä¼šæ ‡è®°ä¸º `[Response too large (>100MB)]`ï¼›è¯·æ±‚ä½“è¶…è¿‡é™åˆ¶åˆ™ä¸è®°å½•ã€‚ |
| æƒ³ç”¨ Monitor æ‰¾åˆ°â€œè°å‘èµ·äº†è¯·æ±‚â€ | ä»¥ä¸ºèƒ½è¿½æº¯åˆ°å®¢æˆ·ç«¯è¿›ç¨‹ | Monitor è®°å½•çš„æ˜¯ HTTP å±‚ä¿¡æ¯ï¼ˆæ–¹æ³•/è·¯å¾„/æ¨¡å‹/è´¦å·ï¼‰ï¼Œä¸åŒ…å«â€œè°ƒç”¨æ–¹è¿›ç¨‹åâ€ã€‚ä½ éœ€è¦ç»“åˆå®¢æˆ·ç«¯è‡ªèº«æ—¥å¿—æˆ–ç³»ç»Ÿç½‘ç»œæŠ“åŒ…å®šä½æ¥æºã€‚ |
| å¯ç”¨ç›‘æ§æ—¶ Token Stats æ•°æ®å¼‚å¸¸ | ä»¥ä¸ºæ˜¯ç»Ÿè®¡é”™è¯¯ | ç›‘æ§å¯ç”¨æ—¶ï¼ŒToken Stats å¯èƒ½è¢«è®°å½•ä¸¤æ¬¡ï¼ˆä¸€æ¬¡åœ¨ç›‘æ§å‡½æ•°å¼€å¤´ï¼Œä¸€æ¬¡åœ¨å¼‚æ­¥å†™å…¥æ•°æ®åº“æ—¶ï¼‰ã€‚è¿™æ˜¯å½“å‰ç‰ˆæœ¬çš„æºç è¡Œä¸ºã€‚ |
## å¯¼å‡ºä¸é•¿æœŸç•™å­˜ï¼šå…ˆè¯´æ¸…æ¥šèƒ½åŠ›è¾¹ç•Œ

### 1) GUI é‡Œç›®å‰èƒ½åšä»€ä¹ˆ

åœ¨å½“å‰ç‰ˆæœ¬çš„ Monitor UIï¼ˆ`ProxyMonitor.tsx`ï¼‰é‡Œï¼Œä½ å¯ä»¥ï¼š

- æœç´¢/ç­›é€‰/åˆ†é¡µæµè§ˆ
- ç‚¹å¼€è¯¦æƒ…æŸ¥çœ‹ä¸å¤åˆ¶ payload
- æ¸…ç©ºå…¨éƒ¨æ—¥å¿—

ä½† **æ²¡æœ‰å‘ç°â€œå¯¼å‡ºæŒ‰é’®â€**ï¼ˆæºç é‡Œæœªçœ‹åˆ°ç›¸å…³ UIï¼‰ã€‚

### 2) åç«¯å·²ç»æœ‰ä»€ä¹ˆå¯¼å‡ºèƒ½åŠ›ï¼ˆé€‚åˆäºŒæ¬¡å¼€å‘ï¼‰

åç«¯ Tauri å‘½ä»¤æä¾›äº†ä¸¤ç§å¯¼å‡ºæ–¹å¼ï¼š

- `export_proxy_logs(file_path)`ï¼šæŠŠæ•°æ®åº“é‡Œâ€œå…¨éƒ¨æ—¥å¿—â€å¯¼å‡ºä¸º JSON æ–‡ä»¶
- `export_proxy_logs_json(file_path, json_data)`ï¼šæŠŠä½ ä¼ å…¥çš„ JSON æ•°ç»„ç¾åŒ–åå†™å…¥æ–‡ä»¶ï¼ˆè¦æ±‚è¾“å…¥å¿…é¡»æ˜¯æ•°ç»„æ ¼å¼ï¼‰

å¦‚æœä½ è¦äºŒæ¬¡å¼€å‘ GUIï¼Œæˆ–è€…å†™ä¸€ä¸ªè‡ªå·±çš„è°ƒç”¨è„šæœ¬ï¼Œå¯ä»¥ç›´æ¥å¤ç”¨è¿™äº›å‘½ä»¤ã€‚

### 3) æœ€æœ´ç´ çš„â€œå¯¼å‡ºâ€ï¼šç›´æ¥å¤‡ä»½ `proxy_logs.db`

å› ä¸º Proxy Monitor æœ¬è´¨æ˜¯ SQLiteï¼Œä½ ä¹Ÿå¯ä»¥æŠŠ `proxy_logs.db` å½“æˆâ€œæ’éšœè¯æ®åŒ…â€ä¸€èµ·å¤‡ä»½ï¼ˆä¾‹å¦‚è¿åŒ `token_stats.db`ï¼‰ã€‚æ•°æ®ç›®å½•ä½ç½®è§ **[é¦–æ¬¡å¯åŠ¨å¿…æ‡‚](/zh/lbjlaq/Antigravity-Manager/start/first-run-data/)**ã€‚

## æ¨èé˜…è¯»

- æƒ³å¼„æ¸…æ¨¡å‹æ˜ å°„ï¼š**[æ¨¡å‹è·¯ç”±ï¼šè‡ªå®šä¹‰æ˜ å°„ã€é€šé…ç¬¦ä¼˜å…ˆçº§ä¸é¢„è®¾ç­–ç•¥](/zh/lbjlaq/Antigravity-Manager/advanced/model-router/)**
- æƒ³æ’æŸ¥é‰´æƒé—®é¢˜ï¼š**[401/é‰´æƒå¤±è´¥ï¼šauth_modeã€Header å…¼å®¹ä¸å®¢æˆ·ç«¯é…ç½®æ¸…å•](/zh/lbjlaq/Antigravity-Manager/faq/auth-401/)**
- æƒ³æŠŠ Monitor ä¸æˆæœ¬ç»Ÿè®¡ç»“åˆï¼šä¸‹ä¸€èŠ‚ä¼šè®² Token Statsï¼ˆ`token_stats.db`ï¼‰

## æœ¬è¯¾å°ç»“

- Proxy Monitor çš„ä»·å€¼æ˜¯â€œå¯å¤ç›˜â€ï¼šè®°å½•çŠ¶æ€ç /è·¯å¾„/åè®®/è´¦å·/æ¨¡å‹æ˜ å°„/Token ç”¨é‡ï¼Œå¹¶æä¾›è¯·æ±‚è¯¦æƒ…
- æœç´¢ä¸å¿«é€Ÿç­›é€‰æ˜¯æ’éšœå…¥å£ï¼šå…ˆç¼©å°èŒƒå›´ï¼Œå†ç‚¹è¯¦æƒ…çœ‹ payload
- æ¸…ç©ºæ—¥å¿—æ˜¯ä¸å¯é€†æ“ä½œï¼›å¯¼å‡ºç›®å‰æ›´åå‘â€œäºŒæ¬¡å¼€å‘èƒ½åŠ›â€å’Œâ€œå¤‡ä»½æ•°æ®åº“æ–‡ä»¶â€

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬å­¦ä¹  **[Token Statsï¼šæˆæœ¬è§†è§’çš„ç»Ÿè®¡å£å¾„ä¸å›¾è¡¨è§£è¯»](/zh/lbjlaq/Antigravity-Manager/advanced/token-stats/)**ï¼ŒæŠŠâ€œæ„Ÿè§‰è´µâ€å˜æˆå¯é‡åŒ–çš„ä¼˜åŒ–ã€‚

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-23

| åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ | è¡Œå· |
|--- | --- | ---|
| Monitor é¡µé¢å…¥å£ï¼ˆæŒ‚è½½ ProxyMonitorï¼‰ | [`src/pages/Monitor.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/pages/Monitor.tsx#L1-L12) | 1-12 |
| Monitor UIï¼šè¡¨æ ¼/ç­›é€‰/è¯¦æƒ…å¼¹çª— | [`src/components/proxy/ProxyMonitor.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/proxy/ProxyMonitor.tsx#L13-L713) | 13-713 |
| UIï¼šè¯»å–é…ç½®å¹¶åŒæ­¥ enable_logging | [`src/components/proxy/ProxyMonitor.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/proxy/ProxyMonitor.tsx#L174-L243) | 174-243 |
| UIï¼šåˆ‡æ¢å½•åˆ¶ï¼ˆå†™å…¥ config + set_proxy_monitor_enabledï¼‰ | [`src/components/proxy/ProxyMonitor.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/proxy/ProxyMonitor.tsx#L254-L267) | 254-267 |
| UIï¼šå®æ—¶äº‹ä»¶ç›‘å¬ï¼ˆproxy://requestï¼‰ä¸å»é‡ | [`src/components/proxy/ProxyMonitor.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/proxy/ProxyMonitor.tsx#L273-L355) | 273-355 |
| UIï¼šæ¸…ç©ºæ—¥å¿—ï¼ˆclear_proxy_logsï¼‰ | [`src/components/proxy/ProxyMonitor.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/proxy/ProxyMonitor.tsx#L389-L403) | 389-403 |
| UIï¼šåŠ è½½å•æ¡è¯¦æƒ…ï¼ˆget_proxy_log_detailï¼‰ | [`src/components/proxy/ProxyMonitor.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/proxy/ProxyMonitor.tsx#L505-L519) | 505-519 |
| ç›‘æ§ä¸­é—´ä»¶ï¼šæŠ“å–è¯·æ±‚/å“åº”ã€è§£æ tokenã€å†™å…¥ monitor | [`src-tauri/src/proxy/middleware/monitor.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/middleware/monitor.rs#L13-L337) | 13-337 |
| ProxyMonitorï¼šenabled å¼€å…³ã€å†™ DBã€å‘äº‹ä»¶ | [`src-tauri/src/proxy/monitor.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/monitor.rs#L33-L194) | 33-194 |
| æœåŠ¡ç«¯æŒ‚è½½ç›‘æ§ä¸­é—´ä»¶ï¼ˆlayerï¼‰ | [`src-tauri/src/proxy/server.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/server.rs#L183-L194) | 183-194 |
| Tauri å‘½ä»¤ï¼šget/count/filter/detail/clear/export | [`src-tauri/src/commands/proxy.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/proxy.rs#L180-L314) | 180-314 |
| SQLiteï¼šproxy_logs.db è·¯å¾„ã€è¡¨ç»“æ„ä¸ç­›é€‰ SQL | [`src-tauri/src/modules/proxy_db.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/modules/proxy_db.rs#L1-L416) | 1-416 |
| ç›‘æ§è®¾è®¡è¯´æ˜ï¼ˆå¯èƒ½ä¸å®ç°æœ‰å·®å¼‚ï¼Œä»¥æºç ä¸ºå‡†ï¼‰ | [`docs/proxy-monitor-technical.md`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/docs/proxy-monitor-technical.md#L1-L53) | 1-53 |

**å…³é”®å¸¸é‡**ï¼š
- `MAX_REQUEST_LOG_SIZE = 100 * 1024 * 1024`ï¼šç›‘æ§ä¸­é—´ä»¶æœ€å¤§å¯è¯»å–çš„è¯·æ±‚ä½“ï¼ˆè¶…è¿‡ä¼šè¯»å¤±è´¥ï¼‰
- `MAX_RESPONSE_LOG_SIZE = 100 * 1024 * 1024`ï¼šç›‘æ§ä¸­é—´ä»¶æœ€å¤§å¯è¯»å–çš„å“åº”ä½“ï¼ˆç”¨äºå›¾ç‰‡ç­‰å¤§å“åº”ï¼‰

**å…³é”®å‡½æ•°/å‘½ä»¤**ï¼š
- `monitor_middleware(...)`ï¼šåœ¨ HTTP å±‚é‡‡é›†è¯·æ±‚ä¸å“åº”ï¼Œå¹¶è°ƒç”¨ `monitor.log_request(...)`
- `ProxyMonitor::log_request(...)`ï¼šå†™å…¥å†…å­˜ + SQLiteï¼Œå¹¶é€šè¿‡ `proxy://request` äº‹ä»¶æ¨é€æ‘˜è¦
- `get_proxy_logs_count_filtered(filter, errors_only)` / `get_proxy_logs_filtered(...)`ï¼šåˆ—è¡¨é¡µç­›é€‰ä¸åˆ†é¡µ
- `get_proxy_log_detail(log_id)`ï¼šåŠ è½½å•æ¡æ—¥å¿—çš„å®Œæ•´ request/response body
- `export_proxy_logs(file_path)`ï¼šå¯¼å‡ºå…¨é‡æ—¥å¿—åˆ° JSON æ–‡ä»¶ï¼ˆå½“å‰ UI æœªæš´éœ²æŒ‰é’®ï¼‰

</details>
