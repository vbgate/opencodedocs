---
title: "é…ç½®: çƒ­æ›´æ–°ä¸è¿ç§» | Antigravity-Manager"
subtitle: "é…ç½®: çƒ­æ›´æ–°ä¸è¿ç§» | Antigravity-Manager"
sidebarTitle: "é…ç½®ä¸ç”Ÿæ•ˆæ€ä¹ˆåŠ"
description: "å­¦ä¹ é…ç½®ç³»ç»Ÿçš„è½ç›˜ã€çƒ­æ›´æ–°ä¸è¿ç§»æœºåˆ¶ã€‚æŒæ¡å­—æ®µé»˜è®¤å€¼ä¸é‰´æƒéªŒè¯æ–¹æ³•ï¼Œé¿å…å¸¸è§å‘ã€‚"
tags:
  - "é…ç½®"
  - "gui_config.json"
  - "AppConfig"
  - "ProxyConfig"
  - "çƒ­æ›´æ–°"
prerequisite:
  - "start-first-run-data"
  - "start-proxy-and-first-client"
order: 1
---
# é…ç½®å…¨è§£ï¼šAppConfig/ProxyConfigã€è½ç›˜ä½ç½®ä¸çƒ­æ›´æ–°è¯­ä¹‰

ä½ æ”¹äº† `auth_mode` ä½†å®¢æˆ·ç«¯è¿˜æ˜¯ 401ï¼›ä½ å¼€äº† `allow_lan_access`ï¼ŒåŒç½‘æ®µè®¾å¤‡å´è¿ä¸ä¸Šï¼›ä½ æƒ³æŠŠé…ç½®è¿åˆ°æ–°æœºå™¨ï¼Œå´ä¸çŸ¥é“è¯¥æ‹·å“ªäº›æ–‡ä»¶ã€‚

è¿™èŠ‚è¯¾æŠŠ Antigravity Tools çš„é…ç½®ç³»ç»Ÿä¸€æ¬¡è®²é€ï¼šé…ç½®å­˜åœ¨å“ªã€é»˜è®¤å€¼æ˜¯ä»€ä¹ˆã€å“ªäº›èƒ½çƒ­æ›´æ–°ã€å“ªäº›å¿…é¡»é‡å¯åä»£ã€‚

## ä»€ä¹ˆæ˜¯ AppConfig/ProxyConfigï¼Ÿ

**AppConfig/ProxyConfig**æ˜¯ Antigravity Tools çš„é…ç½®æ•°æ®æ¨¡å‹ï¼šAppConfig ç®¡æ¡Œé¢ç«¯çš„é€šç”¨è®¾ç½®ï¼ˆè¯­è¨€ã€ä¸»é¢˜ã€é¢„çƒ­ã€é…é¢ä¿æŠ¤ç­‰ï¼‰ï¼ŒProxyConfig ç®¡æœ¬åœ°åä»£æœåŠ¡çš„è¿è¡Œå‚æ•°ï¼ˆç«¯å£ã€é‰´æƒã€æ¨¡å‹æ˜ å°„ã€ä¸Šæ¸¸ä»£ç†ç­‰ï¼‰ã€‚å®ƒä»¬æœ€ç»ˆéƒ½åºåˆ—åŒ–åˆ°åŒä¸€ä¸ª `gui_config.json` æ–‡ä»¶ï¼Œåä»£å¯åŠ¨æ—¶è¯»å–å…¶ä¸­çš„ ProxyConfigã€‚

## å­¦å®Œä½ èƒ½åšä»€ä¹ˆ

- æ‰¾åˆ°é…ç½®æ–‡ä»¶ `gui_config.json` çš„çœŸå®è½ç›˜ä½ç½®ï¼Œå¹¶èƒ½åšå¤‡ä»½/è¿ç§»
- è¯»æ‡‚ AppConfig/ProxyConfig çš„æ ¸å¿ƒå­—æ®µä¸é»˜è®¤å€¼ï¼ˆä»¥æºç ä¸ºå‡†ï¼‰
- æ˜ç¡®å“ªäº›é…ç½®ä¿å­˜åä¼šçƒ­æ›´æ–°ï¼Œå“ªäº›å¿…é¡»é‡å¯åä»£æ‰èƒ½ç”Ÿæ•ˆ
- çœ‹æ‡‚ä¸€æ¬¡â€œé…ç½®è¿ç§»â€ï¼ˆæ—§å­—æ®µè¢«è‡ªåŠ¨åˆå¹¶/åˆ é™¤ï¼‰çš„å‘ç”Ÿæ¡ä»¶

## ä½ ç°åœ¨çš„å›°å¢ƒ

- æ”¹äº†é…ç½®å´â€œä¸ç”Ÿæ•ˆâ€ï¼Œä½ ä¸çŸ¥é“æ˜¯æ²¡ä¿å­˜ã€æ²¡çƒ­æ›´æ–°ï¼Œè¿˜æ˜¯éœ€è¦é‡å¯
- ä½ åªæƒ³æŠŠâ€œåä»£é…ç½®â€å¸¦åˆ°æ–°æœºå™¨ï¼Œä½†åˆæ‹…å¿ƒæŠŠè´¦å·æ•°æ®ä¸€èµ·å¸¦å‡ºå»
- å‡çº§åå‡ºç°æ—§å­—æ®µï¼Œä½ æ‹…å¿ƒé…ç½®æ–‡ä»¶æ ¼å¼â€œåäº†â€

## ä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸€æ‹›

- ä½ å‡†å¤‡æŠŠåä»£ä»â€œä»…æœ¬æœºâ€åˆ‡åˆ°â€œå±€åŸŸç½‘å¯è®¿é—®â€
- ä½ è¦æ”¹é‰´æƒç­–ç•¥ï¼ˆ`auth_mode`/`api_key`ï¼‰ï¼Œå¹¶æƒ³ç«‹åˆ»éªŒè¯ç”Ÿæ•ˆ
- ä½ è¦æ‰¹é‡ç»´æŠ¤æ¨¡å‹æ˜ å°„/ä¸Šæ¸¸ä»£ç†/z.ai é…ç½®

## ğŸ’ å¼€å§‹å‰çš„å‡†å¤‡

- ä½ å·²ç»çŸ¥é“æ•°æ®ç›®å½•æ˜¯ä»€ä¹ˆï¼ˆè§ [é¦–æ¬¡å¯åŠ¨å¿…æ‡‚ï¼šæ•°æ®ç›®å½•ã€æ—¥å¿—ã€æ‰˜ç›˜ä¸è‡ªåŠ¨å¯åŠ¨](../../start/first-run-data/)ï¼‰
- ä½ èƒ½å¯åŠ¨ä¸€æ¬¡åä»£æœåŠ¡ï¼ˆè§ [å¯åŠ¨æœ¬åœ°åä»£å¹¶æ¥å…¥ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯](../../start/proxy-and-first-client/)ï¼‰

::: warning å…ˆè¯´ä¸ªè¾¹ç•Œ
æœ¬è¯¾ä¼šæ•™ä½ è¯»/å¤‡ä»½/è¿ç§» `gui_config.json`ï¼Œä½†ä¸å»ºè®®ä½ æŠŠå®ƒå½“æˆâ€œé•¿æœŸæ‰‹å†™ç»´æŠ¤çš„é…ç½®æ–‡ä»¶â€ã€‚å› ä¸ºåç«¯ä¿å­˜é…ç½®æ—¶ä¼šæŒ‰ Rust çš„ `AppConfig` ç»“æ„é‡æ–°åºåˆ—åŒ–ï¼Œæ‰‹åŠ¨å¡è¿›å»çš„æœªçŸ¥å­—æ®µï¼Œå¾ˆå¯èƒ½åœ¨ä¸‹ä¸€æ¬¡ä¿å­˜æ—¶è¢«è‡ªåŠ¨ä¸¢æ‰ã€‚
:::

## æ ¸å¿ƒæ€è·¯

é…ç½®è¿™ä»¶äº‹ï¼Œå…ˆè®°ä½ä¸‰å¥è¯ï¼š

1. AppConfig æ˜¯æŒä¹…åŒ–é…ç½®çš„æ ¹å¯¹è±¡ï¼Œè½åœ¨ `gui_config.json`ã€‚
2. ProxyConfig æ˜¯ `AppConfig.proxy` çš„å­å¯¹è±¡ï¼Œåä»£å¯åŠ¨/çƒ­æ›´æ–°éƒ½å›´ç»•å®ƒã€‚
3. çƒ­æ›´æ–°æ˜¯â€œåªæ›´æ–°å†…å­˜çŠ¶æ€â€ï¼šèƒ½çƒ­æ›´çš„ä¸ä»£è¡¨èƒ½æ”¹ç›‘å¬ç«¯å£/ç›‘å¬åœ°å€ã€‚

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šå®šä½ `gui_config.json`ï¼ˆé…ç½®çš„å•ä¸€çœŸç›¸æºï¼‰

**ä¸ºä»€ä¹ˆ**
ä½ åé¢æ‰€æœ‰çš„â€œå¤‡ä»½/è¿ç§»/æ’éšœâ€ï¼Œéƒ½è¦ä»¥è¿™ä¸ªæ–‡ä»¶ä¸ºå‡†ã€‚

åç«¯çš„æ•°æ®ç›®å½•æ˜¯ä½ çš„ Home ç›®å½•ä¸‹çš„ `.antigravity_tools`ï¼ˆä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰ï¼Œé…ç½®æ–‡ä»¶åå›ºå®šä¸º `gui_config.json`ã€‚

::: code-group

```bash [macOS/Linux]
CONFIG_FILE="$HOME/.antigravity_tools/gui_config.json"
echo "$CONFIG_FILE"
ls -la "$CONFIG_FILE" || true
```

```powershell [Windows]
$configFile = Join-Path $HOME ".antigravity_tools\gui_config.json"
$configFile
Get-ChildItem -Force $configFile -ErrorAction SilentlyContinue
```

:::

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š
- å¦‚æœä½ è¿˜æ²¡å¯åŠ¨è¿‡åä»£ï¼Œè¿™ä¸ªæ–‡ä»¶å¯èƒ½ä¸å­˜åœ¨ï¼ˆåç«¯ä¼šç›´æ¥ç”¨é»˜è®¤é…ç½®ï¼‰ã€‚
- å¯åŠ¨åä»£æœåŠ¡æˆ–ä¿å­˜è®¾ç½®æ—¶ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨åˆ›å»ºå¹¶å†™å…¥ JSONã€‚

### ç¬¬ 2 æ­¥ï¼šå…ˆå¤‡ä»½ä¸€ä»½ï¼ˆé˜²æ‰‹æ»‘ + æ–¹ä¾¿å›æ»šï¼‰

**ä¸ºä»€ä¹ˆ**
é…ç½®é‡Œå¯èƒ½åŒ…å« `proxy.api_key`ã€z.ai çš„ `api_key` ç­‰æ•æ„Ÿå­—æ®µã€‚ä½ æƒ³è¿ç§»/å¯¹æ¯”æ—¶ï¼Œå¤‡ä»½æ¯”â€œè®°å¿†â€å¯é ã€‚

::: code-group

```bash [macOS/Linux]
mkdir -p "$HOME/antigravity-config-backup"
cp "$HOME/.antigravity_tools/gui_config.json" "$HOME/antigravity-config-backup/gui_config.$(date +%Y%m%d%H%M%S).json"
```

```powershell [Windows]
$backupDir = Join-Path $HOME "antigravity-config-backup"
New-Item -ItemType Directory -Force -Path $backupDir | Out-Null
$ts = Get-Date -Format "yyyyMMddHHmmss"
Copy-Item (Join-Path $HOME ".antigravity_tools\gui_config.json") (Join-Path $backupDir "gui_config.$ts.json")
```

:::

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šå¤‡ä»½ç›®å½•é‡Œå‡ºç°äº†ä¸€ä¸ªå¸¦æ—¶é—´æˆ³çš„ JSON æ–‡ä»¶ã€‚

### ç¬¬ 3 æ­¥ï¼šææ¸…é»˜è®¤å€¼ï¼ˆåˆ«å‡­æ„Ÿè§‰çŒœï¼‰

**ä¸ºä»€ä¹ˆ**
å¾ˆå¤šâ€œæ€ä¹ˆéƒ½é…ä¸å¯¹â€çš„é—®é¢˜ï¼Œå…¶å®æ˜¯ä½ å¯¹é»˜è®¤å€¼çš„é¢„æœŸä¸å¯¹ã€‚

ä¸‹é¢è¿™äº›é»˜è®¤å€¼æ¥è‡ªåç«¯ `AppConfig::new()` å’Œ `ProxyConfig::default()`ï¼š

| é…ç½®å— | å­—æ®µ | é»˜è®¤å€¼ï¼ˆæºç ï¼‰ | ä½ éœ€è¦è®°ä½çš„ç‚¹ |
|--- | --- | --- | ---|
| AppConfig | `language` | `"zh"` | é»˜è®¤ä¸­æ–‡ |
| AppConfig | `theme` | `"system"` | è·Ÿéšç³»ç»Ÿ |
| AppConfig | `auto_refresh` | `true` | é»˜è®¤ä¼šè‡ªåŠ¨åˆ·æ–°é…é¢ |
| AppConfig | `refresh_interval` | `15` | å•ä½ï¼šåˆ†é’Ÿ |
| ProxyConfig | `enabled` | `false` | é»˜è®¤ä¸å¯åŠ¨åä»£ |
| ProxyConfig | `allow_lan_access` | `false` | é»˜è®¤åªç»‘å®šæœ¬æœºï¼ˆéšç§ä¼˜å…ˆï¼‰ |
| ProxyConfig | `auth_mode` | `"off"` | é»˜è®¤ä¸é‰´æƒï¼ˆä»…æœ¬æœºåœºæ™¯ï¼‰ |
| ProxyConfig | `port` | `8045` | è¿™æ˜¯ä½ æœ€å¸¸æ”¹çš„å­—æ®µ |
| ProxyConfig | `api_key` | `"sk-<uuid>"` | é»˜è®¤ä¼šç”Ÿæˆéšæœº key |
| ProxyConfig | `request_timeout` | `120` | å•ä½ï¼šç§’ï¼ˆæ³¨æ„ï¼šåä»£å†…éƒ¨ç›®å‰ä¸ä¸€å®šç”¨åˆ°å®ƒï¼‰ |
| ProxyConfig | `enable_logging` | `true` | é»˜è®¤å¼€å¯ç›‘æ§/ç»Ÿè®¡ä¾èµ–çš„æ—¥å¿—é‡‡é›† |
| StickySessionConfig | `mode` | `Balance` | è°ƒåº¦ç­–ç•¥é»˜è®¤å¹³è¡¡ |
| StickySessionConfig | `max_wait_seconds` | `60` | ä»… CacheFirst æ¨¡å¼æ‰æœ‰æ„ä¹‰ |

::: tip æƒ³çœ‹å®Œæ•´å­—æ®µæ€ä¹ˆåŠï¼Ÿ
ä½ å¯ä»¥ç›´æ¥æ‰“å¼€ `gui_config.json` å¯¹ç…§æºç ï¼š`src-tauri/src/models/config.rs`ï¼ˆAppConfigï¼‰å’Œ `src-tauri/src/proxy/config.rs`ï¼ˆProxyConfigï¼‰ã€‚æœ¬è¯¾æœ«å°¾çš„â€œæºç å‚è€ƒâ€ç»™äº†å¯ç‚¹å‡»çš„è¡Œå·é“¾æ¥ã€‚
:::

### ç¬¬ 4 æ­¥ï¼šæ”¹ä¸€ä¸ªâ€œç¡®å®šä¼šçƒ­æ›´æ–°â€çš„é…ç½®å¹¶ç«‹åˆ»éªŒè¯ï¼ˆä»¥é‰´æƒä¸ºä¾‹ï¼‰

**ä¸ºä»€ä¹ˆ**
ä½ éœ€è¦ä¸€ä¸ªâ€œæ”¹äº†ç«‹åˆ»èƒ½éªŒè¯â€çš„é—­ç¯ï¼Œé¿å…åœ¨ UI é‡Œç›²æ”¹ã€‚

å½“åä»£æ­£åœ¨è¿è¡Œæ—¶ï¼Œåç«¯ `save_config` ä¼šæŠŠè¿™äº›å†…å®¹çƒ­æ›´æ–°åˆ°å†…å­˜ï¼š

- `proxy.custom_mapping`
- `proxy.upstream_proxy`
- `proxy.auth_mode` / `proxy.api_key`ï¼ˆå®‰å…¨ç­–ç•¥ï¼‰
- `proxy.zai`
- `proxy.experimental`

è¿™é‡Œæˆ‘ä»¬ç”¨ `auth_mode` åšä¾‹å­ï¼š

1. æ‰“å¼€ `API Proxy` é¡µé¢ï¼Œç¡®ä¿åä»£æœåŠ¡å¤„äº Runningã€‚
2. æŠŠ `auth_mode` è®¾ä¸º `all_except_health`ï¼Œå¹¶ç¡®è®¤ä½ çŸ¥é“å½“å‰ `api_key`ã€‚
3. ç”¨ä¸‹é¢çš„è¯·æ±‚éªŒè¯â€œå¥åº·æ£€æŸ¥æ”¾è¡Œã€å…¶ä»–æ¥å£æ‹¦æˆªâ€ã€‚

::: code-group

```bash [macOS/Linux]
#ä¸å¸¦ key è¯·æ±‚ /healthzï¼šåº”æˆåŠŸ
curl -sS "http://127.0.0.1:8045/healthz" && echo

#ä¸å¸¦ key è¯·æ±‚ /v1/modelsï¼šåº” 401
curl -sS -i "http://127.0.0.1:8045/v1/models"

#å¸¦ key å†è¯·æ±‚ /v1/modelsï¼šåº”æˆåŠŸ
curl -sS -H "Authorization: Bearer <proxy.api_key>" "http://127.0.0.1:8045/v1/models"
```

```powershell [Windows]
#ä¸å¸¦ key è¯·æ±‚ /healthzï¼šåº”æˆåŠŸ
Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8045/healthz" | Select-Object -ExpandProperty StatusCode

#ä¸å¸¦ key è¯·æ±‚ /v1/modelsï¼šåº” 401
try { Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8045/v1/models" } catch { $_.Exception.Response.StatusCode.value__ }

#å¸¦ key å†è¯·æ±‚ /v1/modelsï¼šåº”æˆåŠŸ
$headers = @{ Authorization = "Bearer <proxy.api_key>" }
(Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8045/v1/models" -Headers $headers).StatusCode
```

:::

**ä½ åº”è¯¥çœ‹åˆ°**ï¼š`/healthz` è¿”å› 200ï¼›`/v1/models` åœ¨ä¸å¸¦ key æ—¶è¿”å› 401ï¼Œå¸¦ key æ—¶æˆåŠŸã€‚

### ç¬¬ 5 æ­¥ï¼šæ”¹ä¸€ä¸ªâ€œå¿…é¡»é‡å¯åä»£â€çš„é…ç½®ï¼ˆç«¯å£ / ç›‘å¬åœ°å€ï¼‰

**ä¸ºä»€ä¹ˆ**
å¾ˆå¤šé…ç½®æ˜¯â€œä¿å­˜äº†ä½†ä¸ç”Ÿæ•ˆâ€ï¼Œæ ¹å› ä¸æ˜¯ bugï¼Œè€Œæ˜¯å®ƒå†³å®šäº† TCP Listener æ€ä¹ˆç»‘å®šã€‚

åœ¨å¯åŠ¨åä»£æ—¶ï¼Œåç«¯ä¼šç”¨ `allow_lan_access` è®¡ç®—ç›‘å¬åœ°å€ï¼ˆ`127.0.0.1` æˆ– `0.0.0.0`ï¼‰ï¼Œå¹¶ç”¨ `port` ç»‘å®šç«¯å£ï¼›è¿™ä¸€æ­¥åªå‘ç”Ÿåœ¨ `start_proxy_service`ã€‚

æ“ä½œå»ºè®®ï¼š

1. åœ¨ `API Proxy` é¡µé¢æŠŠ `port` æ”¹æˆä¸€ä¸ªæ–°å€¼ï¼ˆæ¯”å¦‚ `8050`ï¼‰ï¼Œä¿å­˜ã€‚
2. åœæ­¢åä»£æœåŠ¡ï¼Œç„¶åé‡æ–°å¯åŠ¨ã€‚
3. ç”¨æ–°ç«¯å£éªŒè¯ `/healthz`ã€‚

::: code-group

```bash [macOS/Linux]
curl -sS "http://127.0.0.1:8050/healthz" && echo
```

```powershell [Windows]
Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8050/healthz" | Select-Object -ExpandProperty StatusCode
```

:::

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šæ–°ç«¯å£å¯è®¿é—®ï¼›æ—§ç«¯å£è¿æ¥å¤±è´¥æˆ–è¿”å›ç©ºã€‚

::: warning å…³äº `allow_lan_access`
æºç é‡Œ `allow_lan_access` åŒæ—¶å½±å“ä¸¤ä»¶äº‹ï¼š

1. **ç›‘å¬åœ°å€**ï¼šå†³å®šç»‘å®š `127.0.0.1` è¿˜æ˜¯ `0.0.0.0`ï¼ˆéœ€è¦é‡å¯åä»£æ‰èƒ½é‡æ–° bindï¼‰ã€‚
2. **auto é‰´æƒç­–ç•¥**ï¼šå½“ `auth_mode=auto` æ—¶ï¼Œå±€åŸŸç½‘åœºæ™¯ä¼šè‡ªåŠ¨è½¬æˆ `all_except_health`ï¼ˆè¿™éƒ¨åˆ†èƒ½çƒ­æ›´æ–°ï¼‰ã€‚
:::

### ç¬¬ 6 æ­¥ï¼šçœ‹æ‡‚ä¸€æ¬¡â€œé…ç½®è¿ç§»â€ï¼ˆæ—§å­—æ®µä¼šè¢«è‡ªåŠ¨æ¸…ç†ï¼‰

**ä¸ºä»€ä¹ˆ**
ä½ å‡çº§åå¯èƒ½ä¼šåœ¨ `gui_config.json` é‡Œçœ‹åˆ°è€å­—æ®µï¼Œæ‹…å¿ƒâ€œåäº†â€ã€‚å®é™…ä¸Šï¼Œåç«¯åŠ è½½é…ç½®æ—¶ä¼šåšä¸€æ¬¡è¿ç§»ï¼šæŠŠ `anthropic_mapping/openai_mapping` åˆå¹¶åˆ° `custom_mapping`ï¼Œå¹¶åˆ é™¤æ—§å­—æ®µï¼Œç„¶åè‡ªåŠ¨ä¿å­˜ä¸€æ¬¡ã€‚

ä½ å¯ä»¥ç”¨è¿™ä¸ªè§„å¾‹è‡ªæ£€ï¼š

- å¦‚æœä½ åœ¨æ–‡ä»¶é‡Œçœ‹è§ `proxy.anthropic_mapping` æˆ– `proxy.openai_mapping`ï¼Œä¸‹æ¬¡å¯åŠ¨/åŠ è½½é…ç½®åï¼Œå®ƒä»¬ä¼šè¢«ç§»é™¤ã€‚
- åˆå¹¶æ—¶ä¼šè·³è¿‡ä»¥ `-series` ç»“å°¾çš„ keyï¼ˆè¿™äº›ç°åœ¨äº¤ç»™ preset/builtin é€»è¾‘å¤„ç†ï¼‰ã€‚

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šè¿ç§»å‘ç”Ÿåï¼Œ`gui_config.json` é‡Œåªç•™ä¸‹ `proxy.custom_mapping`ã€‚

## æ£€æŸ¥ç‚¹ âœ…

- ä½ èƒ½åœ¨æœ¬æœºæ‰¾åˆ° `$HOME/.antigravity_tools/gui_config.json`
- ä½ èƒ½è¯´æ¸…ï¼š`auth_mode/api_key/custom_mapping` è¿™ç±»é…ç½®ä¸ºä»€ä¹ˆèƒ½çƒ­æ›´æ–°
- ä½ èƒ½è¯´æ¸…ï¼š`port/allow_lan_access` è¿™ç±»é…ç½®ä¸ºä»€ä¹ˆå¿…é¡»é‡å¯åä»£

## è¸©å‘æé†’

1. `save_config` çš„çƒ­æ›´æ–°åªè¦†ç›–å°‘æ•°å­—æ®µï¼šå®ƒä¸ä¼šå¸®ä½ é‡å¯ listenerï¼Œä¹Ÿä¸ä¼šæŠŠ `scheduling` ä¹‹ç±»çš„é…ç½®æ¨ç»™ TokenManagerã€‚
2. `request_timeout` åœ¨åä»£å†…éƒ¨å½“å‰å®ç°é‡Œå¹¶æ²¡æœ‰çœŸæ­£ç”Ÿæ•ˆï¼šAxumServer çš„ `start` å‚æ•°é‡Œæ˜¯ `_request_timeout`ï¼Œè€ŒçŠ¶æ€é‡ŒæŠŠè¶…æ—¶å†™æ­»æˆäº† `300` ç§’ã€‚
3. æ‰‹åŠ¨å¾€ `gui_config.json` é‡Œå¡â€œè‡ªå®šä¹‰å­—æ®µâ€ä¸å¯é ï¼šåç«¯ä¿å­˜æ—¶ä¼šæŠŠå®ƒé‡æ–°åºåˆ—åŒ–æˆ `AppConfig`ï¼ŒæœªçŸ¥å­—æ®µä¼šè¢«ä¸¢å¼ƒã€‚

## æœ¬è¯¾å°ç»“

- é…ç½®è½ç›˜åªæœ‰ä¸€ä¸ªå…¥å£ï¼š`$HOME/.antigravity_tools/gui_config.json`
- ProxyConfig çš„â€œèƒ½çƒ­æ›´æ–°â€ä¸ç­‰äºâ€œèƒ½æ”¹ç«¯å£/æ”¹ç›‘å¬åœ°å€â€ï¼›æ¶‰åŠ bind çš„éƒ½è¦é‡å¯åä»£
- çœ‹åˆ°æ—§æ˜ å°„å­—æ®µåˆ«æ…Œï¼šåŠ è½½é…ç½®æ—¶ä¼šè‡ªåŠ¨è¿ç§»åˆ° `custom_mapping` å¹¶æ¸…ç†æ—§å­—æ®µ

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬å­¦ä¹  **[å®‰å…¨ä¸éšç§ï¼šauth_modeã€allow_lan_accessã€ä»¥åŠâ€œä¸è¦æ³„éœ²è´¦å·ä¿¡æ¯â€çš„è®¾è®¡](../security/)**ã€‚
>
> ä½ ä¼šå­¦åˆ°ï¼š
> - ä»€ä¹ˆæ—¶å€™å¿…é¡»å¼€é‰´æƒï¼ˆä»¥åŠä¸ºä»€ä¹ˆ `auto` åœ¨ LAN åœºæ™¯ä¼šæ›´ä¸¥æ ¼ï¼‰
> - æŠŠæœ¬åœ°åä»£æš´éœ²åˆ°å±€åŸŸç½‘/å…¬ç½‘æ—¶çš„æœ€å°æš´éœ²ç­–ç•¥
> - å“ªäº›æ•°æ®ä¼šè¢«å‘é€åˆ°ä¸Šæ¸¸ï¼Œå“ªäº›åªä¿å­˜åœ¨æœ¬æœº

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-24

| ä¸»é¢˜ | æ–‡ä»¶è·¯å¾„ | è¡Œå· |
|--- | --- | ---|
| AppConfig é»˜è®¤å€¼ï¼ˆ`AppConfig::new()`ï¼‰ | [`src-tauri/src/models/config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/models/config.rs#L4-L158) | 4-158 |
| ProxyConfig é»˜è®¤å€¼ï¼ˆç«¯å£/é‰´æƒ/ç›‘å¬åœ°å€ï¼‰ | [`src-tauri/src/proxy/config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/config.rs#L74-L292) | 74-292 |
| StickySessionConfig é»˜è®¤å€¼ï¼ˆè°ƒåº¦ï¼‰ | [`src-tauri/src/proxy/sticky_config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/sticky_config.rs#L3-L36) | 3-36 |
| é…ç½®è½ç›˜æ–‡ä»¶å + è¿ç§»é€»è¾‘ï¼ˆ`gui_config.json`ï¼‰ | [`src-tauri/src/modules/config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/modules/config.rs#L7-L88) | 7-88 |
| æ•°æ®ç›®å½•ï¼ˆ`$HOME/.antigravity_tools`ï¼‰ | [`src-tauri/src/modules/account.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/modules/account.rs#L16-L33) | 16-33 |
| `save_config`ï¼šä¿å­˜é…ç½® + çƒ­æ›´æ–°å“ªäº›å­—æ®µ | [`src-tauri/src/commands/mod.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/mod.rs#L296-L334) | 296-334 |
| AxumServerï¼š`update_mapping/update_proxy/update_security/...` | [`src-tauri/src/proxy/server.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/server.rs#L45-L117) | 45-117 |
| `allow_lan_access` çš„ç›‘å¬åœ°å€é€‰æ‹© | [`src-tauri/src/proxy/config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/config.rs#L81-L92) | 81-92 |
| Proxy å¯åŠ¨æ—¶ bind åœ°å€ä¸ç«¯å£ï¼ˆå¿…é¡»é‡å¯æ‰ä¼šå˜ï¼‰ | [`src-tauri/src/commands/proxy.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/proxy.rs#L42-L134) | 42-134 |
| `auth_mode=auto` çš„å®é™…è§„åˆ™ | [`src-tauri/src/proxy/security.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/security.rs#L3-L31) | 3-31 |
| å‰ç«¯ä¿å­˜è°ƒåº¦é…ç½®ï¼ˆåªä¿å­˜ï¼Œä¸ä¼šæ¨é€åˆ°åç«¯è¿è¡Œæ—¶ï¼‰ | [`src/pages/ApiProxy.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/pages/ApiProxy.tsx#L476-L501) | 476-501 |
| Monitor é¡µé¢åŠ¨æ€å¼€å¯/å…³é—­æ—¥å¿—é‡‡é›† | [`src/components/proxy/ProxyMonitor.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/proxy/ProxyMonitor.tsx#L174-L263) | 174-263 |

</details>
