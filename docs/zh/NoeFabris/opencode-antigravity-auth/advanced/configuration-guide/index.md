---
title: "é…ç½®æŒ‡å—: å®Œæ•´é…ç½®é€‰é¡¹è¯¦è§£ | Antigravity Auth"
sidebarTitle: "é…ç½®å…¨æå®š"
subtitle: "é…ç½®é€‰é¡¹å®Œæ•´æŒ‡å—"
description: "æŒæ¡ Antigravity Auth æ’ä»¶çš„å®Œæ•´é…ç½®é€‰é¡¹ã€‚è¯¦è§£é…ç½®æ–‡ä»¶ä½ç½®ã€æ¨¡å‹è¡Œä¸ºã€è´¦æˆ·è½®æ¢ç­–ç•¥å’Œåº”ç”¨è¡Œä¸ºè®¾ç½®ï¼Œæä¾›å•è´¦æˆ·ã€å¤šè´¦æˆ·å’Œå¹¶è¡Œä»£ç†åœºæ™¯çš„æ¨èé…ç½®æ–¹æ¡ˆã€‚"
tags:
  - "é…ç½®"
  - "é«˜çº§é…ç½®"
  - "å¤šè´¦æˆ·"
  - "è´¦æˆ·è½®æ¢"
prerequisite:
  - "start-quick-install"
  - "advanced-multi-account-setup"
order: 2
---

# é…ç½®é€‰é¡¹å®Œæ•´æŒ‡å—

## å­¦å®Œä½ èƒ½åšä»€ä¹ˆ

- âœ… åœ¨æ­£ç¡®çš„ä½ç½®åˆ›å»ºé…ç½®æ–‡ä»¶
- âœ… æ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„é…ç½®æ–¹æ¡ˆ
- âœ… ç†è§£æ‰€æœ‰é…ç½®é€‰é¡¹çš„ä½œç”¨å’Œé»˜è®¤å€¼
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡ä¸´æ—¶è¦†ç›–é…ç½®
- âœ… è°ƒæ•´æ¨¡å‹è¡Œä¸ºã€è´¦æˆ·è½®æ¢å’Œæ’ä»¶è¡Œä¸º

## ä½ ç°åœ¨çš„å›°å¢ƒ

é…ç½®é€‰é¡¹å¤ªå¤šï¼Œä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹ï¼Ÿé»˜è®¤é…ç½®èƒ½ç”¨ï¼Œä½†æƒ³è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Ÿå¤šè´¦æˆ·åœºæ™¯ä¸‹ä¸æ¸…æ¥šåº”è¯¥ç”¨å“ªç§è½®æ¢ç­–ç•¥ï¼Ÿ

## æ ¸å¿ƒæ€è·¯

é…ç½®æ–‡ä»¶å°±åƒç»™æ’ä»¶å†™ã€Œä½¿ç”¨è¯´æ˜ä¹¦ã€â€”â€”ä½ å‘Šè¯‰å®ƒæ€ä¹ˆå·¥ä½œï¼Œå®ƒå°±æŒ‰ä½ çš„æ–¹å¼æ‰§è¡Œã€‚Antigravity Auth æ’ä»¶æä¾›äº†ä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼Œä½†å¤§å¤šæ•°ç”¨æˆ·åªéœ€è¦é…ç½®å‡ ä¸ªæ ¸å¿ƒé€‰é¡¹ã€‚

### é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§

é…ç½®é¡¹çš„ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š

1. **ç¯å¢ƒå˜é‡**ï¼ˆä¸´æ—¶è¦†ç›–ï¼‰
2. **é¡¹ç›®çº§é…ç½®** `.opencode/antigravity.json`ï¼ˆå½“å‰é¡¹ç›®ï¼‰
3. **ç”¨æˆ·çº§é…ç½®** `~/.config/opencode/antigravity.json`ï¼ˆå…¨å±€ï¼‰

::: info
ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§æœ€é«˜ï¼Œé€‚åˆä¸´æ—¶æµ‹è¯•ã€‚é…ç½®æ–‡ä»¶é€‚åˆæŒä¹…åŒ–è®¾ç½®ã€‚
:::

### é…ç½®æ–‡ä»¶ä½ç½®

æ ¹æ®æ“ä½œç³»ç»Ÿï¼Œç”¨æˆ·çº§é…ç½®æ–‡ä»¶ä½ç½®ä¸åŒï¼š

| ç³»ç»Ÿ | è·¯å¾„ |
|------|------|
| Linux/macOS | `~/.config/opencode/antigravity.json` |
| Windows | `%APPDATA%\opencode\antigravity.json` |

é¡¹ç›®çº§é…ç½®æ–‡ä»¶å§‹ç»ˆåœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `.opencode/antigravity.json`ã€‚

### é…ç½®é€‰é¡¹åˆ†ç±»

é…ç½®é€‰é¡¹åˆ†ä¸ºå››å¤§ç±»ï¼š

1. **æ¨¡å‹è¡Œä¸º**ï¼šæ€è€ƒå—ã€ä¼šè¯æ¢å¤ã€Google Search
2. **è´¦æˆ·è½®æ¢**ï¼šå¤šè´¦æˆ·ç®¡ç†ã€é€‰æ‹©ç­–ç•¥ã€PID åç§»
3. **åº”ç”¨è¡Œä¸º**ï¼šè°ƒè¯•æ—¥å¿—ã€è‡ªåŠ¨æ›´æ–°ã€é€šçŸ¥é™é»˜
4. **é«˜çº§è®¾ç½®**ï¼šé”™è¯¯æ¢å¤ã€ä»¤ç‰Œç®¡ç†ã€å¥åº·è¯„åˆ†

---

## ğŸ’ å¼€å§‹å‰çš„å‡†å¤‡

- [x] å·²å®Œæˆæ’ä»¶å®‰è£…ï¼ˆå‚è€ƒ[å¿«é€Ÿå®‰è£…](../../start/quick-install/)ï¼‰
- [x] å·²é…ç½®è‡³å°‘ä¸€ä¸ª Google è´¦æˆ·
- [x] äº†è§£ JSON åŸºæœ¬è¯­æ³•

---

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶

**ä¸ºä»€ä¹ˆ**ï¼šé…ç½®æ–‡ä»¶è®©æ’ä»¶æŒ‰ä½ çš„éœ€æ±‚å·¥ä½œ

æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©å¯¹åº”è·¯å¾„åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š

::: code-group

```bash [macOS/Linux]
cat > ~/.config/opencode/antigravity.json << 'EOF'
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json"
}
EOF
```

```powershell [Windows]
## ä½¿ç”¨ PowerShell
$env:APPDATA\opencode\antigravity.json = @{
  '$schema' = "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json"
} | ConvertTo-Json -Depth 10

Set-Content -Path "$env:APPDATA\opencode\antigravity.json" -Value $json
```

:::

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šæ–‡ä»¶åˆ›å»ºæˆåŠŸï¼Œå†…å®¹åªæœ‰ `$schema` å­—æ®µã€‚

::: tip
æ·»åŠ  `$schema` å­—æ®µåï¼ŒVS Code ä¼šè‡ªåŠ¨æä¾›æ™ºèƒ½æç¤ºå’Œç±»å‹æ£€æŸ¥ã€‚
:::

### ç¬¬ 2 æ­¥ï¼šé…ç½®åŸºç¡€é€‰é¡¹

**ä¸ºä»€ä¹ˆ**ï¼šæ ¹æ®ä½ çš„ä½¿ç”¨åœºæ™¯ä¼˜åŒ–æ’ä»¶è¡Œä¸º

æ ¹æ®ä½ çš„é…ç½®é€‰æ‹©ä»¥ä¸‹æ–¹æ¡ˆä¹‹ä¸€ï¼š

**åœºæ™¯ Aï¼šå•è´¦æˆ· + éœ€è¦ Google Search**

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "sticky",
  "web_search": {
    "default_mode": "auto"
  }
}
```

**åœºæ™¯ Bï¼š2-3 ä¸ªè´¦æˆ· + æ™ºèƒ½è½®æ¢**

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "hybrid",
  "web_search": {
    "default_mode": "auto"
  }
}
```

**åœºæ™¯ Cï¼šå¤šè´¦æˆ· + å¹¶è¡Œä»£ç†**

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "round-robin",
  "switch_on_first_rate_limit": true,
  "pid_offset_enabled": true,
  "web_search": {
    "default_mode": "auto"
  }
}
```

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šé…ç½®æ–‡ä»¶ä¿å­˜æˆåŠŸï¼ŒOpenCode è‡ªåŠ¨é‡æ–°åŠ è½½æ’ä»¶é…ç½®ã€‚

### ç¬¬ 3 æ­¥ï¼šéªŒè¯é…ç½®

**ä¸ºä»€ä¹ˆ**ï¼šç¡®è®¤é…ç½®ç”Ÿæ•ˆ

åœ¨ OpenCode ä¸­å‘èµ·ä¸€ä¸ªæ¨¡å‹è¯·æ±‚ï¼Œè§‚å¯Ÿï¼š

1. å•è´¦æˆ·ä½¿ç”¨ `sticky` ç­–ç•¥ï¼šæ‰€æœ‰è¯·æ±‚ä½¿ç”¨åŒä¸€è´¦æˆ·
2. å¤šè´¦æˆ·ä½¿ç”¨ `hybrid` ç­–ç•¥ï¼šè¯·æ±‚ä¼šæ™ºèƒ½åˆ†é…åˆ°ä¸åŒè´¦æˆ·
3. Gemini æ¨¡å‹å¯ç”¨ `web_search`ï¼šæ¨¡å‹åœ¨éœ€è¦æ—¶ä¼šæœç´¢ç½‘ç»œ

**ä½ åº”è¯¥çœ‹åˆ°**ï¼šæ’ä»¶è¡Œä¸ºç¬¦åˆä½ çš„é…ç½®é¢„æœŸã€‚

---

## é…ç½®é€‰é¡¹è¯¦è§£

### æ¨¡å‹è¡Œä¸º

è¿™äº›é€‰é¡¹å½±å“æ¨¡å‹çš„æ€è€ƒå’Œå“åº”æ–¹å¼ã€‚

#### keep_thinking

| å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|----|-------|------|
| `true` | - | ä¿ç•™ Claude æ€è€ƒå—ï¼Œè·¨è½®æ¬¡ä¿æŒè¿è´¯æ€§ |
| `false` | âœ“ | å‰¥ç¦»æ€è€ƒå—ï¼Œæ›´ç¨³å®šï¼Œä¸Šä¸‹æ–‡æ›´å° |

::: warning æ³¨æ„
å¯ç”¨ `keep_thinking` å¯èƒ½å¯¼è‡´æ¨¡å‹ç¨³å®šæ€§ä¸‹é™å’Œç­¾åé”™è¯¯ã€‚æ¨èä¿æŒ `false`ã€‚
:::

#### session_recovery

| å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|----|-------|------|
| `true` | âœ“ | è‡ªåŠ¨æ¢å¤å·¥å…·è°ƒç”¨ä¸­æ–­çš„ä¼šè¯ |
| `false` | - | é‡åˆ°é”™è¯¯æ—¶ä¸è‡ªåŠ¨æ¢å¤ |

#### auto_resume

| å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|----|-------|------|
| `true` | - | æ¢å¤åè‡ªåŠ¨å‘é€ "continue" |
| `false` | âœ“ | æ¢å¤ååªæ˜¾ç¤ºæç¤ºï¼Œæ‰‹åŠ¨ç»§ç»­ |

#### resume_text

è‡ªå®šä¹‰æ¢å¤æ—¶å‘é€çš„æ–‡æœ¬ã€‚é»˜è®¤ä¸º `"continue"`ï¼Œä½ å¯ä»¥æ”¹ä¸ºä»»ä½•æ–‡æœ¬ã€‚

#### web_search

| é€‰é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|-------|------|
| `default_mode` | `"off"` | `"auto"` æˆ– `"off"` |
| `grounding_threshold` | `0.3` | æœç´¢é˜ˆå€¼ï¼ˆ0=æ€»æ˜¯æœç´¢ï¼Œ1=ä»ä¸æœç´¢ï¼‰ |

::: info
`grounding_threshold` ä»…åœ¨ `default_mode: "auto"` æ—¶ç”Ÿæ•ˆã€‚å€¼è¶Šå¤§ï¼Œæ¨¡å‹æœç´¢è¶Šä¿å®ˆã€‚
:::

---

### è´¦æˆ·è½®æ¢

è¿™äº›é€‰é¡¹ç®¡ç†å¤šè´¦æˆ·çš„è¯·æ±‚åˆ†é…ã€‚

#### account_selection_strategy

| ç­–ç•¥ | é»˜è®¤å€¼ | é€‚ç”¨åœºæ™¯ |
|------|-------|---------|
| `sticky` | - | å•è´¦æˆ·ï¼Œä¿ç•™ prompt cache |
| `round-robin` | - | 4+ è´¦æˆ·ï¼Œæœ€å¤§åŒ–ååé‡ |
| `hybrid` | âœ“ | 2-3 è´¦æˆ·ï¼Œæ™ºèƒ½è½®æ¢ |

::: tip
ä¸åŒè´¦æˆ·æ•°çš„æ¨èç­–ç•¥ï¼š
- 1 ä¸ªè´¦æˆ· â†’ `sticky`
- 2-3 ä¸ªè´¦æˆ· â†’ `hybrid`
- 4+ ä¸ªè´¦æˆ· â†’ `round-robin`
- å¹¶è¡Œä»£ç† â†’ `round-robin` + `pid_offset_enabled: true`
:::

#### switch_on_first_rate_limit

| å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|----|-------|------|
| `true` | âœ“ | ç¬¬ä¸€æ¬¡é‡åˆ° 429 ç«‹å³åˆ‡æ¢è´¦æˆ· |
| `false` | - | å…ˆé‡è¯•å½“å‰è´¦æˆ·ï¼Œç¬¬äºŒæ¬¡ 429 æ‰åˆ‡æ¢ |

#### pid_offset_enabled

| å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|----|-------|------|
| `true` | - | ä¸åŒä¼šè¯ï¼ˆPIDï¼‰ä½¿ç”¨ä¸åŒèµ·å§‹è´¦æˆ· |
| `false` | âœ“ | æ‰€æœ‰ä¼šè¯ä»åŒä¸€è´¦æˆ·å¼€å§‹ |

::: tip
å•ä¼šè¯ä½¿ç”¨ä¿æŒ `false`ï¼Œä¿ç•™ Anthropic prompt cacheã€‚å¤šä¼šè¯å¹¶è¡Œå»ºè®®å¯ç”¨ `true`ã€‚
:::

#### quota_fallback

| å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|----|-------|------|
| `true` | - | Gemini æ¨¡å‹é…é¢æ±  fallback |
| `false` | âœ“ | ä¸å¯ç”¨ fallback |

::: info
ä»…é€‚ç”¨äº Gemini æ¨¡å‹ã€‚å½“ä¸»é…é¢æ± è€—å°½æ—¶ï¼Œå°è¯•åŒä¸€è´¦æˆ·çš„å¤‡ç”¨é…é¢æ± ã€‚
:::

---

### åº”ç”¨è¡Œä¸º

è¿™äº›é€‰é¡¹æ§åˆ¶æ’ä»¶æœ¬èº«çš„è¡Œä¸ºã€‚

#### quiet_mode

| å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|----|-------|------|
| `true` | - | é™é»˜å¤§å¤šæ•° toast é€šçŸ¥ï¼ˆæ¢å¤é€šçŸ¥é™¤å¤–ï¼‰ |
| `false` | âœ“ | æ˜¾ç¤ºæ‰€æœ‰é€šçŸ¥ |

#### debug

| å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|----|-------|------|
| `true` | - | å¯ç”¨è°ƒè¯•æ—¥å¿— |
| `false` | âœ“ | ä¸è®°å½•è°ƒè¯•æ—¥å¿— |

::: tip
ä¸´æ—¶å¯ç”¨è°ƒè¯•æ—¥å¿—æ— éœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š
```bash
OPENCODE_ANTIGRAVITY_DEBUG=1 opencode   # åŸºç¡€æ—¥å¿—
OPENCODE_ANTIGRAVITY_DEBUG=2 opencode   # è¯¦ç»†æ—¥å¿—
```
:::

#### log_dir

è‡ªå®šä¹‰è°ƒè¯•æ—¥å¿—ç›®å½•ã€‚é»˜è®¤ä¸º `~/.config/opencode/antigravity-logs/`ã€‚

#### auto_update

| å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|----|-------|------|
| `true` | âœ“ | è‡ªåŠ¨æ£€æŸ¥å¹¶æ›´æ–°æ’ä»¶ |
| `false` | - | ä¸è‡ªåŠ¨æ›´æ–° |

---

### é«˜çº§è®¾ç½®

è¿™äº›é€‰é¡¹ç”¨äºè¾¹ç¼˜åœºæ™¯ï¼Œå¤§å¤šæ•°ç”¨æˆ·ä¸éœ€è¦ä¿®æ”¹ã€‚

<details>
<summary><strong>å±•å¼€æŸ¥çœ‹é«˜çº§è®¾ç½®</strong></summary>

#### é”™è¯¯æ¢å¤

| é€‰é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|-------|------|
| `empty_response_max_attempts` | `4` | ç©ºå“åº”é‡è¯•æ¬¡æ•° |
| `empty_response_retry_delay_ms` | `2000` | é‡è¯•é—´éš”ï¼ˆæ¯«ç§’ï¼‰ |
| `tool_id_recovery` | `true` | ä¿®å¤å·¥å…· ID ä¸åŒ¹é… |
| `claude_tool_hardening` | `true` | é˜²æ­¢å·¥å…·å‚æ•°å¹»è§‰ |
| `max_rate_limit_wait_seconds` | `300` | é™é€Ÿæœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆ0=æ— é™ï¼‰ |

#### ä»¤ç‰Œç®¡ç†

| é€‰é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|-------|------|
| `proactive_token_refresh` | `true` | è¿‡æœŸå‰ä¸»åŠ¨åˆ·æ–°ä»¤ç‰Œ |
| `proactive_refresh_buffer_seconds` | `1800` | æå‰ 30 åˆ†é’Ÿåˆ·æ–° |
| `proactive_refresh_check_interval_seconds` | `300` | åˆ·æ–°æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰ |

#### ç­¾åç¼“å­˜ï¼ˆ`keep_thinking: true` æ—¶ç”Ÿæ•ˆï¼‰

| é€‰é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|-------|------|
| `signature_cache.enabled` | `true` | å¯ç”¨ç£ç›˜ç¼“å­˜ |
| `signature_cache.memory_ttl_seconds` | `3600` | å†…å­˜ç¼“å­˜ TTLï¼ˆ1 å°æ—¶ï¼‰ |
| `signature_cache.disk_ttl_seconds` | `172800` | ç£ç›˜ç¼“å­˜ TTLï¼ˆ48 å°æ—¶ï¼‰ |
| `signature_cache.write_interval_seconds` | `60` | åå°å†™å…¥é—´éš”ï¼ˆç§’ï¼‰ |

#### å¥åº·è¯„åˆ†ï¼ˆ`hybrid` ç­–ç•¥ä½¿ç”¨ï¼‰

| é€‰é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|-------|------|
| `health_score.initial` | `70` | åˆå§‹å¥åº·åˆ† |
| `health_score.success_reward` | `1` | æˆåŠŸå¥–åŠ±åˆ†æ•° |
| `health_score.rate_limit_penalty` | `-10` | é™é€Ÿæƒ©ç½šåˆ†æ•° |
| `health_score.failure_penalty` | `-20` | å¤±è´¥æƒ©ç½šåˆ†æ•° |
| `health_score.recovery_rate_per_hour` | `2` | æ¯å°æ—¶æ¢å¤åˆ†æ•° |
| `health_score.min_usable` | `50` | å¯ç”¨è´¦æˆ·æœ€ä½åˆ†æ•° |
| `health_score.max_score` | `100` | å¥åº·åˆ†ä¸Šé™ |

#### Token Bucketï¼ˆ`hybrid` ç­–ç•¥ä½¿ç”¨ï¼‰

| é€‰é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|-------|------|
| `token_bucket.max_tokens` | `50` | æ¡¶æœ€å¤§å®¹é‡ |
| `token_bucket.regeneration_rate_per_minute` | `6` | æ¯åˆ†é’Ÿæ¢å¤é€Ÿåº¦ |
| `token_bucket.initial_tokens` | `50` | åˆå§‹ä»¤ç‰Œæ•° |

</details>

---

## æ¨èé…ç½®æ–¹æ¡ˆ

### å•è´¦æˆ·é…ç½®

é€‚åˆï¼šåªæœ‰ä¸€ä¸ª Google è´¦æˆ·çš„ç”¨æˆ·

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "sticky",
  "web_search": {
    "default_mode": "auto"
  }
}
```

**é…ç½®è¯´æ˜**ï¼š
- `sticky`ï¼šä¸è½®æ¢ï¼Œä¿ç•™ Anthropic prompt cache
- `web_search: auto`ï¼šGemini å¯æ ¹æ®éœ€è¦æœç´¢

### 2-3 è´¦æˆ·é…ç½®

é€‚åˆï¼šå°å›¢é˜Ÿæˆ–éœ€è¦ä¸€å®šå¼¹æ€§çš„ç”¨æˆ·

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "hybrid",
  "web_search": {
    "default_mode": "auto"
  }
}
```

**é…ç½®è¯´æ˜**ï¼š
- `hybrid`ï¼šæ™ºèƒ½è½®æ¢ï¼Œå¥åº·è¯„åˆ†é€‰æ‹©æœ€ä½³è´¦æˆ·
- `web_search: auto`ï¼šGemini å¯æ ¹æ®éœ€è¦æœç´¢

### å¤šè´¦æˆ· + å¹¶è¡Œä»£ç†é…ç½®

é€‚åˆï¼šè¿è¡Œå¤šä¸ªå¹¶å‘ä»£ç†çš„ç”¨æˆ·

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "round-robin",
  "switch_on_first_rate_limit": true,
  "pid_offset_enabled": true,
  "web_search": {
    "default_mode": "auto"
  }
}
```

**é…ç½®è¯´æ˜**ï¼š
- `round-robin`ï¼šæ¯æ¬¡è¯·æ±‚è½®æ¢è´¦æˆ·
- `switch_on_first_rate_limit: true`ï¼šç¬¬ä¸€æ¬¡ 429 ç«‹å³åˆ‡æ¢
- `pid_offset_enabled: true`ï¼šä¸åŒä¼šè¯ä½¿ç”¨ä¸åŒèµ·å§‹è´¦æˆ·
- `web_search: auto`ï¼šGemini å¯æ ¹æ®éœ€è¦æœç´¢

---

## è¸©å‘æé†’

### âŒ é”™è¯¯ï¼šä¿®æ”¹é…ç½®åæ²¡æœ‰ç”Ÿæ•ˆ

**åŸå› **ï¼šOpenCode å¯èƒ½æ²¡æœ‰é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ã€‚

**è§£å†³æ–¹æ³•**ï¼šé‡å¯ OpenCode æˆ–æ£€æŸ¥ JSON è¯­æ³•æ˜¯å¦æ­£ç¡®ã€‚

### âŒ é”™è¯¯ï¼šé…ç½®æ–‡ä»¶ JSON æ ¼å¼é”™è¯¯

**åŸå› **ï¼šJSON è¯­æ³•é”™è¯¯ï¼ˆç¼ºå°‘é€—å·ã€å¤šä½™çš„é€—å·ã€æ³¨é‡Šç­‰ï¼‰ã€‚

**è§£å†³æ–¹æ³•**ï¼šä½¿ç”¨ JSON éªŒè¯å·¥å…·æ£€æŸ¥ï¼Œæˆ–æ·»åŠ  `$schema` å­—æ®µå¯ç”¨ IDE æ™ºèƒ½æç¤ºã€‚

### âŒ é”™è¯¯ï¼šç¯å¢ƒå˜é‡æ²¡æœ‰ç”Ÿæ•ˆ

**åŸå› **ï¼šç¯å¢ƒå˜é‡åæ‹¼å†™é”™è¯¯æˆ–æ²¡æœ‰é‡å¯ OpenCodeã€‚

**è§£å†³æ–¹æ³•**ï¼šç¡®è®¤å˜é‡åä¸º `OPENCODE_ANTIGRAVITY_*`ï¼ˆå…¨å¤§å†™ï¼Œå‰ç¼€æ­£ç¡®ï¼‰ï¼Œé‡å¯ OpenCodeã€‚

### âŒ é”™è¯¯ï¼šå¯ç”¨ `keep_thinking: true` åé¢‘ç¹å‡ºé”™

**åŸå› **ï¼šæ€è€ƒå—ç­¾åä¸åŒ¹é…ã€‚

**è§£å†³æ–¹æ³•**ï¼šä¿æŒ `keep_thinking: false`ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œæˆ–è°ƒæ•´ `signature_cache` é…ç½®ã€‚

---

## æœ¬è¯¾å°ç»“

é…ç½®æ–‡ä»¶ä½ç½®ä¼˜å…ˆçº§ï¼šç¯å¢ƒå˜é‡ > é¡¹ç›®çº§ > ç”¨æˆ·çº§ã€‚

æ ¸å¿ƒé…ç½®é¡¹ï¼š
- æ¨¡å‹è¡Œä¸ºï¼š`keep_thinking`ã€`session_recovery`ã€`web_search`
- è´¦æˆ·è½®æ¢ï¼š`account_selection_strategy`ã€`pid_offset_enabled`
- åº”ç”¨è¡Œä¸ºï¼š`debug`ã€`quiet_mode`ã€`auto_update`

ä¸åŒåœºæ™¯æ¨èé…ç½®ï¼š
- å•è´¦æˆ·ï¼š`sticky`
- 2-3 è´¦æˆ·ï¼š`hybrid`
- 4+ è´¦æˆ·ï¼š`round-robin`
- å¹¶è¡Œä»£ç†ï¼š`round-robin` + `pid_offset_enabled: true`

---

## ä¸‹ä¸€è¯¾é¢„å‘Š

> ä¸‹ä¸€è¯¾æˆ‘ä»¬å­¦ä¹  **[è°ƒè¯•æ—¥å¿—](../debug-logging/)**ã€‚
>
> ä½ ä¼šå­¦åˆ°ï¼š
> - å¦‚ä½•å¯ç”¨è°ƒè¯•æ—¥å¿—
> - å¦‚ä½•è§£è¯»æ—¥å¿—å†…å®¹
> - å¦‚ä½•æ’æŸ¥å¸¸è§é—®é¢˜

---

## é™„å½•ï¼šæºç å‚è€ƒ

<details>
<summary><strong>ç‚¹å‡»å±•å¼€æŸ¥çœ‹æºç ä½ç½®</strong></summary>

> æ›´æ–°æ—¶é—´ï¼š2026-01-23

| åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ | è¡Œå· |
|------|----------|------|
| é…ç½® Schema å®šä¹‰ | [`src/plugin/config/schema.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/schema.ts) | 12-323 |
| é»˜è®¤é…ç½®å€¼ | [`src/plugin/config/schema.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/schema.ts) | 325-373 |
| é…ç½®åŠ è½½é€»è¾‘ | [`src/plugin/config/loader.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/loader.ts) | 1-100 |

**å…³é”®å¸¸é‡**ï¼š
- `DEFAULT_CONFIG`: æ‰€æœ‰é…ç½®é¡¹çš„é»˜è®¤å€¼

**å…³é”®ç±»å‹**ï¼š
- `AntigravityConfig`: é…ç½®å¯¹è±¡ç±»å‹
- `AccountSelectionStrategy`: è´¦æˆ·é€‰æ‹©ç­–ç•¥ç±»å‹
- `SignatureCacheConfig`: ç­¾åç¼“å­˜é…ç½®ç±»å‹

</details>
