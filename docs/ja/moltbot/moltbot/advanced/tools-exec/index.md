---
title: "ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ„ãƒ¼ãƒ«ã¨æ‰¿èªã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•çµ„ã¿ã€è¨­å®šã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | Clawdbot ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«"
sidebarTitle: "AIã«å®‰å…¨ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã•ã›ã‚‹"
subtitle: "ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ„ãƒ¼ãƒ«ã¨æ‰¿èª"
description: "Clawdbotã®execãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã€3ã¤ã®å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ï¼ˆsandbox/gateway/nodeï¼‰ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ‰¿èªä»•çµ„ã¿ã€è¨±å¯ãƒªã‚¹ãƒˆã®è¨­å®šã€æ‰¿èªãƒ•ãƒ­ãƒ¼ã‚’å­¦ç¿’ã—ã¾ã™ã€‚ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã«ã¯å®Ÿè·µçš„ãªè¨­å®šä¾‹ã€CLIã‚³ãƒãƒ³ãƒ‰ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®æ©Ÿèƒ½ã‚’å®‰å…¨ã«æ‹¡å¼µã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚"
tags:
  - "advanced"
  - "tools"
  - "exec"
  - "security"
  - "approvals"
prerequisite:
  - "start-gateway-startup"
order: 220
---

# ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ„ãƒ¼ãƒ«ã¨æ‰¿èª

## å­¦ç¿’å¾Œã®ç›®æ¨™

- 3ã¤ã®å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ï¼ˆsandbox/gateway/nodeï¼‰ã§execãƒ„ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ‰¿èªä»•çµ„ã¿ï¼ˆdeny/allowlist/fullï¼‰ã‚’ç†è§£ã—ã¦è¨­å®šã™ã‚‹
- è¨±å¯ãƒªã‚¹ãƒˆï¼ˆAllowlistï¼‰ã¨ã‚»ã‚­ãƒ¥ã‚¢ãªbinsã‚’ç®¡ç†ã™ã‚‹
- UIã¾ãŸã¯ãƒãƒ£ãƒƒãƒˆãƒãƒ£ãƒãƒ«çµŒç”±ã§execãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ‰¿èªã™ã‚‹
- execãƒ„ãƒ¼ãƒ«ã®ä¸€èˆ¬çš„ãªå•é¡Œã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ©ãƒ¼ã‚’ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹

## ç¾åœ¨ã®èª²é¡Œ

execãƒ„ãƒ¼ãƒ«ã¯AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãŒã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ãŒã€ã“ã‚Œã¯å¼·åŠ›ã§ã‚ã‚ŠãªãŒã‚‰å±é™ºã§ã‚‚ã‚ã‚Šã¾ã™ï¼š

- AIãŒã‚·ã‚¹ãƒ†ãƒ ä¸Šã®é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã™ã‚‹ã®ã§ã¯ãªã„ã‹ï¼Ÿ
- AIãŒå®‰å…¨ãªã‚³ãƒãƒ³ãƒ‰ã®ã¿ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«åˆ¶é™ã™ã‚‹ã«ã¯ï¼Ÿ
- ã•ã¾ã–ã¾ãªå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã®é•ã„ã¯ä½•ã‹ï¼Ÿ
- æ‰¿èªãƒ•ãƒ­ãƒ¼ã¯ã©ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ã®ã‹ï¼Ÿ
- è¨±å¯ãƒªã‚¹ãƒˆã¯ã©ã®ã‚ˆã†ã«è¨­å®šã™ã‚Œã°ã‚ˆã„ã®ã‹ï¼Ÿ

## ã„ã¤ä½¿ç”¨ã™ã¹ãã‹

- AIã«ã‚·ã‚¹ãƒ†ãƒ æ“ä½œï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ã€ã‚³ãƒ¼ãƒ‰ãƒ“ãƒ«ãƒ‰ãªã©ï¼‰ã‚’å®Ÿè¡Œã•ã›ãŸã„å ´åˆ
- AIã«ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã•ã›ãŸã„å ´åˆ
- AIã®å®Ÿè¡Œæ¨©é™ã‚’ç´°ã‹ãåˆ¶å¾¡ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆ
- ç‰¹å®šã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®‰å…¨ã«è¨±å¯ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆ

## ğŸ’ é–‹å§‹å‰ã®æº–å‚™

::: warning å‰ææ¡ä»¶
ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯ã€[Gatewayã®èµ·å‹•](../../start/gateway-startup/)ãŒå®Œäº†ã—ã¦ãŠã‚Šã€Gatewayãƒ‡ãƒ¼ãƒ¢ãƒ³ãŒå®Ÿè¡Œä¸­ã§ã‚ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚
:::

- Node â‰¥22 ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
- Gatewayãƒ‡ãƒ¼ãƒ¢ãƒ³ãŒå®Ÿè¡Œä¸­ã§ã‚ã‚‹ã“ã¨
- åŸºæœ¬çš„ãªã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã¨Linux/Unixãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®çŸ¥è­˜

## ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

### Execãƒ„ãƒ¼ãƒ«ã®3å±¤ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿è­·

execãƒ„ãƒ¼ãƒ«ã¯ã€ç²—ç²’åº¦ã‹ã‚‰ç´°ç²’åº¦ã¾ã§ã®3å±¤ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•çµ„ã¿ã‚’æ¡ç”¨ã—ã€AIã®å®Ÿè¡Œæ¨©é™ã‚’åˆ¶å¾¡ã—ã¾ã™ï¼š

1. **ãƒ„ãƒ¼ãƒ«ãƒãƒªã‚·ãƒ¼ï¼ˆTool Policyï¼‰**ï¼š`tools.policy`ã§`exec`ãƒ„ãƒ¼ãƒ«ã®è¨±å¯ã‚’åˆ¶å¾¡
2. **å®Ÿè¡Œãƒ›ã‚¹ãƒˆï¼ˆHostï¼‰**ï¼šã‚³ãƒãƒ³ãƒ‰ã¯sandbox/gateway/nodeã®3ã¤ã®ç’°å¢ƒã§å®Ÿè¡Œ
3. **æ‰¿èªä»•çµ„ã¿ï¼ˆApprovalsï¼‰**ï¼šgateway/nodeãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€allowlistã¨æ‰¿èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã•ã‚‰ã«åˆ¶é™å¯èƒ½

::: info ãªãœå¤šå±¤ä¿è­·ãŒå¿…è¦ãªã®ã‹ï¼Ÿ
å˜å±¤ã®ä¿è­·ã¯ãƒã‚¤ãƒ‘ã‚¹ã‚„è¨­å®šãƒŸã‚¹ã‚’å¼•ãèµ·ã“ã—ã‚„ã™ã„ã§ã™ã€‚å¤šå±¤ä¿è­·ã«ã‚ˆã‚Šã€ã‚ã‚‹å±¤ãŒæ©Ÿèƒ½ã—ãªãã¦ã‚‚ä»–ã®å±¤ãŒä¿è­·ã‚’æä¾›ã—ã¾ã™ã€‚
:::

### 3ã¤ã®å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã®æ¯”è¼ƒ

| å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ | å®Ÿè¡Œå ´æ‰€ | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ™ãƒ« | å…¸å‹çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ | æ‰¿èªãŒå¿…è¦ |
|--- | --- | --- | --- | ---|
| **sandbox** | ã‚³ãƒ³ãƒ†ãƒŠå†…ï¼ˆDockerãªã©ï¼‰ | é«˜ | åˆ†é›¢ç’°å¢ƒã€ãƒ†ã‚¹ãƒˆ | ã„ã„ãˆ |
| **gateway** | Gatewayãƒ‡ãƒ¼ãƒ¢ãƒ³ãŒå‹•ä½œã™ã‚‹ãƒã‚·ãƒ³ | ä¸­ | ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã€çµ±åˆ | ã¯ã„ï¼ˆallowlist + æ‰¿èªï¼‰ |
| **node** | ãƒšã‚¢ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒ‡ãƒã‚¤ã‚¹ãƒãƒ¼ãƒ‰ï¼ˆmacOS/iOS/Androidï¼‰ | ä¸­ | ãƒ‡ãƒã‚¤ã‚¹ãƒ­ãƒ¼ã‚«ãƒ«æ“ä½œ | ã¯ã„ï¼ˆallowlist + æ‰¿èªï¼‰ |

**é‡è¦ãªé•ã„**ï¼š
- sandboxãƒ¢ãƒ¼ãƒ‰ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§**æ‰¿èªãŒä¸è¦**ï¼ˆãŸã ã—Sandboxã®åˆ¶é™ã‚’å—ã‘ã‚‹å¯èƒ½æ€§ã‚ã‚Šï¼‰
- gatewayã¨nodeãƒ¢ãƒ¼ãƒ‰ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§**æ‰¿èªãŒå¿…è¦**ï¼ˆ`full`ã«è¨­å®šã—ãªã„é™ã‚Šï¼‰

## ã•ã‚ã€ã‚„ã£ã¦ã¿ã‚ˆã†

### ã‚¹ãƒ†ãƒƒãƒ—1ï¼šexecãƒ„ãƒ¼ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç†è§£ã™ã‚‹

**ãªãœ**
execãƒ„ãƒ¼ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç†è§£ã™ã‚‹ã“ã¨ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®åŸºç¤ã§ã™ã€‚

execãƒ„ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ï¼š

```json
{
  "tool": "exec",
  "command": "ls -la",
  "workdir": "/path/to/dir",
  "env": { "NODE_ENV": "production" },
  "yieldMs": 10000,
  "background": false,
  "timeout": 1800,
  "pty": false,
  "host": "sandbox",
  "security": "allowlist",
  "ask": "on-miss",
  "node": "mac-1"
}
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¬æ˜**ï¼š

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | ã‚¿ã‚¤ãƒ— | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜ |
|--- | --- | --- | ---|
| `command` | string | å¿…é ˆ | å®Ÿè¡Œã™ã‚‹ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ |
| `workdir` | string | ç¾åœ¨ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | å®Ÿè¡Œãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª |
| `env` | object | ç’°å¢ƒã‚’ç¶™æ‰¿ | ç’°å¢ƒå¤‰æ•°ã®ä¸Šæ›¸ã |
| `yieldMs` | number | 10000 | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¾Œã«è‡ªå‹•çš„ã«ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã¸ï¼ˆãƒŸãƒªç§’ï¼‰ |
| `background` | boolean | false | å³åº§ã«ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œ |
| `timeout` | number | 1800 | å®Ÿè¡Œã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰ |
| `pty` | boolean | false | æ“¬ä¼¼ç«¯æœ«ã§å®Ÿè¡Œï¼ˆTTYã‚µãƒãƒ¼ãƒˆï¼‰ |
| `host` | string | sandbox | å®Ÿè¡Œãƒ›ã‚¹ãƒˆï¼š`sandbox` \| `gateway` \| `node` |
| `security` | string | deny/allowlist | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ï¼š`deny` \| `allowlist` \| `full` |
| `ask` | string | on-miss | æ‰¿èªãƒãƒªã‚·ãƒ¼ï¼š`off` \| `on-miss` \| `always` |
| `node` | string | - | nodeãƒ¢ãƒ¼ãƒ‰ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰IDã¾ãŸã¯åå‰ |

**ç¢ºèªã™ã¹ãç‚¹**ï¼šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆã¯å„å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã®åˆ¶å¾¡æ–¹æ³•ã‚’æ˜ç¢ºã«èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—2ï¼šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹

**ãªãœ**
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€execå‘¼ã³å‡ºã—ã”ã¨ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚

`~/.clawdbot/clawdbot.json`ã‚’ç·¨é›†ï¼š

```json
{
  "tools": {
    "exec": {
      "host": "sandbox",
      "security": "allowlist",
      "ask": "on-miss",
      "node": "mac-1",
      "notifyOnExit": true,
      "approvalRunningNoticeMs": 10000,
      "pathPrepend": ["~/bin", "/opt/homebrew/bin"],
      "safeBins": ["jq", "grep", "cut"]
    }
  }
}
```

**è¨­å®šé …ç›®ã®èª¬æ˜**ï¼š

| è¨­å®šé …ç›® | ã‚¿ã‚¤ãƒ— | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜ |
|--- | --- | --- | ---|
| `host` | string | sandbox | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å®Ÿè¡Œãƒ›ã‚¹ãƒˆ |
| `security` | string | deny (sandbox) / allowlist (gateway, node) | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ |
| `ask` | string | on-miss | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ‰¿èªãƒãƒªã‚·ãƒ¼ |
| `node` | string | - | nodeãƒ¢ãƒ¼ãƒ‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒ‰ |
| `notifyOnExit` | boolean | true | ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯çµ‚äº†æ™‚ã«ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ |
| `approvalRunningNoticeMs` | number | 10000 | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¾Œã«ã€Œå®Ÿè¡Œä¸­ã€é€šçŸ¥ã‚’é€ä¿¡ï¼ˆ0ã§ç„¡åŠ¹ï¼‰ |
| `pathPrepend` | string[] | - | PATHã«è¿½åŠ ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒªã‚¹ãƒˆ |
| `safeBins` | string[] | [ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒªã‚¹ãƒˆ] | ã‚»ã‚­ãƒ¥ã‚¢ãªãƒã‚¤ãƒŠãƒªãƒªã‚¹ãƒˆï¼ˆstdinæ“ä½œã®ã¿ï¼‰ |

**ç¢ºèªã™ã¹ãç‚¹**ï¼šè¨­å®šã‚’ä¿å­˜ã™ã‚‹ã¨ã€execãƒ„ãƒ¼ãƒ«ã¯ã“ã‚Œã‚‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—3ï¼š`/exec`ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹

**ãªãœ**
ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã«ã‚ˆã‚Šã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã›ãšã«ä¸€æ™‚çš„ã«å®Ÿè¡Œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª¿æ•´ã§ãã¾ã™ã€‚

ãƒãƒ£ãƒƒãƒˆã§é€ä¿¡ï¼š

```
/exec host=gateway security=allowlist ask=on-miss node=mac-1
```

ç¾åœ¨ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰å€¤ã‚’ç¢ºèªï¼š

```
/exec
```

**ç¢ºèªã™ã¹ãç‚¹**ï¼šç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®execãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—4ï¼šè¨±å¯ãƒªã‚¹ãƒˆï¼ˆAllowlistï¼‰ã‚’è¨­å®šã™ã‚‹

**ãªãœ**
allowlistã¯gateway/nodeãƒ¢ãƒ¼ãƒ‰ã®ä¸­æ ¸ã¨ãªã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•çµ„ã¿ã§ã‚ã‚Šã€ç‰¹å®šã®ã‚³ãƒãƒ³ãƒ‰ã®ã¿ã‚’è¨±å¯ã—ã¾ã™ã€‚

#### allowlistã‚’ç·¨é›†ã™ã‚‹

**UIã§ç·¨é›†**ï¼š

1. Control UIã‚’é–‹ã
2. **Nodes**ã‚¿ãƒ–ã«ç§»å‹•
3. **Exec approvals**ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã‚‹
4. ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼ˆGatewayã¾ãŸã¯Nodeï¼‰ã‚’é¸æŠ
5. Agentã‚’é¸æŠï¼ˆä¾‹ï¼š`main`ï¼‰
6. **Add pattern**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¿½åŠ 
7. **Save**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¿å­˜

**CLIã§ç·¨é›†**ï¼š

```bash
clawdbot approvals
```

**JSONãƒ•ã‚¡ã‚¤ãƒ«ã§ç·¨é›†**ï¼š

`~/.clawdbot/exec-approvals.json`ã‚’ç·¨é›†ï¼š

```json
{
  "version": 1,
  "defaults": {
    "security": "deny",
    "ask": "on-miss",
    "askFallback": "deny",
    "autoAllowSkills": false
  },
  "agents": {
    "main": {
      "security": "allowlist",
      "ask": "on-miss",
      "askFallback": "deny",
      "autoAllowSkills": true,
      "allowlist": [
        {
          "id": "B0C8C0B3-2C2D-4F8A-9A3C-5A4B3C2D1E0F",
          "pattern": "~/Projects/**/bin/*",
          "lastUsedAt": 1737150000000,
          "lastUsedCommand": "rg -n TODO",
          "lastResolvedPath": "/Users/user/Projects/bin/rg"
        },
        {
          "id": "C1D9D1C4-3D3E-5F9B-0B4D-6B5C4D3E2F1G",
          "pattern": "/opt/homebrew/bin/rg",
          "lastUsedAt": 1737150000000,
          "lastUsedCommand": "rg test",
          "lastResolvedPath": "/opt/homebrew/bin/rg"
        }
      ]
    }
  }
}
```

**Allowlistãƒ¢ãƒ¼ãƒ‰ã®èª¬æ˜**ï¼š

allowlistã¯**globãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°**ï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„ï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | ãƒãƒƒãƒ | èª¬æ˜ |
|--- | --- | ---|
| `~/Projects/**/bin/*` | `/Users/user/Projects/any/bin/rg` | ã™ã¹ã¦ã®ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒãƒƒãƒ |
| `~/.local/bin/*` | `/Users/user/.local/bin/jq` | ãƒ­ãƒ¼ã‚«ãƒ«binã«ãƒãƒƒãƒ |
| `/opt/homebrew/bin/rg` | `/opt/homebrew/bin/rg` | çµ¶å¯¾ãƒ‘ã‚¹ã«ãƒãƒƒãƒ |

::: warning é‡è¦ãªãƒ«ãƒ¼ãƒ«
- **è§£æ±ºã•ã‚ŒãŸãƒã‚¤ãƒŠãƒªãƒ‘ã‚¹ã®ã¿ãƒãƒƒãƒ**ã€basenameãƒãƒƒãƒï¼ˆ`rg`ãªã©ï¼‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã›ã‚“
- ã‚·ã‚§ãƒ«é€£çµï¼ˆ`&&`ã€`||`ã€`;`ï¼‰ã¯å„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆãŒallowlistã‚’æº€ãŸã™å¿…è¦ãŒã‚ã‚Šã¾ã™
- ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆ`>`ã€`<`ï¼‰ã¯allowlistãƒ¢ãƒ¼ãƒ‰ã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“
:::

**ç¢ºèªã™ã¹ãç‚¹**ï¼šallowlistã‚’è¨­å®šã™ã‚‹ã¨ã€ãƒãƒƒãƒã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã®ã¿ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—5ï¼šã‚»ã‚­ãƒ¥ã‚¢ãªbinsï¼ˆSafe Binsï¼‰ã‚’ç†è§£ã™ã‚‹

**ãªãœ**
ã‚»ã‚­ãƒ¥ã‚¢ãªbinsã¯stdinæ“ä½œã®ã¿ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å®‰å…¨ãªãƒã‚¤ãƒŠãƒªã®ã‚»ãƒƒãƒˆã§ã‚ã‚Šã€allowlistãƒ¢ãƒ¼ãƒ‰ã§æ˜ç¤ºçš„ãªallowlistãªã—ã§ä½¿ç”¨ã§ãã¾ã™ã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚»ã‚­ãƒ¥ã‚¢ãªbins**ï¼š

`jq`ã€`grep`ã€`cut`ã€`sort`ã€`uniq`ã€`head`ã€`tail`ã€`tr`ã€`wc`

**ã‚»ã‚­ãƒ¥ã‚¢ãªbinã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç‰¹æ€§**ï¼š

- ä½ç½®ãƒ•ã‚¡ã‚¤ãƒ«å¼•æ•°ã‚’æ‹’å¦
- ãƒ‘ã‚¹ãƒ©ã‚¤ã‚¯ãƒ•ãƒ©ã‚°ã‚’æ‹’å¦
- å…¥åŠ›ã‚¹ãƒˆãƒªãƒ¼ãƒ ï¼ˆstdinï¼‰ã®ã¿æ“ä½œå¯èƒ½

**ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚­ãƒ¥ã‚¢ãªbinsã‚’è¨­å®š**ï¼š

```json
{
  "tools": {
    "exec": {
      "safeBins": ["jq", "grep", "my-safe-tool"]
    }
  }
}
```

**ç¢ºèªã™ã¹ãç‚¹**ï¼šã‚»ã‚­ãƒ¥ã‚¢ãªbinsã®ã‚³ãƒãƒ³ãƒ‰ã¯allowlistãƒ¢ãƒ¼ãƒ‰ã§ç›´æ¥å®Ÿè¡Œã§ãã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—6ï¼šãƒãƒ£ãƒƒãƒˆãƒãƒ£ãƒãƒ«çµŒç”±ã§execãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ‰¿èªã™ã‚‹

**ãªãœ**
UIãŒåˆ©ç”¨ã§ããªã„å ´åˆã€ä»»æ„ã®ãƒãƒ£ãƒƒãƒˆãƒãƒ£ãƒãƒ«ï¼ˆWhatsAppã€Telegramã€Slackãªã©ï¼‰çµŒç”±ã§execãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ‰¿èªã§ãã¾ã™ã€‚

#### æ‰¿èªè»¢é€ã‚’æœ‰åŠ¹ã«ã™ã‚‹

`~/.clawdbot/clawdbot.json`ã‚’ç·¨é›†ï¼š

```json
{
  "approvals": {
    "exec": {
      "enabled": true,
      "mode": "session",
      "agentFilter": ["main"],
      "sessionFilter": ["discord"],
      "targets": [
        { "channel": "slack", "to": "U12345678" },
        { "channel": "telegram", "to": "123456789" }
      ]
    }
  }
}
```

**è¨­å®šé …ç›®ã®èª¬æ˜**ï¼š

| è¨­å®šé …ç›® | èª¬æ˜ |
|--- | ---|
| `enabled` | execæ‰¿èªè»¢é€ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã©ã†ã‹ |
| `mode` | `"session"` \| `"targets"` \| `"both"` - æ‰¿èªã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ |
| `agentFilter` | ç‰¹å®šã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ‰¿èªãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿å‡¦ç† |
| `sessionFilter` | ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆsubstringã¾ãŸã¯regexï¼‰ |
| `targets` | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ£ãƒãƒ«ãƒªã‚¹ãƒˆï¼ˆ`channel` + `to`ï¼‰ |

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ‰¿èªã™ã‚‹

execãƒ„ãƒ¼ãƒ«ãŒæ‰¿èªã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®æƒ…å ±ã‚’å«ã‚€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå±Šãã¾ã™ï¼š

```
Exec approval request (id: abc-123)
Command: ls -la
CWD: /home/user
Agent: main
Resolved: /usr/bin/ls
Host: gateway
Security: allowlist
```

**æ‰¿èªã‚ªãƒ—ã‚·ãƒ§ãƒ³**ï¼š

```
/approve abc-123 allow-once     # 1å›ã®ã¿è¨±å¯
/approve abc-123 allow-always    # å¸¸ã«è¨±å¯ï¼ˆallowlistã«è¿½åŠ ï¼‰
/approve abc-123 deny           # æ‹’å¦
```

**ç¢ºèªã™ã¹ãç‚¹**ï¼šæ‰¿èªå¾Œã€ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‹æ‹’å¦ã•ã‚Œã¾ã™ã€‚

## ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ âœ…

- [ ] 3ã¤ã®å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ï¼ˆsandbox/gateway/nodeï¼‰ã®é•ã„ã‚’ç†è§£ã—ã¦ã„ã‚‹
- [ ] ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªexecãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã—ãŸ
- [ ] `/exec`ã‚³ãƒãƒ³ãƒ‰ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã‚’ä½¿ç”¨ã§ãã‚‹
- [ ] allowlistã‚’è¨­å®šã—ãŸï¼ˆå°‘ãªãã¨ã‚‚1ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
- [ ] ã‚»ã‚­ãƒ¥ã‚¢ãªbinsã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç‰¹æ€§ã‚’ç†è§£ã—ã¦ã„ã‚‹
- [ ] ãƒãƒ£ãƒƒãƒˆãƒãƒ£ãƒãƒ«çµŒç”±ã§execãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ‰¿èªã§ãã‚‹

## ã‚ˆãã‚ã‚‹è½ã¨ã—ç©´

### ä¸€èˆ¬çš„ãªã‚¨ãƒ©ãƒ¼

| ã‚¨ãƒ©ãƒ¼ | åŸå›  | è§£æ±ºæ–¹æ³• |
|--- | --- | ---|
| `Command not allowed by exec policy` | `security=deny`ã¾ãŸã¯allowlistãŒä¸€è‡´ã—ãªã„ | `tools.exec.security`ã¨allowlistè¨­å®šã‚’ç¢ºèª |
| `Approval timeout` | UIãŒåˆ©ç”¨ä¸å¯ã€`askFallback=deny` | `askFallback=allowlist`ã‚’è¨­å®šã¾ãŸã¯UIã‚’æœ‰åŠ¹åŒ– |
| `Pattern does not resolve to binary` | allowlistãƒ¢ãƒ¼ãƒ‰ã§basenameã‚’ä½¿ç”¨ | å®Œå…¨ãƒ‘ã‚¹ã‚’ä½¿ç”¨ï¼ˆä¾‹ï¼š`/opt/homebrew/bin/rg`ï¼‰ |
| `Unsupported shell token` | allowlistãƒ¢ãƒ¼ãƒ‰ã§`>`ã¾ãŸã¯`&&`ã‚’ä½¿ç”¨ | ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ†å‰²ã¾ãŸã¯`security=full`ã‚’ä½¿ç”¨ |
| `Node not found` | nodeãƒ¢ãƒ¼ãƒ‰ã§ãƒãƒ¼ãƒ‰ãŒãƒšã‚¢ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ãªã„ | ã¾ãšãƒãƒ¼ãƒ‰ãƒšã‚¢ãƒªãƒ³ã‚°ã‚’å®Œäº† |

### ã‚·ã‚§ãƒ«é€£çµã¨ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

::: danger è­¦å‘Š
`security=allowlist`ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ä»¥ä¸‹ã®ã‚·ã‚§ãƒ«æ©Ÿèƒ½ã¯**ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã›ã‚“**ï¼š
- ãƒ‘ã‚¤ãƒ—ï¼š`|`ï¼ˆãŸã ã—`||`ã¯ã‚µãƒãƒ¼ãƒˆï¼‰
- ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼š`>`ã€`<`ã€`>>`
- ã‚³ãƒãƒ³ãƒ‰ç½®æ›ï¼š`$()`ã€`` ` ` ``
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼š`&`ã€`;`
:::

**è§£æ±ºæ–¹æ³•**ï¼š
- `security=full`ã‚’ä½¿ç”¨ï¼ˆæ…é‡ã«ï¼‰
- è¤‡æ•°ã®execå‘¼ã³å‡ºã—ã«åˆ†å‰²
- ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ‘ã‚¹ã‚’allowlistã«è¿½åŠ 

### PATHç’°å¢ƒå¤‰æ•°

å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦PATHã®å‡¦ç†æ–¹æ³•ãŒç•°ãªã‚Šã¾ã™ï¼š

| å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ | PATHå‡¦ç† | èª¬æ˜ |
|--- | --- | ---|
| `sandbox` | ã‚·ã‚§ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ã‚’ç¶™æ‰¿ã€`/etc/profile`ã§ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹å¯èƒ½æ€§ | `pathPrepend`ã¯profileã®å¾Œã«é©ç”¨ |
| `gateway` | ãƒ­ã‚°ã‚¤ãƒ³ã‚·ã‚§ãƒ«PATHã‚’execç’°å¢ƒã«ãƒãƒ¼ã‚¸ | ãƒ‡ãƒ¼ãƒ¢ãƒ³ã¯æœ€å°PATHã‚’ä¿æŒã€execã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼PATHã‚’ç¶™æ‰¿ |
| `node` | æ¸¡ã•ã‚ŒãŸç’°å¢ƒå¤‰æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã®ã¿ä½¿ç”¨ | macOSãƒãƒ¼ãƒ‰ã¯`PATH`ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã‚’ç ´æ£„ã€headlessãƒãƒ¼ãƒ‰ã¯prependã‚’ã‚µãƒãƒ¼ãƒˆ |

**ç¢ºèªã™ã¹ãç‚¹**ï¼šPATHã®è¨­å®šãŒæ­£ã—ãã‚³ãƒãƒ³ãƒ‰æ¤œç´¢ã«å½±éŸ¿ã—ã¾ã™ã€‚

## ã¾ã¨ã‚

execãƒ„ãƒ¼ãƒ«ã¯3å±¤ã®ä¿è­·ä»•çµ„ã¿ï¼ˆãƒ„ãƒ¼ãƒ«ãƒãƒªã‚·ãƒ¼ã€å®Ÿè¡Œãƒ›ã‚¹ãƒˆã€æ‰¿èªï¼‰ã«ã‚ˆã‚Šã€AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãŒã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å®‰å…¨ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ï¼š

- **å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰**ï¼šsandboxï¼ˆã‚³ãƒ³ãƒ†ãƒŠåˆ†é›¢ï¼‰ã€gatewayï¼ˆãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œï¼‰ã€nodeï¼ˆãƒ‡ãƒã‚¤ã‚¹æ“ä½œï¼‰
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼**ï¼šdenyï¼ˆå®Œå…¨ç¦æ­¢ï¼‰ã€allowlistï¼ˆè¨±å¯ãƒªã‚¹ãƒˆï¼‰ã€fullï¼ˆå®Œå…¨è¨±å¯ï¼‰
- **æ‰¿èªä»•çµ„ã¿**ï¼šoffï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãªã—ï¼‰ã€on-missï¼ˆæœªä¸€è‡´æ™‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ã€alwaysï¼ˆå¸¸ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰
- **è¨±å¯ãƒªã‚¹ãƒˆ**ï¼šglobãƒ‘ã‚¿ãƒ¼ãƒ³ã§è§£æ±ºã•ã‚ŒãŸãƒã‚¤ãƒŠãƒªãƒ‘ã‚¹ã‚’ãƒãƒƒãƒ
- **ã‚»ã‚­ãƒ¥ã‚¢ãªbins**ï¼šstdinæ“ä½œã®ã¿ã®ãƒã‚¤ãƒŠãƒªã¯allowlistãƒ¢ãƒ¼ãƒ‰ã§æ‰¿èªä¸è¦

## æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³äºˆå‘Š

> æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€**[Webæ¤œç´¢ã¨ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«](../tools-web/)**ã‚’å­¦ç¿’ã—ã¾ã™
>
> å­¦ã¶å†…å®¹ï¼š
> - `web_search`ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦Webæ¤œç´¢ã‚’è¡Œã†æ–¹æ³•
> - `web_fetch`ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦Webãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã™ã‚‹æ–¹æ³•
> - æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆBraveã€Perplexityï¼‰ã‚’è¨­å®šã™ã‚‹æ–¹æ³•
> - æ¤œç´¢çµæœã¨Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†ã™ã‚‹æ–¹æ³•

---

## ä»˜éŒ²ï¼šã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å‚ç…§

<details>
<summary><strong>ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å ´æ‰€ã‚’å±•é–‹</strong></summary>

> æ›´æ–°æ—¥ï¼š2026-01-27

| æ©Ÿèƒ½ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | è¡Œç•ªå· |
|--- | --- | ---|
| execãƒ„ãƒ¼ãƒ«å®šç¾© | [`src/agents/bash-tools.exec.ts`](https://github.com/moltbot/moltbot/blob/main/src/agents/bash-tools.exec.ts) | 1-500+ |
| execæ‰¿èªãƒ­ã‚¸ãƒƒã‚¯ | [`src/infra/exec-approvals.ts`](https://github.com/moltbot/moltbot/blob/main/src/infra/exec-approvals.ts) | 1-1268 |
| ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰åˆ†æ | [`src/infra/exec-approvals.ts`](https://github.com/moltbot/moltbot/blob/main/src/infra/exec-approvals.ts) | 500-1100 |
| Allowlistãƒãƒƒãƒ | [`src/infra/exec-approvals.ts`](https://github.com/moltbot/moltbot/blob/main/src/infra/exec-approvals.ts) | 507-521 |
| Safe binsæ¤œè¨¼ | [`src/infra/exec-approvals.ts`](https://github.com/moltbot/moltbot/blob/main/src/infra/exec-approvals.ts) | 836-873 |
| æ‰¿èªSocketé€šä¿¡ | [`src/infra/exec-approvals.ts`](https://github.com/moltbot/moltbot/blob/main/src/infra/exec-approvals.ts) | 1210-1267 |
| ãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œ | [`src/process/exec.ts`](https://github.com/moltbot/moltbot/blob/main/src/process/exec.ts) | 1-125 |
| ãƒ„ãƒ¼ãƒ«è¨­å®šSchema | [`src/config/zod-schema.core.ts`](https://github.com/moltbot/moltbot/blob/main/src/config/zod-schema.core.ts) | - |

**é‡è¦ãªã‚¿ã‚¤ãƒ—**ï¼š
- `ExecHost`: `"sandbox" \| "gateway" \| "node"` - å®Ÿè¡Œãƒ›ã‚¹ãƒˆã‚¿ã‚¤ãƒ—
- `ExecSecurity`: `"deny" \| "allowlist" \| "full"` - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼
- `ExecAsk`: `"off" \| "on-miss" \| "always"` - æ‰¿èªãƒãƒªã‚·ãƒ¼
- `ExecAllowlistEntry`: allowlistã‚¨ãƒ³ãƒˆãƒªã‚¿ã‚¤ãƒ—ï¼ˆ`pattern`ã€`lastUsedAt`ãªã©ã‚’å«ã‚€ï¼‰

**é‡è¦ãªå®šæ•°**ï¼š
- `DEFAULT_SECURITY = "deny"` - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼
- `DEFAULT_ASK = "on-miss"` - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ‰¿èªãƒãƒªã‚·ãƒ¼
- `DEFAULT_SAFE_BINS = ["jq", "grep", "cut", "sort", "uniq", "head", "tail", "tr", "wc"]` - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚»ã‚­ãƒ¥ã‚¢ãªbins

**é‡è¦ãªé–¢æ•°**ï¼š
- `resolveExecApprovals()`: exec-approvals.jsonè¨­å®šã‚’è§£æ
- `evaluateShellAllowlist()`: ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ãŒallowlistã‚’æº€ãŸã™ã‹è©•ä¾¡
- `matchAllowlist()`: ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¹ãŒallowlistãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ãƒãƒƒãƒã™ã‚‹ã‹ç¢ºèª
- `isSafeBinUsage()`: ã‚³ãƒãƒ³ãƒ‰ãŒã‚»ã‚­ãƒ¥ã‚¢ãªbinã®ä½¿ç”¨ã‹æ¤œè¨¼
- `requestExecApprovalViaSocket()`: Unixã‚½ã‚±ãƒƒãƒˆçµŒç”±ã§æ‰¿èªã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

</details>
