---
title: "ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ | Clawdbot ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«"
sidebarTitle: "ãƒ¡ãƒ¢ãƒªæ¤œç´¢ã®è¨­å®š"
subtitle: "ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰"
description: "Clawdbot ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã®ä»•çµ„ã¿ã‚’å­¦ã³ã¾ã™ã€‚ãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€FTS5å…¨æ–‡æ¤œç´¢ã€ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ã€Embeddingãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®è¨­å®šã«ã¤ã„ã¦ã€‚AIã®é•·æœŸè¨˜æ†¶ã®è¨­å®šã¨ä½¿ç”¨æ–¹æ³•ã‚’ç¿’å¾—ã—ã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã®ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚"
tags:
  - "memory"
  - "vector-search"
  - "embedding"
  - "sqlite-vec"
prerequisite:
  - "start-gateway-startup"
  - "advanced-models-auth"
order: 260
---

# ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰

## å­¦ç¿’å¾Œã®é”æˆç›®æ¨™

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã‚’çµ‚ãˆã‚‹ã¨ã€ä»¥ä¸‹ã®ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

- Clawdbot ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’ç†è§£ã™ã‚‹
- ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆOpenAIã€Geminiã€ãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ã‚’è¨­å®šã™ã‚‹
- ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ï¼ˆBM25 + ãƒ™ã‚¯ãƒˆãƒ«ï¼‰ã‚’ä½¿ç”¨ã—ã¦æ¤œç´¢ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹
- CLI ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒ¢ãƒªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨æ¤œç´¢ã‚’ç®¡ç†ã™ã‚‹
- Embedding ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’èª¿æ•´ã™ã‚‹

## ç¾åœ¨ã®èª²é¡Œ

ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ³ã«ç›´é¢ã—ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼š

- AI ãŒæ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ä»¥å‰ã®ä¼šè©±å†…å®¹ã‚’ã€Œå¿˜ã‚Œã‚‹ã€
- AI ã«æ°¸ç¶šçš„ãªçŸ¥è­˜ã¨è¨­å®šã‚’è¨˜æ†¶ã•ã›ãŸã„
- AI ã«ã€Œå­¦ç¿’ã€ã•ã›ã€é‡è¦ãªæƒ…å ±ã‚’è¨˜æ†¶ã•ã›ã‚‹æ–¹æ³•ãŒä¸æ˜
- éå»ã®ä¼šè©±ã‚’æ¤œç´¢ã—ã¦ã‚‚é–¢é€£ã™ã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„

## ã„ã¤ä½¿ã†ã‹

**ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ **ã¯ã€ä»¥ä¸‹ã®ã‚·ãƒŠãƒªã‚ªã«é©ã—ã¦ã„ã¾ã™ï¼š

| ã‚·ãƒŠãƒªã‚ª | ä¾‹ | ä¿å­˜å ´æ‰€ |
|------|--------|----------|
| æ°¸ç¶šçš„ãªçŸ¥è­˜ | ã€Œãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ãŒå¥½ãã ã€ã“ã‚Œã‚’è¨˜æ†¶ã—ã¦ã€ | MEMORY.md |
| æ—¥ã€…ã®ãƒãƒ¼ãƒˆ | ã€Œä»Šæ—¥ã®ä½œæ¥­é€²æ—ã¨ã‚¿ã‚¹ã‚¯ã€ | memory/YYYY-MM-DD.md |
| ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œç´¢ | ã€Œå‰å›è­°è«–ã—ãŸAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ï¼Ÿã€ | ãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ |
| è¨­å®šæƒ…å ± | ã€ŒGateway ã¯ãƒãƒ¼ãƒˆ18789ã§å®Ÿè¡Œä¸­ã€ | MEMORY.md |

---

## ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

### ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã®2å±¤æ§‹é€ 

Clawdbot ã¯é•·æœŸè¨˜æ†¶ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã« **2å±¤ã®ãƒ‡ãƒ¼ã‚¿** ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

| ãƒ¬ãƒ™ãƒ« | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | ç”¨é€” | èª­ã¿è¾¼ã¿ã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|------|----------|------|----------|
| **é•·æœŸè¨˜æ†¶** | `MEMORY.md` | ç²¾é¸ã•ã‚ŒãŸçŸ¥è­˜ã€è¨­å®šã€é‡è¦ãªäº‹å®Ÿ | ãƒ¡ã‚¤ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã«èª­ã¿è¾¼ã¿ |
| **æ¯æ—¥ãƒ­ã‚°** | `memory/YYYY-MM-DD.md` | æ—¥ã€…ã®ãƒãƒ¼ãƒˆã€å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ | ä»Šæ—¥ + æ˜¨æ—¥ã®ã‚‚ã®ã‚’èª­ã¿è¾¼ã¿ |

::: info ãªãœ2å±¤ãªã®ã‹ï¼Ÿ
`MEMORY.md` ã¯ã€ŒãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã€ã®ã‚ˆã†ãªã‚‚ã®ã§ã€ãƒ¡ã‚¤ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ã®ã¿èª­ã¿è¾¼ã¾ã‚Œã€æ©Ÿå¯†æƒ…å ±ãŒã‚°ãƒ«ãƒ¼ãƒ—ä¼šè©±ã«æ¼ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚`memory/*.md` ã¯ã€Œæ—¥è¨˜å¸³ã€ã§ã€æ—¥å¸¸çš„ãªè¨˜éŒ²ã‚’ä¿å­˜ã—ã€å¾Œã§æŒ¯ã‚Šè¿”ã‚Šã‚„ã™ãã—ã¾ã™ã€‚
:::

### ãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```mermaid
graph LR
    A[Memory Files] --> B[Chunking<br/>~400 tokens]
    B --> C[Embedding Provider]
    C --> D{Provider Type}
    D -->|OpenAI/Gemini| E[Remote API]
    D -->|Local| F[node-llama-cpp]
    E --> G[SQLite Index]
    F --> G
    G --> H[Vector Search]
    G --> I[FTS5 BM25]
    H --> J[Hybrid Merge]
    I --> J
    J --> K[Ranked Results]
```

### ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ï¼šBM25 + ãƒ™ã‚¯ãƒˆãƒ«

ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã¯ã€Œæ„å‘³ãƒãƒƒãƒãƒ³ã‚°ã€ã«å„ªã‚Œã¦ã„ã¾ã™ãŒã€ã€Œæ­£ç¢ºãƒãƒƒãƒãƒ³ã‚°ã€ã«ã¯å¼±ã„ã§ã™ï¼š

| ã‚¯ã‚¨ãƒªã‚¿ã‚¤ãƒ— | ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ | BM25å…¨æ–‡ | ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ |
|----------|----------|-----------|----------|
| "ã‚µãƒ¼ãƒãƒ¼ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹" | âŒ å¼±ã„ | âœ… å¼·ã„ | âœ… æœ€é© |
| "Gatewayã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³•" | âœ… å¼·ã„ | âš ï¸ ä¸­ç¨‹åº¦ | âœ… æœ€é© |
| "APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ a828e60" | âŒ å¼±ã„ | âœ… å¼·ã„ | âœ… æœ€é© |

**èåˆå¼**ï¼š
```javascript
finalScore = vectorWeight Ã— vectorScore + textWeight Ã— textScore
```

- `vectorWeight + textWeight` ã¯è‡ªå‹•çš„ã«1.0ã«æ­£è¦åŒ–ã•ã‚Œã¾ã™
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼š70% ãƒ™ã‚¯ãƒˆãƒ« + 30% ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
- `agents.defaults.memorySearch.query.hybrid.*` ã§èª¿æ•´å¯èƒ½

---

## ğŸ’ äº‹å‰æº–å‚™

é–‹å§‹å‰ã«ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

::: warning äº‹å‰ãƒã‚§ãƒƒã‚¯
- [ ] Gateway ãŒèµ·å‹•ã—ã¦ã„ã‚‹ï¼ˆ[Gatewayã®èµ·å‹•](../../start/gateway-startup/)ï¼‰
- [ ] AIãƒ¢ãƒ‡ãƒ«ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ï¼ˆ[AIãƒ¢ãƒ‡ãƒ«è¨­å®š](../models-auth/)ï¼‰
- [ ] åŸºæœ¬çš„ãªMarkdownãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã‚‹
:::

::: tip æ¨å¥¨è¨­å®š
- å„ªå…ˆçš„ã« OpenAI ã¾ãŸã¯ Gemini embeddings ã‚’ä½¿ç”¨ï¼ˆé«˜é€Ÿã§é«˜å“è³ªï¼‰
- ãƒ­ãƒ¼ã‚«ãƒ« embeddings ã«ã¯ `pnpm rebuild node-llama-cpp` ãŒå¿…è¦
- æœ€åˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆã«ã¯æ•°åˆ†ã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ãŒã€ãã®å¾Œã¯å¢—åˆ†æ›´æ–°ãŒé«˜é€Ÿã§ã™
:::

---

## å®Ÿè·µ

### ã‚¹ãƒ†ãƒƒãƒ—1ï¼šãƒ¡ãƒ¢ãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹

**ç†ç”±**ï¼šAI ã¯æ—¢å­˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã™ã‚‹ãŸã‚ã€å…ˆã«ãƒ¡ãƒ¢ãƒªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã—ã¾ã™

Agent ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ `~/clawd`ï¼‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼š

```bash
# é•·æœŸè¨˜æ†¶ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cat > ~/clawd/MEMORY.md << 'EOF'
# å€‹äººã®è¨­å®š

- é£Ÿäº‹ã®å¥½ã¿ï¼šãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ã€è¾›ã„ã‚‚ã®ã¯é£Ÿã¹ãªã„
- å‹¤å‹™æ™‚é–“ï¼šåˆå‰9æ™‚ã‹ã‚‰åˆå¾Œ6æ™‚
- ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ï¼š`clawdbot gateway status`

# é‡è¦ãªè¨­å®š

- Gateway ãƒãƒ¼ãƒˆï¼š18789
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼šPostgreSQL 15
EOF

# ä»Šæ—¥ã®ãƒ­ã‚°ã‚’ä½œæˆ
cat > ~/clawd/memory/$(date +%Y-%m-%d).md << 'EOF'
# ä»Šæ—¥ã®ä½œæ¥­é€²æ—

- Gatewayã®è¨­å®šã‚’å®Œäº†
- ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã‚’å­¦ç¿’
- ã‚¿ã‚¹ã‚¯ï¼šãƒ¢ãƒ‡ãƒ«èªè¨¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€
EOF
```

**æœŸå¾…ã™ã‚‹è¡¨ç¤º**ï¼š

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã‚’ç¢ºèª
tree ~/clawd/
# ã¾ãŸã¯
ls -la ~/clawd/
ls -la ~/clawd/memory/

# å‡ºåŠ›ä¾‹
~/clawd/
â”œâ”€â”€ MEMORY.md
â””â”€â”€ memory/
    â””â”€â”€ 2026-01-27.md
```

### ã‚¹ãƒ†ãƒƒãƒ—2ï¼šãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹

**ç†ç”±**ï¼šEmbedding ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹

```bash
# åŸºæœ¬çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
clawdbot memory status

# æ·±åº¦ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®å¯ç”¨æ€§ã‚’æ¤œå‡ºï¼‰
clawdbot memory status --deep

# æ·±åº¦ãƒã‚§ãƒƒã‚¯ + å¼·åˆ¶å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
clawdbot memory status --deep --index
```

**æœŸå¾…ã™ã‚‹è¡¨ç¤º**ï¼š

```bash
âœ“ Memory Search enabled
  Store: ~/.clawdbot/memory/main.sqlite
  Provider: openai
  Model: text-embedding-3-small
  Fallback: openai
  Hybrid: enabled (vectorWeight: 0.7, textWeight: 0.3)
  Cache: enabled (maxEntries: 50000)
  Sources: memory
  Indexed: 2 files, 5 chunks
```

::: tip æ·±åº¦ãƒã‚§ãƒƒã‚¯
- `--deep` ã¯ OpenAI/Gemini/Local embeddings ãŒä½¿ç”¨å¯èƒ½ã‹ã©ã†ã‹ã‚’æ¤œå‡ºã—ã¾ã™
- `--index` ã¯ã€Œãƒ€ãƒ¼ãƒ†ã‚£ã€ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ¤œå‡ºã™ã‚‹ã¨è‡ªå‹•çš„ã«å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã—ã¾ã™
- åˆå›å®Ÿè¡Œæ™‚ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆã«ã¯æ•°åˆ†ã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
:::

### ã‚¹ãƒ†ãƒƒãƒ—3ï¼šæ‰‹å‹•ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹

**ç†ç”±**ï¼šæ–°ã—ãä½œæˆã—ãŸãƒ¡ãƒ¢ãƒªãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

```bash
# æ‰‹å‹•ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ãƒˆãƒªã‚¬ãƒ¼
clawdbot memory index

# è©³ç´°ãƒ­ã‚°ä»˜ã
clawdbot memory index --verbose

# ç‰¹å®šã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã¿
clawdbot memory index --agent main
```

**æœŸå¾…ã™ã‚‹è¡¨ç¤º**ï¼š

```bash
Indexing memory for agent: main
  Provider: openai (text-embedding-3-small)
  Sources: memory
  - MEMORY.md (2 chunks)
  - memory/2026-01-27.md (3 chunks)
âœ“ Indexed 2 files, 5 chunks
```

### ã‚¹ãƒ†ãƒƒãƒ—4ï¼šæ„å‘³æ¤œç´¢ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹

**ç†ç”±**ï¼šãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã¨ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹

```bash
# åŸºæœ¬æ¤œç´¢
clawdbot memory search "ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³"

# æ­£ç¢ºä¸€è‡´æ¤œç´¢ï¼ˆBM25ã‚’ãƒ†ã‚¹ãƒˆï¼‰
clawdbot memory search "Gateway ãƒãƒ¼ãƒˆ"

# ã‚ã„ã¾ã„ãªæ„å‘³æ¤œç´¢ï¼ˆãƒ™ã‚¯ãƒˆãƒ«ã‚’ãƒ†ã‚¹ãƒˆï¼‰
clawdbot memory search "ä½•ã‚’é£Ÿã¹ã‚‹ã®ãŒå¥½ãã‹"

# è©³ç´°ãªçµæœã‚’è¡¨ç¤º
clawdbot memory search "Gateway" --verbose
```

**æœŸå¾…ã™ã‚‹è¡¨ç¤º**ï¼š

```bash
Searching memory for: "ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³"

Results (2):

[1] MEMORY.md:3-5 (score: 0.842)
  - é£Ÿäº‹ã®å¥½ã¿ï¼šãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ã€è¾›ã„ã‚‚ã®ã¯é£Ÿã¹ãªã„

[2] memory/2026-01-27.md:1-3 (score: 0.615)
  - Gatewayã®è¨­å®šã‚’å®Œäº†
  - ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã‚’å­¦ç¿’
```

### ã‚¹ãƒ†ãƒƒãƒ—5ï¼šEmbedding ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’è¨­å®šã™ã‚‹

**ç†ç”±**ï¼šãƒ‹ãƒ¼ã‚ºã«å¿œã˜ã¦æœ€é©ãªãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆãƒªãƒ¢ãƒ¼ãƒˆ vs ãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ã‚’é¸æŠã™ã‚‹

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ Aï¼šOpenAI embeddingsï¼ˆæ¨å¥¨ï¼‰

è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« `~/.clawdbot/clawdbot.json` ã‚’ç·¨é›†ï¼š

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "enabled": true,
        "provider": "openai",
        "model": "text-embedding-3-small",
        "fallback": "openai",
        "remote": {
          "apiKey": "YOUR_OPENAI_API_KEY",
          "batch": {
            "enabled": true,
            "concurrency": 2
          }
        }
      }
    }
  }
}
```

**ãƒ¡ãƒªãƒƒãƒˆ**ï¼š
- é«˜é€Ÿã§é«˜å“è³ª
- ãƒãƒƒãƒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆï¼ˆã‚³ã‚¹ãƒˆåŠ¹ç‡ãŒè‰¯ã„ï¼‰
- å¤§è¦æ¨¡ãªãƒãƒƒã‚¯ãƒ•ã‚£ãƒ«ã«é©ã—ã¦ã„ã‚‹

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ Bï¼šGemini embeddings

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "provider": "gemini",
        "model": "gemini-embedding-001",
        "remote": {
          "apiKey": "YOUR_GEMINI_API_KEY"
        },
        "fallback": "openai"
      }
    }
  }
}
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ Cï¼šãƒ­ãƒ¼ã‚«ãƒ« embeddingsï¼ˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼å„ªå…ˆï¼‰

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "provider": "local",
        "local": {
          "modelPath": "hf:ggml-org/embeddinggemma-300M-GGUF/embeddinggemma-300M-Q8_0.gguf",
          "modelCacheDir": "~/.cache/embeddings"
        },
        "fallback": "none"
      }
    }
  }
}
```

**æ³¨æ„äº‹é …**ï¼š

```bash
# åˆå›ãƒ­ãƒ¼ã‚«ãƒ« embeddings ä½¿ç”¨æ™‚ã«ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦
pnpm approve-builds
# node-llama-cpp ã‚’é¸æŠ
pnpm rebuild node-llama-cpp
```

**æœŸå¾…ã™ã‚‹è¡¨ç¤º**ï¼š

```bash
âœ“ node-llama-cpp installed
âœ“ Local embedding model ready
```

::: warning ãƒ­ãƒ¼ã‚«ãƒ« embeddings
- åˆå›ã¯ãƒ¢ãƒ‡ãƒ«ã‚’è‡ªå‹•çš„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ~600MBï¼‰
- node-llama-cpp ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå¿…è¦ï¼ˆã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒã«ä¾å­˜ï¼‰
- ãƒªãƒ¢ãƒ¼ãƒˆã‚ˆã‚Šé…ã„ãŒã€å®Œå…¨ã«ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼å„ªå…ˆ
:::

### ã‚¹ãƒ†ãƒƒãƒ—6ï¼šãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ã®é‡ã¿ã‚’è¨­å®šã™ã‚‹

**ç†ç”±**ï¼šãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¿œã˜ã¦æ„å‘³ã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®é‡ã¿æ¯”ç‡ã‚’èª¿æ•´ã™ã‚‹

è¨­å®šã‚’ç·¨é›†ï¼š

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "query": {
          "hybrid": {
            "enabled": true,
            "vectorWeight": 0.7,
            "textWeight": 0.3,
            "candidateMultiplier": 4
          }
        }
      }
    }
  }
}
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¬æ˜**ï¼š

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜ | èª¿æ•´æ¨å¥¨ |
|------|---------|------|----------|
| `vectorWeight` | 0.7 | æ„å‘³æ¤œç´¢ã®é‡ã¿ | ã€Œè‡ªç„¶è¨€èªã€ã‚¯ã‚¨ãƒªã«ã¯ 0.8 ã«ä¸Šã’ã‚‹ |
| `textWeight` | 0.3 | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã®é‡ã¿ | ã€Œã‚³ãƒ¼ãƒ‰/IDã€ã‚¯ã‚¨ãƒªã«ã¯ 0.5 ã«ä¸Šã’ã‚‹ |
| `candidateMultiplier` | 4 | å€™è£œä¹—æ•° | å†ç¾ç‡ã‚’ä¸Šã’ã‚‹ã«ã¯ 6 ã«å¢—ã‚„ã™ |

**åŠ¹æœæ¯”è¼ƒ**ï¼š

```bash
# æ„å‘³ã‚¯ã‚¨ãƒªã‚’ãƒ†ã‚¹ãƒˆ
clawdbot memory search "Gatewayã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³•"
# vectorWeight: 0.7 â†’ æ„å‘³ã«é–¢é€£ã™ã‚‹çµæœãŒè¦‹ã¤ã‹ã‚‹
# textWeight: 0.5 â†’ ã€Œãƒ‡ãƒ—ãƒ­ã‚¤ã€ã€ã€ŒGatewayã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚‹

# æ­£ç¢ºã‚¯ã‚¨ãƒªã‚’ãƒ†ã‚¹ãƒˆ
clawdbot memory search "APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ a828e60"
# vectorWeight: 0.3 â†’ æ„å‘³ã‚’ç„¡è¦–ã€å„ªå…ˆä¸€è‡´
# textWeight: 0.7 â†’ "a828e60" ã‚’æ­£ç¢ºã«ä¸€è‡´
```

### ã‚¹ãƒ†ãƒƒãƒ—7ï¼šSQLite-vec ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹

**ç†ç”±**ï¼šãƒ™ã‚¯ãƒˆãƒ«ã‚¯ã‚¨ãƒªã‚’ SQLite ã«ãƒ—ãƒƒã‚·ãƒ¥ãƒ€ã‚¦ãƒ³ã—ã€ã™ã¹ã¦ã® embeddings ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã‚’é¿ã‘ã‚‹

è¨­å®šã‚’ç·¨é›†ï¼š

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "store": {
          "vector": {
            "enabled": true,
            "extensionPath": "/path/to/sqlite-vec"
          }
        }
      }
    }
  }
}
```

**sqlite-vec ãŒåˆ©ç”¨å¯èƒ½ã‹ç¢ºèª**ï¼š

```bash
# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹çŠ¶æ…‹ã‚’ç¢ºèª
clawdbot memory status --deep

# åˆ©ç”¨å¯èƒ½ãªå ´åˆã€æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™
âœ“ SQLite-vec extension loaded
  Vector table: chunks_vec
```

::: info SQLite-vec
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è‡ªå‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ã‚’è©¦ã¿ã¾ã™
- ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ãŸå ´åˆã€è‡ªå‹•çš„ã« JS è¨ˆç®—ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆæ©Ÿèƒ½ã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ï¼‰
- ã‚«ã‚¹ã‚¿ãƒ ãƒ‘ã‚¹ã¯ç‰¹æ®Šãƒ“ãƒ«ãƒ‰ã¾ãŸã¯æ¨™æº–ä»¥å¤–ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã®ã¿ä½¿ç”¨ã•ã‚Œã¾ã™
:::

---

## ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ âœ…

ä¸Šè¨˜ã®æ‰‹é †ã‚’å®Œäº†ã—ãŸå¾Œã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

| ãƒã‚§ãƒƒã‚¯é …ç›® | æ¤œè¨¼æ–¹æ³• | æœŸå¾…ã•ã‚Œã‚‹çµæœ |
|---------|----------|----------|
| ãƒ¡ãƒ¢ãƒªãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ | `ls ~/clawd/` | MEMORY.md ã¨ memory/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ |
| ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒä½œæˆ | `clawdbot memory status` | Indexed > 0 chunks ã¨è¡¨ç¤º |
| æ¤œç´¢ãŒæ­£å¸¸ | `clawdbot memory search "..."` | é–¢é€£ã™ã‚‹çµæœãŒè¿”ã•ã‚Œã‚‹ |
| Provider ãŒæ­£å¸¸ | `clawdbot memory status --deep` | Provider ã‚¿ã‚¤ãƒ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1ï¼šEmbedding ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®å¤±æ•—

**ç¾è±¡**ï¼š

```bash
âœ— Memory Search disabled
  Error: No API key found for provider
```

**è§£æ±ºç­–**ï¼š

```bash
# è¨­å®šã‚’ç¢ºèª
cat ~/.clawdbot/clawdbot.json | grep -A 5 "memorySearch"

# apiKey ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
# ã¾ãŸã¯ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
export OPENAI_API_KEY="sk-..."
export GEMINI_API_KEY="..."
```

### å•é¡Œ2ï¼šãƒ­ãƒ¼ã‚«ãƒ« embeddings ãŒãƒ­ãƒ¼ãƒ‰ã§ããªã„

**ç¾è±¡**ï¼š

```bash
âœ— Local embedding provider failed
  Error: Cannot find module 'node-llama-cpp'
```

**è§£æ±ºç­–**ï¼š

```bash
# ãƒ“ãƒ«ãƒ‰ã‚’æ‰¿èª
pnpm approve-builds

# å†ãƒ“ãƒ«ãƒ‰
pnpm rebuild node-llama-cpp
```

### å•é¡Œ3ï¼šã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒæ›´æ–°ã•ã‚Œãªã„

**ç¾è±¡**ï¼š

```bash
# MEMORY.md ã‚’å¤‰æ›´ã—ãŸ
# ã—ã‹ã—æ¤œç´¢çµæœã¯å¤ã„ã¾ã¾
```

**è§£æ±ºç­–**ï¼š

```bash
# æ–¹æ³•1ï¼šæ‰‹å‹•ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ãƒˆãƒªã‚¬ãƒ¼
clawdbot memory index

# æ–¹æ³•2ï¼šGateway ã‚’å†èµ·å‹•ï¼ˆonSessionStart ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ãƒˆãƒªã‚¬ãƒ¼ï¼‰
clawdbot gateway restart

# æ–¹æ³•3ï¼šãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã‚’ç¢ºèª
clawdbot memory status --verbose
# "Watch: true" ã‚’ç¢ºèª
```

### å•é¡Œ4ï¼šæ¤œç´¢çµæœãŒç„¡é–¢ä¿‚

**ç¾è±¡**ï¼šã€ŒGatewayã€ã‚’æ¤œç´¢ã—ãŸã®ã«ã€Œä½œæ¥­é€²æ—ã€ãŒè¿”ã•ã‚Œã‚‹

**è€ƒãˆã‚‰ã‚Œã‚‹åŸå› **ï¼š

1. **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰é‡ã¿ãŒä¸é©åˆ‡**ï¼š
   - æ„å‘³ã‚¯ã‚¨ãƒªï¼ˆã€Œãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã€ï¼‰â†’ `vectorWeight` ã‚’ä¸Šã’ã‚‹
   - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚¯ã‚¨ãƒªï¼ˆã€ŒAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã€ï¼‰â†’ `textWeight` ã‚’ä¸Šã’ã‚‹

2. **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå®Œå…¨ã«æ›´æ–°ã•ã‚Œã¦ã„ãªã„**ï¼š
   ```bash
   # å¼·åˆ¶å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
   rm ~/.clawdbot/memory/main.sqlite
   clawdbot memory index
   ```

3. **ãƒãƒ£ãƒ³ã‚¯ç²’åº¦ã®å•é¡Œ**ï¼š
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 400 ãƒˆãƒ¼ã‚¯ãƒ³ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒåˆ‡æ–­ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
   - `agents.defaults.memorySearch.chunking.tokens` ã‚’èª¿æ•´

---

## ãƒ¬ãƒƒã‚¹ãƒ³ã®ã¾ã¨ã‚

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€ä»¥ä¸‹ã‚’å­¦ã³ã¾ã—ãŸï¼š

1. **ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**
   - 2å±¤ãƒ‡ãƒ¼ã‚¿æ§‹é€ ï¼ˆMEMORY.md + memory/*.mdï¼‰
   - ãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ + FTS5å…¨æ–‡æ¤œç´¢
   - ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ï¼ˆBM25 + ãƒ™ã‚¯ãƒˆãƒ«ï¼‰

2. **Embedding ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®è¨­å®š**
   - OpenAI/Gemini/ãƒ­ãƒ¼ã‚«ãƒ«ã®3ã¤ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³
   - ãƒãƒƒãƒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã‚ˆã‚‹é«˜é€ŸåŒ–
   - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

3. **CLI ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨**
   - `clawdbot memory status` ã§çŠ¶æ…‹ç¢ºèª
   - `clawdbot memory index` ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒˆãƒªã‚¬ãƒ¼
   - `clawdbot memory search` ã§æ¤œç´¢ãƒ†ã‚¹ãƒˆ

4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
   - SQLite-vec ãƒ™ã‚¯ãƒˆãƒ«ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
   - Embedding ã‚­ãƒ£ãƒƒã‚·ãƒ¥
   - ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰é‡ã¿ã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

---

## æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³

> æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€**[ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹åˆ†é›¢](../security-sandbox/)** ã‚’å­¦ã³ã¾ã™ã€‚
>
> å­¦ã¶ã“ã¨ï¼š
> - ãƒ„ãƒ¼ãƒ«æ¨©é™åˆ¶å¾¡ã¨ allowlist
> - Sandbox ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ†é›¢
> - Exec æ‰¿èªãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
> - Docker ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
> - Tailscale èªè¨¼

---

## ä»˜éŒ²ï¼šã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å‚ç…§

<details>
<summary><strong>ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å ´æ‰€ã‚’è¡¨ç¤º</strong></summary>

> æ›´æ–°æ—¥æ™‚ï¼š2026-01-27

| æ©Ÿèƒ½ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | è¡Œç•ªå· |
|------|----------|------|
| ãƒ¡ãƒ¢ãƒªãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ | [`src/memory/manager.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/manager.ts) | 1-200 |
| ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ | [`src/memory/hybrid.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/hybrid.ts) | 1-112 |
| Embedding ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ | [`src/memory/embeddings.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/embeddings.ts) | 1-80 |
| OpenAI embeddings | [`src/memory/embeddings-openai.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/embeddings-openai.ts) | å…¨æ–‡ |
| Gemini embeddings | [`src/memory/embeddings-gemini.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/embeddings-gemini.ts) | å…¨æ–‡ |
| ãƒ­ãƒ¼ã‚«ãƒ« embeddings | [`src/memory/node-llama.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/node-llama.ts) | å…¨æ–‡ |
| SQLite-vec | [`src/memory/sqlite-vec.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/sqlite-vec.ts) | å…¨æ–‡ |
| ãƒãƒƒãƒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆOpenAIï¼‰ | [`src/memory/batch-openai.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/batch-openai.ts) | å…¨æ–‡ |
| ãƒãƒƒãƒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆGeminiï¼‰ | [`src/memory/batch-gemini.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/batch-gemini.ts) | å…¨æ–‡ |
| æ¤œç´¢ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ | [`src/memory/manager-search.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/manager-search.ts) | å…¨æ–‡ |
| Memory Schema | [`src/memory/memory-schema.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/memory-schema.ts) | å…¨æ–‡ |

**é‡è¦ãªè¨­å®š**ï¼š
- `agents.defaults.memorySearch.enabled`ï¼šãƒ¡ãƒ¢ãƒªæ¤œç´¢ã®æœ‰åŠ¹/ç„¡åŠ¹
- `agents.defaults.memorySearch.provider`ï¼šEmbedding ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆ"openai"ã€"gemini"ã€"local"ï¼‰
- `agents.defaults.memorySearch.query.hybrid.vectorWeight`ï¼šãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã®é‡ã¿ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 0.7ï¼‰
- `agents.defaults.memorySearch.query.hybrid.textWeight`ï¼šBM25 æ¤œç´¢ã®é‡ã¿ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 0.3ï¼‰
- `agents.defaults.memorySearch.cache.enabled`ï¼šEmbedding ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ trueï¼‰
- `agents.defaults.memorySearch.store.vector.enabled`ï¼šSQLite-vec ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ trueï¼‰

**é‡è¦ãªé–¢æ•°**ï¼š
- `mergeHybridResults()`ï¼šãƒ™ã‚¯ãƒˆãƒ« + BM25 çµæœã®ãƒãƒ¼ã‚¸ï¼ˆ`src/memory/hybrid.ts:39-111`ï¼‰
- `bm25RankToScore()`ï¼šBM25 ãƒ©ãƒ³ã‚¯ã‹ã‚‰ã‚¹ã‚³ã‚¢ã¸ï¼ˆ`src/memory/hybrid.ts:34-37`ï¼‰
- `createEmbeddingProvider()`ï¼šEmbedding ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ä½œæˆï¼ˆ`src/memory/embeddings.ts`ï¼‰
- `getMemorySearchManager()`ï¼šãƒ¡ãƒ¢ãƒªæ¤œç´¢ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®å–å¾—ï¼ˆ`src/memory/search-manager.ts`ï¼‰

**CLI ã‚³ãƒãƒ³ãƒ‰**ï¼š
- `clawdbot memory status`ï¼šçŠ¶æ…‹ç¢ºèªï¼ˆ`src/cli/commands/memory-cli.ts`ï¼‰
- `clawdbot memory index`ï¼šã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒˆãƒªã‚¬ãƒ¼ï¼ˆ`src/cli/commands/memory-cli.ts`ï¼‰
- `clawdbot memory search`ï¼šãƒ¡ãƒ¢ãƒªæ¤œç´¢ï¼ˆ`src/cli/commands/memory-cli.ts`ï¼‰

</details>
