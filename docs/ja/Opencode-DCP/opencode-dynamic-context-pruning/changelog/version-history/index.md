---
title: "バージョン履歴: DCP の進化を追跡 | opencode-dynamic-context-pruning"
sidebarTitle: "更新履歴"
subtitle: "バージョン履歴: DCP の進化を追跡"
description: "OpenCode DCP プラグイン v1.0.1 から v1.2.7 までの全バージョン更新を確認。新機能、バグ修正、最適化の詳細を把握し、Token 節約の改善を活用できます。"
tags:
  - "バージョン履歴"
  - "変更履歴"
  - "DCP"
prerequisite: []
order: 1
---

# DCP バージョン履歴

このドキュメントでは、OpenCode Dynamic Context Pruning (DCP) プラグインの完全なバージョン更新履歴を記録しています。

---

## [v1.2.7] - 2026-01-22

**新機能**
- ✨ 抽出コンテンツの Token カウントを表示（プルーニング通知内）
- 🛡️ コンテキスト注入の防御メカニズムを改善（配列チェックを追加）
- 📝 最適化：最後のメッセージがユーザーメッセージの場合、コンテキストをユーザーメッセージとして注入
- ⚙️ デフォルト設定を簡素化（schema URL のみを含む）

---

## [v1.2.6] - 2026-01-21

**新機能**
- ✨ `/dcp sweep` コマンドを追加、手動コンテキストプルーニングをサポート

**コマンド詳細**
- `/dcp sweep` - 最後のユーザーメッセージ以降のすべてのツールをプルーニング
- `/dcp sweep N` - 最後の N 個のツールをプルーニング

---

## [v1.2.5] - 2026-01-20

**新機能**
- ✨ `/dcp context` コマンドでツールカウントを表示
- ✨ `/dcp context` コマンドの UI を最適化：
  - プルーニング済みツールカウントを表示
  - プログレスバーの精度を改善

**パフォーマンス最適化**
- 🚀 context コマンドでの Token 計算を最適化

---

## [v1.2.4] - 2026-01-20

**新機能**
- ✨ DCP コマンドを単一の `/dcp` コマンドに統合（サブコマンド構造）：
  - `/dcp` - ヘルプを表示
  - `/dcp context` - コンテキスト分析
  - `/dcp stats` - 統計情報
- ✨ `commands` 設定セクションを追加：
  - slash コマンドの有効化/無効化が可能
  - 保護ツールリストの設定をサポート

**改善**
- 📝 context コマンド UI を簡素化
- 📝 ドキュメント更新：context_info ツール注入メカニズムを明確化

**修正**
- 🐛 プルーニングツールのエラー処理を修正（失敗時に文字列を返すのではなくエラーをスロー）

**ドキュメント**
- 📚 README にキャッシュヒット率統計を追加

---

## [v1.2.3] - 2026-01-16

**新機能**
- ✨ プロンプト読み込みを簡素化（プロンプトを TS ファイルに移動）

**改善**
- 🔧 Gemini 互換性：`thoughtSignature` を使用してツール部分の注入検証をバイパス

---

## [v1.2.2] - 2026-01-15

**修正**
- 🐛 注入タイミングを簡素化（assistant ターンを待機）
- 🐛 Gemini 互換性修正：thought signature エラーを回避するためテキスト注入を使用

---

## [v1.2.1] - 2026-01-14

**修正**
- 🐛 Anthropic モデル：コンテキスト注入前に reasoning block を要求
- 🐛 GitHub Copilot：ユーザーロールの合成メッセージ注入をスキップ

---

## [v1.2.0] - 2026-01-13

**新機能**
- ✨ `plan_enter` と `plan_exit` をデフォルト保護ツールリストに追加
- ✨ question ツールのプルーニングをサポート

**改善**
- 🔧 注入メカニズムを統一（isAnthropic チェック付き）
- 🔧 プロンプトディレクトリ構造をフラット化
- 🔧 prune.ts のチェック順序を簡素化・統一
- 🔧 システムプロンプトハンドラを hooks.ts に抽出

**修正**
- 🐛 サブエージェントセッションのシステムプロンプト注入をスキップ
- 🐛 GitHub Copilot：最後のメッセージがユーザーロールの場合、注入をスキップ

---

## [v1.1.6] - 2026-01-12

**修正**
- 🐛 **GitHub Copilot ユーザー向け重要修正**：completed assistant message と tool part を使用してプルーニング可能なツールリストを注入

**影響範囲**
- この修正は GitHub Copilot ユーザーが DCP を使用する際の重要な問題を解決

---

## [v1.1.5] - 2026-01-10

**新機能**
- ✨ 設定ファイル自動補完用の JSON Schema サポートを追加
- ✨ 保護ファイルパターン設定を追加（protectedFilePatterns）
- ✨ glob パターンによるファイル操作（read/write/edit）の保護をサポート

**改善**
- 📝 ドキュメント：サブエージェントの制限を記載

**修正**
- 🐛 schema URL が master ブランチを使用する問題を修正
- 🐛 `$schema` を有効な設定キーリストに追加

---

## [v1.1.4] - 2026-01-06

**修正**
- 🐛 `isInternalAgent` フラグを削除（hook 順序の競合状態のため）

**改善**
- 🔧 内部エージェント検出ロジックを最適化

---

## [v1.1.3] - 2026-01-05

**修正**
- 🐛 内部エージェント（title、summary、compaction）の DCP 注入をスキップ
- 🐛 write/edit ツールのプルーニングを無効化

**改善**
- 🔧 サブエージェント制限検出を改善

---

## [v1.1.2] - 2025-12-26

**改善**
- 🔧 distillation を統一通知に統合
- 🔧 distillation UI を簡素化

---

## [v1.1.1] - 2025-12-25

**新機能**
- ✨ purge errors 戦略を追加、失敗したツール呼び出し後に入力をプルーニング
- ✨ `extractParameterKey` に skill ツールサポートを追加

**改善**
- 📝 エラープルーニングの置換テキストを改善
- 📝 ドキュメント：context poisoning と OAuth に関するヒントを更新

---

## [v1.1.0] - 2025-12-24

**新機能**
- ✨ メジャー機能バージョン更新
- ✨ 自動プルーニング戦略を追加：
  - 重複排除戦略
  - 上書き戦略
  - エラークリア戦略

**新ツール**
- ✨ LLM 駆動プルーニングツール：
  - `discard` - ツールコンテンツを削除
  - `extract` - 重要な発見を抽出

**設定システム**
- ✨ マルチレベル設定サポート（グローバル/環境変数/プロジェクト）
- ✨ ターン保護機能
- ✨ 保護ツール設定

---

## [v1.0.4] - 2025-12-18

**修正**
- 🐛 pending または running のツール入力をプルーニングしない

**改善**
- 🔧 ツール状態検出ロジックを最適化

---

## [v1.0.3] - 2025-12-18

**新機能**
- ✅ メッセージベースの圧縮検出

**改善**
- 🔧 セッション初期化時に圧縮タイムスタンプをチェック

---

## [v1.0.2] - 2025-12-17

**新機能**
- ✅ メッセージベースの圧縮検出

**改善**
- 🔧 コード構造をクリーンアップ

---

## [v1.0.1] - 2025-12-16

**初期バージョン**

- ✅ コア機能の実装
- ✅ OpenCode プラグイン統合
- ✅ 基本的なコンテキストプルーニング機能

---

## バージョン命名規則

- **メジャーバージョン**（例：1.x）- 互換性のない重大な更新
- **マイナーバージョン**（例：1.2.x）- 下位互換性のある機能追加
- **パッチバージョン**（例：1.2.7）- 下位互換性のあるバグ修正

---

## 最新バージョンの取得

OpenCode 設定で `@latest` タグを使用することを推奨します。これにより最新バージョンが自動的に取得されます：

```jsonc
// opencode.jsonc
{
    "plugin": ["@tarquinen/opencode-dcp@latest"],
}
```

最新リリースバージョンを確認：[npm package](https://www.npmjs.com/package/@tarquinen/opencode-dcp)
