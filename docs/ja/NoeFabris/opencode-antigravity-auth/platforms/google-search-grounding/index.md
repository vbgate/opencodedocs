---
title: "Google Search: Gemini ã§ã‚¦ã‚§ãƒ–æ¤œç´¢ã‚’æœ‰åŠ¹åŒ– | Antigravity"
sidebarTitle: "Gemini ã§ã‚¦ã‚§ãƒ–æ¤œç´¢"
subtitle: "Google Search Groundingï¼šGemini ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ã‚¦ã‚§ãƒ–æƒ…å ±ã‚’æ¤œç´¢"
description: "Gemini ã§ Google Search Grounding ã‚’æœ‰åŠ¹åŒ–ã—ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ã‚¦ã‚§ãƒ–æƒ…å ±ã‚’æ¤œç´¢ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚è¨­å®šæ–¹æ³•ã¨é–¾å€¤èª¿æ•´ã®ã‚³ãƒ„ã‚’ç¿’å¾—ã—ã€ç²¾åº¦ã¨å¿œç­”é€Ÿåº¦ã®ãƒãƒ©ãƒ³ã‚¹ã‚’æœ€é©åŒ–ã—ã¾ã—ã‚‡ã†ã€‚"
tags:
  - "gemini"
  - "google-search"
  - "grounding"
  - "è¨­å®š"
prerequisite:
  - "start-quick-install"
  - "start-first-request"
order: 3
---

# Google Search Groundingï¼šGemini ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ã‚¦ã‚§ãƒ–æƒ…å ±ã‚’æ¤œç´¢

## ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§å­¦ã¹ã‚‹ã“ã¨

- Gemini ãƒ¢ãƒ‡ãƒ«ã§ Google Search ã‚’æœ‰åŠ¹åŒ–ã—ã€AI ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ã‚¦ã‚§ãƒ–æƒ…å ±ã‚’æ¤œç´¢ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
- æ¤œç´¢é–¾å€¤ã‚’èª¿æ•´ã—ã¦ã€ãƒ¢ãƒ‡ãƒ«ã®æ¤œç´¢é »åº¦ã‚’åˆ¶å¾¡ã™ã‚‹
- Google Search Grounding ã®ä»•çµ„ã¿ã¨é©ç”¨ã‚·ãƒ¼ãƒ³ã‚’ç†è§£ã™ã‚‹
- ã‚¿ã‚¹ã‚¯ã®è¦ä»¶ã«å¿œã˜ã¦é©åˆ‡ãªè¨­å®šã‚’é¸æŠã™ã‚‹

## ç¾çŠ¶ã®èª²é¡Œ

::: info Google Search Grounding ã¨ã¯ï¼Ÿ

**Google Search Grounding** ã¯ Gemini ã®æ©Ÿèƒ½ã§ã€å¿…è¦ã«å¿œã˜ã¦ãƒ¢ãƒ‡ãƒ«ãŒè‡ªå‹•çš„ã« Google æ¤œç´¢ã‚’è¡Œã„ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ±ï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚¹ã€çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã€è£½å“ä¾¡æ ¼ãªã©ï¼‰ã‚’å–å¾—ã§ãã¾ã™ã€‚ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã ã‘ã«é ¼ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚

:::

Gemini ã«ã€Œä»Šæ—¥ã®å¤©æ°—ã¯ï¼Ÿã€ã‚„ã€ŒVS Code ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ï¼Ÿã€ã¨èã„ã¦ã‚‚ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ãŒå¤ã„ãŸã‚å›ç­”ã§ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚Google Search Grounding ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€ãƒ¢ãƒ‡ãƒ«ãŒè‡ªåˆ†ã§ã‚¦ã‚§ãƒ–æ¤œç´¢ã—ã¦å›ç­”ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã§æ¤œç´¢ã™ã‚‹ã®ã¨åŒã˜ã§ã™ã€‚

## ã“ã®æ©Ÿèƒ½ã‚’ä½¿ã†ã¹ãã‚·ãƒ¼ãƒ³

| ã‚·ãƒ¼ãƒ³ | æœ‰åŠ¹åŒ–ã®å¿…è¦æ€§ | ç†ç”± |
| --- | --- | --- |
| ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®è³ªå• | âŒ ä¸è¦ | ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°çŸ¥è­˜ã¯æ¯”è¼ƒçš„å®‰å®šã—ã¦ãŠã‚Šã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã§ååˆ† |
| æœ€æ–°æƒ…å ±ã®å–å¾—ï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚¹ã€ä¾¡æ ¼ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ | âœ… å¼·ãæ¨å¥¨ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ |
| ãƒ•ã‚¡ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯ï¼ˆå…·ä½“çš„ãªæ—¥ä»˜ã€çµ±è¨ˆï¼‰ | âœ… æ¨å¥¨ | ãƒ¢ãƒ‡ãƒ«ã®æƒ…å ±æé€ ã‚’é˜²æ­¢ |
| ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã€ãƒ–ãƒ¬ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒŸãƒ³ã‚° | âŒ ä¸è¦ | äº‹å®Ÿã®æ­£ç¢ºæ€§ã¯ä¸è¦ |
| æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¤œç´¢ | âœ… æ¨å¥¨ | æœ€æ–°ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ¤œç´¢ |

## åŸºæœ¬çš„ãªè€ƒãˆæ–¹

Google Search Grounding ã®æ ¸å¿ƒã¯ã€ãƒ¢ãƒ‡ãƒ«ãŒ**å¿…è¦ãªã¨ãã ã‘**è‡ªå‹•çš„ã«æ¤œç´¢ã™ã‚‹ã“ã¨ã§ã™ã€‚æ¯å›æ¤œç´¢ã™ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ `googleSearchRetrieval` ãƒ„ãƒ¼ãƒ«ã‚’æ³¨å…¥ã—ã€Gemini ãŒ Google æ¤œç´¢ API ã‚’å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

::: tip é‡è¦ãªæ¦‚å¿µ

- **Auto ãƒ¢ãƒ¼ãƒ‰**ï¼šãƒ¢ãƒ‡ãƒ«ãŒæ¤œç´¢ã™ã‚‹ã‹ã©ã†ã‹ã‚’è‡ªåˆ†ã§åˆ¤æ–­ï¼ˆé–¾å€¤ã«åŸºã¥ãï¼‰
- **é–¾å€¤ï¼ˆgrounding_thresholdï¼‰**ï¼šãƒ¢ãƒ‡ãƒ«ã®æ¤œç´¢ã€Œãƒãƒ¼ãƒ‰ãƒ«ã€ã‚’åˆ¶å¾¡ã€‚å€¤ãŒå°ã•ã„ã»ã©ã€æ¤œç´¢é »åº¦ãŒé«˜ããªã‚‹

:::

## ğŸ’ å§‹ã‚ã‚‹å‰ã®æº–å‚™

::: warning å‰ææ¡ä»¶ã®ç¢ºèª

å§‹ã‚ã‚‹å‰ã«ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

 - [ ] [ã‚¯ã‚¤ãƒƒã‚¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](../../start/quick-install/)ã‚’å®Œäº†ã—ã¦ã„ã‚‹
 - [ ] å°‘ãªãã¨ã‚‚ 1 ã¤ã® Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¦ã„ã‚‹
 - [ ] æœ€åˆã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«æˆåŠŸã—ã¦ã„ã‚‹ï¼ˆ[æœ€åˆã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ](../../start/first-request/)ã‚’å‚ç…§ï¼‰

:::

## æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ— 1ï¼šè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ã‚’ç¢ºèª

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®å ´æ‰€ã«ã‚ã‚Šã¾ã™ï¼š

- **macOS/Linux**: `~/.config/opencode/antigravity.json`
- **Windows**: `%APPDATA%\opencode\antigravity.json`

ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€ã¾ãšä½œæˆã—ã¾ã™ï¼š

```bash
# macOS/Linux
cat > ~/.config/opencode/antigravity.json << 'EOF'
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json"
}
EOF
```

```powershell
# Windows
@"
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json"
}
"@ | Out-File -FilePath "$env:APPDATA\opencode\antigravity.json" -Encoding utf8
```

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**ï¼šè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã€`$schema` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹

### ã‚¹ãƒ†ãƒƒãƒ— 2ï¼šGoogle Search ã‚’æœ‰åŠ¹åŒ–

è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã« `web_search` è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ï¼š

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "web_search": {
    "default_mode": "auto",
    "grounding_threshold": 0.3
  }
}
```

**è¨­å®šã®èª¬æ˜**ï¼š

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å€¤ | èª¬æ˜ |
| --- | --- | --- |
| `web_search.default_mode` | `"auto"` ã¾ãŸã¯ `"off"` | Google Search ã®æœ‰åŠ¹/ç„¡åŠ¹ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `"off"` |
| `web_search.grounding_threshold` | `0.0` - `1.0` | æ¤œç´¢é–¾å€¤ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `0.3`ã€`auto` ãƒ¢ãƒ¼ãƒ‰ã§ã®ã¿æœ‰åŠ¹ |

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**ï¼šè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚Œã€`web_search` è¨­å®šãŒå«ã¾ã‚Œã¦ã„ã‚‹

### ã‚¹ãƒ†ãƒƒãƒ— 3ï¼šæ¤œç´¢é–¾å€¤ã‚’èª¿æ•´ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

`grounding_threshold` ã¯ãƒ¢ãƒ‡ãƒ«ã®æ¤œç´¢é »åº¦ã‚’åˆ¶å¾¡ã—ã¾ã™ï¼š

| é–¾å€¤ | å‹•ä½œ | é©ç”¨ã‚·ãƒ¼ãƒ³ |
| --- | --- | --- |
| `0.0 - 0.2` | é »ç¹ã«æ¤œç´¢ã€ä¸ç¢ºã‹ãªã¨ãã¯ã»ã¼æ¯å›æ¤œç´¢ | é«˜ç²¾åº¦ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ |
| `0.3`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ | é©åº¦ã€ãƒ¢ãƒ‡ãƒ«ãŒã‚ã‚‹ç¨‹åº¦ç¢ºä¿¡ã‚’æŒã£ãŸã¨ãã«æ¤œç´¢ | æ—¥å¸¸ä½¿ç”¨ã€ç²¾åº¦ã¨é€Ÿåº¦ã®ãƒãƒ©ãƒ³ã‚¹ |
| `0.7 - 1.0` | æ¤œç´¢é »åº¦ãŒä½ã„ã€é«˜ã„ç¢ºä¿¡åº¦ã®ã¨ãã®ã¿æ¤œç´¢ | æ¤œç´¢å›æ•°ã‚’æ¸›ã‚‰ã—ã€é€Ÿåº¦ã‚’å‘ä¸Š |

::: tip å®Ÿè·µçš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ `0.3` ã‹ã‚‰å§‹ã‚ã¦ã€ä»¥ä¸‹ã®å ´åˆã«èª¿æ•´ã—ã¦ãã ã•ã„ï¼š
- **ãƒ¢ãƒ‡ãƒ«ãŒæ¤œç´¢ã—ãªã„** â†’ é–¾å€¤ã‚’ä¸‹ã’ã‚‹ï¼ˆä¾‹ï¼š`0.2`ï¼‰
- **æ¤œç´¢ãŒé »ç¹ã™ãã¦å¿œç­”ãŒé…ã„** â†’ é–¾å€¤ã‚’ä¸Šã’ã‚‹ï¼ˆä¾‹ï¼š`0.5`ï¼‰

:::

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**ï¼šé–¾å€¤ãŒèª¿æ•´ã•ã‚Œã€å®Ÿéš›ã®ä½¿ç”¨ä½“é¨“ã«åŸºã¥ã„ã¦æœ€é©åŒ–ã§ãã‚‹

### ã‚¹ãƒ†ãƒƒãƒ— 4ï¼šè¨­å®šã‚’æ¤œè¨¼

OpenCode ã‚’å†èµ·å‹•ã™ã‚‹ã‹ã€è¨­å®šã‚’ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å ´åˆï¼‰ã—ã¦ã‹ã‚‰ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ±ãŒå¿…è¦ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™ï¼š

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ï¼š
VS Code ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä½•ã§ã™ã‹ï¼Ÿ

ã‚·ã‚¹ãƒ†ãƒ å¿œç­”ï¼ˆGoogle Search æœ‰åŠ¹æ™‚ï¼‰ï¼š
VS Code ã®æœ€æ–°å®‰å®šç‰ˆã¯ 1.96.4 ã§ã™ï¼ˆ2026 å¹´ 1 æœˆæ™‚ç‚¹ï¼‰...

[citation:1] â† å¼•ç”¨å…ƒãƒãƒ¼ã‚¯
```

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**ï¼š
- ãƒ¢ãƒ‡ãƒ«ã®å›ç­”ã«å¼•ç”¨å…ƒï¼ˆ`[citation:1]` ãªã©ï¼‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹
- å›ç­”å†…å®¹ãŒæœ€æ–°ã§ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã®å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ãªã„

### ã‚¹ãƒ†ãƒƒãƒ— 5ï¼šç•°ãªã‚‹é–¾å€¤ã‚’ãƒ†ã‚¹ãƒˆ

`grounding_threshold` ã‚’èª¿æ•´ã—ã¦ã€ãƒ¢ãƒ‡ãƒ«ã®å‹•ä½œå¤‰åŒ–ã‚’è¦³å¯Ÿã—ã¾ã™ï¼š

```json
// ä½é–¾å€¤ï¼ˆé »ç¹ã«æ¤œç´¢ï¼‰
"grounding_threshold": 0.1

// é«˜é–¾å€¤ï¼ˆæ¤œç´¢é »åº¦ãŒä½ã„ï¼‰
"grounding_threshold": 0.7
```

èª¿æ•´ã™ã‚‹ãŸã³ã«ã€åŒã˜è³ªå•ã§ãƒ†ã‚¹ãƒˆã—ã¦ä»¥ä¸‹ã‚’è¦³å¯Ÿã—ã¾ã™ï¼š
- æ¤œç´¢ã—ãŸã‹ã©ã†ã‹ï¼ˆå¿œç­”ã«å¼•ç”¨ãŒã‚ã‚‹ã‹ç¢ºèªï¼‰
- æ¤œç´¢å›æ•°ï¼ˆè¤‡æ•°ã® `citation`ï¼‰
- å¿œç­”é€Ÿåº¦

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**ï¼š
- ä½é–¾å€¤ï¼šæ¤œç´¢é »åº¦ãŒé«˜ã„ãŒã€å¿œç­”ãŒã‚„ã‚„é…ã„
- é«˜é–¾å€¤ï¼šæ¤œç´¢é »åº¦ãŒä½ã„ãŒã€å›ç­”ãŒä¸æ­£ç¢ºãªå¯èƒ½æ€§ãŒã‚ã‚‹

## ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ âœ…

::: details ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ¤œè¨¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’å±•é–‹

ä»¥ä¸‹ã®ãƒã‚§ãƒƒã‚¯ã‚’å®Œäº†ã—ã¦ã€è¨­å®šãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

- [ ] è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã« `web_search` è¨­å®šãŒå«ã¾ã‚Œã¦ã„ã‚‹
- [ ] `default_mode` ãŒ `"auto"` ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] `grounding_threshold` ãŒ `0.0` ã‹ã‚‰ `1.0` ã®é–“ã«ã‚ã‚‹
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ±ãŒå¿…è¦ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã€ãƒ¢ãƒ‡ãƒ«ãŒå¼•ç”¨ä»˜ãã§å¿œç­”ã™ã‚‹
- [ ] é–¾å€¤ã‚’èª¿æ•´å¾Œã€ãƒ¢ãƒ‡ãƒ«ã®æ¤œç´¢å‹•ä½œãŒå¤‰åŒ–ã™ã‚‹

ã™ã¹ã¦é€šéã™ã‚Œã°ã€Google Search Grounding ãŒæ­£ã—ãæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ï¼

:::

## ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

### å•é¡Œ 1ï¼šãƒ¢ãƒ‡ãƒ«ãŒæ¤œç´¢ã—ãªã„

**ç—‡çŠ¶**ï¼š`auto` ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹ã«ã—ã¦ã‚‚ã€ãƒ¢ãƒ‡ãƒ«ãŒæ¤œç´¢ã›ãšã€å¼•ç”¨å…ƒã‚‚ãªã„ã€‚

**åŸå› **ï¼š
- é–¾å€¤ãŒé«˜ã™ãã‚‹ï¼ˆä¾‹ï¼š`0.9`ï¼‰ã€ãƒ¢ãƒ‡ãƒ«ãŒæ¥µã‚ã¦é«˜ã„ç¢ºä¿¡åº¦ã§ãªã„ã¨æ¤œç´¢ã—ãªã„
- è³ªå•è‡ªä½“ãŒæ¤œç´¢ã‚’å¿…è¦ã¨ã—ãªã„ï¼ˆä¾‹ï¼šãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®è³ªå•ï¼‰

**è§£æ±ºæ–¹æ³•**ï¼š
- `grounding_threshold` ã‚’ `0.2` ä»¥ä¸‹ã«ä¸‹ã’ã‚‹
- æ˜ã‚‰ã‹ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ±ãŒå¿…è¦ãªè³ªå•ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ï¼ˆä¾‹ï¼šã€Œä»Šæ—¥ã®å¤©æ°—ã¯ï¼Ÿã€ã€Œæœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€ï¼‰

### å•é¡Œ 2ï¼šæ¤œç´¢ãŒé »ç¹ã™ãã¦å¿œç­”ãŒé…ã„

**ç—‡çŠ¶**ï¼šã™ã¹ã¦ã®è³ªå•ã§æ¤œç´¢ãŒè¡Œã‚ã‚Œã€å¿œç­”æ™‚é–“ãŒæ˜ã‚‰ã‹ã«å¢—åŠ ã€‚

**åŸå› **ï¼š
- é–¾å€¤ãŒä½ã™ãã‚‹ï¼ˆä¾‹ï¼š`0.1`ï¼‰ã€ãƒ¢ãƒ‡ãƒ«ãŒéåº¦ã«é »ç¹ã«æ¤œç´¢ã‚’ãƒˆãƒªã‚¬ãƒ¼
- è³ªå•ã®ã‚¿ã‚¤ãƒ—è‡ªä½“ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ±ã‚’å¿…è¦ã¨ã™ã‚‹ï¼ˆä¾‹ï¼šæ ªä¾¡ã€ãƒ‹ãƒ¥ãƒ¼ã‚¹ï¼‰

**è§£æ±ºæ–¹æ³•**ï¼š
- `grounding_threshold` ã‚’ `0.5` ä»¥ä¸Šã«ä¸Šã’ã‚‹
- ã‚¿ã‚¹ã‚¯ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ±ã‚’å¿…è¦ã¨ã—ãªã„å ´åˆã€`default_mode` ã‚’ `"off"` ã«å¤‰æ›´

### å•é¡Œ 3ï¼šè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**ï¼šãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚¨ãƒ©ãƒ¼ã‚’å ±å‘Šã—ã€è¨­å®šã‚’èª­ã¿è¾¼ã‚ãªã„ã€‚

**åŸå› **ï¼šJSON ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚¨ãƒ©ãƒ¼ï¼ˆä½™åˆ†ãªã‚«ãƒ³ãƒã€å¼•ç”¨ç¬¦ã®ä¸ä¸€è‡´ãªã©ï¼‰ã€‚

**è§£æ±ºæ–¹æ³•**ï¼šJSON æ¤œè¨¼ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèªã€‚

```bash
# JSON ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æ¤œè¨¼
cat ~/.config/opencode/antigravity.json | python3 -m json.tool
```

## ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®ã¾ã¨ã‚

- **Google Search Grounding** ã«ã‚ˆã‚Šã€Gemini ãƒ¢ãƒ‡ãƒ«ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ã‚¦ã‚§ãƒ–æƒ…å ±ã‚’æ¤œç´¢ã§ãã‚‹
- `web_search.default_mode: "auto"` ã§æœ‰åŠ¹åŒ–ã€`"off"` ã§ç„¡åŠ¹åŒ–
- `grounding_threshold` ã§æ¤œç´¢é »åº¦ã‚’åˆ¶å¾¡ï¼šå€¤ãŒå°ã•ã„ã»ã©æ¤œç´¢é »åº¦ãŒé«˜ã„
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé–¾å€¤ `0.3` ã¯ã»ã¨ã‚“ã©ã®ã‚·ãƒ¼ãƒ³ã«é©ã—ã¦ãŠã‚Šã€å®Ÿéš›ã®ä½“é¨“ã«åŸºã¥ã„ã¦èª¿æ•´å¯èƒ½
- ãƒ¢ãƒ‡ãƒ«ã¯å›ç­”ã«å¼•ç”¨å…ƒã‚’å«ã‚ã€`[citation:1]` ãªã©ã§ãƒãƒ¼ã‚¯ã™ã‚‹

## æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®äºˆå‘Š

> æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ **[ãƒ‡ãƒ¥ã‚¢ãƒ«ã‚¯ã‚©ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ ](../dual-quota-system/)** ã‚’å­¦ã³ã¾ã™ã€‚
>
> å­¦ã¹ã‚‹ã“ã¨ï¼š
> - Antigravity ã¨ Gemini CLI ã® 2 ã¤ã®ç‹¬ç«‹ã—ãŸã‚¯ã‚©ãƒ¼ã‚¿ãƒ—ãƒ¼ãƒ«ã®ä»•çµ„ã¿
> - ã‚¯ã‚©ãƒ¼ã‚¿ãƒ—ãƒ¼ãƒ«é–“ã®åˆ‡ã‚Šæ›¿ãˆæ–¹æ³•ã¨åˆ©ç”¨ç‡ã®æœ€å¤§åŒ–
> - ã‚¯ã‚©ãƒ¼ã‚¿ãƒ—ãƒ¼ãƒªãƒ³ã‚°ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

---

## ä»˜éŒ²ï¼šã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å‚ç…§

<details>
<summary><strong>ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å ´æ‰€ã‚’è¡¨ç¤º</strong></summary>

> æ›´æ–°æ—¥ï¼š2026-01-23

| æ©Ÿèƒ½ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | è¡Œç•ªå· |
| --- | --- | --- |
| Google Search è¨­å®šã‚¹ã‚­ãƒ¼ãƒ | [`src/plugin/config/schema.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/schema.ts) | 303-319 |
| Google Search å‹å®šç¾© | [`src/plugin/transform/types.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/transform/types.ts) | 85-88 |
| Google Search æ³¨å…¥ãƒ­ã‚¸ãƒƒã‚¯ | [`src/plugin/transform/gemini.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/transform/gemini.ts) | 402-419 |
| Google Search è¨­å®šèª­ã¿è¾¼ã¿ | [`src/plugin/config/loader.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/loader.ts) | 173-184 |
| Google Search è¨­å®šé©ç”¨ | [`src/plugin.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin.ts) | 1194-1196 |

**ä¸»è¦ãªè¨­å®šé …ç›®**ï¼š

- `web_search.default_mode`: `"auto"` ã¾ãŸã¯ `"off"`ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `"off"`
- `web_search.grounding_threshold`: `0.0` - `1.0`ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `0.3`

**ä¸»è¦ãªé–¢æ•°**ï¼š

- `applyGeminiTransforms()`ï¼šGoogle Search æ³¨å…¥ã‚’å«ã‚€ã™ã¹ã¦ã® Gemini å¤‰æ›ã‚’é©ç”¨
- `normalizeGeminiTools()`ï¼šãƒ„ãƒ¼ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æ­£è¦åŒ–ã—ã€`googleSearchRetrieval` ãƒ„ãƒ¼ãƒ«ã‚’ä¿æŒ
- `wrapToolsAsFunctionDeclarations()`ï¼šãƒ„ãƒ¼ãƒ«ã‚’ `functionDeclarations` ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãƒ©ãƒƒãƒ—

**å‹•ä½œåŸç†**ï¼š

1. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ `web_search.default_mode` ã¨ `web_search.grounding_threshold` ã‚’èª­ã¿è¾¼ã‚€
2. `mode === "auto"` ã®å ´åˆã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã® `tools` é…åˆ—ã« `googleSearchRetrieval` ãƒ„ãƒ¼ãƒ«ã‚’æ³¨å…¥ï¼š
   ```json
   {
     "googleSearchRetrieval": {
       "dynamicRetrievalConfig": {
         "mode": "MODE_DYNAMIC",
         "dynamicThreshold": 0.3  // grounding_threshold
       }
     }
   }
   ```
3. Gemini ãƒ¢ãƒ‡ãƒ«ãŒé–¾å€¤ã«åŸºã¥ã„ã¦æ¤œç´¢ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã™ã‹ã©ã†ã‹ã‚’åˆ¤æ–­
4. æ¤œç´¢çµæœã¯å¿œç­”ã«å«ã¾ã‚Œã€å¼•ç”¨å…ƒï¼ˆ`[citation:1]` ãªã©ï¼‰ã§ãƒãƒ¼ã‚¯ã•ã‚Œã‚‹

</details>
