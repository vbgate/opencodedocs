---
title: "LSP ã¨ AST: IDE ãƒ¬ãƒ™ãƒ«ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | oh-my-opencode"
sidebarTitle: "LSP ã¨ AST-Grep"
subtitle: "LSP ã¨ AST-Grepï¼šIDE ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ¼ãƒ‰è§£æãƒ»æ“ä½œèƒ½åŠ›"
description: "LSP ã¨ AST-Grep ãƒ„ãƒ¼ãƒ«ã®ä½¿ã„æ–¹ã‚’å­¦ã³ã€7 ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚³ãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã‚’ç¿’å¾—ã—ã¾ã™ã€‚"
tags:
  - "lsp"
  - "ast-grep"
  - "code-analysis"
  - "refactoring"
prerequisite:
  - "start-quick-start"
order: 90
---

# LSP ã¨ AST-Grepï¼šIDE ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ¼ãƒ‰è§£æãƒ»æ“ä½œèƒ½åŠ›

## å­¦ç¿’å¾Œã«ã§ãã‚‹ã“ã¨

- LSP ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å†…ã‚’ã‚¸ãƒ£ãƒ³ãƒ—ã€ã‚·ãƒ³ãƒœãƒ«ã‚’æ¤œç´¢ã€è¨ºæ–­æƒ…å ±ã‚’å–å¾—ã™ã‚‹
- AST-Grep ã‚’ä½¿ã£ã¦æ­£ç¢ºãªã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢ã¨ç½®æ›ã‚’è¡Œã†
- LSP ã¨ AST-Grep ã®é•ã„ã¨é©ç”¨å ´é¢ã‚’ç†è§£ã™ã‚‹
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã« IDE ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ¼ãƒ‰ç†è§£ãƒ»æ“ä½œèƒ½åŠ›ã‚’æŒãŸã›ã‚‹

## ä»ŠæŠ±ãˆã¦ã„ã‚‹èª²é¡Œ

å¾“æ¥ã®ã‚³ãƒ¼ãƒ‰æ¤œç´¢ãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã«ã¯æ˜ç¢ºãªé™ç•ŒãŒã‚ã‚Šã¾ã™ï¼š

| å•é¡Œ | å¾“æ¥ã®è§£æ±ºç­– | å®Ÿéš›ã®ãƒ‹ãƒ¼ã‚º |
|---|---|---|
| **ã‚·ãƒ³ãƒœãƒ«ã‚¸ãƒ£ãƒ³ãƒ—ãŒä¸æ­£ç¢º** | å˜ç´”ãªæ–‡å­—åˆ—ãƒãƒƒãƒãƒ³ã‚° | ã‚³ãƒ¼ãƒ‰ã®æ„å‘³ã‚’ç†è§£ã—ã€æœ¬å½“ã®å®šç¾©ã¸ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ |
| **å‚ç…§æ¤œç´¢ãŒæ¼ã‚Œã‚‹** | æ­£è¦è¡¨ç¾æ¤œç´¢ | ãƒ•ã‚¡ã‚¤ãƒ«é–“ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ã¾ãŸãŒã‚‹æ­£ç¢ºãªå‚ç…§è¿½è·¡ãŒå¿…è¦ |
| **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒå®‰å…¨ã§ãªã„** | æ‰‹å‹•ç½®æ› + grep | ã‚³ãƒ¼ãƒ‰æ§‹é€ ã‚’ç†è§£ã—ã€ç ´å£Šçš„å¤‰æ›´ã‚’é˜²ãå¿…è¦ãŒã‚ã‚‹ |
| **ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ãŒæ‰‹é–“** | æ­£è¦è¡¨ç¾ | AST ãƒ™ãƒ¼ã‚¹ã®æ§‹é€ åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ãŒå¿…è¦ |

::: info ã‚­ãƒ¼ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
**LSP (Language Server Protocol)** ã¯ IDE ã¨è¨€èªã‚µãƒ¼ãƒãƒ¼é–“ã®æ¨™æº–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã€çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’é€šã˜ã¦ã‚³ãƒ¼ãƒ‰è£œå®Œã€å®šç¾©ã‚¸ãƒ£ãƒ³ãƒ—ã€å‚ç…§æ¤œç´¢ã€ã‚·ãƒ³ãƒœãƒ«åå¤‰æ›´ã€è¨ºæ–­æƒ…å ±å–å¾—ã€ã‚·ãƒ³ãƒœãƒ«ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ãªã©ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã€ã‚¨ãƒ‡ã‚£ã‚¿ã«å¼·åŠ›ãªã‚³ãƒ¼ãƒ‰ç†è§£èƒ½åŠ›ã‚’ä¸ãˆã¾ã™ã€‚ã¾ãŸå‹æƒ…å ±ã‚„ç¶™æ‰¿é–¢ä¿‚ãªã©ã®é«˜åº¦ãªæ©Ÿèƒ½ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚**AST-Grep** ã¯æŠ½è±¡æ§‹æ–‡æœ¨ï¼ˆAbstract Syntax Treeï¼‰ãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢ãƒ„ãƒ¼ãƒ«ã§ã€å˜ãªã‚‹ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ãªãã‚³ãƒ¼ãƒ‰æ§‹é€ ã‚’ç†è§£ã—ã€ãƒ¡ã‚¿å¤‰æ•°ï¼ˆ`$VAR` ã§å˜ä¸€ãƒãƒ¼ãƒ‰ã‚’ã€`$$$` ã§è¤‡æ•°ãƒãƒ¼ãƒ‰ã‚’ãƒãƒƒãƒãƒ³ã‚°ï¼‰ã‚’ä½¿ã£ã¦æŸ”è»Ÿãªãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã¨ãƒãƒƒãƒãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚TypeScriptã€Pythonã€Goã€Rust ãªã© 25 ç¨®é¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«å¯¾å¿œã—ã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã€è¦ç´„ãƒã‚§ãƒƒã‚¯ã€æ§‹é€ åŒ–æ¤œç´¢ã«å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
:::

## ã“ã®æ‰‹æ³•ã‚’ä½¿ã†ã‚¿ã‚¤ãƒŸãƒ³ã‚°

| ãƒ„ãƒ¼ãƒ« | é©ç”¨å ´é¢ | ä¾‹ |
|---|---|---|
| **LSP ãƒ„ãƒ¼ãƒ«** | IDE æ©Ÿèƒ½ãŒå¿…è¦ãªå ´åˆ | å®šç¾©ã¸ã‚¸ãƒ£ãƒ³ãƒ—ã€å…¨å‚ç…§ã‚’æ¤œç´¢ã€ã‚¨ãƒ©ãƒ¼ãƒªã‚¹ãƒˆã‚’å–å¾—ã€ã‚·ãƒ³ãƒœãƒ«åã‚’å¤‰æ›´ |
| **AST-Grep** | ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ãŒå¿…è¦ãªå ´åˆ | ç‰¹å®šã®ã‚³ãƒ¼ãƒ‰æ§‹é€ ã‚’æ¤œç´¢ã€ãƒãƒƒãƒãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã€ã‚³ãƒ¼ãƒ‰è¦ç´„ã‚’ãƒã‚§ãƒƒã‚¯ |
| **Grep/Glob** | å˜ç´”ãªãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢ | é–¢æ•°åã‚’æ¤œç´¢ã€ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ãƒãƒƒãƒãƒ³ã‚° |

## ğŸ’ äº‹å‰æº–å‚™

LSP ã¨ AST-Grep ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†å‰ã«ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

1. **Language Server ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨**
   - TypeScript/JavaScript: `npm install -g typescript-language-server`
   - Python: `pip install basedpyright` ã¾ãŸã¯ `pip install ruff`
   - Go: `go install golang.org/x/tools/gopls@latest`
   - Rust: `rustup component add rust-analyzer`

2. **AST-Grep CLI ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨**
   ```bash
   bun add -D @ast-grep/cli
   ```

3. **LSP ã‚µãƒ¼ãƒãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨**
   - LSP ã‚µãƒ¼ãƒãƒ¼è¨­å®šã¯ OpenCode ã® `opencode.json` ã§è¡Œã„ã¾ã™
   - oh-my-opencode ãŒè‡ªå‹•çš„ã«ã“ã‚Œã‚‰ã®è¨­å®šã‚’èª­ã¿è¾¼ã‚“ã§ä½¿ç”¨ã—ã¾ã™

::: tip ç’°å¢ƒç¢ºèª
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ç’°å¢ƒã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š
```bash
# LSP ã‚µãƒ¼ãƒãƒ¼ã®ç¢ºèª
oh-my-opencode doctor

# AST-Grep ã®ç¢ºèª
which sg
```
:::

## æ ¸å¿ƒã‚¢ã‚¤ãƒ‡ã‚¢

### LSP ãƒ„ãƒ¼ãƒ«ï¼šIDE ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ¼ãƒ‰ç†è§£

LSP ãƒ„ãƒ¼ãƒ«ã¯ AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã« IDE ã¨åŒã˜ã‚³ãƒ¼ãƒ‰ç†è§£èƒ½åŠ›ã‚’ä¸ãˆã¾ã™ï¼š

```mermaid
graph LR
  A[ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒ LSP ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã—] --> B[LSP ã‚µãƒ¼ãƒãƒ¼]
  B --> C[æ„å‘³è§£æ]
  C --> D[æ§‹é€ åŒ–çµæœã‚’è¿”å´]
  D --> E[ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã‚³ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç†è§£]
```

**æ ¸å¿ƒãªåˆ©ç‚¹**ï¼š
- âœ… æ„å‘³ç†è§£ã§ã‚ã£ã¦ã€å˜ãªã‚‹æ–‡å­—åˆ—ãƒãƒƒãƒãƒ³ã‚°ã§ã¯ãªã„
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«é–“ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ã¾ãŸãŒã‚‹æ­£ç¢ºãªè¿½è·¡
- âœ… å‹æƒ…å ±ã‚„ç¶™æ‰¿é–¢ä¿‚ãªã©ã®é«˜åº¦ãªæ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆ
- âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã¨å®Œå…¨ã«ä¸€è‡´ï¼ˆåŒã˜ LSP ã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ï¼‰

### AST-Grepï¼šæ§‹é€ åŒ–ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°

AST-Grep ã¯ AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æ­£ç¢ºãªã‚³ãƒ¼ãƒ‰æ§‹é€ ãƒãƒƒãƒãƒ³ã‚°èƒ½åŠ›ã‚’ä¸ãˆã¾ã™ï¼š

```mermaid
graph LR
  A[AST-Grep ãƒ‘ã‚¿ãƒ¼ãƒ³] --> B[ã‚³ãƒ¼ãƒ‰ã‚’ AST ã«è§£æ]
  B --> C[æ§‹é€ åŒ–ãƒãƒƒãƒãƒ³ã‚°]
  C --> D[ã‚³ãƒ¼ãƒ‰ãƒãƒ¼ãƒ‰ã®æŠ½å‡ºãƒ»ç½®æ›]
  D --> E[ãƒãƒƒãƒãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãƒ»ãƒã‚§ãƒƒã‚¯]
```

**æ ¸å¿ƒãªåˆ©ç‚¹**ï¼š
- âœ… ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ãªãã€ã‚³ãƒ¼ãƒ‰æ§‹é€ ã«åŸºã¥ã
- âœ… ãƒ¡ã‚¿å¤‰æ•°ï¼ˆ`$VAR`ã€`$$$`ï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸæŸ”è»Ÿãªãƒãƒƒãƒãƒ³ã‚°
- âœ… è¤‡æ•°ã®è¨€èªã‚’ã‚µãƒãƒ¼ãƒˆï¼ˆ25 ç¨®é¡ï¼‰
- âœ… ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã€ãƒã‚§ãƒƒã‚¯ã€ã‚³ãƒ¼ãƒ‰è¦ç´„æ¤œè¨¼ã«ä½¿ç”¨å¯èƒ½

## å®Ÿè·µã‚¬ã‚¤ãƒ‰

### ã‚¹ãƒ†ãƒƒãƒ— 1ï¼šLSP ã§å®šç¾©ã¸ã‚¸ãƒ£ãƒ³ãƒ—

**ç†ç”±**
ã‚·ãƒ³ãƒœãƒ«ã®å®šç¾©ä½ç½®ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãã€LSP ã® `goto_definition` ãƒ„ãƒ¼ãƒ«ã¯æ­£ç¢ºãªã‚¸ãƒ£ãƒ³ãƒ—ã‚’æä¾›ã—ã€æ–‡å­—åˆ—æ¤œç´¢ã‚ˆã‚Šã‚‚ä¿¡é ¼æ€§ãŒé«˜ã„ã§ã™ã€‚

OpenCode ã§ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒè‡ªå‹•çš„ã«å‘¼ã³å‡ºã›ã¾ã™ï¼š

```typescript
// ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒè‡ªå‹•çš„ã«å‘¼ã³å‡ºã—
lsp_goto_definition({
  filePath: "src/utils.ts",
  line: 15,
  character: 10
})
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**ï¼š
```
â†’ å®šç¾©ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼š
  ãƒ•ã‚¡ã‚¤ãƒ«: src/types.ts
  è¡Œ: 45
  ãƒ†ã‚­ã‚¹ãƒˆ: export interface UserConfig {
```

::: tip å®Ÿéš›ã®ä½¿ç”¨
ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚’æ‰‹å‹•ã§å‘¼ã³å‡ºã™å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒè‡ªå‹•çš„ã«ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç†è§£ã—ã¾ã™ã€‚ã€Œã“ã®é–¢æ•°ã®å®šç¾©ã¸ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¦ã€ã‚„ã€Œã“ã®å¤‰æ•°ã¯ã©ã“ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ï¼Ÿã€ã¨ç›´æ¥å°‹ã­ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
:::

### ã‚¹ãƒ†ãƒƒãƒ— 2ï¼šã™ã¹ã¦ã®å‚ç…§ã‚’æ¤œç´¢

**ç†ç”±**
ã‚·ãƒ³ãƒœãƒ«ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãã€ã¾ãšã™ã¹ã¦ã®å‚ç…§ã‚’æ¤œç´¢ã™ã‚‹ã“ã¨ã§ã€å¤‰æ›´ãŒä»–ã®å ´æ‰€ã®ä½¿ç”¨ã‚’ç ´å£Šã—ãªã„ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ä»¥ä¸‹ã‚’å‘¼ã³å‡ºã›ã¾ã™ï¼š

```typescript
lsp_find_references({
  filePath: "src/api.ts",
  line: 10,
  character: 5,
  includeDeclaration: true  // å®šç¾©è‡ªä½“ã‚’å«ã‚ã‚‹ã‹ã©ã†ã‹
})
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**ï¼š
```
15 ä»¶ã®å‚ç…§ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼ˆæœ€åˆã® 200 ä»¶ã‚’è¡¨ç¤ºï¼‰ï¼š
  src/api.ts:10:5  - [å®šç¾©] fetchData
  src/components/List.tsx:23:12 - [ä½¿ç”¨] fetchData()
  src/pages/Home.tsx:45:8 - [ä½¿ç”¨] fetchData()
  ...
```

### ã‚¹ãƒ†ãƒƒãƒ— 3ï¼šãƒ•ã‚¡ã‚¤ãƒ«ã‚·ãƒ³ãƒœãƒ«ã¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚·ãƒ³ãƒœãƒ«ã‚’å–å¾—

**ç†ç”±**
ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã‚’ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãã€ã¾ãŸã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§ç‰¹å®šã®ã‚·ãƒ³ãƒœãƒ«ã‚¿ã‚¤ãƒ—ã‚’æ¤œç´¢ã™ã‚‹ã¨ãã€`lsp_symbols` ãƒ„ãƒ¼ãƒ«ã¯éå¸¸ã«å½¹ç«‹ã¡ã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³**ï¼ˆscope="document"ï¼‰ï¼š

```typescript
lsp_symbols({
  filePath: "src/app.tsx",
  scope: "document"
})
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**ï¼š
```
12 å€‹ã®ã‚·ãƒ³ãƒœãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼š
  [Component] App (è¡Œ: 10-150)
    [Function] useEffect (è¡Œ: 25-35)
    [Function] handleClick (è¡Œ: 40-55)
    [Variable] count (è¡Œ: 15)
  ...
```

**ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ¤œç´¢**ï¼ˆscope="workspace"ï¼‰ï¼š

```typescript
lsp_symbols({
  filePath: "src/app.tsx",
  scope: "workspace",
  query: "fetchData"
})
```

### ã‚¹ãƒ†ãƒƒãƒ— 4ï¼šè¨ºæ–­æƒ…å ±ã‚’å–å¾—

**ç†ç”±**
ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€LSP ã®è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã¯ã‚¨ãƒ©ãƒ¼ã€è­¦å‘Šã€ãƒ’ãƒ³ãƒˆã‚’äº‹å‰ã«ç™ºè¦‹ã§ãã¾ã™ã€‚

```typescript
lsp_diagnostics({
  filePath: "src/utils.ts",
  severity: "error"  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³: "error", "warning", "information", "hint", "all"
})
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**ï¼š
```
3 ä»¶ã®è¨ºæ–­ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼š
  [Error] src/utils.ts:23:5 - 'result' is used before being assigned
  [Warning] src/utils.ts:45:12 - Unused variable 'temp'
  [Hint] src/utils.ts:67:8 - This can be simplified to const x = value
```

::: tip äº‹å‰ãƒã‚§ãƒƒã‚¯
ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå‰ã« AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã« `lsp_diagnostics` ã§æ½œåœ¨çš„ãªå•é¡Œã‚’ãƒã‚§ãƒƒã‚¯ã•ã›ã‚‹ã“ã¨ã§ã€ç¹°ã‚Šè¿”ã—ã®ä¿®æ­£ã‚’é¿ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
:::

### ã‚¹ãƒ†ãƒƒãƒ— 5ï¼šã‚·ãƒ³ãƒœãƒ«ã‚’å®‰å…¨ã«ãƒªãƒãƒ¼ãƒ 

**ç†ç”±**
ã‚·ãƒ³ãƒœãƒ«ã®ãƒªãƒãƒ¼ãƒ ã¯ä¸€èˆ¬çš„ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ“ä½œã§ã™ãŒã€æ‰‹å‹•ã§ã®ç½®æ›ã¯ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã‚„ã™ã„ã§ã™ã€‚LSP ã® `lsp_rename` ãƒ„ãƒ¼ãƒ«ã¯ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å…¨ä½“ã§å®‰å…¨ã«ã‚·ãƒ³ãƒœãƒ«ã‚’ãƒªãƒãƒ¼ãƒ ã§ãã¾ã™ã€‚

**ã‚¹ãƒ†ãƒƒãƒ— 1ï¼šãƒªãƒãƒ¼ãƒ ã®æ¤œè¨¼**

```typescript
lsp_prepare_rename({
  filePath: "src/api.ts",
  line: 10,
  character: 5
})
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**ï¼š
```
ãƒªãƒãƒ¼ãƒ æ¤œè¨¼ï¼š
  ç¾åœ¨ã®åå‰: fetchData
  ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ç¯„å›²: è¡Œ 10, åˆ— 5-14
  ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… æœ‰åŠ¹
```

**ã‚¹ãƒ†ãƒƒãƒ— 2ï¼šãƒªãƒãƒ¼ãƒ ã®å®Ÿè¡Œ**

```typescript
lsp_rename({
  filePath: "src/api.ts",
  line: 10,
  character: 5,
  newName: "fetchUserData"
})
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**ï¼š
```
15 ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒªãƒãƒ¼ãƒ ã‚’é©ç”¨ï¼š
  src/api.ts:10:5 - fetchData â†’ fetchUserData
  src/components/List.tsx:23:12 - fetchData() â†’ fetchUserData()
  src/pages/Home.tsx:45:8 - fetchData â†’ fetchUserData
  ...
```

### ã‚¹ãƒ†ãƒƒãƒ— 6ï¼šAST-Grep ã§ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œç´¢

**ç†ç”±**
ç‰¹å®šã®ã‚³ãƒ¼ãƒ‰æ§‹é€ ï¼ˆä¾‹ï¼šã™ã¹ã¦ã® `console.log` ã®ä½¿ç”¨ç®‡æ‰€ï¼‰ã‚’æ¤œç´¢ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãã€AST-Grep ã¯ grep ã‚ˆã‚Šã‚‚æ­£ç¢ºã§ã™ã€‚

**åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢**ï¼š

```typescript
ast_grep_search({
  pattern: "console.log($MSG)",
  lang: "typescript",
  paths: ["src"],
  context: 2  // ãƒãƒƒãƒã®å‰å¾Œã«è¡¨ç¤ºã™ã‚‹è¡Œæ•°
})
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**ï¼š
```
src/utils.ts:15:
  13 | function debug(message) {
  14 |   console.log(message)
  15 |   console.log("Debug mode")
  16 | }
  17 | }

src/components/App.tsx:23:
  21 | useEffect(() => {
  22 |   console.log("Component mounted")
  23 | }, [])
```

**ãƒ¡ã‚¿å¤‰æ•°ã®ä½¿ç”¨**ï¼š

```typescript
// ã™ã¹ã¦ã®é–¢æ•°å‘¼ã³å‡ºã—ã‚’ãƒãƒƒãƒ
ast_grep_search({
  pattern: "$FUNC($$$)",
  lang: "typescript",
  paths: ["src"]
})
```

```typescript
// ã™ã¹ã¦ã®éåŒæœŸé–¢æ•°ã‚’ãƒãƒƒãƒ
ast_grep_search({
  pattern: "async function $NAME($$$) { $$$ }",
  lang: "typescript",
  paths: ["src"]
})
```

::: warning é‡è¦ï¼šãƒ‘ã‚¿ãƒ¼ãƒ³ã¯å®Œå…¨ãª AST ãƒãƒ¼ãƒ‰ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„
âŒ èª¤ã‚Šï¼š`export async function $NAME`
âœ… æ­£è§£ï¼š`export async function $NAME($$$) { $$$ }`

ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯æœ‰åŠ¹ãªã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã§ã€å®Œå…¨ãªé–¢æ•°ã‚·ã‚°ãƒãƒãƒ£ã¨é–¢æ•°æœ¬ä½“ã‚’å«ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
:::

### ã‚¹ãƒ†ãƒƒãƒ— 7ï¼šAST-Grep ã§ãƒãƒƒãƒç½®æ›

**ç†ç”±**
ã‚³ãƒ¼ãƒ‰ã‚’ãƒãƒƒãƒãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãï¼ˆä¾‹ï¼šã™ã¹ã¦ã® `console.log` ã‚’ `logger.info` ã«ç½®ãæ›ãˆã‚‹ï¼‰ã€AST-Grep ã®ç½®æ›æ©Ÿèƒ½ã¯éå¸¸ã«å¼·åŠ›ã§ã™ã€‚

**ç½®æ›ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼ˆdry-runï¼‰ï¼š

```typescript
ast_grep_replace({
  pattern: "console.log($MSG)",
  rewrite: "logger.info($MSG)",
  lang: "typescript",
  paths: ["src"],
  dryRun: true  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ trueã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã¿ã§å¤‰æ›´ã—ãªã„
})
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**ï¼š
```
å¤‰æ›´ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆdry-runï¼‰ï¼š
  src/utils.ts:15:2 - console.log("Debug mode")
                 â†’ logger.info("Debug mode")
  src/components/App.tsx:23:4 - console.log("Component mounted")
                               â†’ logger.info("Component mounted")

åˆè¨ˆ: 2 å¤‰æ›´
```

**ç½®æ›ã®é©ç”¨**ï¼š

```typescript
ast_grep_replace({
  pattern: "console.log($MSG)",
  rewrite: "logger.info($MSG)",
  lang: "typescript",
  paths: ["src"],
  dryRun: false  // false ã«è¨­å®šã—ã¦å¤‰æ›´ã‚’é©ç”¨
})
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**ï¼š
```
2 å¤‰æ›´ã‚’é©ç”¨ï¼š
  src/utils.ts:15:2 - console.log("Debug mode")
                 â†’ logger.info("Debug mode")
  src/components/App.tsx:23:4 - console.log("Component mounted")
                               â†’ logger.info("Component mounted")
```

::: danger ç ´å£Šçš„ãªæ“ä½œ
`ast_grep_replace` ã® `dryRun: false` ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å¤‰æ›´ã—ã¾ã™ã€‚æ¨å¥¨äº‹é …ï¼š
1. ã¾ãš `dryRun: true` ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹
2. å•é¡ŒãŒãªã„ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰é©ç”¨ã™ã‚‹
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒ Git ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€ã¾ãšç¾åœ¨ã®çŠ¶æ…‹ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¦ãŠã
:::

## ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ âœ…

**LSP ãƒ„ãƒ¼ãƒ«ã®æ¤œè¨¼**ï¼š
- [ ] ã‚·ãƒ³ãƒœãƒ«ã®å®šç¾©ã¸ã‚¸ãƒ£ãƒ³ãƒ—ã§ãã‚‹ã‹ï¼Ÿ
- [ ] ã™ã¹ã¦ã®å‚ç…§ã‚’æ¤œç´¢ã§ãã‚‹ã‹ï¼Ÿ
- [ ] è¨ºæ–­æƒ…å ±ã‚’å–å¾—ã§ãã‚‹ã‹ï¼Ÿ
- [ ] ã‚·ãƒ³ãƒœãƒ«ã‚’å®‰å…¨ã«ãƒªãƒãƒ¼ãƒ ã§ãã‚‹ã‹ï¼Ÿ

**AST-Grep ãƒ„ãƒ¼ãƒ«ã®æ¤œè¨¼**ï¼š
- [ ] ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œç´¢ã§ãã‚‹ã‹ï¼Ÿ
- [ ] ãƒ¡ã‚¿å¤‰æ•°ã‚’ä½¿ã£ã¦ãƒãƒƒãƒãƒ³ã‚°ã§ãã‚‹ã‹ï¼Ÿ
- [ ] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ç½®æ›ã‚’å®Ÿè¡Œã§ãã‚‹ã‹ï¼Ÿ

## ã‚ˆãã‚ã‚‹è½ã¨ã—ç©´

### LSP ãƒ„ãƒ¼ãƒ«ã®ã‚ˆãã‚ã‚‹å•é¡Œ

| å•é¡Œ | åŸå›  | è§£æ±ºæ–¹æ³• |
|---|---|---|
| **å®šç¾©ãŒè¦‹ã¤ã‹ã‚‰ãªã„** | LSP ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ãªã„ã‹è¨­å®šãŒé–“é•ã£ã¦ã„ã‚‹ | `opencode.json` ã® LSP è¨­å®šã‚’ç¢ºèª |
| **å‚ç…§ãƒªã‚¹ãƒˆãŒä¸å®Œå…¨** | ã‚³ãƒ¼ãƒ‰ã«ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã€LSP ã‚µãƒ¼ãƒãƒ¼ãŒå®Œå…¨ã«è§£æã§ãã¦ã„ãªã„ | ã¾ãšã‚³ãƒ¼ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£ |
| **ãƒªãƒãƒ¼ãƒ ãŒå¤±æ•—** | æ–°ã—ã„åå‰ãŒæ—¢å­˜ã®ã‚·ãƒ³ãƒœãƒ«ã¨ç«¶åˆã—ã¦ã„ã‚‹ | ã‚ˆã‚Šå…·ä½“çš„ãªåå‰ã‚’ä½¿ç”¨ |

### AST-Grep ã®ã‚ˆãã‚ã‚‹å•é¡Œ

| å•é¡Œ | åŸå›  | è§£æ±ºæ–¹æ³• |
|---|---|---|
| **ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒãƒãƒƒãƒã—ãªã„** | ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä¸å®Œå…¨ã¾ãŸã¯æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ | ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå®Œå…¨ãª AST ãƒãƒ¼ãƒ‰ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª |
| **Python ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æœ«å°¾ã‚³ãƒ­ãƒ³** | Python ã® `def` ã¨ `class` ã«ã¯ã‚³ãƒ­ãƒ³ãŒä¸è¦ | âŒ `def func():` â†’ âœ… `def func($$$):` |
| **ãƒãƒƒãƒã—ã™ãã‚‹** | ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒåºƒã™ãã‚‹ | ã‚ˆã‚Šå…·ä½“çš„ãªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€ãƒ‘ã‚¹ã‚’åˆ¶é™ |

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ææ¡ˆ

```typescript
// âœ… è‰¯ã„ï¼šæ¤œç´¢ç¯„å›²ã‚’åˆ¶é™
ast_grep_search({
  pattern: "$FUNC($$$)",
  lang: "typescript",
  paths: ["src/api"],  // ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã¿æ¤œç´¢
  globs: ["*.ts"]      // ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ãƒãƒƒãƒ
})

// âŒ æ‚ªã„ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’æ¤œç´¢
ast_grep_search({
  pattern: "$FUNC($$$)",
  lang: "typescript",
  paths: ["./"]  // ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢
})
```

## LSP ãƒ„ãƒ¼ãƒ«å®Œå…¨ãƒªã‚¹ãƒˆ

| ãƒ„ãƒ¼ãƒ« | æ©Ÿèƒ½ | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |
|---|---|---|
| `lsp_goto_definition` | ã‚·ãƒ³ãƒœãƒ«ã®å®šç¾©ã¸ã‚¸ãƒ£ãƒ³ãƒ— | `filePath`, `line`, `character` |
| `lsp_find_references` | ã™ã¹ã¦ã®å‚ç…§ã‚’æ¤œç´¢ | `filePath`, `line`, `character`, `includeDeclaration?` |
| `lsp_symbols` | ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã¾ãŸã¯ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚·ãƒ³ãƒœãƒ«ã‚’å–å¾— | `filePath`, `scope`, `query?`, `limit?` |
| `lsp_diagnostics` | ã‚¨ãƒ©ãƒ¼ã¨è­¦å‘Šã‚’å–å¾— | `filePath`, `severity?` |
| `lsp_prepare_rename` | ãƒªãƒãƒ¼ãƒ æ“ä½œã‚’æ¤œè¨¼ | `filePath`, `line`, `character` |
| `lsp_rename` | ãƒªãƒãƒ¼ãƒ æ“ä½œã‚’å®Ÿè¡Œ | `filePath`, `line`, `character`, `newName` |

**åˆ¶é™**ï¼š
- ã‚·ãƒ³ãƒœãƒ«ã€å‚ç…§ã€è¨ºæ–­ã¯æœ€å¤§ 200 ä»¶ã¾ã§è¿”å´ï¼ˆè¨­å®šå¯èƒ½ï¼‰
- LSP ã‚µãƒ¼ãƒãƒ¼ã¯è¨­å®šæ¸ˆã¿ã‹ã¤å®Ÿè¡Œä¸­ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹

## AST-Grep ãƒ„ãƒ¼ãƒ«å®Œå…¨ãƒªã‚¹ãƒˆ

| ãƒ„ãƒ¼ãƒ« | æ©Ÿèƒ½ | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |
|---|---|---|
| `ast_grep_search` | AST ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢ | `pattern`, `lang`, `paths?`, `globs?`, `context?` |
| `ast_grep_replace` | AST ãƒ‘ã‚¿ãƒ¼ãƒ³ç½®æ› | `pattern`, `rewrite`, `lang`, `paths?`, `globs?`, `dryRun?` |

**å¯¾å¿œè¨€èª**ï¼ˆ25 ç¨®é¡ï¼‰ï¼š
`bash`, `c`, `cpp`, `csharp`, `css`, `elixir`, `go`, `haskell`, `html`, `java`, `javascript`, `json`, `kotlin`, `lua`, `nix`, `php`, `python`, `ruby`, `rust`, `scala`, `solidity`, `swift`, `typescript`, `tsx`, `yaml`

**ãƒ¡ã‚¿å¤‰æ•°**ï¼š
- `$VAR` - å˜ä¸€ãƒãƒ¼ãƒ‰ã‚’ãƒãƒƒãƒãƒ³ã‚°
- `$$$` - è¤‡æ•°ãƒãƒ¼ãƒ‰ã‚’ãƒãƒƒãƒãƒ³ã‚°

## å®Ÿè·µçš„ãªã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£

### ã‚±ãƒ¼ã‚¹ 1ï¼šAPI å‘¼ã³å‡ºã—ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

**ã‚·ãƒŠãƒªã‚ª**ï¼šã™ã¹ã¦ã® `fetch` å‘¼ã³å‡ºã—ã«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¿½åŠ 

**AST-Grep ã§ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œç´¢**ï¼š

```typescript
ast_grep_search({
  pattern: "fetch($URL).then($RES => $BODY)",
  lang: "typescript",
  paths: ["src/api"]
})
```

**AST-Grep ã§ç½®æ›**ï¼š

```typescript
ast_grep_replace({
  pattern: "fetch($URL).then($RES => $BODY)",
  rewrite: "fetch($URL).then($RES => $BODY).catch(err => handleError(err))",
  lang: "typescript",
  paths: ["src/api"],
  dryRun: true  // ã¾ãšãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
})
```

### ã‚±ãƒ¼ã‚¹ 2ï¼šæœªä½¿ç”¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’æ¤œç´¢

**LSP ã§å‚ç…§ã‚’æ¤œç´¢**ï¼š

```typescript
// å„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«ã¤ã„ã¦
lsp_find_references({
  filePath: "src/utils.ts",
  line: 1,  // import ãŒã‚ã‚‹è¡Œ
  character: 10
})

// 1 ã¤ã®å‚ç…§ï¼ˆã‚¤ãƒ³ãƒãƒ¼ãƒˆè‡ªä½“ï¼‰ã®ã¿è¿”ã‚‹å ´åˆã€æœªä½¿ç”¨
```

### ã‚±ãƒ¼ã‚¹ 3ï¼šè¨­å®šå¤‰æ•°ã®ãƒªãƒãƒ¼ãƒ 

**ã‚¹ãƒ†ãƒƒãƒ— 1ï¼šãƒªãƒãƒ¼ãƒ ã®æ¤œè¨¼**

```typescript
lsp_prepare_rename({
  filePath: "src/config.ts",
  line: 10,
  character: 4
})
```

**ã‚¹ãƒ†ãƒƒãƒ— 2ï¼šãƒªãƒãƒ¼ãƒ ã®å®Ÿè¡Œ**

```typescript
lsp_rename({
  filePath: "src/config.ts",
  line: 10,
  character: 4,
  newName: "API_BASE_URL"
})
```

## ãƒ¬ãƒƒã‚¹ãƒ³ã®ã¾ã¨ã‚

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ oh-my-opencode ã® LSP ãƒ„ãƒ¼ãƒ«ã¨ AST-Grep ãƒ„ãƒ¼ãƒ«ã‚’ç´¹ä»‹ã—ã¾ã—ãŸï¼š

**LSP ãƒ„ãƒ¼ãƒ«**ï¼š
- IDE ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ¼ãƒ‰ç†è§£ãƒ»æ“ä½œèƒ½åŠ›ã‚’æä¾›
- å®šç¾©ã‚¸ãƒ£ãƒ³ãƒ—ã€å‚ç…§æ¤œç´¢ã€è¨ºæ–­å–å¾—ã€ã‚·ãƒ³ãƒœãƒ«ãƒªãƒãƒ¼ãƒ ã‚’ã‚µãƒãƒ¼ãƒˆ
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã® LSP ã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ã—ã€IDE ã¨åŒã˜å‹•ä½œ

**AST-Grep ãƒ„ãƒ¼ãƒ«**ï¼š
- AST ãƒ™ãƒ¼ã‚¹ã®æ§‹é€ åŒ–ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°
- æŸ”è»Ÿãªãƒãƒƒãƒãƒ³ã‚°ã®ãŸã‚ã«ãƒ¡ã‚¿å¤‰æ•°ã‚’ã‚µãƒãƒ¼ãƒˆ
- ãƒãƒƒãƒç½®æ›ã¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆ

**ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**ï¼š
- LSP ã¯æ„å‘³ç†è§£ãŒå¿…è¦ãªå ´é¢ã§ä½¿ç”¨
- AST-Grep ã¯æ§‹é€ åŒ–ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã§ä½¿ç”¨
- ç½®æ›å‰ã« dryRun ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

## æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®äºˆå‘Š

> æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ **[Categories ã¨ Skillsï¼šå‹•çš„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚³ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³](../categories-skills/)** ã‚’å­¦ç¿’ã—ã¾ã™ã€‚
>
> å­¦ç¿’å†…å®¹ï¼š
> - Categories ã‚’ä½¿ã£ã¦æœ€é©ãªãƒ¢ãƒ‡ãƒ«ã‚’è‡ªå‹•é¸æŠã™ã‚‹æ–¹æ³•
> - ç•°ãªã‚‹ Skills ã‚’çµ„ã¿åˆã‚ã›ã¦å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹æ–¹æ³•
> - v3.0 ã®æ–°æ©Ÿèƒ½ã®å®Ÿéš›ã®ä½¿ç”¨å ´é¢

---

## ä»˜éŒ²ï¼šã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å‚ç…§

<details>
<summary><strong>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä½ç½®ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã‚¯ãƒªãƒƒã‚¯</strong></summary>

> æ›´æ–°æ—¥æ™‚ï¼š2026-01-26

### LSP ãƒ„ãƒ¼ãƒ«

| æ©Ÿèƒ½ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | è¡Œç•ªå· |
|---|---|---|
| LSP ãƒ„ãƒ¼ãƒ«å®šç¾© | [`src/tools/lsp/tools.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/tools/lsp/tools.ts) | 29-261 |
| LSP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£… | [`src/tools/lsp/client.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/tools/lsp/client.ts) | 1-596 |
| LSP å®šæ•°å®šç¾© | [`src/tools/lsp/constants.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/tools/lsp/constants.ts) | 1-391 |
| LSP å‹å®šç¾© | [`src/tools/lsp/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/tools/lsp/types.ts) | 1-246 |

### AST-Grep ãƒ„ãƒ¼ãƒ«

| æ©Ÿèƒ½ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | è¡Œç•ªå· |
|---|---|---|
|---|---|---|
|---|---|---|
|---|---|---|
|---|---|---|
|---|---|---|

**é‡è¦ãªå®šæ•°**ï¼š
- `DEFAULT_MAX_REFERENCES = 200` - æœ€å¤§è¿”å´å‚ç…§æ•°
- `DEFAULT_MAX_SYMBOLS = 200` - æœ€å¤§è¿”å´ã‚·ãƒ³ãƒœãƒ«æ•°
- `DEFAULT_MAX_DIAGNOSTICS = 200` - æœ€å¤§è¿”å´è¨ºæ–­æ•°
- `CLI_LANGUAGES` - å¯¾å¿œè¨€èªãƒªã‚¹ãƒˆï¼ˆ25 ç¨®é¡ï¼‰
- `DEFAULT_MAX_MATCHES = 500` - AST-Grep æœ€å¤§ãƒãƒƒãƒæ•°

**é‡è¦ãªãƒ„ãƒ¼ãƒ«é–¢æ•°**ï¼š
- `withLspClient()` - LSP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—ã—ã¦æ“ä½œã‚’å®Ÿè¡Œ
- `runSg()` - AST-Grep CLI ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
- `formatLocation()` - ä½ç½®æƒ…å ±ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- `formatDiagnostic()` - è¨ºæ–­æƒ…å ±ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

**å¯¾å¿œ LSP ã‚µãƒ¼ãƒãƒ¼**ï¼ˆä¸€éƒ¨ï¼‰ï¼š
- TypeScript: `typescript-language-server`
- Python: `basedpyright`, `pyright`, `ty`, `ruff`
- Go: `gopls`
- Rust: `rust-analyzer`
- C/C++: `clangd`

</details>
