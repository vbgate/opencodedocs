---
title: "初期化: Agent の記憶構築 | opencode-supermemory"
sidebarTitle: "初期化"
subtitle: "プロジェクト初期化：第一印象を確立"
description: "/supermemory-init コマンドでコードベースをスキャンし、アーキテクチャと規約を永続記憶に保存する方法を学びます。"
tags:
  - "初期化"
  - "記憶の生成"
  - "ワークフロー"
prerequisite:
  - "start-getting-started"
order: 2
---

# プロジェクト初期化：第一印象を確立

## この章で学べること

- **プロジェクトをワンクリックで理解**：Agent が新しい従業員のように、コードベースを能動的に探索し理解します。
- **長期記憶を確立**：プロジェクトの技術スタック、アーキテクチャパターン、コーディング規約を自動的に抽出し、Supermemory に保存します。
- **繰り返しの説明を排除**：毎回のセッションの開始時に「Bun を使用しています」や「すべてのコンポーネントにテストを書く必要がある」を繰り返す必要がなくなります。

## 今の課題

以下のような状況に遭遇したことはありませんか？

- **繰り返し作業**：新しいセッションを開始するたびに、プロジェクトの基本情報を伝えるのに多くの時間を費やします。
- **コンテキストの忘却**：Agent はプロジェクト固有のディレクトリ構造を頻繁に忘れ、ファイルを間違った場所に作成します。
- **規約の不統一**：Agent が書くコードのスタイルが不安定で、時には `interface`、時には `type` を使います。

## いつこの方法を使うべきか

- **プラグインのインストール直後**：opencode-supermemory を使用する最初のステップです。
- **新しいプロジェクトに着手する場合**：プロジェクトの記憶ライブラリを迅速に構築します。
- **大規模なリファクタリング後**：プロジェクトのアーキテクチャが変更された場合、Agent の認識を更新する必要があります。

## 🎒 開始前の準備

::: warning 前提条件の確認
[クイックスタート](./../getting-started/index.md) のインストールと設定の手順が完了済みで、`SUPERMEMORY_API_KEY` が正しく設定されていることを確認してください。
:::

## 基本的な考え方

`/supermemory-init` コマンドは本質的にはバイナリプログラムではなく、**慎重に設計されたプロンプト（Prompt）** です。

このコマンドを実行すると、Agent に詳細な「入職ガイド」が送信され、以下を指示します：

1. **深い調査**：`README.md`、`package.json`、Git コミット履歴などを能動的に読み込みます。
2. **構造化された分析**：プロジェクトの技術スタック、アーキテクチャパターン、暗黙の規約を識別します。
3. **永続的な保存**：`supermemory` ツールを使用して、これらの洞察をクラウドデータベースに保存します。

::: info 記憶スコープ
初期化プロセスでは 2 種類の記憶を区別します：
- **Project Scope**：現在のプロジェクトのみに有効（例：ビルドコマンド、ディレクトリ構造）。
- **User Scope**：すべてのプロジェクトに有効（例：好みのコードスタイル）。
:::

## 実践：一緒に作業しましょう

### ステップ 1：初期化コマンドを実行

OpenCode の入力ボックスに以下のコマンドを入力して送信します：

```bash
/supermemory-init
```

**理由**
これにより、定義済みのプロンプトが読み込まれ、Agent の探索モードが起動します。

**期待される出力**
Agent が返信を開始し、タスクを理解して調査手順を計画していることを示します。次のように言うかもしれません："I will start by exploring the codebase structure and configuration files..."

### ステップ 2：Agent の探索プロセスを観察

Agent は一連の操作を自動的に実行するので、あなたは見ているだけで大丈夫です。通常、以下を行います：

1. **設定ファイルの読み込み**：`package.json`、`tsconfig.json` などを読み込んで技術スタックを理解します。
2. **Git 履歴の確認**：`git log` を実行してコミット規約とアクティブな貢献者を理解します。
3. **ディレクトリ構造の探索**：`ls` または `list_files` を使用してプロジェクトレイアウトを確認します。

**出力例**：
```
[Agent] Reading package.json to identify dependencies...
[Agent] Running git log to understand commit conventions...
```

::: tip 消費のヒント
このプロセスは深い調査であり、多くの Token を消費する可能性があります（通常 50 回以上のツール呼び出し）。完了まで忍耐強くお待ちください。
:::

### ステップ 3：生成された記憶を確認

Agent が初期化完了を報告したら、実際に何を記憶したかを確認できます。以下を入力します：

```bash
/ask 現在のプロジェクトの記憶をリストアップ
```

または、生データを確認したい場合はツールを直接呼び出します：

```
supermemory(mode: "list", scope: "project")
```

**期待される出力**
Agent は一連の構造化された記憶をリストアップします。例：

| タイプ | 内容の例 |
|--- | ---|
| `project-config` | "Uses Bun runtime. Build command: bun run build" |
| `architecture` | "API routes are located in src/routes/, using Hono framework" |
| `preference` | "Strict TypeScript usage: no 'any' type allowed" |

### ステップ 4：不足箇所を補足（オプション）

Agent が重要な情報を見落とした場合（例：口頭で合意された特定のルール）、手動で補足できます：

```
覚えておいてください：このプロジェクトでは、すべての日付処理に dayjs ライブラリを使用し、ネイティブな Date は使用禁止です。
```

**期待される出力**
Agent が確認を返信し、この新しいルールを保存するために `supermemory(mode: "add")` を呼び出します。

## チェックポイント ✅

- [ ] `/supermemory-init` を実行後、Agent が自動的に探索タスクを実行しましたか？
- [ ] `list` コマンドを使用して新しく生成された記憶を確認できますか？
- [ ] 記憶内容は現在のプロジェクトの実際の状況を正確に反映していますか？

## 落とし穴の警告

::: warning 頻繁に実行しないでください
初期化は時間がかかり、多くの Token を消費するプロセスです。通常、各プロジェクトで 1 回だけ実行すれば十分です。プロジェクトに大きな変更があった場合のみ再実行が必要です。
:::

::: danger プライバシーの注意
プラグインは `<private>` タグの内容を自動的に検閲しますが、初期化プロセス中に Agent は多くのファイルを読み込みます。コードベースにハードコードされたセンシティブなキー（AWS Secret Key など）が含まれていないことを確認してください。それらは「プロジェクト設定」として記憶に保存される可能性があります。
:::

## この章のまとめ

`/supermemory-init` を通じて、私たちは「見知らぬ人」から「熟練した従業員」への変換を完了しました。これで、Agent はプロジェクトのコアアーキテクチャと規約を記憶し、今後のコーディングタスクでこれらのコンテキストを自動的に活用して、より的確な支援を提供できるようになります。

## 次の章の予告

> 次の章では **[自動コンテキスト注入メカニズム](./../../core/context-injection/index.md)** を学びます。
>
> 以下のことができるようになります：
> - Agent がセッションの開始時にこれらの記憶を「想起」する方法
> - 特定の記憶の想起をトリガーするキーワードの使用方法

---

## 付録：ソースコード参照

<details>
<summary><strong>クリックしてソースコードの場所を表示</strong></summary>

> 更新日：2026-01-23

| 機能 | ファイルパス | 行番号 |
|--- | --- | ---|
| 初期化プロンプトの定義 | [`src/cli.ts`](https://github.com/supermemoryai/opencode-supermemory/blob/main/src/cli.ts#L13-L163) | 13-163 |
| 記憶ツールの実装 | [`src/index.ts`](https://github.com/supermemoryai/opencode-supermemory/blob/main/src/index.ts#L183-L485) | 183-485 |

**重要な定数**：
- `SUPERMEMORY_INIT_COMMAND`：`/supermemory-init` コマンドの具体的なプロンプト内容を定義し、Agent に調査と記憶の方法を指示します。

</details>
