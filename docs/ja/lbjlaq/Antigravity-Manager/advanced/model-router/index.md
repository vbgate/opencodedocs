---
title: "ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°: ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒ”ãƒ³ã‚° | Antigravity-Manager"
sidebarTitle: "ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°"
subtitle: "ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼šã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒ”ãƒ³ã‚°ã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰å„ªå…ˆé †ä½ã¨ãƒ—ãƒªã‚»ãƒƒãƒˆæˆ¦ç•¥"
description: "Antigravity Tools ã®ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šã‚’å­¦ã³ã¾ã™ã€‚custom_mapping ã§ãƒ¢ãƒ‡ãƒ«åãƒãƒƒãƒ”ãƒ³ã‚°ã‚’å®Ÿç¾ã—ã€æ­£ç¢ºä¸€è‡´ã¨ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ä¸€è‡´ãƒ«ãƒ¼ãƒ«ã‚’ç†è§£ã—ã€ãƒ—ãƒªã‚»ãƒƒãƒˆã§ OpenAI/Claude ã«å¯¾å¿œã—ã€X-Mapped-Model ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚"
tags:
  - "ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°"
  - "custom_mapping"
  - "ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰"
  - "OpenAI äº’æ›"
  - "Claude äº’æ›"
prerequisite:
  - "start-proxy-and-first-client"
  - "platforms-openai"
order: 4
---
# ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼šã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒ”ãƒ³ã‚°ã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰å„ªå…ˆé †ä½ã¨ãƒ—ãƒªã‚»ãƒƒãƒˆæˆ¦ç•¥

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§æ›¸ã„ãŸ `model` ã¯ã€å¿…ãšã—ã‚‚ Antigravity Tools ãŒã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹éš›ã®ã€Œç‰©ç†ãƒ¢ãƒ‡ãƒ«ã€ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚**ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**ã®ã‚„ã‚‹ã“ã¨ã¯ã‚·ãƒ³ãƒ—ãƒ«ï¼šã€Œå¯¾å¤–çš„ã«å®‰å®šã—ãŸãƒ¢ãƒ‡ãƒ«åã€ã‚’ã€Œå†…éƒ¨çš„ã«å®Ÿéš›ã«ä½¿ã†ãƒ¢ãƒ‡ãƒ«ã€ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã€çµæœã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ `X-Mapped-Model` ã«å…¥ã‚Œã¦ã€æœŸå¾…ã©ãŠã‚Šã®ãƒ«ãƒ¼ãƒˆã‚’é€šã£ãŸã‹ã‚’ç¢ºèªã—ã‚„ã™ãã—ã¾ã™ã€‚

## ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã§ãã‚‹ã“ã¨

- UI ã§ `proxy.custom_mapping` ã‚’è¨­å®šï¼ˆæ­£ç¢ºãƒãƒƒãƒ”ãƒ³ã‚° + ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰
- 1 ã¤ã®ãƒ«ãƒ¼ãƒ«ãŒã©ã®ã‚ˆã†ã«ãƒãƒƒãƒã—ãŸã‹ã‚’æ˜ç¢ºã«èª¬æ˜ï¼ˆæ­£ç¢º > ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ > ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰
- ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã—ã€è¿…é€Ÿã« OpenAI/Claude ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«å¯¾å¿œ
- `curl -i` ã§ `X-Mapped-Model` ã‚’æ¤œè¨¼ã—ã€ã€Œãªãœç§ãŒæ€ã£ãŸãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«ãªã‚‰ãªã‹ã£ãŸã‹ã€ã‚’ç‰¹å®š

## ç¾åœ¨ã®æ‚©ã¿

- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯å¸¸ã« `gpt-4o` ã‚’æ›¸ããŸã„ãŒã€ã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§ã¯ç‰¹å®šã® Gemini ãƒ¢ãƒ‡ãƒ«ã«å®‰å®šã—ã¦è½ã¨ã—ãŸã„
- å¤šãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä»˜ããƒ¢ãƒ‡ãƒ«åï¼ˆä¾‹ï¼š`gpt-4-xxxx`ï¼‰ãŒã‚ã‚Šã€æ¯å›æ‰‹å‹•ã§ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’è¿½åŠ ã—ãŸããªã„
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯æˆåŠŸã—ãŸãŒã€å®Ÿéš›ã«ã¯ã©ã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«ãŒå‹•ã„ã¦ã„ã‚‹ã‹ä¸æ˜

## ã“ã®æ–¹æ³•ã‚’ã„ã¤ä½¿ã†ã‹

- ãƒãƒ¼ãƒ ã«ã€Œå›ºå®šã•ã‚ŒãŸå¯¾å¤–ãƒ¢ãƒ‡ãƒ«ã‚»ãƒƒãƒˆã€ã‚’æä¾›ã—ã€ã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ¢ãƒ‡ãƒ«å¤‰å‹•ã‚’ã‚·ãƒ¼ãƒ«ãƒ‰ã—ãŸã„
- è¤‡æ•°ã® OpenAI/Claude ãƒ¢ãƒ‡ãƒ«åã‚’å°‘æ•°ã®ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é«˜ã„ãƒ¢ãƒ‡ãƒ«ã«çµ±ä¸€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ãŸã„
- 401/429/0 token ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ä¸­ã€ãƒãƒƒãƒ”ãƒ³ã‚°å¾Œã®å®Ÿéš›ã®ãƒ¢ãƒ‡ãƒ«ã‚’ç¢ºèªã—ãŸã„

## ğŸ’ å§‹ã‚ã‚‹å‰ã®æº–å‚™

- ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã‚’èµ·å‹•ã§ãã€å¤–éƒ¨ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§æ­£å¸¸ã«å‹•ä½œï¼ˆã¾ãš [ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã‚’èµ·å‹•ã—ã¦æœ€åˆã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æ¥ç¶šã™ã‚‹ï¼ˆ/healthz + SDK è¨­å®šï¼‰](/ja/lbjlaq/Antigravity-Manager/start/proxy-and-first-client/) ã‚’å®Œäº†ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ï¼‰
- `curl -i` ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã‚’è¦‹ã‚‹æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã‚‹ï¼ˆå‰ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ `X-Mapped-Model` ã‚’ä½¿ç”¨ï¼‰

::: info ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ 2 ã¤ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
- **`custom_mapping`**ï¼šã‚ãªãŸã®ã€Œã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã€ã€‚ã‚­ãƒ¼ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰æ¸¡ã•ã‚Œã‚‹ãƒ¢ãƒ‡ãƒ«åï¼ˆã¾ãŸã¯ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ patternï¼‰ã€å€¤ã¯æœ€çµ‚çš„ã«ä½¿ç”¨ã™ã‚‹ãƒ¢ãƒ‡ãƒ«åï¼ˆå‡ºå…¸ï¼š`src/types/config.ts`ï¼‰ã€‚
- **ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ `*`**ï¼šãƒ¢ãƒ‡ãƒ«åã®ãƒãƒƒãƒãƒãƒƒãƒã«ä½¿ç”¨ï¼ˆä¾‹ï¼š`gpt-4*`ï¼‰ã€‚ãƒãƒƒãƒå®Ÿè£…ã¯**å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥**ã™ã‚‹ï¼ˆå‡ºå…¸ï¼š`src-tauri/src/proxy/common/model_mapping.rs`ï¼‰ã€‚
:::

## ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹éš›ã€ã¾ãš `mapped_model` ã‚’è¨ˆç®—ã—ã¾ã™ï¼š

1. ã¾ãš `custom_mapping` ã«**æ­£ç¢ºä¸€è‡´**ãŒã‚ã‚‹ã‹ç¢ºèªï¼ˆkey ãŒ `model` ã¨å®Œå…¨ä¸€è‡´ï¼‰
2. æ¬¡ã«ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ä¸€è‡´ã‚’è©¦è¡Œï¼šã€Œ**é `*` æ–‡å­—ãŒã‚ˆã‚Šå¤šã„**ã€ãƒ«ãƒ¼ãƒ«ã‚’é¸æŠï¼ˆã‚ˆã‚Šå…·ä½“çš„ãªãƒ«ãƒ¼ãƒ«ãŒå„ªå…ˆï¼‰
3. ã©ã¡ã‚‰ã‚‚ãƒãƒƒãƒã—ãªã„å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ã«é€²ã‚€ï¼ˆä¾‹ï¼šä¸€éƒ¨ã® OpenAI/Claude ãƒ¢ãƒ‡ãƒ«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‹ã‚‰å†…éƒ¨ãƒ¢ãƒ‡ãƒ«ã¸ã®ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰

ã“ã® `mapped_model` ã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ `X-Mapped-Model` ã«æ›¸ãè¾¼ã¾ã‚Œã¾ã™ï¼ˆå°‘ãªãã¨ã‚‚ OpenAI handler ã¯ãã†ã—ã¾ã™ï¼‰ã€‚ã“ã‚Œã‚’ä½¿ãˆã°ã€Œç§ãŒæ›¸ã„ãŸ model ãŒæœ€çµ‚çš„ã«ä½•ã«ãªã£ãŸã‹ã€ã‚’ç¢ºèªã§ãã¾ã™ã€‚

::: tip ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã®æ„å‘³è«–ï¼ˆå†èµ·å‹•ä¸è¦ï¼‰
ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒ“ã‚¹ãŒå®Ÿè¡Œä¸­ã®å ´åˆã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒ `update_model_mapping` ã‚’å‘¼ã³å‡ºã™ã¨ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ã™ãã« `custom_mapping` ã‚’ãƒ¡ãƒ¢ãƒªå†…ã® `RwLock` ã«æ›¸ãè¾¼ã¿ã€åŒæ™‚ã«æ°¸ç¶šåŒ–è¨­å®šã«ã‚‚ä¿å­˜ï¼ˆå‡ºå…¸ï¼š`src-tauri/src/commands/proxy.rs`ï¼›`src-tauri/src/proxy/server.rs`ï¼‰ã€‚
:::

## ã•ã‚ã€ä¸€ç·’ã«ã‚„ã£ã¦ã¿ã‚ˆã†

### ã‚¹ãƒ†ãƒƒãƒ— 1ï¼šAPI Proxy ãƒšãƒ¼ã‚¸ã§ã€Œãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã‚‹

**ãªãœ**
ãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è¨­å®šã‚¨ãƒ³ãƒˆãƒªã¯ UI å†…ã«ã‚ã‚Šã¾ã™ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰‹å‹•ã§ç·¨é›†ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

Antigravity Tools ã‚’é–‹ã â†’ `API Proxy` ãƒšãƒ¼ã‚¸ â†’ ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã€‚

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**ï¼šã‚¿ã‚¤ãƒˆãƒ«ãŒã€Œãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚»ãƒ³ã‚¿ãƒ¼ã€ã«ä¼¼ãŸã‚«ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã€å³ä¸Šã« 2 ã¤ã®ãƒœã‚¿ãƒ³ï¼šã€Œãƒ—ãƒªã‚»ãƒƒãƒˆãƒãƒƒãƒ”ãƒ³ã‚°é©ç”¨ã€ã¨ã€Œãƒãƒƒãƒ”ãƒ³ã‚°ãƒªã‚»ãƒƒãƒˆã€ï¼ˆå‡ºå…¸ï¼š`src/pages/ApiProxy.tsx`ï¼‰ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 2ï¼šã€Œæ­£ç¢ºãƒãƒƒãƒ”ãƒ³ã‚°ã€ã‚’ 1 ã¤è¿½åŠ ï¼ˆæœ€ã‚‚åˆ¶å¾¡å¯èƒ½ï¼‰

**ãªãœ**
æ­£ç¢ºãƒãƒƒãƒ”ãƒ³ã‚°ã®å„ªå…ˆé †ä½ã¯æœ€é«˜ã§ã€ã€Œã“ã® 1 ã¤ã®ãƒ¢ãƒ‡ãƒ«åã‚’ã“ã® 1 ã¤ã®ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã«è½ã¨ã—ãŸã„ã€å ´åˆã«é©ã—ã¦ã„ã¾ã™ã€‚

ã€Œãƒãƒƒãƒ”ãƒ³ã‚°è¿½åŠ ã€ã‚¨ãƒªã‚¢ã§ï¼š

- Original ã«ã¯å¯¾å¤–çš„ã«å…¬é–‹ã™ã‚‹ãƒ¢ãƒ‡ãƒ«åã‚’å…¥åŠ›ã€ä¾‹ï¼š`gpt-4o`
- Target ã¯ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¢ãƒ‡ãƒ«ã‚’é¸æŠã€ä¾‹ï¼š`gemini-3-flash`

Add ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**ï¼šãƒãƒƒãƒ”ãƒ³ã‚°ãƒªã‚¹ãƒˆã« `gpt-4o -> gemini-3-flash` ãŒè¡¨ç¤ºã•ã‚Œã€ä¿å­˜æˆåŠŸã®ãƒˆãƒ¼ã‚¹ãƒˆãŒãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 3ï¼šã€Œãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚°ã€ã‚’ 1 ã¤è¿½åŠ ï¼ˆãƒãƒƒãƒè¦†ç›–ï¼‰

**ãªãœ**
å¤šãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä»˜ããƒ¢ãƒ‡ãƒ«åãŒã‚ã‚‹å ´åˆï¼ˆä¾‹ï¼š`gpt-4-turbo`ã€`gpt-4-1106-preview`ï¼‰ã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’ä½¿ã†ã¨é‡è¤‡è¨­å®šã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã¾ã™ã€‚

ã‚‚ã† 1 ã¤ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’è¿½åŠ ï¼š

- Originalï¼š`gpt-4*`
- Targetï¼š`gemini-3-pro-high`

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**ï¼šãƒªã‚¹ãƒˆã« `gpt-4* -> gemini-3-pro-high` ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

::: warning ãƒ«ãƒ¼ãƒ«å„ªå…ˆé †ä½ã®ã€Œç½ ã€
`gpt-4o` ãŒåŒæ™‚ã«æ­£ç¢ºãƒ«ãƒ¼ãƒ« `gpt-4o` ã¨ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ«ãƒ¼ãƒ« `gpt-4*` ã®ä¸¡æ–¹ã‚’æº€ãŸã™å ´åˆã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ã¾ãšæ­£ç¢ºä¸€è‡´ã‚’å„ªå…ˆï¼ˆå‡ºå…¸ï¼š`src-tauri/src/proxy/common/model_mapping.rs`ï¼‰ã€‚
:::

### ã‚¹ãƒ†ãƒƒãƒ— 4ï¼šãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ï¼ˆè¿…é€Ÿãªäº’æ›æ€§ï¼‰

**ãªãœ**
ä¸»ãªç›®çš„ãŒã€Œä¸€èˆ¬çš„ãª OpenAI/Claude ãƒ¢ãƒ‡ãƒ«åã«è¿…é€Ÿã«å¯¾å¿œã€ã™ã‚‹å ´åˆã€ãƒ—ãƒªã‚»ãƒƒãƒˆãŒä¸€æ‹¬ã®ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ«ãƒ¼ãƒ«ã‚’ç›´æ¥å…¥åŠ›ã§ãã¾ã™ã€‚

ã€Œãƒ—ãƒªã‚»ãƒƒãƒˆãƒãƒƒãƒ”ãƒ³ã‚°é©ç”¨ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**ï¼šãƒªã‚¹ãƒˆã«è¤‡æ•°ã®ãƒ«ãƒ¼ãƒ«ãŒè¿½åŠ ã•ã‚Œã€ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ãŒå«ã¾ã‚Œã‚‹ï¼ˆå‡ºå…¸ï¼š`src/pages/ApiProxy.tsx`ï¼‰ï¼š

```json
{
  "gpt-4*": "gemini-3-pro-high",
  "gpt-4o*": "gemini-3-flash",
  "gpt-3.5*": "gemini-2.5-flash",
  "o1-*": "gemini-3-pro-high",
  "o3-*": "gemini-3-pro-high",
  "claude-3-5-sonnet-*": "claude-sonnet-4-5",
  "claude-3-opus-*": "claude-opus-4-5-thinking",
  "claude-opus-4-*": "claude-opus-4-5-thinking",
  "claude-haiku-*": "gemini-2.5-flash",
  "claude-3-haiku-*": "gemini-2.5-flash"
}
```

### ã‚¹ãƒ†ãƒƒãƒ— 5ï¼š`X-Mapped-Model` ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒæœ‰åŠ¹ã‹ç¢ºèª

**ãªãœ**
ã€Œè¨­å®šãŒæ›¸ãè¾¼ã¾ã‚ŒãŸã€ã“ã¨ã‚’ç¢ºèªã—ãŸã„ã ã‘ã§ãªãã€ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæœ¬å½“ã«ã“ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ãŸã€ã“ã¨ã‚’ç¢ºèªã—ãŸã„ã€‚æœ€ã‚‚æ‰‹é–“ã®ã‹ã‹ã‚‰ãªã„æ–¹æ³•ã¯ `X-Mapped-Model` ã‚’è¦‹ã‚‹ã“ã¨ã§ã™ã€‚

::: code-group

```bash [macOS/Linux]
curl -i http://127.0.0.1:8045/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o",
    "messages": [{"role": "user", "content": "hi"}]
  }'
```

```powershell [Windows]
$resp = Invoke-WebRequest "http://127.0.0.1:8045/v1/chat/completions" -Method Post -ContentType "application/json" -Body '{
  "model": "gpt-4o",
  "messages": [{"role": "user", "content": "hi"}]
}'
$resp.Headers["X-Mapped-Model"]
```

:::

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**ï¼šãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã« `X-Mapped-Model: ...` ãŒã‚ã‚‹ã€‚ã‚¹ãƒ†ãƒƒãƒ— 2 ã§ `gpt-4o` ã‚’ `gemini-3-flash` ã«æ­£ç¢ºãƒãƒƒãƒ”ãƒ³ã‚°ã—ãŸå ´åˆã€ã“ã“ã§å¯¾å¿œã™ã‚‹å€¤ãŒè¦‹ãˆã‚‹ã¯ãšï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€æ›¸ãè¾¼ã¿ã¯ `src-tauri/src/proxy/handlers/openai.rs` å‚ç…§ï¼‰ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 6ï¼šã€Œç´”ç²‹ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ã€ã«æˆ»ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã€custom_mapping ã‚’ãƒªã‚»ãƒƒãƒˆ

**ãªãœ**
ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ™‚ã€é€šå¸¸ã¯ã¾ãšã€Œã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«ã®å½±éŸ¿ã€ã‚’é™¤å¤–ã—ãŸã„ã€‚`custom_mapping` ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã®ãŒæœ€ã‚‚ç›´æ¥çš„ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹æ®µã€‚

ã€Œãƒãƒƒãƒ”ãƒ³ã‚°ãƒªã‚»ãƒƒãƒˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**ï¼šãƒãƒƒãƒ”ãƒ³ã‚°ãƒªã‚¹ãƒˆãŒã‚¯ãƒªã‚¢ã•ã‚Œã‚‹ã€‚ãã®å¾Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã¨ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«ã«ãƒãƒƒãƒã—ãªã„å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ã«é€²ã‚€ï¼ˆå‡ºå…¸ï¼š`src/pages/ApiProxy.tsx`ï¼›`src-tauri/src/proxy/common/model_mapping.rs`ï¼‰ã€‚

## ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ âœ…

- [ ] UI ã§ `custom_mapping` ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ /å‰Šé™¤ã§ãã‚‹
- [ ] æ­£ç¢ºãƒ«ãƒ¼ãƒ«ãŒãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ«ãƒ¼ãƒ«ã‚ˆã‚Šå„ªå…ˆã•ã‚Œã‚‹ç†ç”±ã‚’èª¬æ˜ã§ãã‚‹
- [ ] `curl -i` ã¾ãŸã¯ PowerShell ã§ `X-Mapped-Model` ã‚’èª­ã‚ã‚‹

## ã‚ˆãã‚ã‚‹è½ã¨ã—ç©´

| ã‚·ãƒŠãƒªã‚ª | ã‚ãªãŸãŒã™ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã“ã¨ï¼ˆâŒï¼‰ | æ¨å¥¨ã•ã‚Œã‚‹æ–¹æ³•ï¼ˆâœ“ï¼‰ |
|--- | --- | ---|
| ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãŒæœ‰åŠ¹ã«ãªã‚‰ãªã„ | `GPT-4*` ã‚’æ›¸ã„ã¦ `gpt-4-turbo` ã«ãƒãƒƒãƒã™ã‚‹ã“ã¨ã‚’æœŸå¾… | å°æ–‡å­—ã§ `gpt-4*` ã‚’ä½¿ç”¨ï¼›ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒãƒƒãƒã¯å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã™ã‚‹ |
| 2 ã¤ã®ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãŒã©ã¡ã‚‰ã‚‚ãƒãƒƒãƒ | `gpt-*` ã¨ `gpt-4*` ã‚’åŒæ™‚ã«æ›¸ãã€ã©ã¡ã‚‰ã«é€²ã‚€ã‹ã‚ã‹ã‚‰ãªã„ | ã‚ˆã‚Šå…·ä½“çš„ãªãƒ«ãƒ¼ãƒ«ã‚’ã‚ˆã‚Šã€Œé•·ãã€ã—ã€é `*` æ–‡å­—ãŒã‚ˆã‚Šå¤šããªã‚‹ã“ã¨ã‚’ç¢ºèª |
| ãƒ«ãƒ¼ãƒ«ã¯æ­£ã—ã„ã‚ˆã†ã«è¦‹ãˆã‚‹ãŒå¤‰ã‚ã‚‰ãªã„ | ãƒ¬ã‚¹ãƒãƒ³ã‚¹ body ã—ã‹è¦‹ãšã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã‚’è¦‹ãªã„ | `curl -i` ã§ `X-Mapped-Model` ã‚’ç¢ºèªï¼ˆã“ã‚Œã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒæ˜ç¤ºçš„ã«è¿”ã™çµæœï¼‰ |
| 2 ã¤ã®ãƒ«ãƒ¼ãƒ«ãŒã€ŒåŒã˜å…·ä½“æ€§ã€ | é `*` æ–‡å­—æ•°ãŒåŒã˜ 2 ã¤ã®ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ«ãƒ¼ãƒ«ã‚’æ›¸ã | ã“ã®ã‚ˆã†ãªè¨­å®šã¯é¿ã‘ã‚‹ã“ã¨ï¼›ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ã€ã“ã®å ´åˆã®çµæœãŒ `HashMap` ã®èµ°æŸ»é †åºã«ä¾å­˜ã—ã€ä¸å®‰å®šã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã¨èª¬æ˜ï¼ˆå‡ºå…¸ï¼š`src-tauri/src/proxy/common/model_mapping.rs`ï¼‰ |

## ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®ã¾ã¨ã‚

- `proxy.custom_mapping` ã¯ã€Œå¯¾å¤–ãƒ¢ãƒ‡ãƒ«å â†’ ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã€ã‚’åˆ¶å¾¡ã™ã‚‹ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒª
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å„ªå…ˆé †ä½ã¯ï¼šæ­£ç¢ºä¸€è‡´ > ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ä¸€è‡´ï¼ˆã‚ˆã‚Šå…·ä½“çš„ãŒå„ªå…ˆï¼‰> ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°
- `X-Mapped-Model` ã¯æœ€ã‚‚ä¿¡é ¼æ€§ã®é«˜ã„æ¤œè¨¼æ‰‹æ®µã§ã‚ã‚Šã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ™‚ã¯ã¾ãšã“ã‚Œã‚’è¦‹ã‚‹

## æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³äºˆå‘Š

> æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ **ã‚¯ã‚©ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹ï¼šQuota Protection + Smart Warmup ã®çµ„ã¿åˆã‚ã›æˆ¦è¡“**ï¼ˆå¯¾å¿œç« ï¼š`advanced-quota`ï¼‰ã‚’è§£èª¬ã—ã¾ã™ã€‚

---

## ä»˜éŒ²ï¼šã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å‚è€ƒ

<details>
<summary><strong>ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä½ç½®ã‚’å±•é–‹</strong></summary>

> æ›´æ–°æ—¥æ™‚ï¼š2026-01-23

| æ©Ÿèƒ½ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | è¡Œç•ªå· |
|--- | --- | ---|
| è¨­å®šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼š`proxy.custom_mapping`ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å‹ï¼‰ | [`src/types/config.ts`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/types/config.ts#L6-L20) | 6-20 |
| UIï¼šæ›¸ãè¾¼ã¿/ãƒªã‚»ãƒƒãƒˆ/ãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆ`update_model_mapping` å‘¼ã³å‡ºã—ï¼‰ | [`src/pages/ApiProxy.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/pages/ApiProxy.tsx#L371-L475) | 371-475 |
| UIï¼šãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚«ãƒ¼ãƒ‰ï¼ˆãƒ—ãƒªã‚»ãƒƒãƒˆãƒãƒƒãƒ”ãƒ³ã‚°é©ç”¨ / ãƒãƒƒãƒ”ãƒ³ã‚°ãƒªã‚»ãƒƒãƒˆ / ãƒªã‚¹ãƒˆã¨è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ ï¼‰ | [`src/pages/ApiProxy.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/pages/ApiProxy.tsx#L1762-L1931) | 1762-1931 |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚³ãƒãƒ³ãƒ‰ï¼šãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã¨ `custom_mapping` ã®æ°¸ç¶šåŒ– | [`src-tauri/src/commands/proxy.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/proxy.rs#L344-L365) | 344-365 |
| ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ï¼š`custom_mapping` ã‚’ `RwLock<HashMap<..>>` ã§ä¿å­˜ | [`src-tauri/src/proxy/server.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/server.rs#L16-L53) | 16-53 |
| ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼šæ­£ç¢º > ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ï¼ˆã‚ˆã‚Šå…·ä½“çš„ãŒå„ªå…ˆï¼‰> ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒƒãƒ”ãƒ³ã‚° | [`src-tauri/src/proxy/common/model_mapping.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/common/model_mapping.rs#L180-L228) | 180-228 |
| ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒãƒƒãƒï¼šè¤‡æ•° `*` ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ | [`src-tauri/src/proxy/common/model_mapping.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/common/model_mapping.rs#L134-L178) | 134-178 |
| ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…ã§ `mapped_model` ã‚’è¨ˆç®—ï¼ˆä¾‹ï¼šOpenAI handlerï¼‰ | [`src-tauri/src/proxy/handlers/openai.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/openai.rs#L154-L159) | 154-159 |
|--- | --- | ---|

**ã‚­ãƒ¼é–¢æ•°**ï¼š
- `resolve_model_route(original_model, custom_mapping)`ï¼šãƒ¢ãƒ‡ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªï¼ˆ`src-tauri/src/proxy/common/model_mapping.rs` å‚ç…§ï¼‰

</details>
