---
title: "Signal é »é“è¨­å®šï¼šåŸºæ–¼ signal-cli çš„å®‰å…¨ AI åŠ©æ‰‹æ•´åˆ | Clawdbot æ•™ç¨‹"
sidebarTitle: "é€£æ¥ç§å¯†çš„ Signal AI"
subtitle: "Signal é »é“è¨­å®šï¼šåŸºæ–¼ signal-cli çš„å®‰å…¨ AI åŠ©æ‰‹æ•´åˆ | Clawdbot æ•™ç¨‹"
description: "å­¸ç¿’å¦‚ä½•åœ¨ Clawdbot ä¸­è¨­å®š Signal é »é“ï¼ŒåŒ…æ‹¬ signal-cli å®‰è£ã€å¸³æˆ¶é€£çµã€å¤šå¸³æˆ¶æ”¯æ´ã€DM é…å°æ©Ÿåˆ¶ã€ç¾¤çµ„è¨Šæ¯å’Œå­˜å–æ§åˆ¶ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚æœ¬æ•™ç¨‹è©³ç´°è¬›è§£å¾å®‰è£åˆ°ä½¿ç”¨çš„å®Œæ•´æµç¨‹ï¼Œå¹«åŠ©ä½ å¿«é€Ÿæ­å»ºåŸºæ–¼ Signal çš„å€‹äºº AI åŠ©æ‰‹ã€‚"
tags:
  - "Signal"
  - "signal-cli"
  - "é »é“è¨­å®š"
  - "è¨Šæ¯å¹³å°"
prerequisite:
  - "start-getting-started"
order: 120
---

# Signal é »é“è¨­å®šï¼šä½¿ç”¨ signal-cli é€£æ¥å€‹äºº AI åŠ©æ‰‹ | Clawdbot æ•™ç¨‹

## å­¸å®Œä½ èƒ½åšä»€éº¼

å®Œæˆæœ¬èª²å¾Œï¼Œä½ å°‡èƒ½å¤ ï¼š

- âœ… å®‰è£ä¸¦è¨­å®š signal-cli
- âœ… åœ¨ Clawdbot ä¸­è¨­å®š Signal é »é“
- âœ… é€éç§è¨Šå’Œç¾¤çµ„èˆ‡ AI åŠ©æ‰‹äº’å‹•
- âœ… ä½¿ç”¨ DM é…å°æ©Ÿåˆ¶ä¿è­·ä½ çš„å¸³æˆ¶
- âœ… è¨­å®šå¤šå¸³æˆ¶ Signal æ”¯æ´
- âœ… ä½¿ç”¨ Signal çš„æ‰“å­—æŒ‡ç¤ºå™¨ã€å·²è®€å›åŸ·å’Œ Reactions

## ä½ ç¾åœ¨çš„å›°å¢ƒ

ä½ æƒ³åœ¨ Signal ä¸Šä½¿ç”¨ AI åŠ©æ‰‹ï¼Œä½†é‡åˆ°äº†é€™äº›å•é¡Œï¼š

- âŒ ä¸çŸ¥é“å¦‚ä½•é€£æ¥ Signal å’Œ Clawdbot
- âŒ æ“”å¿ƒéš±ç§å•é¡Œï¼Œä¸æƒ³å°‡è³‡æ–™ä¸Šå‚³åˆ°é›²ç«¯
- âŒ ä¸ç¢ºå®šå¦‚ä½•æ§åˆ¶èª°èƒ½å‘ AI åŠ©æ‰‹ç™¼é€è¨Šæ¯
- âŒ éœ€è¦åœ¨å¤šå€‹ Signal å¸³æˆ¶ä¹‹é–“åˆ‡æ›

::: info ç‚ºä»€éº¼é¸æ“‡ Signalï¼Ÿ
Signal æ˜¯ä¸€å€‹ç«¯åˆ°ç«¯åŠ å¯†çš„å³æ™‚é€šè¨Šæ‡‰ç”¨ç¨‹å¼ï¼Œæ‰€æœ‰é€šè¨Šéƒ½ç¶“éåŠ å¯†ï¼Œåªæœ‰ç™¼é€æ–¹å’Œæ¥æ”¶æ–¹èƒ½è®€å–è¨Šæ¯ã€‚Clawdbot é€é signal-cli æ•´åˆï¼Œè®“ä½ åœ¨ä¿æŒéš±ç§çš„åŒæ™‚äº«å— AI åŠ©æ‰‹çš„åŠŸèƒ½ã€‚
:::

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

**é©åˆä½¿ç”¨ Signal é »é“çš„å ´æ™¯**ï¼š

- ä½ éœ€è¦ä¸€å€‹éš±ç§å„ªå…ˆçš„é€šè¨Šç®¡é“
- ä½ çš„åœ˜éšŠæˆ–æœ‹å‹ç¾¤çµ„ä½¿ç”¨ Signal
- ä½ éœ€è¦åœ¨å€‹äººè£ç½®ä¸ŠåŸ·è¡Œ AI åŠ©æ‰‹ï¼ˆæœ¬æ©Ÿå„ªå…ˆï¼‰
- ä½ éœ€è¦é€éå—ä¿è­·çš„ DM é…å°æ©Ÿåˆ¶æ§åˆ¶å­˜å–

::: tip ç¨ç«‹çš„ Signal å¸³è™Ÿ
æ¨è–¦ä½¿ç”¨ä¸€å€‹**ç¨ç«‹çš„ Signal è™Ÿç¢¼**ä½œç‚º bot å¸³æˆ¶ï¼Œè€Œä¸æ˜¯ä½ çš„å€‹äººè™Ÿç¢¼ã€‚é€™æ¨£å¯ä»¥é¿å…è¨Šæ¯è¿´åœˆï¼ˆbot å¿½ç•¥è‡ªå·±çš„è¨Šæ¯ï¼‰ï¼Œä¸¦ä¿æŒå·¥ä½œå’Œå€‹äººé€šè¨Šåˆ†é›¢ã€‚
:::

## é–‹å§‹å‰çš„æº–å‚™

åœ¨é–‹å§‹ä¹‹å‰ï¼Œè«‹ç¢ºèªä½ å·²ç¶“å®Œæˆäº†ä»¥ä¸‹æ­¥é©Ÿï¼š

::: warning å‰ç½®æ¢ä»¶
- âœ… å·²å®Œæˆ [å¿«é€Ÿé–‹å§‹](../../start/getting-started/) æ•™ç¨‹
- âœ… Clawdbot å·²å®‰è£ä¸¦å¯ä»¥æ­£å¸¸åŸ·è¡Œ
- âœ… å·²è¨­å®šè‡³å°‘ä¸€å€‹ AI æ¨¡å‹ä¾›æ‡‰å•†ï¼ˆAnthropicã€OpenAIã€OpenRouter ç­‰ï¼‰
- âœ… å·²å®‰è£ Javaï¼ˆsignal-cli éœ€è¦ï¼‰
:::

## æ ¸å¿ƒæ€è·¯

Clawdbot çš„ Signal æ•´åˆåŸºæ–¼ **signal-cli**ï¼Œé€éä»¥ä¸‹æ–¹å¼å·¥ä½œï¼š

1. **å®ˆè­·ç¨‹åºæ¨¡å¼**ï¼šsignal-cli ä½œç‚ºå¾Œå°å®ˆè­·ç¨‹åºåŸ·è¡Œï¼Œæä¾› HTTP JSON-RPC ä»‹é¢
2. **äº‹ä»¶æµï¼ˆSSEï¼‰**ï¼šClawdbot é€é Server-Sent Eventsï¼ˆSSEï¼‰æ¥æ”¶è¨Šè™Ÿäº‹ä»¶
3. **æ¨™æº–åŒ–è¨Šæ¯**ï¼šSignal è¨Šæ¯è¢«è½‰æ›ç‚ºçµ±ä¸€çš„å…§éƒ¨æ ¼å¼ï¼Œç„¶å¾Œè·¯ç”±åˆ° AI Agent
4. **ç¢ºå®šæ€§è·¯ç”±**ï¼šæ‰€æœ‰å›è¦†éƒ½æœƒç™¼é€å›åŸå§‹è¨Šæ¯çš„ç™¼é€è€…æˆ–ç¾¤çµ„

**é—œéµè¨­è¨ˆåŸå‰‡**ï¼š

- **æœ¬æ©Ÿå„ªå…ˆ**ï¼šsignal-cli åœ¨ä½ çš„è£ç½®ä¸ŠåŸ·è¡Œï¼Œæ‰€æœ‰é€šè¨Šéƒ½ç¶“éåŠ å¯†
- **å¤šå¸³æˆ¶æ”¯æ´**ï¼šå¯ä»¥è¨­å®šå¤šå€‹ Signal å¸³æˆ¶
- **å­˜å–æ§åˆ¶**ï¼šé è¨­å•Ÿç”¨ DM é…å°æ©Ÿåˆ¶ï¼Œé™Œç”Ÿäººéœ€è¦æ‰¹å‡†æ‰èƒ½ç™¼é€è¨Šæ¯
- **ä¸Šä¸‹æ–‡éš”é›¢**ï¼šç¾¤çµ„è¨Šæ¯æœ‰ç¨ç«‹çš„æœƒè©±ä¸Šä¸‹æ–‡ï¼Œä¸æœƒèˆ‡ç§è¨Šæ··åˆ

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šå®‰è£ signal-cli

**ç‚ºä»€éº¼**
signal-cli æ˜¯ Signal çš„å‘½ä»¤åˆ—ä»‹é¢ï¼ŒClawdbot é€éå®ƒèˆ‡ Signal ç¶²è·¯é€šè¨Šã€‚

**å®‰è£æ–¹æ³•**

::: code-group

```bash [macOS (Homebrew)]
brew install signal-cli
```

```bash [Linux (Ubuntu/Debian)]
# è¨ªå• https://github.com/AsamK/signal-cli/releases æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬
# ä¸‹è¼‰æœ€æ–°çš„ signal-cli ç™¼å¸ƒåŒ…ï¼ˆå°‡ VERSION æ›¿æ›ç‚ºå¯¦éš›ç‰ˆæœ¬è™Ÿï¼‰
wget https://github.com/AsamK/signal-cli/releases/download/vVERSION/signal-cli-VERSION.tar.gz

# è§£å£“ç¸®åˆ° /opt ç›®éŒ„
sudo tar -xvf signal-cli-VERSION.tar.gz -C /opt/

# å»ºç«‹ç¬¦è™Ÿé€£çµï¼ˆå¯é¸ï¼‰
sudo ln -s /opt/signal-cli-VERSION/bin/signal-cli /usr/local/bin/signal-cli
```

```bash [Windows (WSL2)]
# åœ¨ WSL2 ä¸­ä½¿ç”¨ Linux å®‰è£æ–¹æ³•
# æ³¨æ„ï¼šWindows ä½¿ç”¨ WSL2ï¼Œsignal-cli å®‰è£éµå¾ª Linux æµç¨‹
```

:::

**é©—è­‰å®‰è£**

```bash
signal-cli --version
# æ‡‰è©²çœ‹åˆ°ï¼šsignal-cli ç‰ˆæœ¬è™Ÿï¼ˆå¦‚ 0.13.x æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šsignal-cli çš„ç‰ˆæœ¬è™Ÿè¼¸å‡ºã€‚

::: danger Java è¦æ±‚
signal-cli éœ€è¦ Java åŸ·è¡Œæ™‚ï¼ˆé€šå¸¸ç‚º Java 11 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ã€‚è«‹ç¢ºä¿å·²å®‰è£ä¸¦è¨­å®šå¥½ Javaï¼š

```bash
java -version
# æ‡‰è©²çœ‹åˆ°ï¼šopenjdk version "11.x.x" æˆ–æ›´é«˜ç‰ˆæœ¬
```

**æ³¨æ„**ï¼šå…·é«” Java ç‰ˆæœ¬è¦æ±‚è«‹åƒè€ƒ [signal-cli å®˜æ–¹æ–‡ä»¶](https://github.com/AsamK/signal-cli#readme)ã€‚
:::

### ç¬¬ 2 æ­¥ï¼šé€£çµ Signal å¸³æˆ¶

**ç‚ºä»€éº¼**
é€£çµå¸³æˆ¶å¾Œï¼Œsignal-cli æ‰èƒ½ä»£è¡¨ä½ çš„ Signal è™Ÿç¢¼ç™¼é€å’Œæ¥æ”¶è¨Šæ¯ã€‚

**æ¨è–¦åšæ³•**ï¼šä½¿ç”¨ä¸€å€‹ç¨ç«‹çš„ Signal è™Ÿç¢¼ä½œç‚º bot å¸³æˆ¶ã€‚

**é€£çµæ­¥é©Ÿ**

1. **ç”¢ç”Ÿé€£çµæŒ‡ä»¤**ï¼š

```bash
signal-cli link -n "Clawdbot"
```

`-n "Clawdbot"` æŒ‡å®šè£ç½®åç¨±ç‚º "Clawdbot"ï¼ˆä½ å¯ä»¥è‡ªè¨‚ï¼‰ã€‚

2. **æƒæ QR Code**ï¼š

åŸ·è¡ŒæŒ‡ä»¤å¾Œï¼Œçµ‚ç«¯æ©Ÿæœƒé¡¯ç¤ºä¸€å€‹ QR Codeï¼š

```
tsconfig: 2369:35 - warning - *! is deprecated: Use .nonNull().
  (deprecated-non-null)

To link your device, navigate to
  Signal Settings > Linked Devices > (+) Link New Device
  on your phone and scan the QR code displayed below.

â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
...
```

3. **åœ¨ Signal æ‰‹æ©Ÿæ‡‰ç”¨ç¨‹å¼ä¸­**ï¼š

   - é–‹å•Ÿ Signal è¨­å®š
   - é¸æ“‡"å·²é—œè¯çš„è£ç½®"ï¼ˆLinked Devicesï¼‰
   - é»æ“Š"(+) é—œè¯æ–°è£ç½®"ï¼ˆLink New Deviceï¼‰
   - æƒæçµ‚ç«¯æ©Ÿé¡¯ç¤ºçš„ QR Code

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šé€£çµæˆåŠŸå¾Œï¼Œçµ‚ç«¯æ©Ÿæœƒé¡¯ç¤ºé¡ä»¥ä¸‹çš„è¼¸å‡ºï¼š

```
INFO  Account restored (Number: +15551234567)
INFO  Configuration created at: ~/.local/share/signal-cli/data
```

::: tip å¤šè£ç½®æ”¯æ´
Signal å…è¨±æœ€å¤šé—œè¯ 4 å€‹è£ç½®ã€‚Clawdbot æœƒä½œç‚ºå…¶ä¸­ä¸€å€‹è£ç½®åŸ·è¡Œã€‚ä½ å¯ä»¥åœ¨ Signal æ‰‹æ©Ÿæ‡‰ç”¨ç¨‹å¼çš„"å·²é—œè¯çš„è£ç½®"ä¸­æŸ¥çœ‹å’Œç®¡ç†é€™äº›è£ç½®ã€‚
:::

### ç¬¬ 3 æ­¥ï¼šè¨­å®š Clawdbot çš„ Signal é »é“

**ç‚ºä»€éº¼**
è¨­å®šæª”å‘Šè¨´ Clawdbot å¦‚ä½•é€£æ¥åˆ° signal-cliï¼Œä»¥åŠå¦‚ä½•è™•ç†ä¾†è‡ª Signal çš„è¨Šæ¯ã€‚

**è¨­å®šæ–¹å¼**

æœ‰ä¸‰ç¨®è¨­å®šæ–¹å¼ï¼Œé¸æ“‡æœ€é©åˆä½ çš„ï¼š

#### æ–¹å¼ 1ï¼šå¿«é€Ÿè¨­å®šï¼ˆå–®ä¸€å¸³æˆ¶ï¼‰

é€™æ˜¯æœ€ç°¡å–®çš„æ–¹å¼ï¼Œé©åˆå–®ä¸€å¸³æˆ¶å ´æ™¯ã€‚

ç·¨è¼¯ `~/.clawdbot/clawdbot.json`ï¼š

```json
{
  "channels": {
    "signal": {
      "enabled": true,
      "account": "+15551234567",
      "cliPath": "signal-cli",
      "dmPolicy": "pairing",
      "allowFrom": ["+15557654321"]
    }
  }
}
```

**è¨­å®šèªªæ˜**ï¼š

| æ¬„ä½ | å€¼ | èªªæ˜ |
|------|-----|------|
| `enabled` | `true` | å•Ÿç”¨ Signal é »é“ |
| `account` | `"+15551234567"` | ä½ çš„ Signal å¸³è™Ÿï¼ˆE.164 æ ¼å¼ï¼‰ |
| `cliPath` | `"signal-cli"` | signal-cli æŒ‡ä»¤è·¯å¾‘ |
| `dmPolicy` | `"pairing"` | DM å­˜å–ç­–ç•¥ï¼ˆé è¨­é…å°æ¨¡å¼ï¼‰ |
| `allowFrom` | `["+15557654321"]` | å…è¨±ç™¼é€ DM çš„è™Ÿç¢¼ç™½åå–® |

#### æ–¹å¼ 2ï¼šå¤šå¸³æˆ¶è¨­å®š

å¦‚æœä½ éœ€è¦ç®¡ç†å¤šå€‹ Signal å¸³æˆ¶ï¼Œä½¿ç”¨ `accounts` ç‰©ä»¶ï¼š

```json
{
  "channels": {
    "signal": {
      "enabled": true,
      "accounts": {
        "work": {
          "account": "+15551234567",
          "name": "Work Bot",
          "httpPort": 8080,
          "dmPolicy": "pairing",
          "allowFrom": ["+15557654321"]
        },
        "personal": {
          "account": "+15559876543",
          "name": "Personal Bot",
          "httpPort": 8081,
          "dmPolicy": "allowlist",
          "allowFrom": ["*"]
        }
      }
    }
  }
}
```

**è¨­å®šèªªæ˜**ï¼š

- æ¯å€‹å¸³æˆ¶æœ‰ä¸€å€‹å”¯ä¸€çš„ IDï¼ˆå¦‚ `work`ã€`personal`ï¼‰
- æ¯å€‹å¸³æˆ¶å¯ä»¥æœ‰ä¸åŒçš„é€£æ¥åŸ ã€ç­–ç•¥å’Œæ¬Šé™
- `name` æ˜¯å¯é¸çš„é¡¯ç¤ºåç¨±ï¼Œç”¨æ–¼ CLI/UI åˆ—è¡¨

#### æ–¹å¼ 3ï¼šå¤–éƒ¨å®ˆè­·ç¨‹åºæ¨¡å¼

å¦‚æœä½ æƒ³è‡ªå·±ç®¡ç† signal-cliï¼ˆä¾‹å¦‚åœ¨å®¹å™¨ä¸­æˆ–å…±ç”¨ CPUï¼‰ï¼Œåœç”¨è‡ªå‹•å•Ÿå‹•ï¼š

```json
{
  "channels": {
    "signal": {
      "enabled": true,
      "httpUrl": "http://127.0.0.1:8080",
      "autoStart": false
    }
  }
}
```

**è¨­å®šèªªæ˜**ï¼š

- `httpUrl`ï¼šå®Œæ•´çš„å®ˆè­·ç¨‹åº URLï¼ˆè¦†è“‹ `httpHost` å’Œ `httpPort`ï¼‰
- `autoStart`ï¼šè¨­ç‚º `false` åœç”¨è‡ªå‹•å•Ÿå‹• signal-cli
- Clawdbot æœƒé€£æ¥åˆ°å·²åŸ·è¡Œçš„ signal-cli å®ˆè­·ç¨‹åº

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šè¨­å®šæª”å„²å­˜å¾Œï¼Œæ²’æœ‰èªæ³•éŒ¯èª¤ã€‚

::: tip è¨­å®šé©—è­‰
Clawdbot æœƒåœ¨å•Ÿå‹•æ™‚é©—è­‰è¨­å®šã€‚å¦‚æœè¨­å®šæœ‰èª¤ï¼Œæœƒåœ¨æ—¥èªŒä¸­é¡¯ç¤ºè©³ç´°çš„éŒ¯èª¤è³‡è¨Šã€‚
:::

### ç¬¬ 4 æ­¥ï¼šå•Ÿå‹• Gateway

**ç‚ºä»€éº¼**
å•Ÿå‹• Gateway å¾Œï¼ŒClawdbot æœƒè‡ªå‹•å•Ÿå‹• signal-cli å®ˆè­·ç¨‹åºï¼ˆé™¤éä½ åœç”¨äº† `autoStart`ï¼‰ï¼Œä¸¦é–‹å§‹ç›£è½ Signal è¨Šæ¯ã€‚

**å•Ÿå‹•æŒ‡ä»¤**

```bash
clawdbot gateway start
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šé¡ä»¥ä¸‹çš„è¼¸å‡ºï¼š

```
[INFO] Starting Clawdbot Gateway...
[INFO] Starting signal-cli daemon...
[INFO] signal-cli: INFO  Starting daemon...
[INFO] signal-cli: INFO  Daemon started on http://127.0.0.1:8080
[INFO] Signal channel ready (account: +15551234567)
[INFO] Gateway listening on ws://127.0.0.1:18789
[INFO] Clawdbot Gateway started successfully
```

**æª¢æŸ¥ Channel ç‹€æ…‹**

```bash
clawdbot channels status
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šé¡ä»¥ä¸‹çš„è¼¸å‡ºï¼š

```
Signal Channels:
  â”œâ”€ +15551234567 (Work Bot)
  â”‚   â”œâ”€ Status: Connected
  â”‚   â”œâ”€ Daemon: http://127.0.0.1:8080
  â”‚   â””â”€ Mode: Auto-start
```

### ç¬¬ 5 æ­¥ï¼šç™¼é€ç¬¬ä¸€å‰‡è¨Šæ¯

**ç‚ºä»€éº¼**
é©—è­‰è¨­å®šæ˜¯å¦æ­£ç¢ºï¼Œç¢ºä¿ Clawdbot èƒ½æ¥æ”¶å’Œè™•ç† Signal è¨Šæ¯ã€‚

**ç™¼é€è¨Šæ¯**

1. **å¾ä½ çš„ Signal æ‰‹æ©Ÿæ‡‰ç”¨ç¨‹å¼**ï¼Œç™¼é€è¨Šæ¯çµ¦ä½ çš„ bot è™Ÿç¢¼ï¼š

```
ä½ å¥½ï¼ŒClawdbotï¼
```

2. **é¦–æ¬¡è¨Šæ¯è™•ç†**ï¼š

   å¦‚æœ `dmPolicy="pairing"`ï¼ˆé è¨­ï¼‰ï¼Œé™Œç”Ÿäººæœƒæ”¶åˆ°é…å°ä»£ç¢¼ï¼š

   ```
   âŒ æœªæˆæ¬Šçš„ç™¼é€è€…

   è¦ç¹¼çºŒï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹ä»£ç¢¼æ‰¹å‡†æ­¤é…å°ï¼š

   ğŸ“ é…å°ä»£ç¢¼ï¼šABC123

   ä»£ç¢¼å°‡åœ¨ 1 å°æ™‚å¾ŒéæœŸã€‚

   è¦æ‰¹å‡†ï¼Œè«‹åŸ·è¡Œï¼š
   clawdbot pairing approve signal ABC123
   ```

3. **æ‰¹å‡†é…å°**ï¼š

   ```bash
   clawdbot pairing list signal
   ```

   åˆ—å‡ºå¾…æ‰¹å‡†çš„é…å°è«‹æ±‚ï¼š

   ```
   Pending Pairings (Signal):
     â”œâ”€ ABC123
     â”‚   â”œâ”€ Sender: +15557654321
     â”‚   â”œâ”€ UUID: uuid:123e4567-e89b-12d3-a456-426614174000
     â”‚   â””â”€ Expires: 2026-01-27 12:00:00
   ```

   æ‰¹å‡†é…å°ï¼š

   ```bash
   clawdbot pairing approve signal ABC123
   ```

4. **ç™¼é€ç¬¬äºŒå‰‡è¨Šæ¯**ï¼š

   é…å°æˆåŠŸå¾Œï¼Œå†æ¬¡ç™¼é€è¨Šæ¯ï¼š

   ```
   ä½ å¥½ï¼ŒClawdbotï¼
   ```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š

- Signal æ‰‹æ©Ÿæ‡‰ç”¨ç¨‹å¼æ”¶åˆ° AI çš„å›è¦†ï¼š
  ```
  ä½ å¥½ï¼æˆ‘æ˜¯ Clawdbotï¼Œä½ çš„å€‹äºº AI åŠ©æ‰‹ã€‚æœ‰ä»€éº¼å¯ä»¥å¹«åŠ©ä½ çš„å—ï¼Ÿ
  ```

- Gateway æ—¥èªŒé¡¯ç¤ºï¼š
  ```
  [INFO] Received Signal message from +15557654321
  [INFO] Processing message through Agent...
  [INFO] Sending Signal response to +15557654321
  ```

**æª¢æŸ¥é» âœ…**ï¼š

- [ ] signal-cli å®ˆè­·ç¨‹åºåŸ·è¡Œä¸­
- [ ] Channel ç‹€æ…‹é¡¯ç¤º "Connected"
- [ ] ç™¼é€è¨Šæ¯å¾Œæ”¶åˆ° AI å›è¦†
- [ ] Gateway æ—¥èªŒæ²’æœ‰éŒ¯èª¤è³‡è¨Š

::: danger è‡ªå·±çš„è¨Šæ¯æœƒè¢«å¿½ç•¥
å¦‚æœä½ åœ¨å€‹äºº Signal è™Ÿç¢¼ä¸ŠåŸ·è¡Œ botï¼Œbot æœƒå¿½ç•¥ä½ è‡ªå·±ç™¼é€çš„è¨Šæ¯ï¼ˆè¿´åœˆä¿è­·ï¼‰ã€‚æ¨è–¦ä½¿ç”¨ç¨ç«‹çš„ bot è™Ÿç¢¼ã€‚
:::

## è¸©å‘æé†’

### å‘ 1ï¼šsignal-cli å•Ÿå‹•å¤±æ•—

**å•é¡Œ**ï¼šsignal-cli å®ˆè­·ç¨‹åºç„¡æ³•å•Ÿå‹•

**å¯èƒ½åŸå› **ï¼š

1. Java æœªå®‰è£æˆ–ç‰ˆæœ¬éä½
2. é€£æ¥åŸ å·²è¢«ä½”ç”¨
3. signal-cli è·¯å¾‘ä¸æ­£ç¢º

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

```bash
# æª¢æŸ¥ Java ç‰ˆæœ¬
java -version

# æª¢æŸ¥é€£æ¥åŸ ä½”ç”¨
lsof -i :8080  # macOS/Linux
netstat -ano | findstr :8080  # Windows (PowerShell)

# æª¢æŸ¥ signal-cli è·¯å¾‘
which signal-cli
```

### å‘ 2ï¼šé…å°ä»£ç¢¼éæœŸ

**å•é¡Œ**ï¼šé…å°ä»£ç¢¼åœ¨ 1 å°æ™‚å¾ŒéæœŸ

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

é‡æ–°ç™¼é€è¨Šæ¯ï¼Œå–å¾—æ–°çš„é…å°ä»£ç¢¼ï¼Œä¸¦åœ¨ 1 å°æ™‚å…§æ‰¹å‡†ã€‚

### å‘ 3ï¼šç¾¤çµ„è¨Šæ¯ä¸å›æ‡‰

**å•é¡Œ**ï¼šåœ¨ Signal ç¾¤çµ„ä¸­ @ æåŠ botï¼Œä½†æ²’æœ‰å›æ‡‰

**å¯èƒ½åŸå› **ï¼š

- `groupPolicy` è¨­å®šç‚º `allowlist`ï¼Œä½†ä½ ä¸åœ¨ `groupAllowFrom` ä¸­
- Signal ä¸æ”¯æ´åŸç”Ÿ @ æåŠï¼ˆä¸åƒ Discord/Slackï¼‰

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

è¨­å®šç¾¤çµ„ç­–ç•¥ï¼š

```json
{
  "channels": {
    "signal": {
      "groupPolicy": "allowlist",
      "groupAllowFrom": ["+15557654321"]
    }
  }
}
```

æˆ–ä½¿ç”¨æŒ‡ä»¤è§¸ç™¼ï¼ˆå¦‚æœè¨­å®šäº† `commands.config: true`ï¼‰ï¼š

```
@clawdbot help
```

### å‘ 4ï¼šåª’é«”æª”æ¡ˆä¸‹è¼‰å¤±æ•—

**å•é¡Œ**ï¼šSignal è¨Šæ¯ä¸­çš„åœ–ç‰‡æˆ–é™„ä»¶ç„¡æ³•è™•ç†

**å¯èƒ½åŸå› **ï¼š

- æª”æ¡ˆå¤§å°è¶…é `mediaMaxMb` é™åˆ¶ï¼ˆé è¨­ 8MBï¼‰
- `ignoreAttachments` è¨­å®šç‚º `true`

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

```json
{
  "channels": {
    "signal": {
      "mediaMaxMb": 20,
      "ignoreAttachments": false
    }
  }
}
```

### å‘ 5ï¼šé•·è¨Šæ¯è¢«æˆªæ–·

**å•é¡Œ**ï¼šç™¼é€çš„è¨Šæ¯è¢«åˆ†å‰²æˆå¤šæ®µ

**åŸå› **ï¼šSignal æœ‰è¨Šæ¯é•·åº¦é™åˆ¶ï¼ˆé è¨­ 4000 å­—å…ƒï¼‰ï¼ŒClawdbot æœƒè‡ªå‹•åˆ†å¡Š

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

èª¿æ•´åˆ†å¡Šè¨­å®šï¼š

```json
{
  "channels": {
    "signal": {
      "textChunkLimit": 2000,
      "chunkMode": "newline"
    }
  }
}
```

`chunkMode` é¸é …ï¼š
- `length`ï¼ˆé è¨­ï¼‰ï¼šæŒ‰é•·åº¦åˆ†å¡Š
- `newline`ï¼šå…ˆæŒ‰ç©ºè¡Œåˆ†å‰²ï¼ˆæ®µè½é‚Šç•Œï¼‰ï¼Œå†æŒ‰é•·åº¦åˆ†å¡Š

## æœ¬èª²å°çµ

æœ¬èª²æˆ‘å€‘å®Œæˆäº† Signal é »é“çš„è¨­å®šå’Œä½¿ç”¨ï¼š

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- Signal é »é“åŸºæ–¼ signal-cliï¼Œé€é HTTP JSON-RPC + SSE é€šè¨Š
- æ¨è–¦ä½¿ç”¨ç¨ç«‹çš„ bot è™Ÿç¢¼ï¼Œé¿å…è¨Šæ¯è¿´åœˆ
- é è¨­å•Ÿç”¨ DM é…å°æ©Ÿåˆ¶ï¼Œä¿è­·ä½ çš„å¸³æˆ¶å®‰å…¨

**é—œéµè¨­å®š**ï¼š
- `account`ï¼šSignal å¸³è™Ÿï¼ˆE.164 æ ¼å¼ï¼‰
- `cliPath`ï¼šsignal-cli è·¯å¾‘
- `dmPolicy`ï¼šDM å­˜å–ç­–ç•¥ï¼ˆé è¨­ `pairing`ï¼‰
- `allowFrom`ï¼šDM ç™½åå–®
- `groupPolicy` / `groupAllowFrom`ï¼šç¾¤çµ„ç­–ç•¥

**å¯¦ç”¨åŠŸèƒ½**ï¼š
- å¤šå¸³æˆ¶æ”¯æ´
- ç¾¤çµ„è¨Šæ¯ï¼ˆç¨ç«‹ä¸Šä¸‹æ–‡ï¼‰
- æ‰“å­—æŒ‡ç¤ºå™¨
- å·²è®€å›åŸ·
- Reactionsï¼ˆè¡¨æƒ…åæ‡‰ï¼‰

**æ•…éšœæ’é™¤**ï¼š
- ä½¿ç”¨ `clawdbot channels status` æª¢æŸ¥ Channel ç‹€æ…‹
- ä½¿ç”¨ `clawdbot pairing list signal` æŸ¥çœ‹å¾…æ‰¹å‡†çš„é…å°è«‹æ±‚
- æŸ¥çœ‹ Gateway æ—¥èªŒå–å¾—è©³ç´°éŒ¯èª¤è³‡è¨Š

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[iMessage é »é“](../imessage/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - å¦‚ä½•åœ¨ macOS ä¸Šè¨­å®š iMessage é »é“
> - ä½¿ç”¨ BlueBubbles æ“´å……æ”¯æ´
> - iMessage çš„ç‰¹æ®ŠåŠŸèƒ½ï¼ˆå·²è®€å›åŸ·ã€æ‰“å­—æŒ‡ç¤ºå™¨ç­‰ï¼‰
> - iOS ç¯€é»æ•´åˆï¼ˆCameraã€Canvasã€Voice Wakeï¼‰

ç¹¼çºŒæ¢ç´¢ Clawdbot çš„å¼·å¤§åŠŸèƒ½å§ï¼ğŸš€

---

## é™„éŒ„ï¼šæºç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æŸ¥çœ‹æºç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-27

| åŠŸèƒ½        | æª”æ¡ˆè·¯å¾‘                                                                                    | è¡Œè™Ÿ    |
| ----------- | ------------------------------------------------------------------------------------------- | ------- |
| Signal RPC å®¢æˆ¶ç«¯ | [`src/signal/client.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/client.ts)         | 1-186   |
| Signal å®ˆè­·ç¨‹åºç®¡ç† | [`src/signal/daemon.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/daemon.ts)         | 1-85    |
| å¤šå¸³æˆ¶æ”¯æ´ | [`src/signal/accounts.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/accounts.ts)       | 1-84    |
| Signal ç›£æ§å’Œäº‹ä»¶è™•ç† | [`src/signal/monitor.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/monitor.ts)       | -       |
| è¨Šæ¯ç™¼é€ | [`src/signal/send.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/send.ts)             | -       |
| Reactions ç™¼é€ | [`src/signal/send-reactions.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/send-reactions.ts) | -       |
| Reaction ç´šåˆ¥è¨­å®š | [`src/signal/reaction-level.ts`](https://github.com/clawd/clawdbot/blob/main/src/signal/reaction-level.ts) | -       |

**è¨­å®šé¡å‹å®šç¾©**ï¼š
- `SignalAccountConfig`: [`src/config/types.signal.ts:13-87`](https://github.com/clawd/clawdbot/blob/main/src/config/types.signal.ts#L13-L87)
- `SignalConfig`: [`src/config/types.signal.ts:89-93`](https://github.com/clawd/clawdbot/blob/main/src/config/types.signal.ts#L89-L93)

**é—œéµå¸¸é‡**ï¼š
- `DEFAULT_TIMEOUT_MS = 10_000`ï¼šSignal RPC è«‹æ±‚é è¨­é€¾æ™‚æ™‚é–“ï¼ˆ10 ç§’ï¼‰ä¾†æºï¼š`src/signal/client.ts:29`
- é è¨­ HTTP é€£æ¥åŸ ï¼š`8080` ä¾†æºï¼š`src/signal/accounts.ts:59`
- é è¨­æ–‡å­—åˆ†å¡Šå¤§å°ï¼š`4000` å­—å…ƒ ä¾†æºï¼š`docs/channels/signal.md:113`

**é—œéµå‡½æ•¸**ï¼š
- `signalRpcRequest<T>()`ï¼šç™¼é€ JSON-RPC è«‹æ±‚åˆ° signal-cli ä¾†æºï¼š`src/signal/client.ts:54-90`
- `streamSignalEvents()`ï¼šé€é SSE è¨‚é–± Signal äº‹ä»¶ ä¾†æºï¼š`src/signal/client.ts:112-185`
- `spawnSignalDaemon()`ï¼šå•Ÿå‹• signal-cli å®ˆè­·ç¨‹åº ä¾†æºï¼š`src/signal/daemon.ts:50-84`
- `resolveSignalAccount()`ï¼šè§£æ Signal å¸³æˆ¶è¨­å®š ä¾†æºï¼š`src/signal/accounts.ts:49-77`
- `listEnabledSignalAccounts()`ï¼šåˆ—å‡ºå·²å•Ÿç”¨çš„ Signal å¸³æˆ¶ ä¾†æºï¼š`src/signal/accounts.ts:79-83`

</details>
