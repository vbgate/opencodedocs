---
title: "Clawdbot å®Œæ•´è¨­å®šåƒè€ƒï¼šæ‰€æœ‰è¨­å®šé …è©³è§£ | è¨­å®šæ•™å­¸"
sidebarTitle: "æŒæ§æ‰€æœ‰è¨­å®š"
subtitle: "å®Œæ•´è¨­å®šåƒè€ƒ"
description: "å­¸ç¿’ Clawdbot å®Œæ•´è¨­å®šç³»çµ±ã€‚æœ¬åƒè€ƒæ–‡ä»¶è©³ç´°èªªæ˜æ‰€æœ‰è¨­å®šç¯€ã€æ¬„ä½é¡å‹ã€é è¨­å€¼å’Œå¯¦ç”¨ç¯„ä¾‹ï¼Œå¹«åŠ©ä½ è‡ªè¨‚å’Œå„ªåŒ– Clawdbot çš„è¡Œç‚ºã€‚åŒ…æ‹¬èªè­‰è¨­å®šã€æ¨¡å‹è¨­å®šã€ç®¡é“é¸é …ã€å·¥å…·ç­–ç•¥ã€æ²™ç®±éš”é›¢ã€æœƒè©±ç®¡ç†ã€è¨Šæ¯è™•ç†ã€Cron ä»»å‹™ã€Hooksã€Gatewayã€Tailscaleã€Skillsã€Pluginsã€Node Hostã€Canvasã€Talkã€å»£æ’­ã€æ—¥èªŒã€æ›´æ–°ã€UI ç­‰ 50+ å€‹æ ¸å¿ƒè¨­å®šç¯€ï¼Œæ¶µè“‹å¾åŸºç¤åˆ°é€²éšçš„æ‰€æœ‰é¸é …ã€‚é©åˆå¿«é€ŸæŸ¥é–±æ‰€æœ‰å¯ç”¨è¨­å®šé …ï¼Œå®šä½éœ€è¦çš„è¨­å®šï¼Œæå‡ä½¿ç”¨æ•ˆç‡ï¼Œå¯¦ç¾å€‹æ€§åŒ–è¨­å®šã€‚äº†è§£æ¯å€‹è¨­å®šé …çš„ä½œç”¨å’Œå½±éŸ¿ï¼Œå¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„é¸é …ï¼Œé¿å…è¨­å®šéŒ¯èª¤ã€‚ç„¡è«–æ–°æ‰‹é‚„æ˜¯é€²éšç”¨æˆ¶ï¼Œéƒ½èƒ½å¾ä¸­å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„è¨­å®šé …ï¼Œæå‡å·¥ä½œæ•ˆç‡ï¼Œè§£æ±ºè¨­å®šé›£é¡Œã€‚è¨­å®šåƒè€ƒæ–‡ä»¶å¹«åŠ©ä½ å…¨é¢äº†è§£å’ŒæŒæ¡ Clawdbot çš„è¨­å®šç³»çµ±ï¼Œå¯¦ç¾å€‹æ€§åŒ–å®¢è£½ã€‚é©åˆæŸ¥é–±ã€é™¤éŒ¯å’Œé€²éšè¨­å®šã€‚æ¨è–¦æ‰€æœ‰ç”¨æˆ¶é–±è®€æœ¬è¨­å®šåƒè€ƒï¼Œäº†è§£æ¯å€‹è¨­å®šé …çš„å«ç¾©å’Œç”¨æ³•ï¼Œå……åˆ†åˆ©ç”¨ Clawdbot çš„å¼·å¤§åŠŸèƒ½ã€‚"
tags:
  - "è¨­å®š"
  - "åƒè€ƒ"
  - "å®Œæ•´æŒ‡å—"
order: 340
---

# å®Œæ•´è¨­å®šåƒè€ƒ

Clawdbot è®€å–é¸ç”¨çš„ JSON5 è¨­å®šæª”ï¼ˆæ”¯æ´è¨»è§£å’Œå°¾éš¨é€—è™Ÿï¼‰ï¼š`~/.clawdbot/clawdbot.json`

å¦‚æœè¨­å®šæª”éºå¤±ï¼ŒClawdbot ä½¿ç”¨å®‰å…¨çš„é è¨­å€¼ï¼ˆåµŒå…¥å¼ Pi agent + æŒ‰ç™¼é€è€…æœƒè©± + å·¥ä½œå€ `~/clawd`ï¼‰ã€‚ä½ é€šå¸¸åªéœ€è¦è¨­å®šä¾†ï¼š
- é™åˆ¶èª°å¯ä»¥è§¸ç™¼æ©Ÿå™¨äººï¼ˆ`channels.whatsapp.allowFrom`ï¼Œ`channels.telegram.allowFrom` ç­‰ï¼‰
- æ§åˆ¶ç¾¤çµ„ç™½åå–® + æåŠè¡Œç‚ºï¼ˆ`channels.whatsapp.groups`ï¼Œ`channels.telegram.groups`ï¼Œ`channels.discord.guilds`ï¼‰
- è‡ªè¨‚è¨Šæ¯å‰ç¶´ï¼ˆ`messages`ï¼‰
- è¨­å®šä»£ç†çš„å·¥ä½œå€ï¼ˆ`agents.defaults.workspace` æˆ– `agents.list[].workspace`ï¼‰
- èª¿æ•´åµŒå…¥å¼ä»£ç†é è¨­å€¼ï¼ˆ`agents.defaults`ï¼‰å’Œæœƒè©±è¡Œç‚ºï¼ˆ`session`ï¼‰
- è¨­å®šæ¯å€‹ä»£ç†çš„èº«ä»½ï¼ˆ`agents.list[].identity`ï¼‰

::: tip æ–°æ‰‹å…¥é–€ï¼Ÿ
å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡è¨­å®šï¼Œå»ºè­°å…ˆé–±è®€ [å¿«é€Ÿé–‹å§‹](../../start/getting-started/) å’Œ [åš®å°å¼è¨­å®š](../../start/onboarding-wizard/) æ•™å­¸ã€‚

## è¨­å®šé©—è­‰æ©Ÿåˆ¶

Clawdbot åªæ¥å—å®Œå…¨ç¬¦åˆ Schema çš„è¨­å®šã€‚æœªçŸ¥éµã€æ ¼å¼éŒ¯èª¤çš„é¡å‹æˆ–ç„¡æ•ˆå€¼æœƒå°è‡´ Gateway **æ‹’çµ•å•Ÿå‹•**ä»¥ç¢ºä¿å®‰å…¨ã€‚

ç•¶é©—è­‰å¤±æ•—æ™‚ï¼š
- Gateway ä¸æœƒå•Ÿå‹•
- åªå…è¨±è¨ºæ–·å‘½ä»¤ï¼ˆä¾‹å¦‚ï¼š`clawdbot doctor`ï¼Œ`clawdbot logs`ï¼Œ`clawdbot health`ï¼Œ`clawdbot status`ï¼Œ`clawdbot service`ï¼Œ`clawdbot help`ï¼‰
- åŸ·è¡Œ `clawdbot doctor` æŸ¥çœ‹ç¢ºåˆ‡çš„å•é¡Œ
- åŸ·è¡Œ `clawdbot doctor --fix`ï¼ˆæˆ– `--yes`ï¼‰æ‡‰ç”¨é·ç§»/ä¿®å¾©

::: warning è­¦å‘Š
Doctor é™¤éä½ æ˜ç¢ºé¸æ“‡ `--fix`/`--yes`ï¼Œå¦å‰‡ä¸æœƒå¯«å…¥ä»»ä½•è®Šæ›´ã€‚

## è¨­å®šæª”çµæ§‹

Clawdbot è¨­å®šæª”æ˜¯ä¸€å€‹åˆ†å±¤ç‰©ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹ä¸»è¦è¨­å®šç¯€ï¼š

```json5
{
  // æ ¸å¿ƒè¨­å®š
  meta: {},
  env: {},
  wizard: {},
  diagnostics: {},
  logging: {},
  update: {},
  
  // åŠŸèƒ½è¨­å®š
  browser: {},
  ui: {},
  auth: {},
  models: {},
  nodeHost: {},
  agents: {},
  tools: {},
  bindings: {},
  broadcast: {},
  audio: {},
  media: {},
  messages: {},
  commands: {},
  approvals: {},
  session: {},
  cron: {},
  hooks: {},
  web: {},
  channels: {},
  discovery: {},
  canvasHost: {},
  talk: {},
  gateway: {},
  skills: {},
  plugins: {}
}
```

## æ ¸å¿ƒè¨­å®š

### `meta`

è¨­å®šæª”çš„å…ƒè³‡æ–™ï¼ˆç”± CLI åš®å°è‡ªå‹•å¯«å…¥ï¼‰ã€‚

```json5
{
  meta: {
    lastTouchedVersion: "2026.1.24",
    lastTouchedAt: "2026-01-27T00:00:00.000Z"
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `lastTouchedVersion` | string | - | æœ€å¾Œä¿®æ”¹æ­¤è¨­å®šçš„ Clawdbot ç‰ˆæœ¬ |
| `lastTouchedAt` | string | - | æœ€å¾Œä¿®æ”¹æ­¤è¨­å®šçš„æ™‚é–“ï¼ˆISO 8601ï¼‰ |

### `env`

ç’°å¢ƒè®Šæ•¸è¨­å®šå’Œ shell ç’°å¢ƒåŒ¯å…¥ã€‚

```json5
{
  env: {
    shellEnv: {
      enabled: true,
      timeoutMs: 15000
    },
    vars: {
      OPENAI_API_KEY: "sk-...",
      ANTHROPIC_API_KEY: "sk-ant-..."
    },
    // ä»»æ„éµå€¼å°
    CUSTOM_VAR: "value"
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `shellEnv.enabled` | boolean | `false` | æ˜¯å¦å¾ç™»å…¥ shell åŒ¯å…¥ç’°å¢ƒè®Šæ•¸ï¼ˆåƒ…åŒ¯å…¥éºå¤±çš„éµï¼‰ |
| `shellEnv.timeoutMs` | number | `15000` | shell ç’°å¢ƒåŒ¯å…¥é€¾æ™‚ï¼ˆæ¯«ç§’ï¼‰ |
| `vars` | object | - | å…§è¯ç’°å¢ƒè®Šæ•¸ï¼ˆéµå€¼å°ï¼‰ |

**æ³¨æ„**ï¼š`vars` åƒ…åœ¨ç¨‹å¼ç’°å¢ƒè®Šæ•¸ä¸­éºå¤±å°æ‡‰éµæ™‚æ‡‰ç”¨ã€‚æ°¸é ä¸æœƒè¦†è“‹ç¾æœ‰ç’°å¢ƒè®Šæ•¸ã€‚

::: info ç’°å¢ƒè®Šæ•¸å„ªå…ˆç´š
ç¨‹å¼ç’°å¢ƒè®Šæ•¸ > `.env` æª” > `~/.clawdbot/.env` > è¨­å®šæª”ä¸­çš„ `env.vars`

### `wizard`

ç”± CLI åš®å°ï¼ˆ`onboard`ï¼Œ`configure`ï¼Œ`doctor`ï¼‰å¯«å…¥çš„å…ƒè³‡æ–™ã€‚

```json5
{
  wizard: {
    lastRunAt: "2026-01-01T00:00:00.000Z",
    lastRunVersion: "2026.1.4",
    lastRunCommit: "abc1234",
    lastRunCommand: "configure",
    lastRunMode: "local"
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `lastRunAt` | string | - | æœ€å¾ŒåŸ·è¡Œåš®å°çš„æ™‚é–“ |
| `lastRunVersion` | string | - | æœ€å¾ŒåŸ·è¡Œåš®å°æ™‚çš„ Clawdbot ç‰ˆæœ¬ |
| `lastRunCommit` | string | - | æœ€å¾ŒåŸ·è¡Œåš®å°æ™‚çš„ Git commit hash |
| `lastRunCommand` | string | - | æœ€å¾ŒåŸ·è¡Œçš„åš®å°å‘½ä»¤ |
| `lastRunMode` | string | - | åš®å°åŸ·è¡Œæ¨¡å¼ï¼ˆ`local` \| `remote`ï¼‰ |

### `diagnostics`

è¨ºæ–·é™æ¸¬å’Œ OpenTelemetry è¨­å®šã€‚

```json5
{
  diagnostics: {
    enabled: true,
    flags: ["debug-mode", "verbose-tool-calls"],
    otel: {
      enabled: false,
      endpoint: "https://otel.example.com",
      protocol: "http/protobuf",
      headers: {
        "X-Custom-Header": "value"
      },
      serviceName: "clawdbot",
      traces: true,
      metrics: true,
      logs: false,
      sampleRate: 0.1,
      flushIntervalMs: 5000
    },
    cacheTrace: {
      enabled: false,
      filePath: "/tmp/clawdbot/trace-cache.json",
      includeMessages: true,
      includePrompt: true,
      includeSystem: false
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `enabled` | boolean | `false` | å•Ÿç”¨è¨ºæ–·åŠŸèƒ½ |
| `flags` | string[] | - | è¨ºæ–·æ——æ¨™åˆ—è¡¨ |
| `otel.enabled` | boolean | `false` | å•Ÿç”¨ OpenTelemetry é™æ¸¬ |
| `otel.endpoint` | string | - | OTEL æ”¶é›†å™¨ç«¯é» |
| `otel.protocol` | string | - | OTEL å”å®šï¼ˆ`http/protobuf` \| `grpc`ï¼‰ |
| `otel.headers` | object | - | OTEL è«‹æ±‚æ¨™é ­ |
| `otel.serviceName` | string | - | OTEL æœå‹™åç¨± |
| `otel.traces` | boolean | - | æ”¶é›†è¿½è¹¤è³‡æ–™ |
| `otel.metrics` | boolean | - | æ”¶é›†æŒ‡æ¨™è³‡æ–™ |
| `otel.logs` | boolean | - | æ”¶é›†æ—¥èªŒè³‡æ–™ |
| `otel.sampleRate` | number | - | æ¡æ¨£ç‡ï¼ˆ0-1ï¼‰ |
| `otel.flushIntervalMs` | number | - | æ¸…é™¤é–“éš”ï¼ˆæ¯«ç§’ï¼‰ |
| `cacheTrace.enabled` | boolean | `false` | å•Ÿç”¨è¿½è¹¤å¿«å– |
| `cacheTrace.filePath` | string | - | è¿½è¹¤å¿«å–æª”æ¡ˆè·¯å¾‘ |
| `cacheTrace.includeMessages` | boolean | - | åœ¨å¿«å–ä¸­åŒ…å«è¨Šæ¯ |
| `cacheTrace.includePrompt` | boolean | - | åœ¨å¿«å–ä¸­åŒ…å«æç¤º |
| `cacheTrace.includeSystem` | boolean | - | åœ¨å¿«å–ä¸­åŒ…å«ç³»çµ±æç¤º |

### `logging`

æ—¥èªŒè¨­å®šã€‚

```json5
{
  logging: {
    level: "info",
    file: "/tmp/clawdbot/clawdbot.log",
    consoleLevel: "info",
    consoleStyle: "pretty",
    redactSensitive: "tools",
    redactPatterns: [
      "\\bTOKEN\\b\\s*[=:]\\s*([\"']?)([^\\s\"']+)\\1",
      "/\\bsk-[A-Za-z0-9_-]{8,}\\b/gi"
    ]
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `level` | string | `info` | æ—¥èªŒå±¤ç´šï¼ˆ`silent` \| `fatal` \| `error` \| `warn` \| `info` \| `debug` \| `trace`ï¼‰ |
| `file` | string | - | æ—¥èªŒæª”æ¡ˆè·¯å¾‘ï¼ˆé è¨­ï¼š`/tmp/clawdbot/clawdbot-YYYY-MM-DD.log`ï¼‰ |
| `consoleLevel` | string | `info` | ä¸»æ§å°æ—¥èªŒå±¤ç´šï¼ˆèˆ‡ `level` é¸é …ç›¸åŒï¼‰ |
| `consoleStyle` | string | `pretty` | ä¸»æ§å°è¼¸å‡ºæ¨£å¼ï¼ˆ`pretty` \| `compact` \| `json`ï¼‰ |
| `redactSensitive` | string | `tools` | æ•æ„Ÿè³‡è¨Šè„«æ•æ¨¡å¼ï¼ˆ`off` \| `tools`ï¼‰ |
| `redactPatterns` | string[] | - | è‡ªè¨‚è„«æ•æ­£å‰‡æ¨¡å¼ï¼ˆè¦†è“‹é è¨­å€¼ï¼‰ |

::: tip æ—¥èªŒæª”æ¡ˆè·¯å¾‘
å¦‚æœä½ æƒ³è¦ä¸€å€‹ç©©å®šçš„æ—¥èªŒæª”æ¡ˆè·¯å¾‘ï¼Œè¨­å®š `logging.file` ç‚º `/tmp/clawdbot/clawdbot.log`ï¼ˆè€Œä¸æ˜¯é è¨­çš„æ¯æ—¥è¼ªæ›¿è·¯å¾‘ï¼‰ã€‚

### `update`

æ›´æ–°é€šé“å’Œè‡ªå‹•æª¢æŸ¥è¨­å®šã€‚

```json5
{
  update: {
    channel: "stable",
    checkOnStart: true
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `channel` | string | `stable` | æ›´æ–°é€šé“ï¼ˆ`stable` \| `beta` \| `dev`ï¼‰ |
| `checkOnStart` | boolean | - | å•Ÿå‹•æ™‚æª¢æŸ¥æ›´æ–° |

### `browser`

ç€è¦½å™¨è‡ªå‹•åŒ–è¨­å®šï¼ˆåŸºæ–¼ Playwrightï¼‰ã€‚

```json5
{
  browser: {
    enabled: true,
    controlUrl: "ws://localhost:9222",
    controlToken: "secret-token",
    cdpUrl: "http://localhost:9222",
    remoteCdpTimeoutMs: 10000,
    remoteCdpHandshakeTimeoutMs: 5000,
    color: "#3b82f6",
    executablePath: "/usr/bin/google-chrome",
    headless: true,
    noSandbox: false,
    attachOnly: false,
    defaultProfile: "default",
    snapshotDefaults: {
      mode: "efficient"
    },
    profiles: {
      "profile-1": {
        cdpPort: 9222,
        cdpUrl: "http://localhost:9222",
        driver: "clawd",
        color: "#ff0000"
      }
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `enabled` | boolean | - | å•Ÿç”¨ç€è¦½å™¨å·¥å…· |
| `controlUrl` | string | - | ç€è¦½å™¨æ§åˆ¶ WebSocket URL |
| `controlToken` | string | - | ç€è¦½å™¨æ§åˆ¶èªè­‰æ¬Šæ– |
| `cdpUrl` | string | - | Chrome DevTools Protocol URL |
| `remoteCdpTimeoutMs` | number | - | é ç«¯ CDP é€¾æ™‚ï¼ˆæ¯«ç§’ï¼‰ |
| `remoteCdpHandshakeTimeoutMs` | number | - | é ç«¯ CDP æ¡æ‰‹é€¾æ™‚ï¼ˆæ¯«ç§’ï¼‰ |
| `color` | string | - | UI ä¸­é¡¯ç¤ºçš„åå…­é€²åˆ¶é¡è‰² |
| `executablePath` | string | - | ç€è¦½å™¨å¯åŸ·è¡Œæª”è·¯å¾‘ |
| `headless` | boolean | - | ç„¡é ­æ¨¡å¼ |
| `noSandbox` | boolean | - | åœç”¨æ²™ç®±ï¼ˆLinux ä¸Šéœ€è¦ï¼‰ |
| `attachOnly` | boolean | - | åƒ…é™„åŠ åˆ°ç¾æœ‰ç€è¦½å™¨å¯¦ä¾‹ |
| `defaultProfile` | string | - | é è¨­è¨­å®šæª” ID |
| `snapshotDefaults.mode` | string | - | å¿«ç…§æ¨¡å¼ï¼ˆ`efficient`ï¼‰ |
| `profiles` | object | - | è¨­å®šæª”æ˜ å°„ï¼ˆéµï¼šè¨­å®šæª”åç¨±ï¼Œå€¼ï¼šè¨­å®šï¼‰ |

**Profile è¨­å®š**ï¼š
- `cdpPort`ï¼šCDP é€£æ¥åŸ ï¼ˆ1-65535ï¼‰
- `cdpUrl`ï¼šCDP URL
- `driver`ï¼šé©…å‹•ç¨‹å¼é¡å‹ï¼ˆ`clawd` \| `extension`ï¼‰
- `color`ï¼šè¨­å®šæª”çš„åå…­é€²åˆ¶é¡è‰²

::: warning ç€è¦½å™¨ Profile å‘½å
Profile åç¨±å¿…é ˆåªåŒ…å«å°å¯«å­—æ¯ã€æ•¸å­—å’Œé€£å­—è™Ÿï¼š`^[a-z0-9-]+$`

### `ui`

UI è‡ªè¨‚è¨­å®šï¼ˆControl UIã€WebChatï¼‰ã€‚

```json5
{
  ui: {
    seamColor: "#3b82f6",
    assistant: {
      name: "Clawdbot",
      avatar: "avatars/clawdbot.png"
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `seamColor` | string | - | Seam é¡è‰²çš„åå…­é€²åˆ¶å€¼ |
| `assistant.name` | string | - | åŠ©æ‰‹é¡¯ç¤ºåç¨±ï¼ˆæœ€å¤š 50 å­—å…ƒï¼‰ |
| `assistant.avatar` | string | - | åŠ©æ‰‹é ­åƒè·¯å¾‘æˆ– URLï¼ˆæœ€å¤š 200 å­—å…ƒï¼‰ |

**é ­åƒæ”¯æ´**ï¼š
- å·¥ä½œå€ç›¸å°è·¯å¾‘ï¼ˆå¿…é ˆåœ¨ä»£ç†å·¥ä½œå€å…§ï¼‰
- `http(s)` URL
- `data:` URI

## èªè­‰è¨­å®š

### `auth`

èªè­‰è¨­å®šæª”å…ƒè³‡æ–™ï¼ˆä¸å„²å­˜é‡‘é‘°ï¼Œåƒ…æ˜ å°„è¨­å®šæª”åˆ°æä¾›è€…å’Œæ¨¡å¼ï¼‰ã€‚

```json5
{
  auth: {
    profiles: {
      "anthropic:me@example.com": {
        provider: "anthropic",
        mode: "oauth",
        email: "me@example.com"
      },
      "anthropic:work": {
        provider: "anthropic",
        mode: "api_key"
      },
      "openai:default": {
        provider: "openai",
        mode: "api_key"
      }
    },
    order: {
      anthropic: ["anthropic:me@example.com", "anthropic:work"],
      openai: ["openai:default"]
    },
    cooldowns: {
      billingBackoffHours: 24,
      billingBackoffHoursByProvider: {
        anthropic: 48
      },
      billingMaxHours: 168,
      failureWindowHours: 1
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `profiles` | object | - | è¨­å®šæª”æ˜ å°„ï¼ˆéµï¼šè¨­å®šæª” IDï¼Œå€¼ï¼šè¨­å®šï¼‰ |
| `profiles.<profileId>.provider` | string | - | æä¾›è€…åç¨± |
| `profiles.<profileId>.mode` | string | - | èªè­‰æ¨¡å¼ï¼ˆ`api_key` \| `oauth` \| `token`ï¼‰ |
| `profiles.<profileId>.email` | string | - | OAuth é›»å­éƒµä»¶ï¼ˆé¸ç”¨ï¼‰ |
| `order` | object | - | æä¾›è€…æ•…éšœè½‰ç§»é †åº |
| `cooldowns.billingBackoffHours` | number | - | è¨ˆè²»å•é¡Œé€€é¿æ™‚é•·ï¼ˆå°æ™‚ï¼‰ |
| `cooldowns.billingBackoffHoursByProvider` | object | - | æ¯å€‹æä¾›è€…çš„è¨ˆè²»é€€é¿æ™‚é•· |
| `cooldowns.billingMaxHours` | number | - | æœ€å¤§è¨ˆè²»é€€é¿æ™‚é•·ï¼ˆå°æ™‚ï¼‰ |
| `cooldowns.failureWindowHours` | number | - | å¤±æ•—è¦–çª—æ™‚é•·ï¼ˆå°æ™‚ï¼‰ |

::: tip Claude Code CLI è‡ªå‹•åŒæ­¥
Clawdbot è‡ªå‹•å°‡ OAuth æ¬Šæ–å¾ Claude Code CLI åŒæ­¥åˆ° `auth-profiles.json`ï¼ˆç•¶å­˜åœ¨æ–¼ Gateway ä¸»æ©Ÿä¸Šæ™‚ï¼‰ï¼š
- macOSï¼šKeychain å°ˆæ¡ˆ "Claude Code-credentials"ï¼ˆé¸æ“‡"å§‹çµ‚å…è¨±"ä»¥é¿å… launchd æç¤ºï¼‰
- Linux/Windowsï¼š`~/.claude/.credentials.json`

**èªè­‰å„²å­˜ä½ç½®**ï¼š
- `<agentDir>/auth-profiles.json`ï¼ˆé è¨­ï¼š`~/.clawdbot/agents/<agentId>/agent/auth-profiles.json`ï¼‰
- éºç•™åŒ¯å…¥ï¼š`~/.clawdbot/credentials/oauth.json`

**åµŒå…¥ä»£ç†åŸ·è¡Œæ™‚å¿«å–**ï¼š
- `<agentDir>/auth.json`ï¼ˆè‡ªå‹•ç®¡ç†ï¼›ä¸è¦æ‰‹å‹•ç·¨è¼¯ï¼‰

## æ¨¡å‹è¨­å®š

### `models`

AI æ¨¡å‹æä¾›è€…å’Œè¨­å®šã€‚

```json5
{
  models: {
    mode: "merge",
    providers: {
      "openai": {
        baseUrl: "https://api.openai.com/v1",
        apiKey: "${OPENAI_API_KEY}",
        auth: "api_key",
        api: "openai-completions",
        headers: {
          "X-Custom-Header": "value"
        },
        models: [
          {
            id: "gpt-4",
            name: "GPT-4",
            api: "openai-completions",
            reasoning: false,
            input: ["text"],
            cost: {
              input: 0.000005,
              output: 0.000015,
              cacheRead: 0.000001,
              cacheWrite: 0.000005
            },
            contextWindow: 128000,
            maxTokens: 4096,
            compat: {
              supportsStore: true,
              supportsDeveloperRole: true,
              supportsReasoningEffort: true,
              maxTokensField: "max_tokens"
            }
          }
        ]
      },
      "anthropic": {
        apiKey: "${ANTHROPIC_API_KEY}",
        auth: "oauth",
        api: "anthropic-messages",
        models: [
          {
            id: "claude-opus-4-5",
            name: "Claude Opus 4.5",
            api: "anthropic-messages",
            reasoning: true,
            input: ["text", "image"],
            contextWindow: 200000,
            maxTokens: 8192
          }
        ]
      },
      "ollama": {
        baseUrl: "http://localhost:11434",
        apiKey: "ollama"
      },
      "vercel-gateway": {
        apiKey: "${VERCEL_GATEWAY_API_KEY}"
      }
    },
    bedrockDiscovery: {
      enabled: false,
      region: "us-east-1",
      providerFilter: ["anthropic"],
      refreshInterval: 3600000,
      defaultContextWindow: 200000,
      defaultMaxTokens: 4096
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `mode` | string | - | æ¨¡å‹åˆä½µæ¨¡å¼ï¼ˆ`merge` \| `replace`ï¼‰ |
| `providers` | object | - | æä¾›è€…æ˜ å°„ï¼ˆéµï¼šæä¾›è€… IDï¼Œå€¼ï¼šæä¾›è€…è¨­å®šï¼‰ |
| `providers.<providerId>.baseUrl` | string | - | API åŸºç¤ URL |
| `providers.<providerId>.apiKey` | string | - | API é‡‘é‘°ï¼ˆæ”¯æ´ç’°å¢ƒè®Šæ•¸æ›¿æ›ï¼‰ |
| `providers.<providerId>.auth` | string | - | èªè­‰é¡å‹ï¼ˆ`api_key` \| `aws-sdk` \| `oauth` \| `token`ï¼‰ |
| `providers.<providerId>.api` | string | - | API é¡å‹ï¼ˆ`openai-completions` \| `openai-responses` \| `anthropic-messages` \| `google-generative-ai` \| `github-copilot` \| `bedrock-converse-stream`ï¼‰ |
| `providers.<providerId>.authHeader` | boolean | - | æ˜¯å¦ä½¿ç”¨èªè­‰æ¨™é ­ |
| `providers.<providerId>.headers` | object | - | è‡ªè¨‚ HTTP æ¨™é ­ |
| `providers.<providerId>.models` | array | - | æ¨¡å‹å®šç¾©åˆ—è¡¨ |
| `bedrockDiscovery.enabled` | boolean | `false` | å•Ÿç”¨ AWS Bedrock æ¨¡å‹ç™¼ç¾ |
| `bedrockDiscovery.region` | string | - | AWS å€åŸŸ |
| `bedrockDiscovery.providerFilter` | string[] | - | Bedrock æä¾›è€…éæ¿¾å™¨ |
| `bedrockDiscovery.refreshInterval` | number | - | é‡æ–°æ•´ç†é–“éš”ï¼ˆæ¯«ç§’ï¼‰ |
| `bedrockDiscovery.defaultContextWindow` | number | - | é è¨­ä¸Šä¸‹æ–‡è¦–çª— |
| `bedrockDiscovery.defaultMaxTokens` | number | - | é è¨­æœ€å¤§ token æ•¸ |

**æ¨¡å‹å®šç¾©æ¬„ä½**ï¼š
- `id`ï¼šæ¨¡å‹ IDï¼ˆå¿…å¡«ï¼‰
- `name`ï¼šæ¨¡å‹é¡¯ç¤ºåç¨±ï¼ˆå¿…å¡«ï¼‰
- `api`ï¼šAPI é¡å‹
- `reasoning`ï¼šæ˜¯å¦ç‚ºæ¨ç†æ¨¡å‹
- `input`ï¼šæ”¯æ´çš„è¼¸å…¥é¡å‹ï¼ˆ`text` \| `image`ï¼‰
- `cost.input`ï¼šè¼¸å…¥æˆæœ¬
- `cost.output`ï¼šè¼¸å‡ºæˆæœ¬
- `cost.cacheRead`ï¼šå¿«å–è®€å–æˆæœ¬
- `cost.cacheWrite`ï¼šå¿«å–å¯«å…¥æˆæœ¬
- `contextWindow`ï¼šä¸Šä¸‹æ–‡è¦–çª—å¤§å°
- `maxTokens`ï¼šæœ€å¤§ token æ•¸
- `compat`ï¼šç›¸å®¹æ€§æ——æ¨™

## ä»£ç†è¨­å®š

### `agents`

ä»£ç†åˆ—è¡¨å’Œé è¨­è¨­å®šã€‚

```json5
{
  agents: {
    defaults: {
      workspace: "~/clawd",
      repoRoot: "~/Projects/clawdbot",
      skipBootstrap: false,
      bootstrapMaxChars: 20000,
      userTimezone: "America/Chicago",
      timeFormat: "auto",
      model: {
        primary: "anthropic/claude-opus-4-5",
        fallbacks: [
          "openai/gpt-4",
          "vercel-gateway/gpt-4"
        ]
      },
      identity: {
        name: "Clawdbot",
        theme: "helpful sloth",
        emoji: "ğŸ¦",
        avatar: "avatars/clawdbot.png"
      },
      groupChat: {
        mentionPatterns: ["@clawd", "clawdbot"]
      },
      sandbox: {
        mode: "off",
        scope: "session",
        workspaceAccess: "rw",
        workspaceRoot: "/tmp/clawdbot-sandbox",
        docker: {
          image: "clawdbot/agent:latest",
          network: "bridge",
          env: {
            "CUSTOM_VAR": "value"
          },
          setupCommand: "npm install",
          limits: {
            memory: "512m",
            cpu: "0.5"
          }
        },
        browser: {
          enabled: true
        },
        prune: {
          enabled: true,
          keepLastN: 3
        }
      },
      subagents: {
        allowAgents: ["*"]
      },
      tools: {
        profile: "full-access",
        allow: ["read", "write", "edit", "browser"],
        deny: ["exec"]
      },
      concurrency: {
        maxConcurrentSessions: 5,
        maxConcurrentToolCalls: 10
      },
      cli: {
        backend: {
          command: "clawdbot agent",
          args: ["--thinking", "high"],
          output: "json",
          resumeOutput: "json",
          input: "stdin",
          maxPromptArgChars: 10000,
          env: {},
          clearEnv: ["NODE_ENV"],
          modelArg: "--model",
          modelAliases: {
            "opus": "anthropic/claude-opus-4-5"
          },
          sessionArg: "--session",
          sessionArgs: ["--verbose"],
          resumeArgs: [],
          sessionMode: "existing",
          sessionIdFields: ["agent", "channel", "accountId", "peer"],
          systemPromptArg: "--system-prompt",
          systemPromptMode: "append",
          systemPromptWhen: "always",
          imageArg: "--image",
          imageMode: "repeat",
          serialize: false
        }
      }
    },
    list: [
      {
        id: "main",
        default: true,
        name: "Main Assistant",
        workspace: "~/clawd-main",
        agentDir: "~/.clawdbot/agents/main/agent",
        model: "anthropic/claude-opus-4-5",
        identity: {
          name: "Samantha",
          theme: "helpful sloth",
          emoji: "ğŸ¦¥",
          avatar: "avatars/samantha.png"
        },
        groupChat: {
          mentionPatterns: ["@samantha", "sam", "assistant"]
        },
        sandbox: {
          mode: "non-main"
        },
        subagents: {
          allowAgents: ["research", "writer"]
        },
        tools: {
          allow: ["read", "write", "browser"],
          deny: []
        }
      },
      {
        id: "work",
        workspace: "~/clawd-work",
        model: {
          primary: "openai/gpt-4",
          fallbacks: []
        }
      }
    ]
  }
}
```

**é è¨­è¨­å®š**ï¼ˆ`agents.defaults`ï¼‰ï¼š

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `workspace` | string | `~/clawd` | ä»£ç†å·¥ä½œå€ç›®éŒ„ |
| `repoRoot` | string | - | Git å„²å­˜åº«æ ¹ç›®éŒ„ï¼ˆç”¨æ–¼ç³»çµ±æç¤ºï¼‰ |
| `skipBootstrap` | boolean | `false` | è·³éå·¥ä½œå€å¼•å°æª”æ¡ˆå»ºç«‹ |
| `bootstrapMaxChars` | number | `20000` | æ¯å€‹å¼•å°æª”æ¡ˆçš„æœ€å¤§å­—å…ƒæ•¸ |
| `userTimezone` | string | - | ä½¿ç”¨è€…æ™‚å€ï¼ˆç³»çµ±æç¤ºä¸Šä¸‹æ–‡ï¼‰ |
| `timeFormat` | string | `auto` | æ™‚é–“æ ¼å¼ï¼ˆ`auto` \| `12` \| `24`ï¼‰ |
| `model.primary` | string | - | ä¸»è¦æ¨¡å‹ï¼ˆå­—ä¸²å½¢å¼ï¼š`provider/model`ï¼‰ |
| `model.fallbacks` | string[] | - | æ•…éšœè½‰ç§»æ¨¡å‹åˆ—è¡¨ |
| `identity.name` | string | - | ä»£ç†åç¨± |
| `identity.theme` | string | - | ä»£ç†ä¸»é¡Œ |
| `identity.emoji` | string | - | ä»£ç† emoji |
| `identity.avatar` | string | - | ä»£ç†é ­åƒè·¯å¾‘æˆ– URL |
| `groupChat.mentionPatterns` | string[] | - | ç¾¤çµ„æåŠæ¨¡å¼ï¼ˆæ­£å‰‡ï¼‰ |
| `groupChat.historyLimit` | number | - | ç¾¤çµ„æ­·å²é™åˆ¶ |
| `sandbox.mode` | string | - | æ²™ç®±æ¨¡å¼ï¼ˆ`off` \| `non-main` \| `all`ï¼‰ |
| `sandbox.scope` | string | - | æ²™ç®±ç¯„åœï¼ˆ`session` \| `agent` \| `shared`ï¼‰ |
| `sandbox.workspaceAccess` | string | - | å·¥ä½œå€å­˜å–æ¬Šé™ï¼ˆ`none` \| `ro` \| `rw`ï¼‰ |
| `sandbox.workspaceRoot` | string | - | è‡ªè¨‚æ²™ç®±å·¥ä½œå€æ ¹ç›®éŒ„ |
| `subagents.allowAgents` | string[] | - | å…è¨±çš„å­ä»£ç† IDï¼ˆ`["*"]` = ä»»æ„ï¼‰ |
| `tools.profile` | string | - | å·¥å…·è¨­å®šæª”ï¼ˆæ‡‰ç”¨åœ¨ allow/deny ä¹‹å‰ï¼‰ |
| `tools.allow` | string[] | - | å…è¨±çš„å·¥å…·åˆ—è¡¨ |
| `tools.deny` | string[] | - | æ‹’çµ•çš„å·¥å…·åˆ—è¡¨ï¼ˆdeny å„ªå…ˆï¼‰ |
| `concurrency.maxConcurrentSessions` | number | - | æœ€å¤§ä¸¦ç™¼æœƒè©±æ•¸ |
| `concurrency.maxConcurrentToolCalls` | number | - | æœ€å¤§ä¸¦ç™¼å·¥å…·å‘¼å«æ•¸ |

**ä»£ç†åˆ—è¡¨**ï¼ˆ`agents.list`ï¼‰ï¼š

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `id` | string | å¿…å¡« | ä»£ç† IDï¼ˆç©©å®šè­˜åˆ¥ç¬¦ï¼‰ |
| `default` | boolean | `false` | æ˜¯å¦ç‚ºé è¨­ä»£ç†ï¼ˆå¤šå€‹æ™‚ç¬¬ä¸€å€‹ç²å‹ï¼‰ |
| `name` | string | - | ä»£ç†é¡¯ç¤ºåç¨± |
| `workspace` | string | `~/clawd-<agentId>` | ä»£ç†å·¥ä½œå€ï¼ˆè¦†è“‹é è¨­å€¼ï¼‰ |
| `agentDir` | string | `~/.clawdbot/agents/<agentId>/agent` | ä»£ç†ç›®éŒ„ |
| `model` | string/object | - | æ¯å€‹ä»£ç†çš„æ¨¡å‹è¨­å®š |
| `identity` | object | - | æ¯å€‹ä»£ç†çš„èº«ä»½è¨­å®š |
| `groupChat` | object | - | æ¯å€‹ä»£ç†çš„ç¾¤çµ„èŠå¤©è¨­å®š |
| `sandbox` | object | - | æ¯å€‹ä»£ç†çš„æ²™ç®±è¨­å®š |
| `subagents` | object | - | æ¯å€‹ä»£ç†çš„å­ä»£ç†è¨­å®š |
| `tools` | object | - | æ¯å€‹ä»£ç†çš„å·¥å…·é™åˆ¶ |

::: tip æ¨¡å‹è¨­å®šå½¢å¼
ä»£ç†çš„ `model` æ¬„ä½å¯ä»¥æ¡ç”¨å…©ç¨®å½¢å¼ï¼š
- **å­—ä¸²å½¢å¼**ï¼š`"provider/model"`ï¼ˆåƒ…è¦†è“‹ `primary`ï¼‰
- **ç‰©ä»¶å½¢å¼**ï¼š`{ primary, fallbacks }`ï¼ˆè¦†è“‹ `primary` å’Œ `fallbacks`ï¼›`[]` åœç”¨è©²ä»£ç†çš„å…¨åŸŸæ•…éšœè½‰ç§»ï¼‰

## ç¶å®šè¨­å®š

### `bindings`

å°‡å…¥ç«™è¨Šæ¯è·¯ç”±åˆ°ç‰¹å®šä»£ç†ã€‚

```json5
{
  bindings: [
    {
      agentId: "main",
      match: {
        channel: "whatsapp",
        accountId: "personal",
        peer: {
          kind: "dm",
          id: "+15555550123"
        },
        guildId: "123456789012345678",
        teamId: "T12345"
      }
    },
    {
      agentId: "work",
      match: {
        channel: "whatsapp",
        accountId: "biz"
      }
    },
    {
      agentId: "main",
      match: {
        channel: "telegram"
      }
    }
  ]
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `agentId` | string | å¿…å¡« | ç›®æ¨™ä»£ç† IDï¼ˆå¿…é ˆåœ¨ `agents.list` ä¸­ï¼‰ |
| `match.channel` | string | å¿…å¡« | ç¬¦åˆçš„ç®¡é“ |
| `match.accountId` | string | - | ç¬¦åˆçš„å¸³æˆ¶ IDï¼ˆ`*` = ä»»æ„å¸³æˆ¶ï¼›çœç•¥ = é è¨­å¸³æˆ¶ï¼‰ |
| `match.peer` | object | - | ç¬¦åˆçš„åŒå„•ï¼ˆå°ç­‰æ–¹ï¼‰ |
| `match.peer.kind` | string | - | åŒå„•é¡å‹ï¼ˆ`dm` \| `group` \| `channel`ï¼‰ |
| `match.peer.id` | string | - | åŒå„• ID |
| `match.guildId` | string | - | Discord ä¼ºæœå™¨ ID |
| `match.teamId` | string | - | Slack/Microsoft Teams åœ˜éšŠ ID |

**ç¢ºå®šæ€§ç¬¦åˆé †åº**ï¼š
1. `match.peer`ï¼ˆæœ€å…·é«”ï¼‰
2. `match.guildId`
3. `match.teamId`
4. `match.accountId`ï¼ˆç²¾ç¢ºï¼Œç„¡åŒå„•/guild/teamï¼‰
5. `match.accountId: "*"`ï¼ˆç®¡é“ç¯„åœï¼Œç„¡åŒå„•/guild/teamï¼‰
6. é è¨­ä»£ç†ï¼ˆ`agents.list[].default`ï¼Œå¦å‰‡ç¬¬ä¸€å€‹åˆ—è¡¨æ¢ç›®ï¼Œå¦å‰‡ `"main"`ï¼‰

åœ¨æ¯å€‹ç¬¦åˆå±¤å…§ï¼Œ`bindings` ä¸­çš„ç¬¬ä¸€å€‹ç¬¦åˆæ¢ç›®ç²å‹ã€‚

## å·¥å…·è¨­å®š

### `tools`

å·¥å…·åŸ·è¡Œå’Œå®‰å…¨ç­–ç•¥ã€‚

```json5
{
  tools: {
    exec: {
      elevated: {
        enabled: false,
        allowFrom: {
          whatsapp: ["+15555550123"],
          telegram: ["tg:123456789"]
        }
      }
    },
    browser: {
      enabled: true
    },
    agentToAgent: {
      enabled: false,
      allow: ["main", "work"]
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `exec.elevated.enabled` | boolean | `false` | å•Ÿç”¨æå‡ bashï¼ˆ`! <cmd>`ï¼‰ |
| `exec.elevated.allowFrom` | object | - | æ¯å€‹ç®¡é“çš„æå‡ allowlist |
| `browser.enabled` | boolean | - | å•Ÿç”¨ç€è¦½å™¨å·¥å…· |
| `agentToAgent.enabled` | boolean | - | å•Ÿç”¨ä»£ç†åˆ°ä»£ç†è¨Šæ¯å‚³é |
| `agentToAgent.allow` | string[] | - | å…è¨±çš„ä»£ç† ID åˆ—è¡¨ |

## å»£æ’­è¨­å®š

### `broadcast`

å°‡è¨Šæ¯ç™¼é€åˆ°å¤šå€‹ç®¡é“/ä»£ç†ã€‚

```json5
{
  broadcast: {
    strategy: "parallel",
    "+15555550123": ["main", "work"],
    "120363403215116621@g.us": ["transcribe"],
    "strategy": "sequential"
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `strategy` | string | - | å»£æ’­ç­–ç•¥ï¼ˆ`parallel` \| `sequential`ï¼‰ |
| `<peerId>` | string[] | - | å°‡è¨Šæ¯ç™¼é€åˆ°é€™äº›ä»£ç†ï¼ˆå‹•æ…‹éµï¼‰ |

::: info å»£æ’­éµ
- éµæ ¼å¼ï¼š`<peerId>`ï¼ˆä¾‹å¦‚ï¼š`+15555550123` æˆ– `"120363403215116621@g.us"`ï¼‰
- å€¼ï¼šä»£ç† ID é™£åˆ—
- ç‰¹æ®Šéµ `"strategy"`ï¼šæ§åˆ¶ä¸¦è¡Œèˆ‡é †åºåŸ·è¡Œ

## éŸ³è¨Šè¨­å®š

### `audio`

éŸ³è¨Šå’Œè½‰éŒ„è¨­å®šã€‚

```json5
{
  audio: {
    transcription: {
      enabled: true,
      provider: "whisper",
      model: "base"
    }
  }
}
```

::: info æ¬„ä½è©³æƒ…
å®Œæ•´çš„è½‰éŒ„è¨­å®šæ¬„ä½è«‹åƒè€ƒ `zod-schema.core.ts` ä¸­çš„ `TranscribeAudioSchema`ã€‚

## è¨Šæ¯è¨­å®š

### `messages`

è¨Šæ¯å‰ç¶´ã€ç¢ºèªå’Œä½‡åˆ—è¡Œç‚ºã€‚

```json5
{
  messages: {
    responsePrefix: "ğŸ¦",
    ackReaction: "ğŸ‘€",
    ackReactionScope: "group-mentions",
    removeAckAfterReply: false,
    queue: {
      mode: "collect",
      debounceMs: 1000,
      cap: 20,
      drop: "summarize",
      byChannel: {
        whatsapp: "collect",
        telegram: "collect",
        discord: "collect",
        imessage: "collect",
        webchat: "collect"
      }
    },
    inbound: {
      debounceMs: 2000,
      byChannel: {
        whatsapp: 5000,
        slack: 1500,
        discord: 1500
      }
    },
    groupChat: {
      historyLimit: 50
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `responsePrefix` | string | - | æ‰€æœ‰å‡ºç«™å›æ‡‰çš„å‰ç¶´ï¼ˆæ”¯æ´æ¨¡æ¿è®Šæ•¸ï¼‰ |
| `ackReaction` | string | - | ç¢ºèªå…¥ç«™è¨Šæ¯çš„ emoji |
| `ackReactionScope` | string | - | ä½•æ™‚ç™¼é€ç¢ºèªï¼ˆ`group-mentions` \| `group-all` \| `direct` \| `all`ï¼‰ |
| `removeAckAfterReply` | boolean | `false` | ç™¼é€å›æ‡‰å¾Œç§»é™¤ç¢ºèª |
| `queue.mode` | string | - | ä½‡åˆ—æ¨¡å¼ï¼ˆ`steer` \| `followup` \| `collect` \| `steer-backlog` \| `queue` \| `interrupt`ï¼‰ |
| `queue.debounceMs` | number | - | ä½‡åˆ—å»æŠ–å‹•ï¼ˆæ¯«ç§’ï¼‰ |
| `queue.cap` | number | - | ä½‡åˆ—ä¸Šé™ |
| `queue.drop` | string | - | ä¸Ÿæ£„ç­–ç•¥ï¼ˆ`old` \| `new` \| `summarize`ï¼‰ |
| `queue.byChannel` | object | - | æ¯å€‹ç®¡é“çš„ä½‡åˆ—æ¨¡å¼ |
| `inbound.debounceMs` | number | - | å…¥ç«™è¨Šæ¯å»æŠ–å‹•ï¼ˆæ¯«ç§’ï¼›0 åœç”¨ï¼‰ |
| `inbound.byChannel` | object | - | æ¯å€‹ç®¡é“çš„å»æŠ–å‹•æ™‚é•· |
| `groupChat.historyLimit` | number | - | ç¾¤çµ„æ­·å²ä¸Šä¸‹æ–‡é™åˆ¶ï¼ˆ0 åœç”¨ï¼‰ |

**æ¨¡æ¿è®Šæ•¸**ï¼ˆç”¨æ–¼ `responsePrefix`ï¼‰ï¼š

| è®Šæ•¸ | èªªæ˜ | ç¯„ä¾‹ |
|--- | --- | ---|
| `{model}` | ç°¡çŸ­æ¨¡å‹åç¨± | `claude-opus-4-5`ï¼Œ`gpt-4` |
| `{modelFull}` | å®Œæ•´æ¨¡å‹è­˜åˆ¥ç¬¦ | `anthropic/claude-opus-4-5` |
| `{provider}` | æä¾›è€…åç¨± | `anthropic`ï¼Œ`openai` |
| `{thinkingLevel}` | ç•¶å‰æ¨ç†å±¤ç´š | `high`ï¼Œ`low`ï¼Œ`off` |
| `{identity.name}` | ä»£ç†èº«ä»½åç¨± | ï¼ˆèˆ‡ `"auto"` æ¨¡å¼ç›¸åŒï¼‰ |

::: tip WhatsApp è‡ªæˆ‘èŠå¤©
è‡ªæˆ‘èŠå¤©å›æ‡‰é è¨­ä½¿ç”¨ `[{identity.name}]`ï¼Œå¦å‰‡ç‚º `[clawdbot]`ï¼Œé€™æ¨£ç›¸åŒè™Ÿç¢¼çš„å°è©±ä¿æŒå¯è®€æ€§ã€‚

## å‘½ä»¤è¨­å®š

### `commands`

èŠå¤©å‘½ä»¤è™•ç†è¨­å®šã€‚

```json5
{
  commands: {
    native: "auto",
    text: true,
    bash: false,
    bashForegroundMs: 2000,
    config: false,
    debug: false,
    restart: false,
    useAccessGroups: true
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `native` | string | `auto` | åŸç”Ÿå‘½ä»¤ï¼ˆ`auto` \| `true` \| `false`ï¼‰ |
| `text` | boolean | `true` | è§£æèŠå¤©è¨Šæ¯ä¸­çš„æ–œç·šå‘½ä»¤ |
| `bash` | boolean | `false` | å…è¨± `!`ï¼ˆ`/bash` çš„åˆ¥åï¼‰ |
| `bashForegroundMs` | number | `2000` | bash å‰å°è¦–çª—ï¼ˆæ¯«ç§’ï¼‰ |
| `config` | boolean | `false` | å…è¨± `/config`ï¼ˆå¯«å…¥ç£ç¢Ÿï¼‰ |
| `debug` | boolean | `false` | å…è¨± `/debug`ï¼ˆåƒ…åŸ·è¡Œæ™‚è¦†è“‹ï¼‰ |
| `restart` | boolean | `false` | å…è¨± `/restart` + Gateway é‡å•Ÿå·¥å…· |
| `useAccessGroups` | boolean | `true` | å°å‘½ä»¤å¼·åˆ¶å­˜å–ç¾¤çµ„ allowlist/ç­–ç•¥ |

::: warning bash å‘½ä»¤
`commands.bash: true` å•Ÿç”¨ `! <cmd>` ä»¥åŸ·è¡Œä¸»æ©Ÿ shell å‘½ä»¤ï¼ˆ`/bash <cmd>` ä¹Ÿä½œç‚ºåˆ¥åå·¥ä½œï¼‰ã€‚éœ€è¦ `tools.elevated.enabled` å’Œå…è¨±åˆ—è¡¨ä¸­çš„ç™¼é€è€…ã€‚

## æœƒè©±è¨­å®š

### `session`

æœƒè©±æŒçºŒåŒ–å’Œè¡Œç‚ºã€‚

```json5
{
  session: {
    activation: {
      defaultMode: "auto",
      defaultDurationMs: 900000,
      keepAlive: true
    },
    compaction: {
      auto: true,
      threshold: 0.8,
      strategy: "summary"
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `activation.defaultMode` | string | `auto` | é è¨­å•Ÿå‹•æ¨¡å¼ï¼ˆ`auto` \| `always` \| `manual`ï¼‰ |
| `activation.defaultDurationMs` | number | - | é è¨­å•Ÿå‹•æ™‚é•·ï¼ˆæ¯«ç§’ï¼‰ |
| `activation.keepAlive` | boolean | - | ä¿æŒæ´»å‹•ç‹€æ…‹ |
| `compaction.auto` | boolean | `true` | è‡ªå‹•å£“ç¸® |
| `compaction.threshold` | number | - | å£“ç¸®é–¾å€¼ï¼ˆ0-1ï¼‰ |
| `compaction.strategy` | string | - | å£“ç¸®ç­–ç•¥ |

::: info æœƒè©±å£“ç¸®
ä¸Šä¸‹æ–‡æº¢å‡ºæ™‚è‡ªå‹•å£“ç¸®ï¼Œç„¶å¾Œå¤±æ•—ã€‚åƒè¦‹ `CHANGELOG.md:122`ã€‚

## Cron è¨­å®š

### `cron`

å®šæ™‚ä»»å‹™æ’ç¨‹ã€‚

```json5
{
  cron: {
    enabled: true,
    store: "~/.clawdbot/cron.json",
    maxConcurrentRuns: 5
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `enabled` | boolean | - | å•Ÿç”¨ Cron å¼•æ“ |
| `store` | string | - | Cron å„²å­˜æª”æ¡ˆè·¯å¾‘ |
| `maxConcurrentRuns` | number | - | æœ€å¤§ä¸¦ç™¼åŸ·è¡Œæ•¸ |

## Hooks è¨­å®š

### `hooks`

Webhook å’Œäº‹ä»¶è½‰ç™¼ã€‚

```json5
{
  hooks: {
    enabled: true,
    path: "~/.clawdbot/hooks",
    token: "webhook-secret-token",
    maxBodyBytes: 1048576,
    presets: ["slack-alerts", "discord-notifications"],
    transformsDir: "~/.clawdbot/hook-transforms",
    mappings: [
      {
        pattern: "^agent:.*$",
        target: "https://hooks.example.com/agent-events",
        headers: {
          "Authorization": "Bearer ${WEBHOOK_AUTH}"
        }
      }
    ],
    gmail: {
      enabled: false,
      credentialsPath: "~/.clawdbot/gmail-credentials.json",
      subscriptionIds: ["subscription-1", "subscription-2"]
    },
    internal: {
      onMessage: "log-message",
      onToolCall: "log-tool-call",
      onError: "log-error"
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `enabled` | boolean | - | å•Ÿç”¨ Hooks |
| `path` | string | - | Hooks ç›®éŒ„è·¯å¾‘ |
| `token` | string | - | Webhook èªè­‰æ¬Šæ– |
| `maxBodyBytes` | number | - | æœ€å¤§è«‹æ±‚ä¸»é«”å¤§å°ï¼ˆä½å…ƒçµ„ï¼‰ |
| `presets` | string[] | - | é è¨­ Hook åˆ—è¡¨ |
| `transformsDir` | string | - | Hook è½‰æ›è…³æœ¬ç›®éŒ„ |
| `mappings` | array | - | è‡ªè¨‚ Hook æ˜ å°„ |
| `gmail.enabled` | boolean | - | å•Ÿç”¨ Gmail Pub/Sub |
| `gmail.credentialsPath` | string | - | Gmail æ†‘è­‰è·¯å¾‘ |
| `gmail.subscriptionIds` | string[] | - | Gmail è¨‚é–± ID åˆ—è¡¨ |
| `internal.onMessage` | string | - | è¨Šæ¯å…§éƒ¨ Hook |
| `internal.onToolCall` | string | - | å·¥å…·å‘¼å«å…§éƒ¨ Hook |
| `internal.onError` | string | - | éŒ¯èª¤å…§éƒ¨ Hook |

## ç®¡é“è¨­å®š

### `channels`

å¤šç®¡é“è¨Šæ¯æ•´åˆè¨­å®šã€‚

```json5
{
  channels: {
    whatsapp: {
      enabled: true,
      botToken: "123456:ABC...",
      dmPolicy: "pairing",
      allowFrom: ["+15555550123"],
      groups: {
        "*": { requireMention: true },
        "-1001234567890": {
          allowFrom: ["@admin"],
          systemPrompt: "Keep answers brief.",
          topics: {
            "99": {
              requireMention: false,
              skills: ["search"],
              systemPrompt: "Stay on topic."
            }
          }
        }
      },
      sendReadReceipts: true,
      textChunkLimit: 4000,
      chunkMode: "length",
      mediaMaxMb: 50,
      historyLimit: 50,
      replyToMode: "first",
      accounts: {
        default: {},
        personal: {},
        biz: {
          authDir: "~/.clawdbot/credentials/whatsapp/biz"
        }
      }
    },
    telegram: {
      enabled: true,
      botToken: "123456:ABC...",
      dmPolicy: "pairing",
      allowFrom: ["tg:123456789"],
      groups: {
        "*": { requireMention: true }
      },
      customCommands: [
        { command: "backup", description: "Git backup" },
        { command: "generate", description: "Create an image" }
      ],
      historyLimit: 50,
      replyToMode: "first",
      linkPreview: true,
      streamMode: "partial",
      draftChunk: {
        minChars: 200,
        maxChars: 800,
        breakPreference: "paragraph"
      }
    },
    discord: {
      enabled: true,
      token: "your-bot-token",
      mediaMaxMb: 8,
      allowBots: false,
      actions: {
        reactions: true,
        messages: true,
        threads: true,
        pins: true
      },
      guilds: {
        "123456789012345678": {
          requireMention: false,
          users: ["987654321098765432"],
          channels: {
            general: { allow: true },
            help: {
              allow: true,
              requireMention: true,
              users: ["987654321098765432"]
            }
          }
        }
      },
      historyLimit: 20,
      dm: {
        enabled: true,
        policy: "pairing",
        allowFrom: ["1234567890", "username"],
        groupEnabled: false,
        groupChannels: ["clawd-dm"]
      }
    },
    slack: {
      enabled: true,
      botToken: "xoxb-...",
      appToken: "xapp-...",
      channels: {
        "#general": { allow: true, requireMention: true }
      },
      historyLimit: 50,
      allowBots: false,
      reactionNotifications: "own",
      slashCommand: {
        enabled: true,
        name: "clawd",
        sessionPrefix: "slack:slash",
        ephemeral: true
      }
    },
    signal: {
      reactionNotifications: "own",
      reactionAllowlist: ["+15551234567"],
      historyLimit: 50
    },
    imessage: {
      enabled: true,
      cliPath: "imsg",
      dbPath: "~/Library/Messages/chat.db",
      dmPolicy: "pairing",
      allowFrom: ["+15555550123"],
      historyLimit: 50,
      includeAttachments: false,
      mediaMaxMb: 16
    }
  }
}
```

::: tip ç®¡é“ç‰¹å®šæ–‡ä»¶
æ¯å€‹ç®¡é“éƒ½æœ‰è©³ç´°çš„è¨­å®šé¸é …ã€‚è«‹åƒè€ƒï¼š
- [WhatsApp ç®¡é“](../../platforms/whatsapp/)
- [Telegram ç®¡é“](../../platforms/telegram/)
- [Slack ç®¡é“](../../platforms/slack/)
- [Discord ç®¡é“](../../platforms/discord/)
- [Google Chat ç®¡é“](../../platforms/googlechat/)
- [Signal ç®¡é“](../../platforms/signal/)
- [iMessage ç®¡é“](../../platforms/imessage/)

**é€šç”¨ç®¡é“æ¬„ä½**ï¼š
- `enabled`ï¼šå•Ÿç”¨ç®¡é“
- `dmPolicy`ï¼šDM ç­–ç•¥ï¼ˆ`pairing` \| `allowlist` \| `open` \| `disabled`ï¼‰
- `allowFrom`ï¼šDM allowlistï¼ˆ`pairing` æ¨¡å¼ä¸‹æœªçŸ¥ç™¼é€è€…æ”¶åˆ°é…å°ä»£ç¢¼ï¼‰
- `groupPolicy`ï¼šç¾¤çµ„ç­–ç•¥ï¼ˆ`open` \| `disabled` \| `allowlist`ï¼‰
- `historyLimit`ï¼šæ­·å²ä¸Šä¸‹æ–‡é™åˆ¶ï¼ˆ0 åœç”¨ï¼‰

## Gateway è¨­å®š

### `gateway`

Gateway WebSocket ä¼ºæœå™¨å’Œèªè­‰ã€‚

```json5
{
  gateway: {
    port: 18789,
    mode: "local",
    bind: "loopback",
    controlUi: {
      enabled: true,
      basePath: "/",
      allowInsecureAuth: false,
      dangerouslyDisableDeviceAuth: false
    },
    auth: {
      mode: "token",
      token: "secret-gateway-token",
      password: "gateway-password",
      allowTailscale: false
    },
    trustedProxies: ["127.0.0.1", "10.0.0.0/8"],
    tailscale: {
      mode: "off",
      resetOnExit: false
    },
    remote: {
      url: "ws://gateway.example.com:18789",
      transport: "ssh",
      token: "remote-token",
      password: "remote-password",
      tlsFingerprint: "SHA256:...",
      sshTarget: "user@gateway-host",
      sshIdentity: "~/.ssh/id_ed25519"
    },
    reload: {
      mode: "hot",
      debounceMs: 1000
    },
    tls: {
      enabled: false,
      autoGenerate: true,
      certPath: "/path/to/cert.pem",
      keyPath: "/path/to/key.pem",
      caPath: "/path/to/ca.pem"
    },
    http: {
      endpoints: {
        chatCompletions: {
          enabled: true
        },
        responses: {
          enabled: true,
          maxBodyBytes: 10485760,
          files: {
            allowUrl: true,
            allowedMimes: ["text/*", "application/pdf"],
            maxBytes: 10485760,
            maxChars: 100000,
            maxRedirects: 10,
            timeoutMs: 30000,
            pdf: {
              maxPages: 50,
              maxPixels: 67108864,
              minTextChars: 0
            }
          },
          images: {
            allowUrl: true,
            allowedMimes: ["image/*"],
            maxBytes: 10485760,
            maxRedirects: 5,
            timeoutMs: 30000
          }
        }
      }
    },
    nodes: {
      browser: {
        mode: "auto",
        node: "macos-1"
      },
      allowCommands: [],
      denyCommands: ["rm -rf", ":(){ :|:& };:"]
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `port` | number | `18789` | Gateway WebSocket é€£æ¥åŸ  |
| `mode` | string | `local` | Gateway æ¨¡å¼ï¼ˆ`local` \| `remote`ï¼‰ |
| `bind` | string | - | ç¶å®šä½å€ï¼ˆ`auto` \| `lan` \| `loopback` \| `custom` \| `tailnet`ï¼‰ |
| `controlUi.enabled` | boolean | - | å•Ÿç”¨æ§åˆ¶ UI |
| `controlUi.basePath` | string | - | UI åŸºç¤è·¯å¾‘ |
| `controlUi.allowInsecureAuth` | boolean | - | å…è¨±ä¸å®‰å…¨èªè­‰ |
| `auth.mode` | string | - | èªè­‰æ¨¡å¼ï¼ˆ`token` \| `password`ï¼‰ |
| `auth.token` | string | - | èªè­‰æ¬Šæ– |
| `auth.password` | string | - | èªè­‰å¯†ç¢¼ |
| `auth.allowTailscale` | boolean | - | å…è¨± Tailscale èº«ä»½é©—è­‰ |
| `tailscale.mode` | string | `off` | Tailscale æ¨¡å¼ï¼ˆ`off` \| `serve` \| `funnel`ï¼‰ |
| `tailscale.resetOnExit` | boolean | - | é€€å‡ºæ™‚é‡è¨­ Serve/Funnel |
| `remote.url` | string | - | é ç«¯ Gateway URL |
| `remote.transport` | string | - | é ç«¯å‚³è¼¸ï¼ˆ`ssh` \| `direct`ï¼‰ |
| `remote.token` | string | - | é ç«¯æ¬Šæ– |
| `remote.password` | string | - | é ç«¯å¯†ç¢¼ |
| `remote.tlsFingerprint` | string | - | é ç«¯ TLS æŒ‡ç´‹ |
| `remote.sshTarget` | string | - | SSH ç›®æ¨™ |
| `remote.sshIdentity` | string | - | SSH èº«ä»½æª”æ¡ˆè·¯å¾‘ |
| `reload.mode` | string | - | é‡è¼‰æ¨¡å¼ï¼ˆ`off` \| `restart` \| `hot` \| `hybrid`ï¼‰ |
| `reload.debounceMs` | number | - | é‡è¼‰å»æŠ–å‹•ï¼ˆæ¯«ç§’ï¼‰ |
| `tls.enabled` | boolean | - | å•Ÿç”¨ TLS |
| `tls.autoGenerate` | boolean | - | è‡ªå‹•ç”¢ç”Ÿæ†‘è­‰ |
| `nodes.browser.mode` | string | - | ç€è¦½å™¨ç¯€é»æ¨¡å¼ï¼ˆ`auto` \| `manual` \| `off`ï¼‰ |
| `nodes.allowCommands` | string[] | - | å…è¨±çš„ç¯€é»å‘½ä»¤ |
| `nodes.denyCommands` | string[] | - | æ‹’çµ•çš„ç¯€é»å‘½ä»¤ |

::: warning Tailscale ç¶å®šé™åˆ¶
å•Ÿç”¨ Serve/Funnel æ™‚ï¼Œ`gateway.bind` å¿…é ˆä¿æŒ `loopback`ï¼ˆClawdbot å¼·åˆ¶åŸ·è¡Œæ­¤è¦å‰‡ï¼‰ã€‚

## æŠ€èƒ½è¨­å®š

### `skills`

æŠ€èƒ½å¹³å°å’Œå®‰è£ã€‚

```json5
{
  skills: {
    allowBundled: ["bird", "sherpa-onnx-tts"],
    load: {
      extraDirs: ["~/custom-skills"],
      watch: true,
      watchDebounceMs: 500
    },
    install: {
      preferBrew: false,
      nodeManager: "pnpm"
    },
    entries: {
      "search": {
        enabled: true,
        apiKey: "${SEARCH_API_KEY}",
        env: {
          "SEARCH_ENGINE": "google"
        },
        config: {
          "maxResults": 10
        }
      }
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `allowBundled` | string[] | - | å…è¨±çš„å…§å»ºæŠ€èƒ½åˆ—è¡¨ |
| `load.extraDirs` | string[] | - | é¡å¤–çš„æŠ€èƒ½ç›®éŒ„ |
| `load.watch` | boolean | - | ç›£è¦–æŠ€èƒ½æª”æ¡ˆè®Šæ›´ |
| `load.watchDebounceMs` | number | - | ç›£è¦–å»æŠ–å‹•ï¼ˆæ¯«ç§’ï¼‰ |
| `install.preferBrew` | boolean | - | é¦–é¸ Homebrew å®‰è£ |
| `install.nodeManager` | string | - | ç¯€é»ç®¡ç†å™¨ï¼ˆ`npm` \| `pnpm` \| `yarn` \| `bun`ï¼‰ |
| `entries.<skillId>.enabled` | boolean | - | å•Ÿç”¨æŠ€èƒ½ |
| `entries.<skillId>.apiKey` | string | - | æŠ€èƒ½ API é‡‘é‘° |
| `entries.<skillId>.env` | object | - | æŠ€èƒ½ç’°å¢ƒè®Šæ•¸ |
| `entries.<skillId>.config` | object | - | æŠ€èƒ½è¨­å®š |

## å¤–æ›è¨­å®š

### `plugins`

å¤–æ›ç³»çµ±è¨­å®šã€‚

```json5
{
  plugins: {
    enabled: true,
    allow: ["whatsapp", "telegram", "discord"],
    deny: [],
    load: {
      paths: ["~/.clawdbot/plugins", "./custom-plugins"]
    },
    slots: {
      memory: "custom-memory-provider"
    }
  }
}
```

| æ¬„ä½ | é¡å‹ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|--- | --- | --- | ---|
| `enabled` | boolean | - | å•Ÿç”¨å¤–æ›ç³»çµ± |
| `allow` | string[] | - | å…è¨±çš„å¤–æ›åˆ—è¡¨ |
| `deny` | string[] | - | æ‹’çµ•çš„å¤–æ›åˆ—è¡¨ |
| `load.paths` | string[] | - | å¤–æ›è¼‰å…¥è·¯å¾‘ |
| `slots.memory` | string | - | è‡ªè¨‚è¨˜æ†¶é«”æä¾›ç¨‹å¼ |

## è¨­å®š Includesï¼ˆ`$include`ï¼‰

ä½¿ç”¨ `$include` æŒ‡ä»¤å°‡è¨­å®šæ‹†åˆ†ç‚ºå¤šå€‹æª”æ¡ˆã€‚

```json5
// ~/.clawdbot/clawdbot.json
{
  gateway: { port: 18789 },
  
  // åŒ…å«å–®ä¸€æª”æ¡ˆï¼ˆæ›¿æ›åŒ…å«éµçš„å€¼ï¼‰
  agents: { "$include": "./agents.json5" },
  
  // åŒ…å«å¤šå€‹æª”æ¡ˆï¼ˆæŒ‰é †åºæ·±åº¦åˆä½µï¼‰
  broadcast: { 
    "$include": [
      "./clients/mueller.json5",
      "./clients/schmidt.json5"
    ]
  }
}
```

```json5
// ~/.clawdbot/agents.json5
{
  defaults: { sandbox: { mode: "all", scope: "session" } },
  list: [
    { id: "main", workspace: "~/clawd" }
  ]
}
```

**åˆä½µè¡Œç‚º**ï¼š
- **å–®ä¸€æª”æ¡ˆ**ï¼šæ›¿æ›åŒ…å« `$include` çš„ç‰©ä»¶
- **æª”æ¡ˆé™£åˆ—**ï¼šæŒ‰é †åºæ·±åº¦åˆä½µæª”æ¡ˆï¼ˆå¾Œé¢çš„æª”æ¡ˆè¦†è“‹å‰é¢çš„ï¼‰
- **å…„å¼Ÿéµ**ï¼šåœ¨åŒ…å«ä¹‹å¾Œåˆä½µå…„å¼Ÿéµï¼ˆè¦†è“‹åŒ…å«çš„å€¼ï¼‰
- **å…„å¼Ÿéµ + é™£åˆ—/åŸºæœ¬é¡å‹**ï¼šä¸æ”¯æ´ï¼ˆåŒ…å«çš„å…§å®¹å¿…é ˆæ˜¯ç‰©ä»¶ï¼‰

**è·¯å¾‘è§£æ**ï¼š
- **ç›¸å°è·¯å¾‘**ï¼šç›¸å°æ–¼åŒ…å«æª”æ¡ˆè§£æ
- **çµ•å°è·¯å¾‘**ï¼šæŒ‰åŸæ¨£ä½¿ç”¨
- **çˆ¶ç›®éŒ„**ï¼š`../` å¼•ç”¨æŒ‰é æœŸå·¥ä½œ

**å·¢ç‹€åŒ…å«**ï¼š
åŒ…å«çš„æª”æ¡ˆæœ¬èº«å¯ä»¥åŒ…å« `$include` æŒ‡ä»¤ï¼ˆæœ€å¤š 10 å±¤æ·±åº¦ï¼‰ã€‚

## ç’°å¢ƒè®Šæ•¸æ›¿æ›

ä½ å¯ä»¥åœ¨ä»»ä½•è¨­å®šå­—ä¸²å€¼ä¸­ç›´æ¥ä½¿ç”¨ `${VAR_NAME}` èªæ³•å¼•ç”¨ç’°å¢ƒè®Šæ•¸ã€‚è®Šæ•¸åœ¨è¨­å®šè¼‰å…¥æ™‚æ›¿æ›ï¼Œåœ¨é©—è­‰ä¹‹å‰ã€‚

```json5
{
  models: {
    providers: {
      "vercel-gateway": {
        apiKey: "${VERCEL_GATEWAY_API_KEY}"
      }
    }
  },
  gateway: {
    auth: {
      token: "${CLAWDBOT_GATEWAY_TOKEN}"
    }
  }
}
```

**è¦å‰‡**ï¼š
- åªç¬¦åˆå¤§å¯«ç’°å¢ƒè®Šæ•¸åç¨±ï¼š`[A-Z_][A-Z0-9_]*`
- éºå¤±æˆ–ç©ºçš„ç’°å¢ƒè®Šæ•¸åœ¨è¨­å®šè¼‰å…¥æ™‚æ‹‹å‡ºéŒ¯èª¤
- ä½¿ç”¨ `$${VAR}` è·³è„«ä»¥è¼¸å‡ºå­—é¢é‡ `${VAR}`
- é©ç”¨æ–¼ `$include`ï¼ˆåŒ…å«çš„æª”æ¡ˆä¹Ÿç²å–æ›¿æ›ï¼‰

::: warning éºå¤±è®Šæ•¸
éºå¤±æˆ–ç©ºçš„ç’°å¢ƒè®Šæ•¸æœƒåœ¨è¨­å®šè¼‰å…¥æ™‚æ‹‹å‡ºéŒ¯èª¤ã€‚

## è¨­å®šé©—è­‰å’Œè¨ºæ–·

ç•¶è¨­å®šé©—è­‰å¤±æ•—æ™‚ï¼Œä½¿ç”¨ `clawdbot doctor` æŸ¥çœ‹ç¢ºåˆ‡çš„å•é¡Œã€‚

```bash
## è¨ºæ–·è¨­å®š
clawdbot doctor

## è‡ªå‹•ä¿®å¾©å•é¡Œï¼ˆéœ€æ‰‹å‹•ç¢ºèªï¼‰
clawdbot doctor --fix

## è‡ªå‹•ä¿®å¾©ï¼ˆè·³éç¢ºèªï¼‰
clawdbot doctor --yes
```

**è¨ºæ–·åŠŸèƒ½**ï¼š
- åµæ¸¬æœªçŸ¥è¨­å®šéµ
- é©—è­‰è³‡æ–™é¡å‹
- åµæ¸¬éºå¤±çš„å¿…å¡«æ¬„ä½
- æ‡‰ç”¨è¨­å®šé·ç§»
- åµæ¸¬ä¸å®‰å…¨çš„ DM ç­–ç•¥
- é©—è­‰ç®¡é“è¨­å®š

## è¨­å®šæª”è·¯å¾‘

| æª”æ¡ˆ | è·¯å¾‘ | èªªæ˜ |
|--- | --- | ---|
| ä¸»è¨­å®š | `~/.clawdbot/clawdbot.json` | ä¸»è¨­å®šæª” |
| ç’°å¢ƒè®Šæ•¸ | `~/.clawdbot/.env` | å…¨åŸŸç’°å¢ƒè®Šæ•¸ |
| å·¥ä½œå€ç’°å¢ƒ | `~/clawd/.env` | å·¥ä½œå€ç’°å¢ƒè®Šæ•¸ |
| èªè­‰è¨­å®šæª” | `<agentDir>/auth-profiles.json` | èªè­‰è¨­å®šæª” |
| åŸ·è¡Œæ™‚å¿«å– | `<agentDir>/auth.json` | åµŒå…¥ä»£ç†åŸ·è¡Œæ™‚å¿«å– |
| éºç•™ OAuth | `~/.clawdbot/credentials/oauth.json` | éºç•™ OAuth åŒ¯å…¥ |
| Cron å„²å­˜ | `~/.clawdbot/cron.json` | Cron ä»»å‹™å„²å­˜ |
| Hooks è·¯å¾‘ | `~/.clawdbot/hooks` | Hooks ç›®éŒ„ |

---

## æœ¬èª²å°çµ

æœ¬æ•™å­¸è©³ç´°ä»‹ç´¹äº† Clawdbot çš„å®Œæ•´è¨­å®šç³»çµ±ï¼ŒåŒ…æ‹¬ï¼š

- âœ… è¨­å®šæª”çµæ§‹å’Œé©—è­‰æ©Ÿåˆ¶
- âœ… æ‰€æœ‰æ ¸å¿ƒè¨­å®šç¯€ï¼ˆèªè­‰ã€ä»£ç†ã€ç®¡é“ã€æœƒè©±ã€å·¥å…·ã€Cronã€Hooks ç­‰ï¼‰
- âœ… ç’°å¢ƒè®Šæ•¸æ›¿æ›å’Œè¨­å®šå„ªå…ˆç´š
- âœ… å¸¸è¦‹è¨­å®šç¯„ä¾‹å’Œæœ€ä½³å¯¦å‹™
- âœ… è¨­å®šæª”è·¯å¾‘å’Œå„²å­˜ä½ç½®

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[Gateway WebSocket API å”å®š](./api-protocol/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - WebSocket é€£ç·šæ¡æ‰‹å’Œèªè­‰
> - è¨Šæ¯å¹€æ ¼å¼ï¼ˆè«‹æ±‚ã€å›æ‡‰ã€äº‹ä»¶ï¼‰
> - æ ¸å¿ƒæ–¹æ³•åƒè€ƒå’Œå‘¼å«ç¯„ä¾‹
> - æ¬Šé™ç³»çµ±å’Œè§’è‰²ç®¡ç†
> - éŒ¯èª¤è™•ç†å’Œé‡è©¦ç­–ç•¥

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æŸ¥çœ‹åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-27

| è¨­å®šç¯€ | æª”æ¡ˆè·¯å¾‘ | è¡Œè™Ÿ |
|--- | --- | ---|
| ä¸» Schema | [`src/config/zod-schema.ts`](https://github.com/moltbot/moltbot/blob/main/src/config/zod-schema.ts) | 1-556 |
| æ ¸å¿ƒ Schema | [`src/config/zod-schema.core.ts`](https://github.com/moltbot/moltbot/blob/main/src/config/zod-schema.core.ts) | 1-300 |
| ä»£ç† Schema | [`src/config/zod-schema.agents.ts`](https://github.com/moltbot/moltbot/blob/main/src/config/zod-schema.agents.ts) | 1-54 |
| ç®¡é“ Schema | [`src/config/zod-schema.channels.ts`](https://github.com/moltbot/moltbot/blob/main/src/config/zod-schema.channels.ts) | 1-11 |
| æœƒè©± Schema | [`src/config/zod-schema.session.ts`](https://github.com/moltbot/moltbot/blob/main/src/config/zod-schema.session.ts) | - |
| å·¥å…· Schema | [`src/config/zod-schema.agent-runtime.ts`](https://github.com/moltbot/moltbot/blob/main/src/config/zod-schema.agent-runtime.ts) | - |
| Hooks Schema | [`src/config/zod-schema.hooks.ts`](https://github.com/moltbot/moltbot/blob/main/src/config/zod-schema.hooks.ts) | - |
| æä¾›è€… Schema | [`src/config/zod-schema.providers.ts`](https://github.com/moltbot/moltbot/blob/main/src/config/zod-schema.providers.ts) | - |
| è¨­å®šæ–‡ä»¶ | [`docs/gateway/configuration.md`](https://github.com/moltbot/moltbot/blob/main/docs/gateway/configuration.md) | - |

**é—œéµå¸¸æ•¸**ï¼š
- é è¨­é€£æ¥åŸ ï¼š`18789`ï¼ˆ`gateway.server-startup-log.ts`ï¼‰
- é è¨­å·¥ä½œå€ï¼š`~/clawd`
- é è¨­ Gateway ç¶å®šï¼š`loopback`ï¼ˆ127.0.0.1ï¼‰

**é—œéµå‡½æ•¸**ï¼š
- `ClawdbotSchema`ï¼šä¸»è¨­å®š Schema å®šç¾©
- `normalizeAllowFrom()`ï¼šæ¨™æº–åŒ– allowlist å€¼
- `requireOpenAllowFrom()`ï¼šé©—è­‰ open æ¨¡å¼çš„ allowlist
</details>
