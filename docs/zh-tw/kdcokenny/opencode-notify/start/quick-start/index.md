---
title: "å¿«é€Ÿé–‹å§‹ï¼š5åˆ†é˜ä¸Šæ‰‹ opencode-notify | opencode-notify æ•™å­¸"
sidebarTitle: "5 åˆ†é˜æ”¶åˆ°é€šçŸ¥"
subtitle: "å¿«é€Ÿé–‹å§‹ï¼š5åˆ†é˜ä¸Šæ‰‹ opencode-notify"
description: "å­¸ç¿’å¦‚ä½•å®‰è£ opencode-notify å¤–æ›ç¨‹å¼ï¼Œåœ¨5åˆ†é˜å…§å®Œæˆè¨­å®šä¸¦é«”é©—ç¬¬ä¸€å€‹æ¡Œé¢é€šçŸ¥ã€‚æœ¬æ•™å­¸æ¶µè“‹ OCX å¥—ä»¶ç®¡ç†å™¨å®‰è£å’Œæ‰‹å‹•å®‰è£å…©ç¨®æ–¹å¼ï¼Œæ”¯æ´ macOSã€Windows å’Œ Linux ç³»çµ±ï¼Œå¹«åŠ©æ‚¨åœ¨ AI ä»»å‹™å®Œæˆæ™‚åŠæ™‚æ”¶åˆ°æé†’ã€‚"
tags:
  - "å…¥é–€"
  - "å®‰è£"
  - "å¿«é€Ÿä¸Šæ‰‹"
prerequisite: []
order: 10
---

# å¿«é€Ÿé–‹å§‹ï¼š5åˆ†é˜ä¸Šæ‰‹ opencode-notify

## å­¸å®Œä½ èƒ½åšä»€éº¼

- 3 åˆ†é˜å…§å®Œæˆ opencode-notify å¤–æ›ç¨‹å¼å®‰è£
- è§¸ç™¼ç¬¬ä¸€å€‹æ¡Œé¢é€šçŸ¥ï¼Œé©—è­‰å®‰è£æˆåŠŸ
- äº†è§£ä¸åŒå®‰è£æ–¹å¼çš„å·®ç•°å’Œé©ç”¨æƒ…å¢ƒ

## ä½ ç¾åœ¨çš„å›°å¢ƒ

æ‚¨å§”è¨— AI å®Œæˆä¸€å€‹ä»»å‹™å¾Œåˆ‡æ›åˆ°å…¶ä»–è¦–çª—å·¥ä½œã€‚ç¾åœ¨ä½ æ¯éš” 30 ç§’å°±åˆ‡å›å»çœ‹ä¸€çœ¼ï¼šå®Œæˆäº†å—ï¼Ÿå‡ºéŒ¯äº†ï¼Ÿé‚„æ˜¯åœ¨ç­‰æ¬Šé™ï¼Ÿopencode-notify æ­£æ˜¯ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œè€Œç”Ÿçš„ã€‚

é€™ç¨®åè¦†åˆ‡æ›æ—¢æ‰“æ–·æ€è·¯ï¼Œåˆæµªè²»æ™‚é–“ã€‚

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

**åœ¨ä»¥ä¸‹æƒ…å¢ƒä¸‹å•Ÿç”¨ opencode-notify**ï¼š
- ä½ ç¶“å¸¸åœ¨ AI åŸ·è¡Œä»»å‹™æ™‚åˆ‡æ›åˆ°å…¶ä»–æ‡‰ç”¨ç¨‹å¼
- ä½ å¸Œæœ›åœ¨ AI éœ€è¦ä½ æ™‚è¢«ç¬¬ä¸€æ™‚é–“æé†’
- ä½ æƒ³åœ¨ä¿æŒå°ˆæ³¨çš„åŒæ™‚ä¸éŒ¯éé‡è¦äº‹ä»¶

## æ ¸å¿ƒæ€è·¯

opencode-notify çš„å·¥ä½œåŸç†å¾ˆç°¡å–®ï¼šç›£è½ OpenCode çš„äº‹ä»¶ï¼Œåœ¨é—œéµæ™‚åˆ»ç™¼é€åŸç”Ÿæ¡Œé¢é€šçŸ¥ã€‚

**å®ƒæœƒé€šçŸ¥ä½ **ï¼š
- âœ… ä»»å‹™å®Œæˆï¼ˆSession idleï¼‰
- âœ… åŸ·è¡Œå‡ºéŒ¯ï¼ˆSession errorï¼‰
- âœ… éœ€è¦æ¬Šé™ï¼ˆPermission updatedï¼‰

**å®ƒä¸æœƒé€šçŸ¥ä½ **ï¼š
- âŒ æ¯å€‹å­ä»»å‹™å®Œæˆï¼ˆå¤ªåµï¼‰
- âŒ çµ‚ç«¯æ©Ÿèšç„¦æ™‚çš„ä»»ä½•äº‹ä»¶ï¼ˆä½ åœ¨çœ‹çµ‚ç«¯æ©Ÿï¼Œä¸éœ€è¦é€šçŸ¥ï¼‰

## ğŸ’ é–‹å§‹å‰çš„æº–å‚™

::: warning å‰ç½®è¦æ±‚
- å·²å®‰è£ [OpenCode](https://github.com/sst/opencode)
- æœ‰å¯ç”¨çš„çµ‚ç«¯æ©Ÿï¼ˆmacOS Terminalã€iTerm2ã€Windows Terminal ç­‰ï¼‰
- macOS/Windows/Linux ç³»çµ±ï¼ˆä¸‰è€…å‡æ”¯æ´ï¼‰
:::

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šé¸æ“‡å®‰è£æ–¹å¼

opencode-notify æä¾›å…©ç¨®å®‰è£æ–¹å¼ï¼š

| æ–¹å¼ | é©ç”¨æƒ…å¢ƒ | å„ªé» | ç¼ºé» |
| --- | --- | --- | ---|
| **OCX å¥—ä»¶ç®¡ç†å™¨** | å¤§å¤šæ•¸ä½¿ç”¨è€… | ä¸€éµå®‰è£ã€è‡ªå‹•æ›´æ–°ã€ç›¸ä¾å¥—ä»¶ç®¡ç†å®Œæ•´ | éœ€è¦å…ˆå®‰è£ OCX |
| **æ‰‹å‹•å®‰è£** | ç‰¹æ®Šéœ€æ±‚ | å®Œå…¨æ§åˆ¶ã€ç„¡éœ€ OCX | éœ€æ‰‹å‹•ç®¡ç†ç›¸ä¾å¥—ä»¶å’Œæ›´æ–° |

**æ¨è–¦**ï¼šå„ªå…ˆä½¿ç”¨ OCX å®‰è£ï¼Œæ›´çœå¿ƒã€‚

### ç¬¬ 2 æ­¥ï¼šé€é OCX å®‰è£ï¼ˆæ¨è–¦ï¼‰

#### 2.1 å®‰è£ OCX å¥—ä»¶ç®¡ç†å™¨

OCX æ˜¯ OpenCode çš„å®˜æ–¹å¤–æ›ç¨‹å¼å¥—ä»¶ç®¡ç†å™¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å®‰è£ã€æ›´æ–°å’Œç®¡ç†å¤–æ›ç¨‹å¼ã€‚

**å®‰è£ OCX**ï¼š

```bash
curl -fsSL https://ocx.kdco.dev/install.sh | sh
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šå®‰è£æŒ‡ä»¤ç¢¼é¡¯ç¤ºé€²åº¦ï¼Œæœ€å¾Œæç¤ºå®‰è£æˆåŠŸã€‚

#### 2.2 æ–°å¢ KDCO Registry

KDCO Registry æ˜¯ä¸€å€‹å¤–æ›ç¨‹å¼å€‰åº«ï¼ŒåŒ…å« opencode-notify ç­‰å¤šå€‹å¯¦ç”¨å¤–æ›ç¨‹å¼ã€‚

**æ–°å¢ registry**ï¼š

```bash
ocx registry add https://registry.kdco.dev --name kdco
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šæç¤º "Registry added successfully" æˆ–é¡ä¼¼è³‡è¨Šã€‚

::: tip å¯é¸ï¼šå…¨åŸŸè¨­å®š
å¦‚æœä½ æƒ³åœ¨æ‰€æœ‰å°ˆæ¡ˆä¸­ä½¿ç”¨åŒä¸€å€‹ registryï¼Œæ–°å¢ `--global` åƒæ•¸ï¼š

```bash
ocx registry add https://registry.kdco.dev --name kdco --global
```
:::

#### 2.3 å®‰è£ opencode-notify

**å®‰è£å¤–æ›ç¨‹å¼**ï¼š

```bash
ocx add kdco/notify
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
```
âœ“ Added kdco/notify to your OpenCode workspace
```

### ç¬¬ 3 æ­¥ï¼šä¸€æ¬¡æ€§å®‰è£æ•´å€‹å·¥ä½œå€ï¼ˆå¯é¸ï¼‰

å¦‚æœä½ æƒ³è¦å®Œæ•´çš„é«”é©—ï¼Œå¯ä»¥å®‰è£ KDCO å·¥ä½œå€ï¼Œå®ƒåŒ…å«ï¼š

- opencode-notifyï¼ˆæ¡Œé¢é€šçŸ¥ï¼‰
- èƒŒæ™¯ä»£ç†ï¼ˆBackground Agentsï¼‰
- å°ˆç”¨ä»£ç†ï¼ˆSpecialist Agentsï¼‰
- è¦åŠƒå·¥å…·ï¼ˆPlanning Toolsï¼‰

**å®‰è£å·¥ä½œå€**ï¼š

```bash
ocx add kdco/workspace
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šæç¤ºå¤šå€‹å…ƒä»¶è¢«æˆåŠŸæ–°å¢ã€‚

### ç¬¬ 4 æ­¥ï¼šé©—è­‰å®‰è£

å®‰è£å®Œæˆå¾Œï¼Œæˆ‘å€‘éœ€è¦è§¸ç™¼ä¸€å€‹é€šçŸ¥ä¾†é©—è­‰è¨­å®šæ˜¯å¦æ­£ç¢ºã€‚

**é©—è­‰æ–¹æ³• 1ï¼šè®“ AI å®Œæˆä¸€å€‹ä»»å‹™**

åœ¨ OpenCode ä¸­è¼¸å…¥ï¼š

```
è«‹è¨ˆç®— 1 åˆ° 10 çš„å’Œï¼Œç„¶å¾Œç­‰å¾… 5 ç§’å¾Œå‘Šè¨´æˆ‘çµæœã€‚
```

åˆ‡æ›åˆ°å…¶ä»–è¦–çª—å·¥ä½œå¹¾ç§’å¾Œï¼Œä½ æ‡‰è©²çœ‹åˆ°æ¡Œé¢é€šçŸ¥å½ˆå‡ºã€‚

**é©—è­‰æ–¹æ³• 2ï¼šæª¢æŸ¥è¨­å®šæª”**

æŸ¥çœ‹è¨­å®šæª”æ˜¯å¦å­˜åœ¨ï¼š

```bash
# macOS/Linux
cat ~/.config/opencode/kdco-notify.json

# Windows PowerShell
type $env:USERPROFILE\.config\opencode\kdco-notify.json
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- å¦‚æœæª”æ¡ˆä¸å­˜åœ¨ â†’ èªªæ˜ä½¿ç”¨é è¨­è¨­å®šï¼ˆæ­£å¸¸ï¼‰
- å¦‚æœæª”æ¡ˆå­˜åœ¨ â†’ é¡¯ç¤ºä½ çš„è‡ªè¨‚è¨­å®š

### ç¬¬ 5 æ­¥ï¼šæ‰‹å‹•å®‰è£ï¼ˆå‚™é¸æ–¹æ¡ˆï¼‰

å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ OCXï¼Œå¯ä»¥æ‰‹å‹•å®‰è£ã€‚

#### 5.1 è¤‡è£½åŸå§‹ç¢¼

å°‡ opencode-notify çš„åŸå§‹ç¢¼è¤‡è£½åˆ° OpenCode å¤–æ›ç¨‹å¼ç›®éŒ„ï¼š

```bash
# å¾åŸå§‹ç¢¼è¤‡è£½åˆ°ç¨ç«‹ç›®éŒ„
mkdir -p ~/.opencode/plugin/kdco-notify
cp src/notify.ts ~/.opencode/plugin/kdco-notify/
cp -r src/plugin/kdco-primitives ~/.opencode/plugin/kdco-notify/
```

#### 5.2 å®‰è£ç›¸ä¾å¥—ä»¶

æ‰‹å‹•å®‰è£å¿…è¦çš„ç›¸ä¾å¥—ä»¶ï¼š

```bash
cd ~/.opencode/plugin/
npm install node-notifier detect-terminal @opencode-ai/plugin @opencode-ai/sdk
```

::: warning æ³¨æ„äº‹é …
- **ç›¸ä¾å¥—ä»¶ç®¡ç†**ï¼šéœ€è¦æ‰‹å‹•å®‰è£å’Œæ›´æ–° `node-notifier` å’Œ `detect-terminal`
- **æ›´æ–°å›°é›£**ï¼šæ¯æ¬¡æ›´æ–°éƒ½éœ€è¦æ‰‹å‹•é‡æ–°è¤‡è£½åŸå§‹ç¢¼
- **ä¸æ¨è–¦**ï¼šé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå»ºè­°ä½¿ç”¨ OCX å®‰è£
:::

### æª¢æŸ¥é» âœ…

å®Œæˆä¸Šè¿°æ­¥é©Ÿå¾Œï¼Œè«‹ç¢ºèªï¼š

- [ ] OCX å®‰è£æˆåŠŸï¼ˆ`ocx --version` èƒ½è¼¸å‡ºç‰ˆæœ¬è™Ÿï¼‰
- [ ] KDCO Registry å·²æ–°å¢ï¼ˆ`ocx registry list` é¡¯ç¤º kdcoï¼‰
- [ ] opencode-notify å·²å®‰è£ï¼ˆ`ocx list` é¡¯ç¤º kdco/notifyï¼‰
- [ ] æ”¶åˆ°ç¬¬ä¸€å€‹æ¡Œé¢é€šçŸ¥
- [ ] é€šçŸ¥é¡¯ç¤ºæ­£ç¢ºçš„ä»»å‹™æ¨™é¡Œ

**å¦‚æœæŸå€‹æ­¥é©Ÿå¤±æ•—**ï¼š
- æŸ¥çœ‹ [æ•…éšœæ’é™¤](../../faq/troubleshooting/) å–å¾—å”åŠ©
- æª¢æŸ¥ OpenCode æ˜¯å¦æ­£å¸¸åŸ·è¡Œ
- ç¢ºèªä½ çš„ç³»çµ±æ”¯æ´æ¡Œé¢é€šçŸ¥

## è¸©å‘æé†’

### å¸¸è¦‹å•é¡Œ 1ï¼šé€šçŸ¥ä¸é¡¯ç¤º

**åŸå› **ï¼š
- macOSï¼šç³»çµ±é€šçŸ¥è¢«é—œé–‰
- Windowsï¼šé€šçŸ¥æ¬Šé™æœªæˆäºˆ
- Linuxï¼šæœªå®‰è£ notify-send

**è§£æ±ºæ–¹æ³•**ï¼š

| å¹³å° | è§£æ±ºæ–¹æ³• |
| --- | ---|
| macOS | ç³»çµ±è¨­å®š â†’ é€šçŸ¥ â†’ OpenCode â†’ å…è¨±é€šçŸ¥ |
| Windows | è¨­å®š â†’ ç³»çµ± â†’ é€šçŸ¥ â†’ é–‹å•Ÿé€šçŸ¥ |
| Linux | å®‰è£ libnotify-binï¼š`sudo apt install libnotify-bin` |

### å¸¸è¦‹å•é¡Œ 2ï¼šOCX å®‰è£å¤±æ•—

**åŸå› **ï¼šç¶²è·¯å•é¡Œæˆ–æ¬Šé™ä¸è¶³

**è§£æ±ºæ–¹æ³•**ï¼š
1. æª¢æŸ¥ç¶²è·¯é€£ç·š
2. ä½¿ç”¨ sudo å®‰è£ï¼ˆéœ€è¦ç®¡ç†å“¡æ¬Šé™ï¼‰
3. æ‰‹å‹•ä¸‹è¼‰å®‰è£æŒ‡ä»¤ç¢¼ä¸¦åŸ·è¡Œ

### å¸¸è¦‹å•é¡Œ 3ï¼šç›¸ä¾å¥—ä»¶å®‰è£å¤±æ•—

**åŸå› **ï¼šNode.js ç‰ˆæœ¬ä¸ç›¸å®¹

**è§£æ±ºæ–¹æ³•**ï¼š
- ä½¿ç”¨ Node.js 18 æˆ–æ›´é«˜ç‰ˆæœ¬
- æ¸…é™¤ npm å¿«å–ï¼š`npm cache clean --force`

## æœ¬èª²å°çµ

æœ¬èª²æˆ‘å€‘å®Œæˆäº†ï¼š
- âœ… å®‰è£ OCX å¥—ä»¶ç®¡ç†å™¨
- âœ… æ–°å¢ KDCO Registry
- âœ… å®‰è£ opencode-notify å¤–æ›ç¨‹å¼
- âœ… è§¸ç™¼ç¬¬ä¸€å€‹æ¡Œé¢é€šçŸ¥
- âœ… äº†è§£æ‰‹å‹•å®‰è£æ–¹æ³•

**é—œéµè¦é»**ï¼š
1. opencode-notify ä½¿ç”¨åŸç”Ÿæ¡Œé¢é€šçŸ¥ï¼Œç„¡éœ€é »ç¹åˆ‡æ›è¦–çª—
2. OCX æ˜¯æ¨è–¦çš„å®‰è£æ–¹å¼ï¼Œè‡ªå‹•ç®¡ç†ç›¸ä¾å¥—ä»¶å’Œæ›´æ–°
3. é è¨­åªé€šçŸ¥çˆ¶å·¥ä½œéšæ®µï¼Œé¿å…å­ä»»å‹™å™ªéŸ³
4. çµ‚ç«¯æ©Ÿèšç„¦æ™‚è‡ªå‹•æŠ‘åˆ¶é€šçŸ¥

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[é‹ä½œåŸç†](../how-it-works/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - å¤–æ›ç¨‹å¼å¦‚ä½•ç›£è½ OpenCode äº‹ä»¶
> - æ™ºæ…§éæ¿¾æ©Ÿåˆ¶çš„å·¥ä½œæµç¨‹
> - çµ‚ç«¯æ©Ÿæª¢æ¸¬å’Œç„¦é»æ„ŸçŸ¥çš„åŸç†
> - ä¸åŒå¹³å°çš„åŠŸèƒ½å·®ç•°

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»é¸å±•é–‹æŸ¥çœ‹åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-27

| åŠŸèƒ½ | æª”æ¡ˆè·¯å¾‘ | è¡Œè™Ÿ |
| --- | --- | ---|
| å¤–æ›ç¨‹å¼ä¸»å…¥å£ | [`src/notify.ts`](https://github.com/kdcokenny/opencode-notify/blob/main/src/notify.ts#L1-L407) | 1-407 |
| è¨­å®šè¼‰å…¥ | [`src/notify.ts`](https://github.com/kdcokenny/opencode-notify/blob/main/src/notify.ts#L90-L114) | 90-114 |
| --- | --- | ---|
| --- | --- | ---|
| --- | --- | ---|
| é€šçŸ¥ç™¼é€ | [`src/notify.ts`](https://github.com/kdcokenny/opencode-notify/blob/main/src/notify.ts#L280-L308) | 280-308 |
| çµ‚ç«¯æ©Ÿæª¢æ¸¬ | [`src/notify.ts`](https://github.com/kdcokenny/opencode-notify/blob/main/src/notify.ts#L145-L176) | 145-176 |
| éœéŸ³æ™‚æ®µæª¢æŸ¥ | [`src/notify.ts`](https://github.com/kdcokenny/opencode-notify/blob/main/src/notify.ts#L181-L199) | 181-199 |
| é è¨­è¨­å®š | [`src/notify.ts`](https://github.com/kdcokenny/opencode-notify/blob/main/src/notify.ts#L30-L48) | 30-48 |

**é—œéµå¸¸æ•¸**ï¼š
- `DEFAULT_CONFIG.sounds.idle = "Glass"`ï¼šä»»å‹™å®Œæˆé è¨­éŸ³æ•ˆ
- `DEFAULT_CONFIG.sounds.error = "Basso"`ï¼šéŒ¯èª¤é è¨­éŸ³æ•ˆ
- `DEFAULT_CONFIG.sounds.permission = "Submarine"`ï¼šæ¬Šé™è«‹æ±‚é è¨­éŸ³æ•ˆ
- `DEFAULT_CONFIG.notifyChildSessions = false`ï¼šé è¨­åªé€šçŸ¥çˆ¶å·¥ä½œéšæ®µ

**é—œéµå‡½å¼**ï¼š
- `NotifyPlugin()`ï¼šå¤–æ›ç¨‹å¼å…¥å£å‡½å¼ï¼Œå›å‚³äº‹ä»¶è™•ç†å™¨
- `loadConfig()`ï¼šè¼‰å…¥è¨­å®šæª”ï¼Œåˆä½µé è¨­å€¼
- `sendNotification()`ï¼šç™¼é€åŸç”Ÿæ¡Œé¢é€šçŸ¥
- `detectTerminalInfo()`ï¼šåµæ¸¬çµ‚ç«¯æ©Ÿé¡å‹å’Œ Bundle ID
- `isQuietHours()`ï¼šæª¢æŸ¥ç›®å‰æ™‚é–“æ˜¯å¦åœ¨éœéŸ³æ™‚æ®µ
- `isParentSession()`ï¼šåˆ¤æ–·æ˜¯å¦ç‚ºçˆ¶å·¥ä½œéšæ®µ
- `isTerminalFocused()`ï¼šåµæ¸¬çµ‚ç«¯æ©Ÿæ˜¯å¦ç‚ºå‰æ™¯è¦–çª—

</details>
