---
title: "URL åˆ†äº«ï¼šç„¡å¾Œç«¯å”ä½œ | Plannotator"
sidebarTitle: "åˆ†äº«çµ¦åœ˜éšŠçœ‹"
subtitle: "URL åˆ†äº«ï¼šç„¡å¾Œç«¯å”ä½œ"
description: "å­¸ç¿’ Plannotator çš„ URL åˆ†äº«åŠŸèƒ½ã€‚é€é deflate å£“ç¸®å’Œ Base64 ç·¨ç¢¼å¯¦ç¾ç„¡å¾Œç«¯å”ä½œï¼Œé…ç½®ç’°å¢ƒè®Šæ•¸ä¸¦è§£æ±ºå¸¸è¦‹åˆ†äº«å•é¡Œã€‚"
tags:
  - "URL åˆ†äº«"
  - "åœ˜éšŠå”ä½œ"
  - "ç„¡å¾Œç«¯"
  - "deflate å£“ç¸®"
  - "Base64 ç·¨ç¢¼"
  - "å®‰å…¨æ€§"
prerequisite:
  - "start-getting-started"
  - "platforms-plan-review-basics"
order: 1
---

# URL åˆ†äº«ï¼šç„¡å¾Œç«¯çš„è¨ˆç•«å”ä½œ

## å­¸å®Œä½ èƒ½åšä»€éº¼

- âœ… é€é URL åˆ†äº«è¨ˆç•«å’Œè¨»è§£ï¼Œç„¡éœ€ç™»å…¥å¸³è™Ÿæˆ–éƒ¨ç½²ä¼ºæœå™¨
- âœ… ç†è§£ deflate å£“ç¸®å’Œ Base64 ç·¨ç¢¼å¦‚ä½•å°‡è³‡æ–™åµŒå…¥ URL hash
- âœ… å€åˆ†åˆ†äº«æ¨¡å¼ï¼ˆå”¯è®€ï¼‰å’Œæœ¬åœ°æ¨¡å¼ï¼ˆå¯ç·¨è¼¯ï¼‰
- âœ… é…ç½® `PLANNOTATOR_SHARE` ç’°å¢ƒè®Šæ•¸æ§åˆ¶åˆ†äº«åŠŸèƒ½
- âœ… è™•ç† URL é•·åº¦é™åˆ¶å’Œåˆ†äº«å¤±æ•—çš„æƒ…æ³

## ä½ ç¾åœ¨çš„å›°å¢ƒ

**å•é¡Œ 1**ï¼šæƒ³è«‹åœ˜éšŠæˆå“¡å”åŠ©å¯©æŸ¥ AI ç”Ÿæˆçš„è¨ˆç•«ï¼Œä½†æ²’æœ‰å”ä½œå¹³å°ã€‚

**å•é¡Œ 2**ï¼šä½¿ç”¨æˆªåœ–æˆ–è¤‡è£½æ–‡å­—çš„æ–¹å¼åˆ†äº«å¯©æŸ¥å…§å®¹ï¼Œå°æ–¹ç„¡æ³•ç›´æ¥çœ‹åˆ°ä½ çš„è¨»è§£ã€‚

**å•é¡Œ 3**ï¼šéƒ¨ç½²ç·šä¸Šå”ä½œä¼ºæœå™¨æˆæœ¬é«˜ï¼Œæˆ–å…¬å¸å®‰å…¨æ”¿ç­–ä¸å…è¨±ã€‚

**å•é¡Œ 4**ï¼šéœ€è¦ä¸€å€‹ç°¡å–®å¿«é€Ÿçš„åˆ†äº«æ–¹å¼ï¼Œä½†ä¸çŸ¥é“å¦‚ä½•ä¿è­‰è³‡æ–™éš±ç§ã€‚

**Plannotator èƒ½å¹«ä½ **ï¼š
- ç„¡éœ€å¾Œç«¯ä¼ºæœå™¨ï¼Œæ‰€æœ‰è³‡æ–™å£“ç¸®åœ¨ URL ä¸­
- åˆ†äº«é€£çµåŒ…å«å®Œæ•´è¨ˆç•«å’Œè¨»è§£ï¼Œæ¥æ”¶æ–¹å¯æŸ¥çœ‹
- è³‡æ–™ä¸é›¢é–‹æœ¬æ©Ÿè£ç½®ï¼Œéš±ç§å®‰å…¨
- ç”Ÿæˆçš„ URL å¯è¤‡è£½åˆ°ä»»ä½•é€šè¨Šå·¥å…·

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

**ä½¿ç”¨å ´æ™¯**ï¼š
- éœ€è¦åœ˜éšŠæˆå“¡å¯©æŸ¥ AI ç”Ÿæˆçš„å¯¦æ–½è¨ˆç•«
- æƒ³åˆ†äº«ç¨‹å¼ç¢¼å¯©æŸ¥çµæœçµ¦åŒäº‹
- éœ€è¦ä¿å­˜å¯©æŸ¥å…§å®¹åˆ°ç­†è¨˜ï¼ˆçµåˆ Obsidian/Bear æ•´åˆï¼‰
- å¿«é€Ÿç²å–ä»–äººå°è¨ˆç•«çš„åé¥‹

**ä¸é©ç”¨å ´æ™¯**ï¼š
- éœ€è¦å³æ™‚å”ä½œç·¨è¼¯ï¼ˆPlannotator åˆ†äº«æ˜¯å”¯è®€çš„ï¼‰
- è¨ˆç•«å…§å®¹è¶…é URL é•·åº¦é™åˆ¶ï¼ˆé€šå¸¸æ•¸åƒè¡Œï¼‰
- åˆ†äº«å…§å®¹åŒ…å«æ•æ„Ÿè³‡è¨Šï¼ˆURL æœ¬èº«ä¸åŠ å¯†ï¼‰

::: warning å®‰å…¨æç¤º
åˆ†äº« URL åŒ…å«å®Œæ•´è¨ˆç•«å’Œè¨»è§£ï¼Œè«‹å‹¿åˆ†äº«åŒ…å«æ•æ„Ÿè³‡è¨Šçš„å…§å®¹ï¼ˆå¦‚ API é‡‘é‘°ã€å¯†ç¢¼ç­‰ï¼‰ã€‚åˆ†äº« URL æœ¬èº«å¯è¢«ä»»ä½•äººå­˜å–ï¼Œä¸æœƒè‡ªå‹•éæœŸã€‚
:::

## æ ¸å¿ƒæ€è·¯

### URL åˆ†äº«æ˜¯ä»€éº¼

**URL åˆ†äº«**æ˜¯ Plannotator æä¾›çš„ä¸€ç¨®ç„¡å¾Œç«¯å”ä½œæ–¹å¼ï¼Œé€éå°‡è¨ˆç•«å’Œè¨»è§£å£“ç¸®åˆ° URL hash ä¸­ï¼Œå¯¦ç¾ç„¡éœ€ä¼ºæœå™¨çš„åˆ†äº«åŠŸèƒ½ã€‚

::: info ç‚ºä»€éº¼å«ã€Œç„¡å¾Œç«¯ã€ï¼Ÿ
å‚³çµ±å”ä½œæ–¹æ¡ˆéœ€è¦å¾Œç«¯ä¼ºæœå™¨å„²å­˜è¨ˆç•«å’Œè¨»è§£ï¼Œä½¿ç”¨è€…é€é ID æˆ– token å­˜å–ã€‚Plannotator çš„ URL åˆ†äº«ä¸ä¾è³´ä»»ä½•å¾Œç«¯â€”â€”æ‰€æœ‰è³‡æ–™éƒ½åœ¨ URL ä¸­ï¼Œæ¥æ”¶æ–¹æ‰“é–‹é€£çµå³å¯è§£æå…§å®¹ã€‚é€™ä¿è­‰äº†éš±ç§ï¼ˆè³‡æ–™ä¸ä¸Šå‚³ï¼‰å’Œç°¡æ½”æ€§ï¼ˆç„¡éœ€éƒ¨ç½²æœå‹™ï¼‰ã€‚
:::

### å·¥ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½¿ç”¨è€… Aï¼ˆåˆ†äº«è€…ï¼‰                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. å¯©æŸ¥è¨ˆç•«ï¼Œæ–°å¢è¨»è§£                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚     â”‚ Plan: å¯¦æ–½è¨ˆç•«        â”‚                           â”‚
â”‚     â”‚ Annotations: [       â”‚                           â”‚
â”‚     â”‚   {type: 'REPLACE'},  â”‚                           â”‚
â”‚     â”‚   {type: 'COMMENT'}  â”‚                           â”‚
â”‚     â”‚ ]                   â”‚                           â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚              â”‚                                         â”‚
â”‚              â–¼                                         â”‚
â”‚  2. é»æ“Š Export â†’ Share                                â”‚
â”‚              â”‚                                         â”‚
â”‚              â–¼                                         â”‚
â”‚  3. å£“ç¸®è³‡æ–™                                            â”‚
â”‚     JSON â†’ deflate â†’ Base64 â†’ URL å®‰å…¨å­—å…ƒ              â”‚
â”‚     â†“                                                â”‚
â”‚     https://share.plannotator.ai/#eJyrVkrLz1...       â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ è¤‡è£½ URL
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½¿ç”¨è€… Bï¼ˆæ¥æ”¶è€…ï¼‰                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. æ‰“é–‹åˆ†äº« URL                                        â”‚
â”‚     https://share.plannotator.ai/#eJyrVkrLz1...       â”‚
â”‚              â”‚                                         â”‚
â”‚              â–¼                                         â”‚
â”‚  2. ç€è¦½å™¨è§£æ hash                                     â”‚
â”‚     URL å®‰å…¨å­—å…ƒ â†’ Base64 è§£ç¢¼ â†’ deflate è§£å£“ â†’ JSON   â”‚
â”‚              â”‚                                         â”‚
â”‚              â–¼                                         â”‚
â”‚  3. æ¢å¾©è¨ˆç•«å’Œè¨»è§£                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚     â”‚ Plan: å¯¦æ–½è¨ˆç•«        â”‚  âœ… å”¯è®€æ¨¡å¼             â”‚
â”‚     â”‚ Annotations: [       â”‚  ï¼ˆç„¡æ³•æäº¤æ±ºç­–ï¼‰        â”‚
â”‚     â”‚   {type: 'REPLACE'},  â”‚                           â”‚
â”‚     â”‚   {type: 'COMMENT'}  â”‚                           â”‚
â”‚     â”‚ ]                   â”‚                           â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å£“ç¸®æ¼”ç®—æ³•è©³è§£

**æ­¥é©Ÿ 1ï¼šJSON åºåˆ—åŒ–**
```json
{
  "p": "# Plan\n\nStep 1...",
  "a": [
    ["R", "old text", "new text", null, null],
    ["C", "context", "comment text", null, null]
  ],
  "g": ["image1.png", "image2.png"]
}
```

**æ­¥é©Ÿ 2ï¼šDeflate-raw å£“ç¸®**
- ä½¿ç”¨åŸç”Ÿ `CompressionStream('deflate-raw')` API
- å£“ç¸®ç‡å…¸å‹å€¼ç‚º 60-80%ï¼ˆå–æ±ºæ–¼æ–‡å­—é‡è¤‡åº¦ï¼ŒéåŸå§‹ç¢¼å®šç¾©ï¼‰
- åŸå§‹ç¢¼ä½ç½®ï¼š`packages/ui/utils/sharing.ts:34`

**æ­¥é©Ÿ 3ï¼šBase64 ç·¨ç¢¼**
```typescript
const base64 = btoa(String.fromCharCode(...compressed));
```

**æ­¥é©Ÿ 4ï¼šURL å®‰å…¨å­—å…ƒæ›¿æ›**
```typescript
base64
  .replace(/\+/g, '-')   // + â†’ -
  .replace(/\//g, '_')   // / â†’ _
  .replace(/=/g, '');    // = â†’ ''ï¼ˆç§»é™¤å¡«å……ï¼‰
```

::: tip ç‚ºä»€éº¼æ›¿æ›ç‰¹æ®Šå­—å…ƒï¼Ÿ
URL ä¸­æŸäº›å­—å…ƒæœ‰ç‰¹æ®Šå«ç¾©ï¼ˆå¦‚ `+` è¡¨ç¤ºç©ºæ ¼ï¼Œ`/` æ˜¯è·¯å¾‘åˆ†éš”ç¬¦ï¼‰ã€‚Base64 ç·¨ç¢¼å¾Œå¯èƒ½åŒ…å«é€™äº›å­—å…ƒï¼Œæœƒå°è‡´ URL è§£æéŒ¯èª¤ã€‚æ›¿æ›ç‚º `-` å’Œ `_` å¾Œï¼ŒURL è®Šå¾—å®‰å…¨ä¸”å¯è¤‡è£½ã€‚
:::

### è¨»è§£æ ¼å¼æœ€ä½³åŒ–

ç‚ºå£“ç¸®æ•ˆç‡ï¼ŒPlannotator ä½¿ç”¨ç²¾ç°¡çš„è¨»è§£æ ¼å¼ï¼ˆ`ShareableAnnotation`ï¼‰ï¼š

| åŸå§‹ Annotation | ç²¾ç°¡æ ¼å¼ | èªªæ˜ |
|--- | --- | ---|
| `{type: 'DELETION', originalText: '...', text: undefined, ...}` | `['D', 'old text', null, images?]` | D = Deletionï¼Œnull è¡¨ç¤ºç„¡ text |
| `{type: 'REPLACEMENT', originalText: '...', text: 'new...', ...}` | `['R', 'old text', 'new text', null, images?]` | R = Replacement |
| `{type: 'COMMENT', originalText: '...', text: 'comment...', ...}` | `['C', 'old text', 'comment text', null, images?]` | C = Comment |
| `{type: 'INSERTION', originalText: '...', text: 'new...', ...}` | `['I', 'context', 'new text', null, images?]` | I = Insertion |
| `{type: 'GLOBAL_COMMENT', text: '...', ...}` | `['G', 'comment text', null, images?]` | G = Global comment |

æ¬„ä½é †åºå›ºå®šï¼Œçœç•¥éµåï¼Œé¡¯è‘—æ¸›å°‘è³‡æ–™é‡ã€‚åŸå§‹ç¢¼ä½ç½®ï¼š`packages/ui/utils/sharing.ts:76`

### åˆ†äº« URL çµæ§‹

```
https://share.plannotator.ai/#<compressed_data>
                            â†‘
                        hash éƒ¨åˆ†
```

- **åŸºç¤ç¶²åŸŸ**ï¼š`share.plannotator.ai`ï¼ˆç¨ç«‹åˆ†äº«é é¢ï¼‰
- **Hash åˆ†éš”ç¬¦**ï¼š`#`ï¼ˆä¸æœƒå‚³é€åˆ°ä¼ºæœå™¨ï¼Œå®Œå…¨ç”±å‰ç«¯è§£æï¼‰
- **å£“ç¸®è³‡æ–™**ï¼šBase64url ç·¨ç¢¼çš„å£“ç¸® JSON

## ğŸ’ é–‹å§‹å‰çš„æº–å‚™

**å‰ç½®æ¢ä»¶**ï¼š
- âœ… å·²å®Œæˆ [è¨ˆç•«å¯©æŸ¥åŸºç¤](../../platforms/plan-review-basics/)ï¼Œäº†è§£å¦‚ä½•æ–°å¢è¨»è§£
- âœ… å·²å®Œæˆ [è¨ˆç•«è¨»è§£æ•™å­¸](../../platforms/plan-review-annotations/)ï¼Œäº†è§£è¨»è§£é¡å‹
- âœ… ç€è¦½å™¨æ”¯æ´ `CompressionStream` APIï¼ˆç¾ä»£ç€è¦½å™¨å‡æ”¯æ´ï¼‰

**æª¢æŸ¥åˆ†äº«åŠŸèƒ½æ˜¯å¦å•Ÿç”¨**ï¼š
```bash
# é è¨­å•Ÿç”¨
echo $PLANNOTATOR_SHARE

# å¦‚éœ€åœç”¨åˆ†äº«ï¼ˆä¾‹å¦‚ä¼æ¥­å®‰å…¨ç­–ç•¥ï¼‰
export PLANNOTATOR_SHARE=disabled
```

::: info ç’°å¢ƒè®Šæ•¸èªªæ˜
`PLANNOTATOR_SHARE` æ§åˆ¶åˆ†äº«åŠŸèƒ½çš„å•Ÿç”¨ç‹€æ…‹ï¼š
- **æœªè¨­å®šæˆ–é "disabled"**ï¼šå•Ÿç”¨åˆ†äº«åŠŸèƒ½
- **è¨­å®šç‚º "disabled"**ï¼šåœç”¨åˆ†äº«ï¼ˆExport Modal åªé¡¯ç¤º Raw Diff æ¨™ç±¤ï¼‰

åŸå§‹ç¢¼ä½ç½®ï¼š`apps/hook/server/index.ts:44`ã€`apps/opencode-plugin/index.ts:50`
:::

**æª¢æŸ¥ç€è¦½å™¨ç›¸å®¹æ€§**ï¼š
```bash
# åœ¨ç€è¦½å™¨æ§åˆ¶å°åŸ·è¡Œ
const stream = new CompressionStream('deflate-raw');
console.log('CompressionStream supported');
```

å¦‚æœè¼¸å‡º `CompressionStream supported`ï¼Œèªªæ˜ç€è¦½å™¨æ”¯æ´ã€‚ç¾ä»£ç€è¦½å™¨ï¼ˆChrome 80+ã€Firefox 113+ã€Safari 16.4+ï¼‰å‡æ”¯æ´ã€‚

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šå®Œæˆè¨ˆç•«å¯©æŸ¥

**ç‚ºä»€éº¼**
åˆ†äº«å‰éœ€è¦å…ˆå®Œæˆå¯©æŸ¥ï¼ŒåŒ…æ‹¬æ–°å¢è¨»è§£ã€‚

**æ“ä½œ**ï¼š
1. åœ¨ Claude Code æˆ– OpenCode ä¸­è§¸ç™¼è¨ˆç•«å¯©æŸ¥
2. æŸ¥çœ‹è¨ˆç•«å…§å®¹ï¼Œé¸å–éœ€è¦ä¿®æ”¹çš„æ–‡å­—
3. æ–°å¢è¨»è§£ï¼ˆåˆªé™¤ã€æ›¿æ›ã€è©•è«–ç­‰ï¼‰
4. ï¼ˆå¯é¸ï¼‰ä¸Šå‚³åœ–ç‰‡é™„ä»¶

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Plan Review                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  # Implementation Plan                                    â”‚
â”‚                                                           â”‚
â”‚  ## Phase 1: Setup                                      â”‚
â”‚  Set up WebSocket server on port 8080                    â”‚
â”‚                                                           â”‚
â”‚  ## Phase 2: Authentication                             â”‚
â”‚  Implement JWT authentication middleware                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚ Replace: "implement" â”‚               â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                           â”‚
â”‚  Annotation Panel                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ REPLACE: "implement" â†’ "add"                      â”‚  â”‚
â”‚  â”‚ JWT is overkill, use simple session tokens         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â”‚  [Approve] [Request Changes] [Export]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç¬¬ 2 æ­¥ï¼šæ‰“é–‹ Export Modal

**ç‚ºä»€éº¼**
Export Modal æä¾›äº†åˆ†äº« URL çš„ç”¢ç”Ÿå…¥å£ã€‚

**æ“ä½œ**ï¼š
1. é»æ“Šå³ä¸Šè§’çš„ **Export** æŒ‰éˆ•
2. ç­‰å¾… Export Modal æ‰“é–‹

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Export                                     Ã—             â”‚
â”‚  1 annotation                          Share | Raw Diff   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  Shareable URL                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ https://share.plannotator.ai/#eJyrVkrLz1...        â”‚ â”‚
â”‚  â”‚                                              [Copy] â”‚ â”‚
â”‚  â”‚                                           3.2 KB    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  This URL contains full plan and all annotations.          â”‚
â”‚  Anyone with this link can view and add to your annotations.â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

::: tip URL å¤§å°æç¤º
å³ä¸‹è§’é¡¯ç¤º URL çš„ä½å…ƒçµ„æ•¸ï¼ˆå¦‚ 3.2 KBï¼‰ã€‚å¦‚æœ URL éé•·ï¼ˆè¶…é 8 KBï¼‰ï¼Œè€ƒæ…®æ¸›å°‘è¨»è§£æ•¸é‡æˆ–åœ–ç‰‡é™„ä»¶ã€‚
:::

### ç¬¬ 3 æ­¥ï¼šè¤‡è£½åˆ†äº« URL

**ç‚ºä»€éº¼**
è¤‡è£½ URL å¾Œå¯ä»¥è²¼ä¸Šåˆ°ä»»ä½•é€šè¨Šå·¥å…·ï¼ˆSlackã€Emailã€å¾®ä¿¡ç­‰ï¼‰ã€‚

**æ“ä½œ**ï¼š
1. é»æ“Š **Copy** æŒ‰éˆ•
2. ç­‰å¾…æŒ‰éˆ•è®Šç‚º **Copied!**
3. URL å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Shareable URL                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ https://share.plannotator.ai/#eJyrVkrLz1...        â”‚ â”‚
â”‚  â”‚                                    âœ“ Copied         â”‚ â”‚
â”‚  â”‚                                           3.2 KB    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

::: tip è‡ªå‹•é¸å–
é»æ“Š URL è¼¸å…¥æ¡†æœƒè‡ªå‹•é¸å–å…¨éƒ¨å…§å®¹ï¼Œæ–¹ä¾¿æ‰‹å‹•è¤‡è£½ï¼ˆå¦‚æœä¸ä½¿ç”¨ Copy æŒ‰éˆ•ï¼‰ã€‚
:::

### ç¬¬ 4 æ­¥ï¼šåˆ†äº« URL çµ¦å”ä½œè€…

**ç‚ºä»€éº¼**
å”ä½œè€…é€éæ‰“é–‹ URL å¯ä»¥æŸ¥çœ‹è¨ˆç•«å’Œè¨»è§£ã€‚

**æ“ä½œ**ï¼š
1. å°‡ URL è²¼ä¸Šåˆ°é€šè¨Šå·¥å…·ï¼ˆSlackã€Email ç­‰ï¼‰
2. å‚³é€çµ¦åœ˜éšŠæˆå“¡

**ç¯„ä¾‹è¨Šæ¯**ï¼š
```
Hi @åœ˜éšŠï¼Œ

è«‹å¹«å¿™å¯©æŸ¥é€™å€‹å¯¦æ–½è¨ˆç•«ï¼š
https://share.plannotator.ai/#eJyrVkrLz1...

æˆ‘åœ¨ç¬¬ 2 éšæ®µæ–°å¢äº†ä¸€å€‹æ›¿æ›è¨»è§£ï¼Œèªç‚º JWT éæ–¼è¤‡é›œã€‚

è«‹çµ¦å‡ºä½ çš„åé¥‹ï¼Œè¬è¬ï¼
```

### ç¬¬ 5 æ­¥ï¼šå”ä½œè€…æ‰“é–‹åˆ†äº« URLï¼ˆæ¥æ”¶æ–¹ï¼‰

**ç‚ºä»€éº¼**
å”ä½œè€…éœ€è¦åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹ URL æŸ¥çœ‹å…§å®¹ã€‚

**æ“ä½œ**ï¼ˆå”ä½œè€…åŸ·è¡Œï¼‰ï¼š
1. é»æ“Šåˆ†äº« URL
2. ç­‰å¾…é é¢è¼‰å…¥

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼ˆå”ä½œè€…è¦–è§’ï¼‰ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Plan Review                               Read-only     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  # Implementation Plan                                    â”‚
â”‚                                                           â”‚
â”‚  ## Phase 1: Setup                                      â”‚
â”‚  Set up WebSocket server on port 8080                    â”‚
â”‚                                                           â”‚
â”‚  ## Phase 2: Authentication                             â”‚
â”‚  Implement JWT authentication middleware                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚ Replace: "implement" â”‚               â”‚
â”‚  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â”‚ This annotation was shared by [Your Name]             â”‚
â”‚                                                           â”‚
â”‚  Annotation Panel                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ REPLACE: "implement" â†’ "add"                      â”‚  â”‚
â”‚  â”‚ JWT is overkill, use simple session tokens         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â”‚  [View Only Mode - Approve and Deny disabled]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

::: warning å”¯è®€æ¨¡å¼
åˆ†äº« URL æ‰“é–‹å¾Œï¼Œä»‹é¢å³ä¸Šè§’é¡¯ç¤º "Read-only" æ¨™ç±¤ï¼ŒApprove å’Œ Deny æŒ‰éˆ•è¢«åœç”¨ã€‚å”ä½œè€…å¯ä»¥æŸ¥çœ‹è¨ˆç•«å’Œè¨»è§£ï¼Œä½†ç„¡æ³•æäº¤æ±ºç­–ã€‚
:::

::: info è§£å£“éç¨‹
å”ä½œè€…æ‰“é–‹ URL æ™‚ï¼Œç€è¦½å™¨æœƒè‡ªå‹•åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼ˆç”± `useSharing` Hook è§¸ç™¼ï¼‰ï¼š
1. å¾ `window.location.hash` æå–å£“ç¸®è³‡æ–™
2. åå‘åŸ·è¡Œ Base64 è§£ç¢¼ â†’ deflate è§£å£“ â†’ JSON è§£æ
3. æ¢å¾©è¨ˆç•«å’Œè¨»è§£
4. æ¸…é™¤ URL hashï¼ˆé¿å…é‡æ–°æ•´ç†æ™‚é‡æ–°è¼‰å…¥ï¼‰

åŸå§‹ç¢¼ä½ç½®ï¼š`packages/ui/hooks/useSharing.ts:67`
:::

### æª¢æŸ¥é» âœ…

**é©—è­‰åˆ†äº« URL æ˜¯å¦æœ‰æ•ˆ**ï¼š
1. è¤‡è£½åˆ†äº« URL
2. åœ¨æ–°åˆ†é æˆ–ç„¡ç—•æ¨¡å¼æ‰“é–‹
3. ç¢ºèªé¡¯ç¤ºç›¸åŒçš„è¨ˆç•«å’Œè¨»è§£

**é©—è­‰å”¯è®€æ¨¡å¼**ï¼š
1. å”ä½œè€…æ‰“é–‹åˆ†äº« URL
2. æª¢æŸ¥å³ä¸Šè§’æ˜¯å¦æœ‰ "Read-only" æ¨™ç±¤
3. ç¢ºèª Approve å’Œ Deny æŒ‰éˆ•è¢«åœç”¨

**é©—è­‰ URL é•·åº¦**ï¼š
1. æŸ¥çœ‹ Export Modal ä¸­çš„ URL å¤§å°
2. ç¢ºèªä¸è¶…é 8 KBï¼ˆå¦‚è¶…éï¼Œè€ƒæ…®æ¸›å°‘è¨»è§£ï¼‰

## è¸©å‘æé†’

### å•é¡Œ 1ï¼šURL åˆ†äº«æŒ‰éˆ•ä¸é¡¯ç¤º

**ç¾è±¡**ï¼šExport Modal ä¸­æ²’æœ‰ Share æ¨™ç±¤ï¼Œåªæœ‰ Raw Diffã€‚

**åŸå› **ï¼š`PLANNOTATOR_SHARE` ç’°å¢ƒè®Šæ•¸è¨­å®šç‚º "disabled"ã€‚

**è§£æ±ºæ–¹æ³•**ï¼š
```bash
# æª¢æŸ¥ç›®å‰å€¼
echo $PLANNOTATOR_SHARE

# ç§»é™¤æˆ–è¨­å®šç‚ºå…¶ä»–å€¼
unset PLANNOTATOR_SHARE
# æˆ–
export PLANNOTATOR_SHARE=enabled
```

åŸå§‹ç¢¼ä½ç½®ï¼š`apps/hook/server/index.ts:44`

### å•é¡Œ 2ï¼šåˆ†äº« URL æ‰“é–‹å¾Œé¡¯ç¤ºç©ºç™½é é¢

**ç¾è±¡**ï¼šå”ä½œè€…æ‰“é–‹ URLï¼Œé é¢ç„¡å…§å®¹ã€‚

**åŸå› **ï¼šURL hash åœ¨è¤‡è£½éç¨‹ä¸­éºå¤±æˆ–è¢«æˆªæ–·ã€‚

**è§£æ±ºæ–¹æ³•**ï¼š
1. ç¢ºä¿è¤‡è£½å®Œæ•´çš„ URLï¼ˆåŒ…æ‹¬ `#` åŠå¾Œé¢çš„æ‰€æœ‰å­—å…ƒï¼‰
2. ä¸è¦ä½¿ç”¨çŸ­é€£çµæœå‹™ï¼ˆå¯èƒ½æœƒæˆªæ–· hashï¼‰
3. ä½¿ç”¨ Export Modal ä¸­çš„ Copy æŒ‰éˆ•ï¼Œè€Œä¸æ˜¯æ‰‹å‹•è¤‡è£½

::: tip URL hash é•·åº¦
åˆ†äº« URL çš„ hash éƒ¨åˆ†é€šå¸¸æœ‰æ•¸åƒå€‹å­—å…ƒï¼Œæ‰‹å‹•è¤‡è£½å®¹æ˜“éºæ¼ã€‚å»ºè­°ä½¿ç”¨ Copy æŒ‰éˆ•æˆ–è¤‡è£½ â†’ è²¼ä¸Šå…©æ¬¡é©—è­‰å®Œæ•´æ€§ã€‚
:::

### å•é¡Œ 3ï¼šURL å¤ªé•·ï¼Œç„¡æ³•å‚³é€

**ç¾è±¡**ï¼šURL è¶…éé€šè¨Šå·¥å…·çš„å­—å…ƒé™åˆ¶ï¼ˆå¦‚å¾®ä¿¡ã€Slackï¼‰ã€‚

**åŸå› **ï¼šè¨ˆç•«å…§å®¹éé•·æˆ–è¨»è§£æ•¸é‡éå¤šã€‚

**è§£æ±ºæ–¹æ³•**ï¼š
1. åˆªé™¤ä¸å¿…è¦çš„è¨»è§£
2. æ¸›å°‘åœ–ç‰‡é™„ä»¶
3. è€ƒæ…®ä½¿ç”¨ Raw Diff åŒ¯å‡ºä¸¦å„²å­˜ç‚ºæª”æ¡ˆ
4. ä½¿ç”¨ç¨‹å¼ç¢¼å¯©æŸ¥åŠŸèƒ½ï¼ˆdiff æ¨¡å¼çš„å£“ç¸®ç‡æ›´é«˜ï¼‰

### å•é¡Œ 4ï¼šå”ä½œè€…çœ‹ä¸åˆ°æˆ‘çš„åœ–ç‰‡

**ç¾è±¡**ï¼šåˆ†äº« URL åŒ…å«åœ–ç‰‡è·¯å¾‘ï¼Œä½†å”ä½œè€…æ‰“é–‹å¾Œé¡¯ç¤º "Image not found"ã€‚

**åŸå› **ï¼šåœ–ç‰‡å„²å­˜åœ¨æœ¬åœ° `/tmp/plannotator/` ç›®éŒ„ï¼Œå”ä½œè€…ç„¡æ³•å­˜å–ã€‚

**è§£æ±ºæ–¹æ³•**ï¼š
- Plannotator çš„ URL åˆ†äº«ä¸æ”¯æ´è·¨è£ç½®åœ–ç‰‡å­˜å–
- å»ºè­°ä½¿ç”¨ Obsidian æ•´åˆï¼Œåœ–ç‰‡å„²å­˜åˆ° vault å¾Œå¯ä»¥åˆ†äº«
- æˆ–è€…æˆªåœ–ä¸¦åµŒå…¥åˆ°è¨»è§£ä¸­ï¼ˆæ–‡å­—æè¿°ï¼‰

åŸå§‹ç¢¼ä½ç½®ï¼š`packages/server/index.ts:163`ï¼ˆåœ–ç‰‡å„²å­˜è·¯å¾‘ï¼‰

### å•é¡Œ 5ï¼šåˆ†äº«å¾Œä¿®æ”¹äº†è¨»è§£ï¼ŒURL æœªæ›´æ–°

**ç¾è±¡**ï¼šæ–°å¢æ–°è¨»è§£å¾Œï¼ŒExport Modal ä¸­çš„ URL æ²’æœ‰è®ŠåŒ–ã€‚

**åŸå› **ï¼š`shareUrl` ç‹€æ…‹æœªè‡ªå‹•é‡æ–°æ•´ç†ï¼ˆç½•è¦‹æƒ…æ³ï¼Œé€šå¸¸æ˜¯ React ç‹€æ…‹æ›´æ–°å•é¡Œï¼‰ã€‚

**è§£æ±ºæ–¹æ³•**ï¼š
1. é—œé–‰ Export Modal
2. é‡æ–°æ‰“é–‹ Export Modal
3. URL æ‡‰è©²è‡ªå‹•æ›´æ–°ç‚ºæœ€æ–°å…§å®¹

åŸå§‹ç¢¼ä½ç½®ï¼š`packages/ui/hooks/useSharing.ts:128`ï¼ˆ`refreshShareUrl` å‡½æ•¸ï¼‰

## æœ¬èª²å°çµ

**URL åˆ†äº«åŠŸèƒ½**è®“ä½ ç„¡éœ€å¾Œç«¯ä¼ºæœå™¨å³å¯åˆ†äº«è¨ˆç•«å’Œè¨»è§£ï¼š

- âœ… **ç„¡å¾Œç«¯**ï¼šè³‡æ–™å£“ç¸®åœ¨ URL hash ä¸­ï¼Œä¸ä¾è³´ä¼ºæœå™¨
- âœ… **éš±ç§å®‰å…¨**ï¼šè³‡æ–™ä¸ä¸Šå‚³ï¼Œåªåœ¨æœ¬åœ°å’Œå”ä½œè€…ä¹‹é–“å‚³é
- âœ… **ç°¡æ½”é«˜æ•ˆ**ï¼šä¸€éµç”¢ç”Ÿ URLï¼Œè¤‡è£½è²¼ä¸Šå³å¯åˆ†äº«
- âœ… **å”¯è®€æ¨¡å¼**ï¼šå”ä½œè€…å¯ä»¥æŸ¥çœ‹å’Œæ–°å¢è¨»è§£ï¼Œä½†ç„¡æ³•æäº¤æ±ºç­–

**æŠ€è¡“åŸç†**ï¼š
1. **Deflate-raw å£“ç¸®**ï¼šå°‡ JSON è³‡æ–™å£“ç¸®ç´„ 60-80%
2. **Base64 ç·¨ç¢¼**ï¼šå°‡äºŒé€²ä½è³‡æ–™è½‰æ›ç‚ºæ–‡å­—
3. **URL å®‰å…¨å­—å…ƒæ›¿æ›**ï¼š`+` â†’ `-`ã€`/` â†’ `_`ã€`=` â†’ `''`
4. **Hash è§£æ**ï¼šå‰ç«¯è‡ªå‹•è§£å£“ä¸¦æ¢å¾©å…§å®¹

**é…ç½®é¸é …**ï¼š
- `PLANNOTATOR_SHARE=disabled`ï¼šåœç”¨åˆ†äº«åŠŸèƒ½
- é è¨­å•Ÿç”¨ï¼šåˆ†äº«åŠŸèƒ½å¯ç”¨

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[Obsidian æ•´åˆ](../obsidian-integration/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - è‡ªå‹•åµæ¸¬ Obsidian vaults
> - å°‡æ‰¹å‡†çš„è¨ˆç•«å„²å­˜åˆ° Obsidian
> - è‡ªå‹•ç”¢ç”Ÿ frontmatter å’Œæ¨™ç±¤
> - çµåˆ URL åˆ†äº«å’Œ Obsidian çŸ¥è­˜ç®¡ç†

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[Obsidian æ•´åˆ](../obsidian-integration/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - å¦‚ä½•é…ç½® Obsidian æ•´åˆï¼Œè‡ªå‹•å„²å­˜è¨ˆç•«åˆ° vault
> - ç†è§£ frontmatter å’Œæ¨™ç±¤ç”¢ç”Ÿæ©Ÿåˆ¶
> - åˆ©ç”¨ backlink å»ºæ§‹çŸ¥è­˜åœ–è­œ

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æŸ¥çœ‹åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-24

| åŠŸèƒ½ | æª”æ¡ˆè·¯å¾‘ | è¡Œè™Ÿ |
|--- | --- | ---|
| å£“ç¸®è³‡æ–™ï¼ˆdeflate + Base64ï¼‰ | [`packages/ui/utils/sharing.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/utils/sharing.ts#L30-L48) | 30-48 |
| è§£å£“è³‡æ–™ | [`packages/ui/utils/sharing.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/utils/sharing.ts#L53-L71) | 53-71 |
| è½‰æ›è¨»è§£æ ¼å¼ï¼ˆç²¾ç°¡ï¼‰ | [`packages/ui/utils/sharing.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/utils/sharing.ts#L76-L95) | 76-95 |
| æ¢å¾©è¨»è§£æ ¼å¼ | [`packages/ui/utils/sharing.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/utils/sharing.ts#L102-L155) | 102-155 |
| ç”¢ç”Ÿåˆ†äº« URL | [`packages/ui/utils/sharing.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/utils/sharing.ts#L162-L175) | 162-175 |
| è§£æ URL hash | [`packages/ui/utils/sharing.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/utils/sharing.ts#L181-L194) | 181-194 |
| URL å¤§å°æ ¼å¼åŒ– | [`packages/ui/utils/sharing.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/utils/sharing.ts#L199-L205) | 199-205 |
| URL åˆ†äº« Hook | [`packages/ui/hooks/useSharing.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/hooks/useSharing.ts#L45-L155) | 45-155 |
| Export Modal UI | [`packages/ui/components/ExportModal.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/components/ExportModal.tsx#L1-L196) | 1-196 |
| åˆ†äº«é–‹é—œé…ç½®ï¼ˆHookï¼‰ | [`apps/hook/server/index.ts`](https://github.com/backnotprop/plannotator/blob/main/apps/hook/server/index.ts#L44) | 44 |
| åˆ†äº«é–‹é—œé…ç½®ï¼ˆOpenCodeï¼‰ | [`apps/opencode-plugin/index.ts`](https://github.com/backnotprop/plannotator/blob/main/apps/opencode-plugin/index.ts#L50) | 50 |

**é—œéµå¸¸æ•¸**ï¼š
- `SHARE_BASE_URL = 'https://share.plannotator.ai'`ï¼šåˆ†äº«é é¢åŸºç¤ç¶²åŸŸ

**é—œéµå‡½æ•¸**ï¼š
- `compress(payload: SharePayload): Promise<string>`ï¼šå£“ç¸® payload ç‚º base64url å­—ä¸²
- `decompress(b64: string): Promise<SharePayload>`ï¼šè§£å£“ base64url å­—ä¸²ç‚º payload
- `toShareable(annotations: Annotation[]): ShareableAnnotation[]`ï¼šå°‡å®Œæ•´è¨»è§£è½‰æ›ç‚ºç²¾ç°¡æ ¼å¼
- `fromShareable(data: ShareableAnnotation[]): Annotation[]`ï¼šå°‡ç²¾ç°¡æ ¼å¼æ¢å¾©ç‚ºå®Œæ•´è¨»è§£
- `generateShareUrl(markdown, annotations, attachments): Promise<string>`ï¼šç”¢ç”Ÿå®Œæ•´çš„åˆ†äº« URL
- `parseShareHash(): Promise<SharePayload | null>`ï¼šè§£æç›®å‰ URL çš„ hash

**è³‡æ–™å‹åˆ¥**ï¼š
```typescript
interface SharePayload {
  p: string;  // plan markdown
  a: ShareableAnnotation[];
  g?: string[];  // global attachments
}

type ShareableAnnotation =
  | ['D', string, string | null, string[]?]  // Deletion
  | ['R', string, string, string | null, string[]?]  // Replacement
  | ['C', string, string, string | null, string[]?]  // Comment
  | ['I', string, string, string | null, string[]?]  // Insertion
  | ['G', string, string | null, string[]?];  // Global Comment
```

</details>
