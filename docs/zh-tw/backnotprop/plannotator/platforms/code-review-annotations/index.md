---
title: "ç¨‹å¼ç¢¼æ‰¹è¨»: è¡Œç´šè¨»è§£ | Plannotator"
subtitle: "ç¨‹å¼ç¢¼æ‰¹è¨»: è¡Œç´šè¨»è§£"
sidebarTitle: "5 åˆ†é˜åŠ æ‰¹è¨»"
description: "å­¸ç¿’ Plannotator çš„ç¨‹å¼ç¢¼è¨»è§£åŠŸèƒ½ã€‚åœ¨ diff ä¸­ç²¾ç¢ºæ–°å¢è¡Œç´šè¨»è§£ï¼ˆcomment/suggestion/concernï¼‰ã€é™„åŠ å»ºè­°ç¨‹å¼ç¢¼ã€æ¨™è¨˜é¢¨éšªé»ã€ç®¡ç†æ‰€æœ‰è¨»è§£ä¸¦åŒ¯å‡ºå›é¥‹ã€‚"
tags:
  - "ç¨‹å¼ç¢¼å¯©æŸ¥"
  - "è¨»è§£"
  - "diff"
  - "comment"
  - "suggestion"
  - "concern"
  - "Claude Code"
  - "OpenCode"
prerequisite:
  - "start-getting-started"
  - "platforms-code-review-basics"
order: 5
---

# æ–°å¢ç¨‹å¼ç¢¼è¨»è§£ï¼šè¡Œç´šè©•è«–ã€å»ºè­°å’Œé—œæ³¨é»

## å­¸å®Œä½ èƒ½åšä»€éº¼

- âœ… åœ¨ç¨‹å¼ç¢¼ diff ä¸­æ–°å¢è¡Œç´šè¨»è§£ï¼ˆcomment/suggestion/concernï¼‰
- âœ… ç‚ºç¨‹å¼ç¢¼ä¿®æ”¹æä¾›å»ºè­°ç¨‹å¼ç¢¼ï¼ˆsuggestedCodeï¼‰
- âœ… æ¨™è¨˜éœ€è¦é—œæ³¨çš„ç¨‹å¼ç¢¼æ®µï¼ˆconcernï¼‰
- âœ… æª¢è¦–å’Œç®¡ç†æ‰€æœ‰è¨»è§£ï¼ˆå´é‚Šæ¬„ï¼‰
- âœ… ç†è§£ä¸‰ç¨®è¨»è§£é¡å‹çš„ä½¿ç”¨æƒ…å¢ƒ
- âœ… åŒ¯å‡ºå›é¥‹ç‚º Markdown æ ¼å¼

## ä½ ç¾åœ¨çš„å›°å¢ƒ

**å•é¡Œ 1**ï¼šå¯©æŸ¥ç¨‹å¼ç¢¼è®Šæ›´æ™‚ï¼Œåªèƒ½åœ¨çµ‚ç«¯æ©Ÿçœ‹ diffï¼Œç„¶å¾Œå¯«ã€Œç¬¬ 3 è¡Œæœ‰å•é¡Œã€ã€ã€Œå»ºè­°æ”¹æˆ XXXã€ï¼Œä½ç½®ä¸ç²¾ç¢ºã€‚

**å•é¡Œ 2**ï¼šæœ‰äº›ç¨‹å¼ç¢¼åªæ˜¯æƒ³è©•è«–ä¸€ä¸‹ï¼ˆcommentï¼‰ï¼Œæœ‰äº›æƒ³æä¿®æ”¹å»ºè­°ï¼ˆsuggestionï¼‰ï¼Œæœ‰äº›æ˜¯åš´é‡å•é¡Œéœ€è¦é—œæ³¨ï¼ˆconcernï¼‰ï¼Œä½†æ²’æœ‰å·¥å…·å¹«ä½ å€åˆ†ã€‚

**å•é¡Œ 3**ï¼šæƒ³çµ¦æŸå€‹å‡½å¼ä¿®æ”¹å»ºè­°ï¼Œä½†ä¸çŸ¥é“æ€éº¼æŠŠç¨‹å¼ç¢¼ç‰‡æ®µå‚³çµ¦ AIã€‚

**å•é¡Œ 4**ï¼šæ–°å¢äº†å¤šå€‹è¨»è§£å¾Œï¼Œå¿˜è¨˜éƒ½å¯©æŸ¥äº†å“ªäº›åœ°æ–¹ï¼Œæ²’æœ‰æ¦‚è¦½ã€‚

**Plannotator èƒ½å¹«ä½ **ï¼š
- é»æ“Šè¡Œè™Ÿå³å¯é¸å–ç¨‹å¼ç¢¼ç¯„åœï¼Œç²¾ç¢ºåˆ°è¡Œ
- ä¸‰ç¨®è¨»è§£é¡å‹ï¼ˆcomment/suggestion/concernï¼‰åˆ†åˆ¥å°æ‡‰ä¸åŒæƒ…å¢ƒ
- å¯ä»¥é™„åŠ å»ºè­°ç¨‹å¼ç¢¼ï¼ŒAI ç›´æ¥çœ‹åˆ°ä¿®æ”¹æ–¹æ¡ˆ
- å´é‚Šæ¬„åˆ—å‡ºæ‰€æœ‰è¨»è§£ï¼Œä¸€éµè·³è½‰

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

**ä½¿ç”¨æƒ…å¢ƒ**ï¼š
- åŸ·è¡Œ `/plannotator-review` æŒ‡ä»¤å¾Œæª¢è¦–ç¨‹å¼ç¢¼è®Šæ›´
- éœ€è¦å°å…·é«”ç¨‹å¼ç¢¼è¡Œçµ¦å‡ºå›é¥‹
- æƒ³æä¾›ç¨‹å¼ç¢¼ä¿®æ”¹å»ºè­°çµ¦ AI
- éœ€è¦æ¨™è¨˜æ½›åœ¨å•é¡Œæˆ–é¢¨éšªé»

**ä¸é©ç”¨æƒ…å¢ƒ**ï¼š
- å¯©æŸ¥ AI ç”¢ç”Ÿçš„å¯¦æ–½è¨ˆç•«ï¼ˆä½¿ç”¨è¨ˆç•«å¯©æŸ¥åŠŸèƒ½ï¼‰
- åªéœ€è¦å¿«é€Ÿç€è¦½ diffï¼ˆä½¿ç”¨ç¨‹å¼ç¢¼å¯©æŸ¥åŸºç¤åŠŸèƒ½ï¼‰

## ğŸ’ é–‹å§‹å‰çš„æº–å‚™

**å‰ç½®æ¢ä»¶**ï¼š
- âœ… å·²å®‰è£ Plannotator CLIï¼ˆè©³è¦‹ [å¿«é€Ÿé–‹å§‹](../../start/getting-started/)ï¼‰
- âœ… å·²å­¸æœƒç¨‹å¼ç¢¼å¯©æŸ¥åŸºç¤ï¼ˆè©³è¦‹ [ç¨‹å¼ç¢¼å¯©æŸ¥åŸºç¤](../code-review-basics/)ï¼‰
- âœ… æœ¬æ©Ÿæœ‰ Git å„²å­˜åº«ï¼Œä¸¦ä¸”æœ‰æœªæäº¤çš„è®Šæ›´

**è§¸ç™¼æ–¹å¼**ï¼š
- åœ¨ OpenCode æˆ– Claude Code ä¸­åŸ·è¡Œ `/plannotator-review` æŒ‡ä»¤

## æ ¸å¿ƒæ€è·¯

### ç¨‹å¼ç¢¼è¨»è§£æ˜¯ä»€éº¼

**ç¨‹å¼ç¢¼è¨»è§£**æ˜¯ Plannotator ç¨‹å¼ç¢¼å¯©æŸ¥çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç”¨æ–¼åœ¨ Git diff ä¸­æ–°å¢è¡Œç´šå›é¥‹ã€‚é€éé»æ“Šè¡Œè™Ÿé¸å–ç¨‹å¼ç¢¼ç¯„åœï¼Œä½ å¯ä»¥ç²¾ç¢ºåœ°é‡å°å…·é«”ç¨‹å¼ç¢¼è¡Œæ–°å¢è©•è«–ã€å»ºè­°æˆ–é—œæ³¨é»ï¼Œè¨»è§£æœƒé¡¯ç¤ºåœ¨ diff ä¸‹æ–¹ï¼Œä¾¿æ–¼ AI æº–ç¢ºç†è§£ä½ çš„å›é¥‹æ„åœ–ã€‚

::: info ç‚ºä»€éº¼éœ€è¦ç¨‹å¼ç¢¼è¨»è§£ï¼Ÿ
åœ¨ç¨‹å¼ç¢¼å¯©æŸ¥ä¸­ï¼Œä½ éœ€è¦å°å…·é«”çš„ç¨‹å¼ç¢¼è¡Œçµ¦å‡ºå›é¥‹ã€‚å¦‚æœåªæ˜¯ç”¨æ–‡å­—æè¿°ã€Œç¬¬ 5 è¡Œæœ‰å•é¡Œã€ã€ã€Œå»ºè­°æ”¹æˆ XXXã€ï¼ŒAI éœ€è¦è‡ªå·±å»å®šä½ç¨‹å¼ç¢¼ï¼Œå®¹æ˜“å‡ºéŒ¯ã€‚Plannotator è®“ä½ é»æ“Šè¡Œè™Ÿé¸å–ç¨‹å¼ç¢¼ç¯„åœï¼Œç›´æ¥åœ¨è©²ä½ç½®æ–°å¢è¨»è§£ï¼Œè¨»è§£æœƒé¡¯ç¤ºåœ¨ diff ä¸‹æ–¹ï¼ˆGitHub é¢¨æ ¼ï¼‰ï¼ŒAI èƒ½æº–ç¢ºçœ‹åˆ°ä½ é‡å°å“ªæ®µç¨‹å¼ç¢¼æå‡ºçš„å»ºè­°ã€‚
:::

### é‹ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /plannotator-   â”‚  è§¸ç™¼æŒ‡ä»¤
â”‚  review æŒ‡ä»¤      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ åŸ·è¡Œ git diff
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Diff Viewer    â”‚  â† é¡¯ç¤ºç¨‹å¼ç¢¼ diff
â”‚  (split/unified) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ é»æ“Šè¡Œè™Ÿ / Hover +
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¸å–ç¨‹å¼ç¢¼ç¯„åœ   â”‚
â”‚  (lineStart-    â”‚
â”‚   lineEnd)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–°å¢è¨»è§£       â”‚  â† å·¥å…·åˆ—å½ˆå‡º
â”‚  - Comment     â”‚     å¡«å¯«è©•è«–å…§å®¹
â”‚  - Suggestion  â”‚     å¯é¸ï¼šæä¾›å»ºè­°ç¨‹å¼ç¢¼
â”‚  - Concern     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¨»è§£é¡¯ç¤º       â”‚  åœ¨ diff ä¸‹æ–¹
â”‚  (GitHub é¢¨æ ¼) â”‚  å´é‚Šæ¬„åˆ—å‡ºæ‰€æœ‰è¨»è§£
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŒ¯å‡ºå›é¥‹       â”‚  Send Feedback
â”‚  (Markdown)     â”‚  AI æ”¶åˆ°çµæ§‹åŒ–å›é¥‹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¨»è§£é¡å‹

Plannotator æ”¯æ´ä¸‰ç¨®ç¨‹å¼ç¢¼è¨»è§£é¡å‹ï¼Œæ¯ç¨®éƒ½æœ‰ä¸åŒçš„ç”¨é€”ï¼š

| è¨»è§£é¡å‹ | ç”¨é€” | å…¸å‹æƒ…å¢ƒ | å»ºè­°ç¨‹å¼ç¢¼ |
|--- | --- | --- | ---|
| **Comment** | è©•è«–æŸæ®µç¨‹å¼ç¢¼ï¼Œæä¾›ä¸€èˆ¬æ€§å›é¥‹ | ã€Œé€™æ®µé‚è¼¯å¯ä»¥ç°¡åŒ–ã€ã€ã€Œè®Šæ•¸å‘½åä¸å¤ªæ¸…æ™°ã€ | å¯é¸ |
| **Suggestion** | æä¾›å…·é«”çš„ç¨‹å¼ç¢¼ä¿®æ”¹å»ºè­° | ã€Œå»ºè­°ç”¨ map æ›¿ä»£ for è¿´åœˆã€ã€ã€Œç”¨ await æ›¿ä»£ Promise.thenã€ | æ¨è–¦ |
| **Concern** | æ¨™è¨˜æ½›åœ¨å•é¡Œæˆ–é¢¨éšªé» | ã€Œé€™å€‹ SQL æŸ¥è©¢å¯èƒ½æœ‰æ•ˆèƒ½å•é¡Œã€ã€ã€Œç¼ºå°‘éŒ¯èª¤è™•ç†ã€ | å¯é¸ |

::: tip è¨»è§£é¡å‹çš„é¸æ“‡å»ºè­°
- **Comment**ï¼šç”¨æ–¼ã€Œæå»ºè­°ä½†ä¸å¼·åˆ¶ã€ï¼Œæ¯”å¦‚ç¨‹å¼ç¢¼é¢¨æ ¼ã€æœ€ä½³åŒ–æ–¹å‘
- **Suggestion**ï¼šç”¨æ–¼ã€Œå¼·çƒˆå»ºè­°ä¿®æ”¹ã€ï¼Œä¸¦ä¸”ä½ æœ‰æ˜ç¢ºçš„ä¿®æ”¹æ–¹æ¡ˆ
- **Concern**ï¼šç”¨æ–¼ã€Œå¿…é ˆæ³¨æ„çš„å•é¡Œã€ï¼Œæ¯”å¦‚ bugã€æ•ˆèƒ½é¢¨éšªã€å®‰å…¨éš±æ‚£
:::

### Comment vs Suggestion vs Concern

| æƒ…å¢ƒ | é¸æ“‡é¡å‹ | ç¯„ä¾‹æ–‡å­— |
|--- | --- | ---|
| ç¨‹å¼ç¢¼å¯ä»¥é‹ä½œï¼Œä½†æœ‰æœ€ä½³åŒ–ç©ºé–“ | Comment | ã€Œé€™æ®µå¯ä»¥ç”¨ async/await ç°¡åŒ–ã€ |
| ç¨‹å¼ç¢¼æœ‰æ˜ç¢ºçš„æ”¹é€²æ–¹æ¡ˆ | Suggestion | ã€Œå»ºè­°ç”¨ `Array.from()` æ›¿ä»£å±•é–‹é‹ç®—å­ã€ï¼ˆé™„ç¨‹å¼ç¢¼ï¼‰ |
| ç™¼ç¾ bug æˆ–åš´é‡å•é¡Œ | Concern | ã€Œé€™è£¡ç¼ºå°‘ null æª¢æŸ¥ï¼Œå¯èƒ½å°è‡´åŸ·è¡Œæ™‚æœŸéŒ¯èª¤ã€ |

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šè§¸ç™¼ç¨‹å¼ç¢¼å¯©æŸ¥

åœ¨çµ‚ç«¯æ©Ÿä¸­åŸ·è¡Œï¼š

```bash
/plannotator-review
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
1. ç€è¦½å™¨è‡ªå‹•é–‹å•Ÿç¨‹å¼ç¢¼å¯©æŸ¥ä»‹é¢
2. é¡¯ç¤º git diff å…§å®¹ï¼ˆé è¨­æ˜¯ `git diff HEAD`ï¼‰
3. å·¦å´æ˜¯æª”æ¡ˆæ¨¹ï¼Œä¸­é–“æ˜¯ diff viewerï¼Œå³å´æ˜¯è¨»è§£å´é‚Šæ¬„

### ç¬¬ 2 æ­¥ï¼šç€è¦½ diff å…§å®¹

åœ¨ç€è¦½å™¨ä¸­æª¢è¦–ç¨‹å¼ç¢¼è®Šæ›´ï¼š

- é è¨­ä½¿ç”¨ **split æª¢è¦–**ï¼ˆå·¦å³å°æ¯”ï¼‰
- å¯ä»¥åˆ‡æ›åˆ° **unified æª¢è¦–**ï¼ˆä¸Šä¸‹å°æ¯”ï¼‰
- é»æ“Šæª”æ¡ˆæ¨¹ä¸­çš„æª”æ¡ˆåç¨±åˆ‡æ›æª¢è¦–çš„æª”æ¡ˆ

### ç¬¬ 3 æ­¥ï¼šé¸å–ç¨‹å¼ç¢¼è¡Œï¼Œæ–°å¢è¨»è§£

**æ–¹å¼ä¸€ï¼šHover é»æ“Šã€Œ+ã€æŒ‰éˆ•**

1. å°‡æ»‘é¼ æ‡¸åœåœ¨è¦æ–°å¢è¨»è§£çš„ç¨‹å¼ç¢¼è¡Œä¸Š
2. å³å´æœƒå‡ºç¾ä¸€å€‹ **+** æŒ‰éˆ•ï¼ˆåƒ…åœ¨ diff è¡Œä¸Šé¡¯ç¤ºï¼‰
3. é»æ“Š **+** æŒ‰éˆ•
4. å½ˆå‡ºè¨»è§£å·¥å…·åˆ—

**æ–¹å¼äºŒï¼šç›´æ¥é»æ“Šè¡Œè™Ÿ**

1. é»æ“ŠæŸå€‹è¡Œè™Ÿï¼ˆä¾‹å¦‚ `L10`ï¼‰ï¼Œé¸å–å–®è¡Œ
2. é»æ“Šå¦ä¸€å€‹è¡Œè™Ÿï¼ˆä¾‹å¦‚ `L15`ï¼‰ï¼Œé¸å–å¤šè¡Œç¯„åœ
3. é¸å–ç¯„åœå¾Œï¼Œå·¥å…·åˆ—è‡ªå‹•å½ˆå‡º

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- å·¥å…·åˆ—é¡¯ç¤ºé¸å–è¡Œè™Ÿï¼ˆä¾‹å¦‚ `Line 10` æˆ– `Lines 10-15`ï¼‰
- å·¥å…·åˆ—åŒ…å«æ–‡å­—è¼¸å…¥æ¡†ï¼ˆ`Leave feedback...`ï¼‰
- å¯é¸çš„ã€ŒAdd suggested codeã€æŒ‰éˆ•

### ç¬¬ 4 æ­¥ï¼šæ–°å¢ Comment è¨»è§£

**æƒ…å¢ƒ**ï¼šå°ç¨‹å¼ç¢¼æä¾›å»ºè­°ï¼Œä½†ä¸è¦æ±‚å¿…é ˆä¿®æ”¹

1. åœ¨å·¥å…·åˆ—çš„æ–‡å­—æ¡†ä¸­è¼¸å…¥è©•è«–å…§å®¹
2. å¯é¸ï¼šé»æ“Š **Add suggested code**ï¼Œè¼¸å…¥å»ºè­°ç¨‹å¼ç¢¼
3. é»æ“Š **Add Comment** æŒ‰éˆ•

**ç¯„ä¾‹**ï¼š

```
è©•è«–å…§å®¹ï¼šé€™å€‹å‡½å¼çš„åƒæ•¸å‘½åä¸å¤ªæ¸…æ™°ï¼Œå»ºè­°æ”¹åç‚º fetchUserData
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- å·¥å…·åˆ—æ¶ˆå¤±
- è¨»è§£é¡¯ç¤ºåœ¨ diff ä¸‹æ–¹ï¼ˆè—è‰²æ¡†ï¼‰
- å´é‚Šæ¬„ä¸­æ–°å¢ä¸€æ¢è¨»è§£è¨˜éŒ„
- å¦‚æœæä¾›äº†å»ºè­°ç¨‹å¼ç¢¼ï¼Œæœƒé¡¯ç¤ºåœ¨è¨»è§£ä¸‹æ–¹ï¼ˆç¨‹å¼ç¢¼å€å¡Šæ ¼å¼ï¼‰

### ç¬¬ 5 æ­¥ï¼šæ–°å¢ Suggestion è¨»è§£

**æƒ…å¢ƒ**ï¼šæä¾›æ˜ç¢ºçš„ç¨‹å¼ç¢¼ä¿®æ”¹æ–¹æ¡ˆï¼Œå¸Œæœ› AI ç›´æ¥æ¡ç”¨

1. åœ¨å·¥å…·åˆ—çš„æ–‡å­—æ¡†ä¸­è¼¸å…¥å»ºè­°èªªæ˜ï¼ˆå¯é¸ï¼‰
2. é»æ“Š **Add suggested code**
3. åœ¨å‡ºç¾çš„ç¨‹å¼ç¢¼è¼¸å…¥æ¡†ä¸­è¼¸å…¥å»ºè­°çš„ç¨‹å¼ç¢¼
4. é»æ“Š **Add Comment** æŒ‰éˆ•

**ç¯„ä¾‹**ï¼š

```
å»ºè­°èªªæ˜ï¼šä½¿ç”¨ async/await ç°¡åŒ– Promise éˆ

å»ºè­°ç¨‹å¼ç¢¼ï¼š
async function fetchData() {
  const response = await fetch(url);
  const data = await response.json();
  return data;
}
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- è¨»è§£é¡¯ç¤ºåœ¨ diff ä¸‹æ–¹ï¼ˆè—è‰²æ¡†ï¼‰
- å»ºè­°ç¨‹å¼ç¢¼ä»¥ç¨‹å¼ç¢¼å€å¡Šå½¢å¼é¡¯ç¤ºï¼Œå¸¶ã€ŒSuggested:ã€æ¨™ç±¤
- å´é‚Šæ¬„ä¸­é¡¯ç¤ºå»ºè­°ç¨‹å¼ç¢¼çš„ç¬¬ä¸€è¡Œï¼ˆå¸¶çœç•¥è™Ÿï¼‰

### ç¬¬ 6 æ­¥ï¼šæ–°å¢ Concern è¨»è§£

**æƒ…å¢ƒ**ï¼šæ¨™è¨˜æ½›åœ¨å•é¡Œæˆ–é¢¨éšªé»ï¼Œæé†’ AI æ³¨æ„

**æ³¨æ„**ï¼šç›®å‰ç‰ˆæœ¬çš„ Plannotator UI ä¸­ï¼Œè¨»è§£é¡å‹é è¨­ç‚º **Comment**ã€‚å¦‚æœéœ€è¦æ¨™è¨˜ **Concern**ï¼Œå¯ä»¥åœ¨è¨»è§£æ–‡å­—ä¸­æ˜ç¢ºèªªæ˜ã€‚

1. åœ¨å·¥å…·åˆ—çš„æ–‡å­—æ¡†ä¸­è¼¸å…¥é—œæ³¨é»èªªæ˜
2. å¯ä»¥ä½¿ç”¨ `Concern:` æˆ– `âš ï¸` ç­‰æ¨™è¨˜æ˜ç¢ºé€™æ˜¯é—œæ³¨é»
3. é»æ“Š **Add Comment** æŒ‰éˆ•

**ç¯„ä¾‹**ï¼š

```
Concern: é€™è£¡ç¼ºå°‘ null æª¢æŸ¥ï¼Œå¦‚æœ user ç‚º null æœƒå°è‡´åŸ·è¡Œæ™‚æœŸéŒ¯èª¤

å»ºè­°æ–°å¢ï¼š
if (!user) return null;
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- è¨»è§£é¡¯ç¤ºåœ¨ diff ä¸‹æ–¹
- å´é‚Šæ¬„ä¸­é¡¯ç¤ºè¨»è§£å…§å®¹

### ç¬¬ 7 æ­¥ï¼šæª¢è¦–å’Œç®¡ç†è¨»è§£

**åœ¨å´é‚Šæ¬„ä¸­æª¢è¦–æ‰€æœ‰è¨»è§£**ï¼š

1. å³å´é‚Šæ¬„é¡¯ç¤ºæ‰€æœ‰è¨»è§£æ¸…å–®
2. æ¯æ¢è¨»è§£é¡¯ç¤ºï¼š
   - æª”æ¡ˆåç¨±ï¼ˆæ“·å–æœ€å¾Œä¸€å€‹è·¯å¾‘å…ƒä»¶ï¼‰
   - è¡Œè™Ÿç¯„åœï¼ˆä¾‹å¦‚ `L10` æˆ– `L10-L15`ï¼‰
   - ä½œè€…ï¼ˆå¦‚æœæ˜¯å”ä½œå¯©æŸ¥ï¼‰
   - æ™‚é–“æˆ³è¨˜ï¼ˆä¾‹å¦‚ `5m`ã€`2h`ã€`1d`ï¼‰
   - è¨»è§£å…§å®¹ï¼ˆæœ€å¤šé¡¯ç¤º 2 è¡Œï¼‰
   - å»ºè­°ç¨‹å¼ç¢¼é è¦½ï¼ˆç¬¬ä¸€è¡Œï¼‰

**é»æ“Šè¨»è§£è·³è½‰**ï¼š

1. åœ¨å´é‚Šæ¬„ä¸­é»æ“ŠæŸæ¢è¨»è§£
2. Diff viewer è‡ªå‹•æ²å‹•åˆ°å°æ‡‰ä½ç½®
3. è©²è¨»è§£è¢«é†’ç›®æç¤º

**åˆªé™¤è¨»è§£**ï¼š

1. æ»‘é¼ æ‡¸åœåœ¨å´é‚Šæ¬„ä¸­çš„æŸæ¢è¨»è§£ä¸Š
2. é»æ“Šå³ä¸Šè§’çš„ **Ã—** æŒ‰éˆ•
3. è¨»è§£è¢«åˆªé™¤ï¼Œdiff ä¸­çš„é†’ç›®æç¤ºæ¶ˆå¤±

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- å´é‚Šæ¬„é¡¯ç¤ºè¨»è§£æ•¸é‡ï¼ˆä¾‹å¦‚ `Annotations: 3`ï¼‰
- é»æ“Šè¨»è§£å¾Œï¼Œdiff viewer å¹³æ»‘æ²å‹•åˆ°å°æ‡‰è¡Œ
- åˆªé™¤è¨»è§£å¾Œï¼Œæ•¸é‡æ›´æ–°

### ç¬¬ 8 æ­¥ï¼šåŒ¯å‡ºå›é¥‹

å®Œæˆæ‰€æœ‰è¨»è§£å¾Œï¼Œé»æ“Šé é¢åº•éƒ¨çš„ **Send Feedback** æŒ‰éˆ•ã€‚

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- ç€è¦½å™¨è‡ªå‹•é—œé–‰
- çµ‚ç«¯æ©Ÿä¸­é¡¯ç¤º Markdown æ ¼å¼çš„å›é¥‹å…§å®¹
- AI æ”¶åˆ°çµæ§‹åŒ–å›é¥‹ï¼Œå¯ä»¥è‡ªå‹•å›æ‡‰

**åŒ¯å‡ºçš„ Markdown æ ¼å¼**ï¼š

```markdown
# Code Review Feedback

## src/app/api/users.ts

### Line 10 (new)
é€™æ®µé‚è¼¯å¯ä»¥ç°¡åŒ–ï¼Œå»ºè­°ç”¨ async/await

### Lines 15-20 (new)
**Suggested code:**
```typescript
async function fetchUserData() {
  const response = await fetch(url);
  return await response.json();
}
```

### Line 25 (old)
Concern: é€™è£¡ç¼ºå°‘ null æª¢æŸ¥ï¼Œå¦‚æœ user ç‚º null æœƒå°è‡´åŸ·è¡Œæ™‚æœŸéŒ¯èª¤
```

::: tip è¤‡è£½å›é¥‹
å¦‚æœéœ€è¦æ‰‹å‹•è¤‡è£½å›é¥‹å…§å®¹ï¼Œå¯ä»¥åœ¨å´é‚Šæ¬„åº•éƒ¨é»æ“Š **Copy Feedback** æŒ‰éˆ•ï¼Œå°‡ Markdown æ ¼å¼çš„å›é¥‹è¤‡è£½åˆ°å‰ªè²¼ç°¿ã€‚
:::

## æª¢æŸ¥é» âœ…

å®Œæˆä»¥ä¸Šæ­¥é©Ÿå¾Œï¼Œä½ æ‡‰è©²èƒ½å¤ ï¼š

- [ ] åœ¨ç¨‹å¼ç¢¼ diff ä¸­é»æ“Šè¡Œè™Ÿæˆ– Hoverã€Œ+ã€æŒ‰éˆ•é¸å–ç¨‹å¼ç¢¼è¡Œ
- [ ] æ–°å¢ Comment è¨»è§£ï¼ˆä¸€èˆ¬æ€§è©•è«–ï¼‰
- [ ] æ–°å¢ Suggestion è¨»è§£ï¼ˆé™„å»ºè­°ç¨‹å¼ç¢¼ï¼‰
- [ ] æ–°å¢ Concern è¨»è§£ï¼ˆæ¨™è¨˜æ½›åœ¨å•é¡Œï¼‰
- [ ] åœ¨å´é‚Šæ¬„æª¢è¦–æ‰€æœ‰è¨»è§£ï¼Œé»æ“Šè·³è½‰åˆ°å°æ‡‰ä½ç½®
- [ ] åˆªé™¤ä¸éœ€è¦çš„è¨»è§£
- [ ] åŒ¯å‡ºå›é¥‹ç‚º Markdown æ ¼å¼
- [ ] è¤‡è£½å›é¥‹å…§å®¹åˆ°å‰ªè²¼ç°¿

**å¦‚æœæŸä¸€æ­¥å¤±æ•—**ï¼Œè©³è¦‹ï¼š
- [å¸¸è¦‹å•é¡Œ](../../faq/common-problems/)
- [ç¨‹å¼ç¢¼å¯©æŸ¥åŸºç¤](../code-review-basics/)
- [æ•…éšœæ’é™¤](../../faq/troubleshooting/)

## è¸©å‘æé†’

**å¸¸è¦‹éŒ¯èª¤ 1**ï¼šé»æ“Šè¡Œè™Ÿå¾Œï¼Œå·¥å…·åˆ—æ²’æœ‰å½ˆå‡º

**åŸå› **ï¼šå¯èƒ½é»æ“Šçš„æ˜¯æª”æ¡ˆåç¨±æˆ–è¡Œè™Ÿä¸åœ¨ diff ç¯„åœå…§ã€‚

**è§£æ±º**ï¼š
- ç¢ºä¿é»æ“Šçš„æ˜¯ diff è¡Œçš„è¡Œè™Ÿï¼ˆç¶ è‰²æˆ–ç´…è‰²è¡Œï¼‰
- å°æ–¼åˆªé™¤è¡Œï¼ˆç´…è‰²ï¼‰ï¼Œé»æ“Šå·¦å´çš„è¡Œè™Ÿ
- å°æ–¼æ–°å¢è¡Œï¼ˆç¶ è‰²ï¼‰ï¼Œé»æ“Šå³å´çš„è¡Œè™Ÿ

**å¸¸è¦‹éŒ¯èª¤ 2**ï¼šé¸å–å¤šè¡Œå¾Œï¼Œè¨»è§£é¡¯ç¤ºåœ¨éŒ¯èª¤çš„ä½ç½®

**åŸå› **ï¼šsideï¼ˆold/newï¼‰ä¸æ­£ç¢ºã€‚

**è§£æ±º**ï¼š
- æª¢æŸ¥ä½ é¸å–çš„æ˜¯èˆŠç¨‹å¼ç¢¼ï¼ˆdeletionsï¼‰é‚„æ˜¯æ–°ç¨‹å¼ç¢¼ï¼ˆadditionsï¼‰
- è¨»è§£æœƒé¡¯ç¤ºåœ¨ç¯„åœæœ€å¾Œä¸€è¡Œçš„ä¸‹æ–¹
- å¦‚æœä½ç½®ä¸å°ï¼Œåˆªé™¤è¨»è§£é‡æ–°æ–°å¢

**å¸¸è¦‹éŒ¯èª¤ 3**ï¼šæ–°å¢å»ºè­°ç¨‹å¼ç¢¼å¾Œï¼Œç¨‹å¼ç¢¼æ ¼å¼éŒ¯äº‚

**åŸå› **ï¼šå»ºè­°ç¨‹å¼ç¢¼å¯èƒ½åŒ…å«ç‰¹æ®Šå­—å…ƒæˆ–ç¸®æ’å•é¡Œã€‚

**è§£æ±º**ï¼š
- åœ¨å»ºè­°ç¨‹å¼ç¢¼è¼¸å…¥æ¡†ä¸­ï¼Œç¢ºä¿ç¸®æ’æ­£ç¢º
- ä½¿ç”¨ç­‰å¯¬å­—å‹ç·¨è¼¯å»ºè­°ç¨‹å¼ç¢¼
- å¦‚æœæœ‰æ›è¡Œï¼Œä½¿ç”¨ `Shift + Enter` è€Œä¸æ˜¯ç›´æ¥æŒ‰ Enter

**å¸¸è¦‹éŒ¯èª¤ 4**ï¼šå´é‚Šæ¬„ä¸­çœ‹ä¸åˆ°æ–°å¢çš„è¨»è§£

**åŸå› **ï¼šå´é‚Šæ¬„å¯èƒ½æ²’æœ‰é‡æ–°æ•´ç†ï¼Œæˆ–è€…è¨»è§£æ–°å¢åˆ°äº†å…¶ä»–æª”æ¡ˆã€‚

**è§£æ±º**ï¼š
- åˆ‡æ›æª”æ¡ˆå¾Œå†åˆ‡æ›å›ä¾†
- æª¢æŸ¥è¨»è§£æ˜¯å¦æ–°å¢åˆ°äº†ç›®å‰æª¢è¦–çš„æª”æ¡ˆ
- é‡æ–°æ•´ç†ç€è¦½å™¨é é¢ï¼ˆå¯èƒ½éºå¤±æœªæäº¤çš„è¨»è§£ï¼‰

**å¸¸è¦‹éŒ¯èª¤ 5**ï¼šåŒ¯å‡ºå›é¥‹å¾Œï¼ŒAI æ²’æœ‰æŒ‰å»ºè­°ä¿®æ”¹

**åŸå› **ï¼šAI å¯èƒ½æ²’æœ‰æ­£ç¢ºç†è§£è¨»è§£çš„æ„åœ–ï¼Œæˆ–è€…å»ºè­°ä¸å¯è¡Œã€‚

**è§£æ±º**ï¼š
- ä½¿ç”¨æ›´æ˜ç¢ºçš„è¨»è§£ï¼ˆSuggestion æ¯” Comment æ›´æ˜ç¢ºï¼‰
- åœ¨å»ºè­°ç¨‹å¼ç¢¼ä¸­æ–°å¢è¨»è§£èªªæ˜åŸå› 
- å¦‚æœå•é¡ŒæŒçºŒï¼Œå¯ä»¥å†æ¬¡å‚³é€å›é¥‹ï¼Œèª¿æ•´è¨»è§£å…§å®¹

## æœ¬èª²å°çµ

ç¨‹å¼ç¢¼è¨»è§£æ˜¯ Plannotator ç¨‹å¼ç¢¼å¯©æŸ¥çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè®“ä½ å¯ä»¥ç²¾ç¢ºåœ°å›é¥‹ç¨‹å¼ç¢¼å•é¡Œï¼š

**æ ¸å¿ƒæ“ä½œ**ï¼š
1. **è§¸ç™¼**ï¼šåŸ·è¡Œ `/plannotator-review`ï¼Œç€è¦½å™¨è‡ªå‹•é–‹å•Ÿ diff viewer
2. **ç€è¦½**ï¼šæª¢è¦–ç¨‹å¼ç¢¼è®Šæ›´ï¼ˆsplit/unified æª¢è¦–åˆ‡æ›ï¼‰
3. **é¸å–**ï¼šé»æ“Šè¡Œè™Ÿæˆ– Hoverã€Œ+ã€æŒ‰éˆ•é¸å–ç¨‹å¼ç¢¼ç¯„åœ
4. **è¨»è§£**ï¼šæ–°å¢ Comment/Suggestion/Concern è¨»è§£
5. **ç®¡ç†**ï¼šåœ¨å´é‚Šæ¬„æª¢è¦–ã€è·³è½‰ã€åˆªé™¤è¨»è§£
6. **åŒ¯å‡º**ï¼šSend Feedbackï¼ŒAI æ”¶åˆ°çµæ§‹åŒ–å›é¥‹

**è¨»è§£é¡å‹**ï¼š
- **Comment**ï¼šä¸€èˆ¬æ€§è©•è«–ï¼Œæä¾›å»ºè­°ä½†ä¸å¼·åˆ¶
- **Suggestion**ï¼šæ˜ç¢ºå»ºè­°ä¿®æ”¹ï¼Œé™„å»ºè­°ç¨‹å¼ç¢¼
- **Concern**ï¼šæ¨™è¨˜æ½›åœ¨å•é¡Œæˆ–é¢¨éšªé»

**æœ€ä½³å¯¦è¸**ï¼š
- ä½¿ç”¨ Suggestion æ™‚ï¼Œç›¡é‡æä¾›å®Œæ•´çš„å¯åŸ·è¡Œç¨‹å¼ç¢¼
- å°æ–¼æ•ˆèƒ½æˆ–å®‰å…¨å•é¡Œï¼Œä½¿ç”¨ Concern æ¨™è¨˜
- è¨»è§£å…§å®¹è¦å…·é«”ï¼Œé¿å…æ¨¡ç³Šæè¿°ï¼ˆå¦‚ã€Œé€™å€‹ä¸å¥½ã€ï¼‰
- å¯ä»¥é™„åŠ åœ–ç‰‡è¼”åŠ©èªªæ˜ï¼ˆä½¿ç”¨åœ–åƒæ¨™è¨»åŠŸèƒ½ï¼‰

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[åˆ‡æ› Diff æª¢è¦–](../code-review-diff-types/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - å¦‚ä½•åˆ‡æ›ä¸åŒçš„ diff é¡å‹ï¼ˆuncommitted/staged/last commit/branchï¼‰
> - ä¸åŒ diff é¡å‹çš„ä½¿ç”¨æƒ…å¢ƒ
> - å¦‚ä½•åœ¨å¤šç¨® diff é¡å‹é–“å¿«é€Ÿåˆ‡æ›

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æª¢è¦–åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-24

| åŠŸèƒ½              | æª”æ¡ˆè·¯å¾‘                                                                                              | è¡Œè™Ÿ    |
|--- | --- | ---|
| CodeAnnotation é¡å‹å®šç¾© | [`packages/ui/types.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/types.ts#L53-L56)             | 53-56   |
| CodeAnnotation ä»‹é¢ | [`packages/ui/types.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/types.ts#L55-L66)               | 55-66   |
| DiffViewer å…ƒä»¶    | [`packages/review-editor/components/DiffViewer.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/components/DiffViewer.tsx#L1-L349) | 1-349   |
| ReviewPanel å…ƒä»¶   | [`packages/review-editor/components/ReviewPanel.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/components/ReviewPanel.tsx#L1-L211) | 1-211   |
| åŒ¯å‡ºå›é¥‹ Markdown  | [`packages/review-editor/App.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/App.tsx#L86-L126)        | 86-126  |
| Hoverã€Œ+ã€æŒ‰éˆ•     | [`packages/review-editor/components/DiffViewer.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/components/DiffViewer.tsx#L180-L199) | 180-199 |
| è¨»è§£å·¥å…·åˆ—        | [`packages/review-editor/components/DiffViewer.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/components/DiffViewer.tsx#L267-L344) | 267-344 |
| è¨»è§£æ¸²æŸ“          | [`packages/review-editor/components/DiffViewer.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/components/DiffViewer.tsx#L140-L177) | 140-177 |

**é—œéµé¡å‹**ï¼š
- `CodeAnnotationType`ï¼šç¨‹å¼ç¢¼è¨»è§£é¡å‹ï¼ˆ'comment' | 'suggestion' | 'concern'ï¼‰ï¼ˆ`packages/ui/types.ts:53`ï¼‰
- `CodeAnnotation`ï¼šç¨‹å¼ç¢¼è¨»è§£ä»‹é¢ï¼ˆ`packages/ui/types.ts:55-66`ï¼‰
- `SelectedLineRange`ï¼šé¸å–çš„ç¨‹å¼ç¢¼ç¯„åœï¼ˆ`packages/ui/types.ts:77-82`ï¼‰

**é—œéµå‡½å¼**ï¼š
- `exportReviewFeedback()`ï¼šå°‡è¨»è§£è½‰æ›ç‚º Markdown æ ¼å¼ï¼ˆ`packages/review-editor/App.tsx:86`ï¼‰
- `renderAnnotation()`ï¼šåœ¨ diff ä¸­æ¸²æŸ“è¨»è§£ï¼ˆ`packages/review-editor/components/DiffViewer.tsx:140`ï¼‰
- `renderHoverUtility()`ï¼šæ¸²æŸ“ Hoverã€Œ+ã€æŒ‰éˆ•ï¼ˆ`packages/review-editor/components/DiffViewer.tsx:180`ï¼‰

**API è·¯ç”±**ï¼š
- `POST /api/feedback`ï¼šæäº¤å¯©æŸ¥å›é¥‹ï¼ˆ`packages/server/review.ts`ï¼‰
- `GET /api/diff`ï¼šå–å¾— git diffï¼ˆ`packages/server/review.ts:111`ï¼‰
- `POST /api/diff/switch`ï¼šåˆ‡æ› diff é¡å‹ï¼ˆ`packages/server/review.ts`ï¼‰

**æ¥­å‹™è¦å‰‡**ï¼š
- é è¨­æª¢è¦–æœªæäº¤çš„ diffï¼ˆ`git diff HEAD`ï¼‰ï¼ˆ`packages/server/review.ts:111`ï¼‰
- è¨»è§£é¡¯ç¤ºåœ¨ç¯„åœæœ€å¾Œä¸€è¡Œçš„ä¸‹æ–¹ï¼ˆGitHub é¢¨æ ¼ï¼‰ï¼ˆ`packages/review-editor/components/DiffViewer.tsx:81`ï¼‰
- æ”¯æ´åœ¨è¨»è§£ä¸­é™„åŠ å»ºè­°ç¨‹å¼ç¢¼ï¼ˆ`suggestedCode` æ¬„ä½ï¼‰ï¼ˆ`packages/ui/types.ts:63`ï¼‰

</details>
