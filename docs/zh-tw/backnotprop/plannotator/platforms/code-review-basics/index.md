---
title: "ç¨‹å¼ç¢¼å¯©æŸ¥: Git Diff è¦–è¦ºåŒ–å¯©æŸ¥ | plannotator"
sidebarTitle: "å¯©æŸ¥ Agent æ”¹çš„ç¨‹å¼ç¢¼"
subtitle: "ç¨‹å¼ç¢¼å¯©æŸ¥: Git Diff è¦–è¦ºåŒ–å¯©æŸ¥"
description: "å­¸ç¿’ Plannotator çš„ç¨‹å¼ç¢¼å¯©æŸ¥åŠŸèƒ½ã€‚ä½¿ç”¨è¦–è¦ºåŒ–ä»‹é¢å¯©æŸ¥ Git Diffï¼Œåœ¨ side-by-side å’Œ unified æª¢è¦–é–“åˆ‡æ›ï¼Œæ–°å¢è¡Œç´šè¨»è§£ï¼Œä¸¦å°‡å›é¥‹å‚³é€çµ¦ AI Agentã€‚"
tags:
  - "ç¨‹å¼ç¢¼å¯©æŸ¥"
  - "Git Diff"
  - "è¡Œç´šè¨»è§£"
  - "Side-by-side"
  - "Unified"
  - "Claude Code"
  - "OpenCode"
prerequisite:
  - "start-getting-started"
order: 4
---

# ç¨‹å¼ç¢¼å¯©æŸ¥åŸºç¤ï¼šä½¿ç”¨ /plannotator-review å¯©æŸ¥ Git Diff

## å­¸å®Œä½ èƒ½åšä»€éº¼

- âœ… ä½¿ç”¨ `/plannotator-review` æŒ‡ä»¤å¯©æŸ¥ Git Diff
- âœ… åœ¨ side-by-side å’Œ unified æª¢è¦–é–“åˆ‡æ›
- âœ… é»æ“Šè¡Œè™Ÿé¸å–ç¨‹å¼ç¢¼ç¯„åœï¼Œæ–°å¢è¡Œç´šè¨»è§£
- âœ… æ–°å¢ä¸åŒé¡å‹çš„è¨»è§£ï¼ˆcomment/suggestion/concernï¼‰
- âœ… åˆ‡æ›ä¸åŒçš„ diff é¡å‹ï¼ˆuncommitted/staged/last commit/branchï¼‰
- âœ… å°‡å¯©æŸ¥å›é¥‹å‚³é€çµ¦ AI Agent

## ä½ ç¾åœ¨çš„å›°å¢ƒ

**å•é¡Œ 1**ï¼šç”¨ `git diff` æª¢è¦–ç¨‹å¼ç¢¼è®Šæ›´æ™‚ï¼Œè¼¸å‡ºåœ¨çµ‚ç«¯æ©Ÿè£¡æ²å‹•ï¼Œé›£ä»¥å…¨é¢ç†è§£æ”¹å‹•å…§å®¹ã€‚

**å•é¡Œ 2**ï¼šæƒ³çµ¦ Agent å›é¥‹ç¨‹å¼ç¢¼å•é¡Œæ™‚ï¼Œåªèƒ½ç”¨æ–‡å­—æè¿°ã€Œç¬¬ 10 è¡Œæœ‰å•é¡Œã€ã€ã€Œä¿®æ”¹é€™å€‹å‡½å¼ã€ï¼Œå®¹æ˜“ç”¢ç”Ÿæ­§ç¾©ã€‚

**å•é¡Œ 3**ï¼šä¸çŸ¥é“ Agent å…·é«”æ”¹äº†å“ªäº›æª”æ¡ˆï¼Œåœ¨å¤§é‡æ”¹å‹•ä¸­é›£ä»¥èšç„¦é—œéµéƒ¨åˆ†ã€‚

**å•é¡Œ 4**ï¼šå¯©æŸ¥ç¨‹å¼ç¢¼å¾Œï¼Œæƒ³æŠŠçµæ§‹åŒ–å›é¥‹å‚³é€çµ¦ Agentï¼Œè®“å®ƒæ ¹æ“šå»ºè­°é‡æ–°ä¿®æ”¹ã€‚

**Plannotator èƒ½å¹«ä½ **ï¼š
- è¦–è¦ºåŒ– Git Diffï¼Œæ”¯æ´ side-by-side å’Œ unified å…©ç¨®æª¢è¦–
- é»æ“Šè¡Œè™Ÿå³å¯é¸å–ç¨‹å¼ç¢¼ç¯„åœï¼Œç²¾ç¢ºæ¨™è¨»å•é¡Œä½ç½®
- æ–°å¢è¡Œç´šè¨»è§£ï¼ˆcomment/suggestion/concernï¼‰ï¼Œé™„å¸¶å»ºè­°ç¨‹å¼ç¢¼
- ä¸€éµåˆ‡æ› diff é¡å‹ï¼ˆuncommittedã€stagedã€last commitã€branchï¼‰
- è¨»è§£è‡ªå‹•è½‰æ›ç‚º Markdownï¼ŒAgent æº–ç¢ºç†è§£ä½ çš„å›é¥‹

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

**ä½¿ç”¨æƒ…å¢ƒ**ï¼š
- Agent å®Œæˆç¨‹å¼ç¢¼ä¿®æ”¹å¾Œï¼Œä½ éœ€è¦å¯©æŸ¥æ”¹å‹•å…§å®¹
- æäº¤ç¨‹å¼ç¢¼å‰ï¼Œæƒ³å…¨é¢æª¢æŸ¥è‡ªå·±çš„è®Šæ›´
- èˆ‡åœ˜éšŠå”ä½œæ™‚ï¼Œéœ€è¦çµæ§‹åŒ–å›é¥‹ç¨‹å¼ç¢¼å•é¡Œ
- æƒ³åœ¨å¤šå€‹ diff é¡å‹é–“åˆ‡æ›ï¼ˆæœªæäº¤ vs å·²æš«å­˜ vs ä¸Šæ¬¡æäº¤ï¼‰

**ä¸é©ç”¨æƒ…å¢ƒ**ï¼š
- å¯©æŸ¥ AI ç”¢ç”Ÿçš„å¯¦æ–½è¨ˆç•«ï¼ˆä½¿ç”¨è¨ˆç•«å¯©æŸ¥åŠŸèƒ½ï¼‰
- ç›´æ¥åœ¨çµ‚ç«¯æ©Ÿä¸­ä½¿ç”¨ `git diff`ï¼ˆä¸éœ€è¦è¦–è¦ºåŒ–ä»‹é¢ï¼‰

## ğŸ’ é–‹å§‹å‰çš„æº–å‚™

**å‰ç½®æ¢ä»¶**ï¼š
- âœ… å·²å®‰è£ Plannotator CLIï¼ˆè©³è¦‹ [å¿«é€Ÿé–‹å§‹](../../start/getting-started/)ï¼‰
- âœ… å·²è¨­å®š Claude Code æˆ– OpenCode å¤–æ›ï¼ˆè©³è¦‹å°æ‡‰å®‰è£æŒ‡å—ï¼‰
- âœ… ç›®å‰ç›®éŒ„åœ¨ Git å„²å­˜åº«ä¸­

**è§¸ç™¼æ–¹å¼**ï¼š
- åœ¨ Claude Code æˆ– OpenCode ä¸­åŸ·è¡Œ `/plannotator-review` æŒ‡ä»¤

## æ ¸å¿ƒæ€è·¯

### ç¨‹å¼ç¢¼å¯©æŸ¥æ˜¯ä»€éº¼

**ç¨‹å¼ç¢¼å¯©æŸ¥**æ˜¯ Plannotator æä¾›çš„è¦–è¦ºåŒ– Git Diff å¯©æŸ¥å·¥å…·ï¼Œè®“ä½ åœ¨ç€è¦½å™¨ä¸­æª¢è¦–ç¨‹å¼ç¢¼è®Šæ›´ä¸¦æ–°å¢è¡Œç´šè¨»è§£ã€‚

::: info ç‚ºä»€éº¼éœ€è¦ç¨‹å¼ç¢¼å¯©æŸ¥ï¼Ÿ
AI Agent å®Œæˆç¨‹å¼ç¢¼ä¿®æ”¹å¾Œï¼Œé€šå¸¸æœƒç”¨çµ‚ç«¯æ©Ÿè¼¸å‡º git diff å…§å®¹ã€‚é€™ç¨®ç´”æ–‡å­—æ–¹å¼é›£ä»¥å…¨é¢ç†è§£æ”¹å‹•ï¼Œä¹Ÿä¸æ–¹ä¾¿ç²¾ç¢ºæ¨™è¨»å•é¡Œä½ç½®ã€‚Plannotator æä¾›è¦–è¦ºåŒ–ä»‹é¢ï¼ˆside-by-side æˆ– unifiedï¼‰ï¼Œæ”¯æ´é»æ“Šè¡Œè™Ÿæ–°å¢è¨»è§£ï¼Œä¸¦å°‡çµæ§‹åŒ–å›é¥‹å‚³é€çµ¦ Agentï¼Œè®“å®ƒæ ¹æ“šå»ºè­°é‡æ–°ä¿®æ”¹ç¨‹å¼ç¢¼ã€‚
:::

### é‹ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½¿ç”¨è€…        â”‚
â”‚  (åŸ·è¡ŒæŒ‡ä»¤)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ /plannotator-review
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLI          â”‚
â”‚  (åŸ·è¡Œ git)    â”‚
â”‚  git diff HEAD â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ rawPatch + gitRef
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Review Server  â”‚  â† æœ¬æ©Ÿä¼ºæœå™¨å•Ÿå‹•
â”‚  /api/diff     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ ç€è¦½å™¨é–‹å•Ÿ UI
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Review UI     â”‚
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ File Tree  â”‚  â”‚
â”‚ â”‚ (æª”æ¡ˆæ¸…å–®) â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚         â”‚
â”‚       â–¼         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ DiffViewer â”‚  â”‚
â”‚ â”‚ (ç¨‹å¼ç¢¼å°æ¯”) â”‚  â”‚
â”‚ â”‚ split/     â”‚  â”‚
â”‚ â”‚ unified   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚         â”‚
â”‚       â”‚ é»æ“Šè¡Œè™Ÿ
â”‚       â–¼         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ æ–°å¢è¨»è§£   â”‚  â”‚
â”‚ â”‚ comment/   â”‚  â”‚
â”‚ â”‚ suggestion/â”‚  â”‚
â”‚ â”‚ concern    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚         â”‚
â”‚       â–¼         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ å‚³é€å›é¥‹   â”‚  â”‚
â”‚ â”‚ Send       â”‚  â”‚
â”‚ â”‚ Feedback   â”‚  â”‚
â”‚ â”‚ æˆ– LGTM    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Markdown æ ¼å¼å›é¥‹
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Agent     â”‚
â”‚  (æ ¹æ“šå»ºè­°ä¿®æ”¹) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æª¢è¦–æ¨¡å¼

| æª¢è¦–æ¨¡å¼ | æè¿° | é©ç”¨æƒ…å¢ƒ |
| -------- | ---- | -------- |
| **Split (Side-by-side)** | å·¦å³åˆ†å‰²ï¼ŒèˆŠç¨‹å¼ç¢¼åœ¨å·¦ï¼Œæ–°ç¨‹å¼ç¢¼åœ¨å³ | å°æ¯”å¤§æ®µæ”¹å‹•ï¼Œæ¸…æ™°çœ‹åˆ°ä¿®æ”¹å‰å¾Œ |
| **Unified** | ä¸Šä¸‹åˆä½µï¼Œåˆªé™¤å’Œæ–°å¢åœ¨åŒä¸€æ¬„ | æª¢è¦–å°æ”¹å‹•ï¼Œç¯€çœå‚ç›´ç©ºé–“ |

### è¨»è§£é¡å‹

Plannotator æ”¯æ´ä¸‰ç¨®ç¨‹å¼ç¢¼è¨»è§£é¡å‹ï¼š

| è¨»è§£é¡å‹ | ç”¨é€” | UI è¡¨ç¾ |
| --------- | ---- | ------- |
| **Comment** | è©•è«–æŸè¡Œç¨‹å¼ç¢¼ï¼Œæå‡ºå•é¡Œæˆ–èªªæ˜ | ç´«è‰²/è—è‰²é‚Šæ¡†æ¨™è¨˜ |
| **Suggestion** | æä¾›å…·é«”çš„ç¨‹å¼ç¢¼ä¿®æ”¹å»ºè­° | ç¶ è‰²é‚Šæ¡†æ¨™è¨˜ï¼Œé™„å¸¶å»ºè­°ç¨‹å¼ç¢¼å€å¡Š |
| **Concern** | æ¨™è¨˜éœ€è¦é—œæ³¨çš„æ½›åœ¨å•é¡Œ | é»ƒè‰²/æ©™è‰²é‚Šæ¡†æ¨™è¨˜ |

::: tip è¨»è§£é¡å‹çš„å€åˆ¥
- **Comment**ï¼šç”¨æ–¼æå•ã€èªªæ˜ã€ä¸€èˆ¬æ€§å›é¥‹
- **Suggestion**ï¼šç”¨æ–¼æä¾›å…·é«”çš„ç¨‹å¼ç¢¼ä¿®æ”¹æ–¹æ¡ˆï¼ˆé™„å¸¶å»ºè­°ç¨‹å¼ç¢¼ï¼‰
- **Concern**ï¼šç”¨æ–¼æ¨™è¨˜éœ€è¦ä¿®å¾©çš„å•é¡Œæˆ–æ½›åœ¨é¢¨éšª
:::

### Diff é¡å‹

| Diff é¡å‹ | Git æŒ‡ä»¤ | æè¿° |
| --------- | --------- | ---- |
| **Uncommitted** | `git diff HEAD` | æœªæäº¤çš„è®Šæ›´ï¼ˆé è¨­ï¼‰ |
| **Staged** | `git diff --staged` | å·²æš«å­˜çš„è®Šæ›´ |
| **Unstaged** | `git diff` | æœªæš«å­˜çš„è®Šæ›´ |
| **Last commit** | `git diff HEAD~1..HEAD` | ä¸Šæ¬¡æäº¤çš„å…§å®¹ |
| **Branch** | `git diff main..HEAD` | ç›®å‰åˆ†æ”¯èˆ‡é è¨­åˆ†æ”¯çš„å°æ¯” |

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šè§¸ç™¼ç¨‹å¼ç¢¼å¯©æŸ¥

åœ¨ Claude Code æˆ– OpenCode ä¸­åŸ·è¡Œ `/plannotator-review` æŒ‡ä»¤ï¼š

```
ä½¿ç”¨è€…ï¼š/plannotator-review

CLIï¼šæ­£åœ¨åŸ·è¡Œ git diff...
      ç€è¦½å™¨å·²é–‹å•Ÿ
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
1. ç€è¦½å™¨è‡ªå‹•é–‹å•Ÿ Plannotator ç¨‹å¼ç¢¼å¯©æŸ¥ä»‹é¢
2. å·¦å´é¡¯ç¤ºæª”æ¡ˆæ¸…å–®ï¼ˆFile Treeï¼‰
3. å³å´é¡¯ç¤º Diff Viewerï¼ˆé è¨­ç‚º split æª¢è¦–ï¼‰
4. é ‚éƒ¨æœ‰æª¢è¦–åˆ‡æ›æŒ‰éˆ•ï¼ˆSplit/Unifiedï¼‰
5. åº•éƒ¨æœ‰ã€ŒSend Feedbackã€å’Œã€ŒLGTMã€æŒ‰éˆ•

### ç¬¬ 2 æ­¥ï¼šç€è¦½æª”æ¡ˆæ¸…å–®

åœ¨å·¦å´çš„ File Tree ä¸­æª¢è¦–æ”¹å‹•çš„æª”æ¡ˆï¼š

- æª”æ¡ˆæŒ‰è·¯å¾‘åˆ†çµ„é¡¯ç¤º
- æ¯å€‹æª”æ¡ˆé¡¯ç¤ºè®Šæ›´çµ±è¨ˆï¼ˆadditions/deletionsï¼‰
- é»æ“Šæª”æ¡ˆåˆ‡æ›åˆ°å°æ‡‰çš„ diff å…§å®¹

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
```
src/
  auth/
    login.ts          (+12, -5)  â† é»æ“Šæª¢è¦–é€™å€‹æª”æ¡ˆçš„ diff
    user.ts          (+8, -2)
  api/
    routes.ts        (+25, -10)
```

### ç¬¬ 3 æ­¥ï¼šåˆ‡æ›æª¢è¦–æ¨¡å¼

åœ¨é é¢é ‚éƒ¨é»æ“Šã€ŒSplitã€æˆ–ã€ŒUnifiedã€æŒ‰éˆ•åˆ‡æ›æª¢è¦–ï¼š

**Split æª¢è¦–**ï¼ˆSide-by-sideï¼‰ï¼š
- èˆŠç¨‹å¼ç¢¼åœ¨å·¦ï¼ˆç°è‰²èƒŒæ™¯ï¼Œç´…è‰²åˆªé™¤ç·šï¼‰
- æ–°ç¨‹å¼ç¢¼åœ¨å³ï¼ˆç™½è‰²èƒŒæ™¯ï¼Œç¶ è‰²æ–°å¢ç·šï¼‰
- é©åˆå°æ¯”å¤§æ®µæ”¹å‹•

**Unified æª¢è¦–**ï¼ˆåˆä½µï¼‰ï¼š
- èˆŠç¨‹å¼ç¢¼å’Œæ–°ç¨‹å¼ç¢¼åœ¨åŒä¸€æ¬„
- åˆªé™¤çš„è¡Œç”¨ç´…è‰²èƒŒæ™¯ï¼Œæ–°å¢çš„è¡Œç”¨ç¶ è‰²èƒŒæ™¯
- é©åˆæª¢è¦–å°æ”¹å‹•

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- Split æª¢è¦–ï¼šå·¦å³åˆ†å‰²ï¼Œæ¸…æ™°å°æ¯”ä¿®æ”¹å‰å¾Œ
- Unified æª¢è¦–ï¼šä¸Šä¸‹åˆä½µï¼Œç¯€çœå‚ç›´ç©ºé–“

### ç¬¬ 4 æ­¥ï¼šé¸å–ç¨‹å¼ç¢¼è¡Œï¼Œæ–°å¢è¨»è§£

**æ–°å¢ Comment è¨»è§£**ï¼š

1. å°‡æ»‘é¼ æ‡¸åœåœ¨ç¨‹å¼ç¢¼è¡Œä¸Šï¼Œè¡Œè™Ÿæ—æœƒå‡ºç¾ `+` æŒ‰éˆ•
2. é»æ“Š `+` æŒ‰éˆ•ï¼Œæˆ–ç›´æ¥é»æ“Šè¡Œè™Ÿé¸å–è©²è¡Œ
3. é¸å–å¤šè¡Œï¼šé»æ“Šèµ·å§‹è¡Œè™Ÿï¼ŒæŒ‰ä½ Shift é»æ“ŠçµæŸè¡Œè™Ÿ
4. åœ¨å½ˆå‡ºçš„å·¥å…·åˆ—ä¸­è¼¸å…¥è©•è«–å…§å®¹
5. é»æ“Šã€ŒAdd Commentã€æŒ‰éˆ•

**æ–°å¢ Suggestion è¨»è§£ï¼ˆé™„å¸¶å»ºè­°ç¨‹å¼ç¢¼ï¼‰**ï¼š

1. æŒ‰ç…§ä¸Šè¿°æ­¥é©Ÿæ–°å¢è¨»è§£
2. åœ¨å·¥å…·åˆ—ä¸­é»æ“Šã€ŒAdd suggested codeã€æŒ‰éˆ•
3. åœ¨å½ˆå‡ºçš„ç¨‹å¼ç¢¼æ¡†ä¸­è¼¸å…¥å»ºè­°çš„ç¨‹å¼ç¢¼
4. é»æ“Šã€ŒAdd Commentã€æŒ‰éˆ•

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- è¨»è§£é¡¯ç¤ºåœ¨ç¨‹å¼ç¢¼è¡Œä¸‹æ–¹
- Comment è¨»è§£ï¼šç´«è‰²/è—è‰²é‚Šæ¡†æ¨™è¨˜ï¼Œé¡¯ç¤ºè©•è«–å…§å®¹
- Suggestion è¨»è§£ï¼šç¶ è‰²é‚Šæ¡†æ¨™è¨˜ï¼Œé¡¯ç¤ºè©•è«–å…§å®¹å’Œå»ºè­°ç¨‹å¼ç¢¼å€å¡Š
- å³å´å´é‚Šæ¬„æœƒé¡¯ç¤ºæ‰€æœ‰è¨»è§£æ¸…å–®

### ç¬¬ 5 æ­¥ï¼šåˆ‡æ› Diff é¡å‹

åœ¨é é¢é ‚éƒ¨é¸æ“‡ä¸åŒçš„ diff é¡å‹ï¼š

- **Uncommitted changes**ï¼ˆé è¨­ï¼‰ï¼šæœªæäº¤çš„è®Šæ›´
- **Staged changes**ï¼šå·²æš«å­˜çš„è®Šæ›´
- **Last commit**ï¼šä¸Šæ¬¡æäº¤çš„å…§å®¹
- **vs main**ï¼ˆå¦‚æœä¸åœ¨é è¨­åˆ†æ”¯ï¼‰ï¼šèˆ‡é è¨­åˆ†æ”¯çš„å°æ¯”

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- Diff Viewer æ›´æ–°ç‚ºæ–°é¸æ“‡çš„ diff å…§å®¹
- æª”æ¡ˆæ¸…å–®é‡æ–°æ•´ç†é¡¯ç¤ºæ–°çš„è®Šæ›´çµ±è¨ˆ

### ç¬¬ 6 æ­¥ï¼šå‚³é€å›é¥‹çµ¦ Agent

**Send Feedbackï¼ˆå‚³é€å›é¥‹ï¼‰**ï¼š

1. æ–°å¢å¿…è¦çš„è¨»è§£ï¼ˆComment/Suggestion/Concernï¼‰
2. é»æ“Šé é¢åº•éƒ¨çš„ã€ŒSend Feedbackã€æŒ‰éˆ•
3. å¦‚æœæ²’æœ‰è¨»è§£ï¼Œæœƒå½ˆå‡ºç¢ºèªå°è©±æ¡†è©¢å•æ˜¯å¦ç¹¼çºŒ

**LGTMï¼ˆLooks Good To Meï¼‰**ï¼š

å¦‚æœç¨‹å¼ç¢¼æ²’æœ‰å•é¡Œï¼Œé»æ“Šã€ŒLGTMã€æŒ‰éˆ•ã€‚

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- ç€è¦½å™¨è‡ªå‹•é—œé–‰ï¼ˆ1.5 ç§’å»¶é²ï¼‰
- çµ‚ç«¯æ©Ÿé¡¯ç¤ºå›é¥‹å…§å®¹æˆ–ã€ŒLGTM - no changes requested.ã€
- Agent æ”¶åˆ°å›é¥‹å¾Œé–‹å§‹ä¿®æ”¹ç¨‹å¼ç¢¼

### ç¬¬ 7 æ­¥ï¼šæª¢è¦–å›é¥‹å…§å®¹ï¼ˆå¯é¸ï¼‰

å¦‚æœä½ æƒ³æª¢è¦– Plannotator å‚³é€çµ¦ Agent çš„å›é¥‹å…§å®¹ï¼Œå¯ä»¥åœ¨çµ‚ç«¯æ©Ÿä¸­æª¢è¦–ï¼š

```
# Code Review Feedback

## src/auth/login.ts

### Line 15 (new)
é€™è£¡éœ€è¦æ–°å¢éŒ¯èª¤è™•ç†é‚è¼¯ã€‚

### Line 20-25 (old)
**Suggested code:**
```typescript
try {
  await authenticate(req);
} catch (error) {
  return res.status(401).json({ error: 'Authentication failed' });
}
```

## src/api/routes.ts

### Line 10 (new)
é€™å€‹å‡½å¼ç¼ºå°‘è¼¸å…¥é©—è­‰ã€‚
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- å›é¥‹æŒ‰æª”æ¡ˆåˆ†çµ„
- æ¯å€‹è¨»è§£é¡¯ç¤ºæª”æ¡ˆè·¯å¾‘ã€è¡Œè™Ÿã€é¡å‹
- Suggestion è¨»è§£é™„å¸¶å»ºè­°ç¨‹å¼ç¢¼å€å¡Š

## æª¢æŸ¥é» âœ…

å®Œæˆä»¥ä¸Šæ­¥é©Ÿå¾Œï¼Œä½ æ‡‰è©²èƒ½å¤ ï¼š

- [ ] åŸ·è¡Œ `/plannotator-review` æŒ‡ä»¤ï¼Œç€è¦½å™¨è‡ªå‹•é–‹å•Ÿç¨‹å¼ç¢¼å¯©æŸ¥ä»‹é¢
- [ ] åœ¨ File Tree ä¸­æª¢è¦–æ”¹å‹•çš„æª”æ¡ˆæ¸…å–®
- [ ] åœ¨ Split å’Œ Unified æª¢è¦–é–“åˆ‡æ›
- [ ] é»æ“Šè¡Œè™Ÿæˆ– `+` æŒ‰éˆ•é¸å–ç¨‹å¼ç¢¼è¡Œ
- [ ] æ–°å¢ Commentã€Suggestionã€Concern è¨»è§£
- [ ] åœ¨è¨»è§£ä¸­æ–°å¢å»ºè­°ç¨‹å¼ç¢¼
- [ ] åˆ‡æ›ä¸åŒçš„ diff é¡å‹ï¼ˆuncommitted/staged/last commit/branchï¼‰
- [ ] é»æ“Š Send Feedbackï¼Œç€è¦½å™¨é—œé–‰ï¼Œçµ‚ç«¯æ©Ÿé¡¯ç¤ºå›é¥‹å…§å®¹
- [ ] é»æ“Š LGTMï¼Œç€è¦½å™¨é—œé–‰ï¼Œçµ‚ç«¯æ©Ÿé¡¯ç¤ºã€ŒLGTM - no changes requested.ã€

**å¦‚æœæŸä¸€æ­¥å¤±æ•—**ï¼Œè©³è¦‹ï¼š
- [å¸¸è¦‹å•é¡Œ](../../faq/common-problems/)
- [Claude Code å®‰è£æŒ‡å—](../../start/installation-claude-code/)
- [OpenCode å®‰è£æŒ‡å—](../../start/installation-opencode/)

## è¸©å‘æé†’

**å¸¸è¦‹éŒ¯èª¤ 1**ï¼šåŸ·è¡Œ `/plannotator-review` å¾Œï¼Œç€è¦½å™¨æ²’æœ‰é–‹å•Ÿ

**åŸå› **ï¼šå¯èƒ½æ˜¯é€£æ¥åŸ ä½”ç”¨æˆ–ä¼ºæœå™¨å•Ÿå‹•å¤±æ•—ã€‚

**è§£æ±º**ï¼š
- æª¢æŸ¥çµ‚ç«¯æ©Ÿä¸­æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
- å˜—è©¦æ‰‹å‹•åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿé¡¯ç¤ºçš„ URL
- å¦‚æœå•é¡ŒæŒçºŒï¼Œè©³è¦‹ [æ•…éšœæ’é™¤](../../faq/troubleshooting/)

**å¸¸è¦‹éŒ¯èª¤ 2**ï¼šé»æ“Šè¡Œè™Ÿå¾Œï¼Œæ²’æœ‰å½ˆå‡ºå·¥å…·åˆ—

**åŸå› **ï¼šå¯èƒ½æ˜¯å› ç‚ºé¸å–çš„æ˜¯ç©ºè¡Œï¼Œæˆ–è€…ç€è¦½å™¨è¦–çª—å¤ªå°ã€‚

**è§£æ±º**ï¼š
- å˜—è©¦é¸å–åŒ…å«ç¨‹å¼ç¢¼çš„è¡Œ
- æ”¾å¤§ç€è¦½å™¨è¦–çª—
- ç¢ºä¿æ²’æœ‰åœç”¨ JavaScript

**å¸¸è¦‹éŒ¯èª¤ 3**ï¼šæ–°å¢è¨»è§£å¾Œï¼Œè¨»è§£æ²’æœ‰é¡¯ç¤ºåœ¨ç¨‹å¼ç¢¼ä¸‹æ–¹

**åŸå› **ï¼šå¯èƒ½æ˜¯å› ç‚ºé¸å–çš„æ˜¯ç©ºè¡Œï¼Œæˆ–è€…ç€è¦½å™¨è¦–çª—å¤ªå°ã€‚

**è§£æ±º**ï¼š
- å˜—è©¦é¸å–åŒ…å«ç¨‹å¼ç¢¼çš„è¡Œ
- æ”¾å¤§ç€è¦½å™¨è¦–çª—
- ç¢ºä¿æ²’æœ‰åœç”¨ JavaScript
- æª¢æŸ¥å³å´å´é‚Šæ¬„æ˜¯å¦é¡¯ç¤ºäº†è¨»è§£æ¸…å–®

**å¸¸è¦‹éŒ¯èª¤ 4**ï¼šé»æ“Š Send Feedback å¾Œï¼Œçµ‚ç«¯æ©Ÿæ²’æœ‰é¡¯ç¤ºå›é¥‹å…§å®¹

**åŸå› **ï¼šå¯èƒ½æ˜¯ç¶²è·¯å•é¡Œæˆ–ä¼ºæœå™¨éŒ¯èª¤ã€‚

**è§£æ±º**ï¼š
- æª¢æŸ¥çµ‚ç«¯æ©Ÿä¸­æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
- å˜—è©¦é‡æ–°å‚³é€å›é¥‹
- å¦‚æœå•é¡ŒæŒçºŒï¼Œè©³è¦‹ [æ•…éšœæ’é™¤](../../faq/troubleshooting/)

**å¸¸è¦‹éŒ¯èª¤ 5**ï¼šAgent æ”¶åˆ°å›é¥‹å¾Œï¼Œæ²’æœ‰æŒ‰ç…§å»ºè­°ä¿®æ”¹ç¨‹å¼ç¢¼

**åŸå› **ï¼šAgent å¯èƒ½æ²’æœ‰æ­£ç¢ºç†è§£è¨»è§£çš„æ„åœ–ã€‚

**è§£æ±º**ï¼š
- å˜—è©¦ä½¿ç”¨æ›´æ˜ç¢ºçš„è¨»è§£ï¼ˆSuggestion æ¯” Comment æ›´æ˜ç¢ºï¼‰
- ä½¿ç”¨ Comment æ–°å¢è©³ç´°èªªæ˜
- åœ¨ Suggestion ä¸­æä¾›å®Œæ•´çš„å»ºè­°ç¨‹å¼ç¢¼
- å¦‚æœå•é¡ŒæŒçºŒï¼Œå¯ä»¥å†æ¬¡åŸ·è¡Œ `/plannotator-review` å¯©æŸ¥æ–°çš„æ”¹å‹•

**å¸¸è¦‹éŒ¯èª¤ 6**ï¼šåˆ‡æ› diff é¡å‹å¾Œï¼Œæª”æ¡ˆæ¸…å–®ç‚ºç©º

**åŸå› **ï¼šå¯èƒ½æ˜¯å› ç‚ºé¸å–çš„ diff é¡å‹æ²’æœ‰è®Šæ›´å…§å®¹ã€‚

**è§£æ±º**ï¼š
- å˜—è©¦åˆ‡æ›å›ã€ŒUncommitted changesã€
- æª¢æŸ¥ git ç‹€æ…‹ï¼Œç¢ºèªæ˜¯å¦æœ‰è®Šæ›´
- ä½¿ç”¨ `git status` æª¢è¦–ç›®å‰ç‹€æ…‹

## æœ¬èª²å°çµ

ç¨‹å¼ç¢¼å¯©æŸ¥æ˜¯ Plannotator æä¾›çš„è¦–è¦ºåŒ– Git Diff å¯©æŸ¥å·¥å…·ï¼š

**æ ¸å¿ƒæ“ä½œ**ï¼š
1. **è§¸ç™¼**ï¼šåŸ·è¡Œ `/plannotator-review`ï¼Œç€è¦½å™¨è‡ªå‹•é–‹å•Ÿ UI
2. **ç€è¦½**ï¼šåœ¨ File Tree ä¸­æª¢è¦–æ”¹å‹•çš„æª”æ¡ˆæ¸…å–®
3. **æª¢è¦–**ï¼šåœ¨ Splitï¼ˆside-by-sideï¼‰å’Œ Unified æª¢è¦–é–“åˆ‡æ›
4. **è¨»è§£**ï¼šé»æ“Šè¡Œè™Ÿé¸å–ç¨‹å¼ç¢¼è¡Œï¼Œæ–°å¢ Comment/Suggestion/Concern è¨»è§£
5. **åˆ‡æ›**ï¼šé¸æ“‡ä¸åŒçš„ diff é¡å‹ï¼ˆuncommitted/staged/last commit/branchï¼‰
6. **å›é¥‹**ï¼šé»æ“Š Send Feedback æˆ– LGTMï¼Œå›é¥‹å‚³é€çµ¦ Agent

**æª¢è¦–æ¨¡å¼**ï¼š
- **Splitï¼ˆSide-by-sideï¼‰**ï¼šå·¦å³åˆ†å‰²ï¼ŒèˆŠç¨‹å¼ç¢¼åœ¨å·¦ï¼Œæ–°ç¨‹å¼ç¢¼åœ¨å³
- **Unified**ï¼šä¸Šä¸‹åˆä½µï¼Œåˆªé™¤å’Œæ–°å¢åœ¨åŒä¸€æ¬„

**è¨»è§£é¡å‹**ï¼š
- **Comment**ï¼šè©•è«–æŸè¡Œç¨‹å¼ç¢¼ï¼Œæå‡ºå•é¡Œæˆ–èªªæ˜
- **Suggestion**ï¼šæä¾›å…·é«”çš„ç¨‹å¼ç¢¼ä¿®æ”¹å»ºè­°ï¼ˆé™„å¸¶å»ºè­°ç¨‹å¼ç¢¼ï¼‰
- **Concern**ï¼šæ¨™è¨˜éœ€è¦é—œæ³¨çš„æ½›åœ¨å•é¡Œ

**Diff é¡å‹**ï¼š
- **Uncommitted**ï¼šæœªæäº¤çš„è®Šæ›´ï¼ˆé è¨­ï¼‰
- **Staged**ï¼šå·²æš«å­˜çš„è®Šæ›´
- **Unstaged**ï¼šæœªæš«å­˜çš„è®Šæ›´
- **Last commit**ï¼šä¸Šæ¬¡æäº¤çš„å…§å®¹
- **Branch**ï¼šç›®å‰åˆ†æ”¯èˆ‡é è¨­åˆ†æ”¯çš„å°æ¯”

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[æ–°å¢ç¨‹å¼ç¢¼è¨»è§£](../code-review-annotations/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - å¦‚ä½•ç²¾ç¢ºä½¿ç”¨ Commentã€Suggestionã€Concern è¨»è§£
> - å¦‚ä½•æ–°å¢å»ºè­°ç¨‹å¼ç¢¼ä¸¦æ ¼å¼åŒ–é¡¯ç¤º
> - å¦‚ä½•ç·¨è¼¯å’Œåˆªé™¤è¨»è§£
> - è¨»è§£çš„æœ€ä½³å¯¦è¸å’Œå¸¸è¦‹æƒ…å¢ƒ
> - å¦‚ä½•åœ¨ side-by-side æª¢è¦–ä¸­é¸æ“‡ old/new å´

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æª¢è¦–åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-24

| åŠŸèƒ½              | æª”æ¡ˆè·¯å¾‘                                                                                              | è¡Œè™Ÿ    |
| ----------------- | ----------------------------------------------------------------------------------------------------- | ------- |
| ç¨‹å¼ç¢¼å¯©æŸ¥ä¼ºæœå™¨     | [`packages/server/review.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/server/review.ts#L1-L302)           | 1-302   |
| ç¨‹å¼ç¢¼å¯©æŸ¥ UI       | [`packages/review-editor/App.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/App.tsx#L1-L150) | 1-150   |
| DiffViewer å…ƒä»¶    | [`packages/review-editor/components/DiffViewer.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/review-editor/components/DiffViewer.tsx#L1-L349) | 1-349   |
| Git å·¥å…·         | [`packages/server/git.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/server/git.ts#L1-L148)                 | 1-148   |
| Hook å…¥å£ï¼ˆreviewï¼‰ | [`apps/hook/server/index.ts`](https://github.com/backnotprop/plannotator/blob/main/apps/hook/server/index.ts#L46-L84)         | 46-84   |
| ç¨‹å¼ç¢¼è¨»è§£é¡å‹å®šç¾©    | [`packages/ui/types.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/types.ts#L53-L83)                  | 53-83   |

**é—œéµé¡å‹**ï¼š
- `CodeAnnotationType`ï¼šç¨‹å¼ç¢¼è¨»è§£é¡å‹åˆ—èˆ‰ï¼ˆcommentã€suggestionã€concernï¼‰ï¼ˆ`packages/ui/types.ts:53`ï¼‰
- `CodeAnnotation`ï¼šç¨‹å¼ç¢¼è¨»è§£ä»‹é¢ï¼ˆ`packages/ui/types.ts:55-66`ï¼‰
- `DiffType`ï¼šDiff é¡å‹åˆ—èˆ‰ï¼ˆuncommittedã€stagedã€unstagedã€last-commitã€branchï¼‰ï¼ˆ`packages/server/git.ts:10-15`ï¼‰
- `GitContext`ï¼šGit ä¸Šä¸‹æ–‡ä»‹é¢ï¼ˆ`packages/server/git.ts:22-26`ï¼‰

**é—œéµå‡½å¼**ï¼š
- `startReviewServer()`ï¼šå•Ÿå‹•ç¨‹å¼ç¢¼å¯©æŸ¥ä¼ºæœå™¨ï¼ˆ`packages/server/review.ts:79`ï¼‰
- `runGitDiff()`ï¼šåŸ·è¡Œ git diff æŒ‡ä»¤ï¼ˆ`packages/server/git.ts:101`ï¼‰
- `getGitContext()`ï¼šå–å¾— Git ä¸Šä¸‹æ–‡ï¼ˆåˆ†æ”¯è³‡è¨Šå’Œ diff é¸é …ï¼‰ï¼ˆ`packages/server/git.ts:79`ï¼‰
- `parseDiffToFiles()`ï¼šå°‡ diff è§£æç‚ºæª”æ¡ˆæ¸…å–®ï¼ˆ`packages/review-editor/App.tsx:48`ï¼‰
- `exportReviewFeedback()`ï¼šå°‡è¨»è§£åŒ¯å‡ºç‚º Markdown å›é¥‹ï¼ˆ`packages/review-editor/App.tsx:86`ï¼‰

**API è·¯ç”±**ï¼š
- `GET /api/diff`ï¼šå–å¾— diff å…§å®¹ï¼ˆ`packages/server/review.ts:118`ï¼‰
- `POST /api/diff/switch`ï¼šåˆ‡æ› diff é¡å‹ï¼ˆ`packages/server/review.ts:130`ï¼‰
- `POST /api/feedback`ï¼šæäº¤å¯©æŸ¥å›é¥‹ï¼ˆ`packages/server/review.ts:222`ï¼‰
- `GET /api/image`ï¼šå–å¾—åœ–ç‰‡ï¼ˆ`packages/server/review.ts:164`ï¼‰
- `POST /api/upload`ï¼šä¸Šå‚³åœ–ç‰‡ï¼ˆ`packages/server/review.ts:181`ï¼‰
- `GET /api/agents`ï¼šå–å¾—å¯ç”¨ agentsï¼ˆOpenCodeï¼‰ï¼ˆ`packages/server/review.ts:204`ï¼‰

**æ¥­å‹™è¦å‰‡**ï¼š
- é è¨­æª¢è¦–æœªæäº¤çš„ diffï¼ˆ`apps/hook/server/index.ts:55`ï¼‰
- æ”¯æ´åˆ‡æ›åˆ° vs main diffï¼ˆ`packages/server/git.ts:131`ï¼‰
- å›é¥‹æ ¼å¼åŒ–ç‚º Markdownï¼ˆ`packages/review-editor/App.tsx:86`ï¼‰
- æ‰¹å‡†æ™‚å‚³é€ã€ŒLGTMã€æ–‡å­—ï¼ˆ`packages/review-editor/App.tsx:430`ï¼‰

</details>
