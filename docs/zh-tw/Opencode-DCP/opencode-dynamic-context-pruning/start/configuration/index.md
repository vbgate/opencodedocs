---
title: "é…ç½®: DCP å¤šå±¤ç´šè¨­å®š | opencode-dcp"
sidebarTitle: "æŒ‰éœ€å®šåˆ¶ DCP"
subtitle: "é…ç½®: DCP å¤šå±¤ç´šè¨­å®š"
description: "å­¸ç¿’ opencode-dcp çš„å¤šå±¤ç´šé…ç½®ç³»çµ±ã€‚æŒæ¡å…¨åŸŸã€ç’°å¢ƒå’Œå°ˆæ¡ˆç´šé…ç½®çš„å„ªå…ˆç´šè¦å‰‡ï¼Œä¿®å‰ªç­–ç•¥é…ç½®ã€ä¿è­·æ©Ÿåˆ¶è¨­å®šå’Œé€šçŸ¥ç´šåˆ¥èª¿æ•´ã€‚"
tags:
  - "é…ç½®"
  - "DCP"
  - "å¤–æ›è¨­å®š"
prerequisite:
  - "start-getting-started"
order: 2
---

# DCP é…ç½®å…¨è§£

## å­¸å®Œä½ èƒ½åšä»€éº¼

- æŒæ¡ DCP çš„ä¸‰ç´šé…ç½®ç³»çµ±ï¼ˆå…¨åŸŸã€å°ˆæ¡ˆã€ç’°å¢ƒè®Šæ•¸ï¼‰
- ç†è§£é…ç½®å„ªå…ˆç´šè¦å‰‡ï¼ŒçŸ¥é“å“ªå€‹é…ç½®æœƒç”Ÿæ•ˆ
- æ ¹æ“šéœ€æ±‚èª¿æ•´ä¿®å‰ªç­–ç•¥å’Œä¿è­·æ©Ÿåˆ¶
- é…ç½®é€šçŸ¥ç´šåˆ¥ï¼Œæ§åˆ¶ä¿®å‰ªæç¤ºçš„è©³ç´°ç¨‹åº¦

## ä½ ç¾åœ¨çš„å›°å¢ƒ

DCP å®‰è£å¾Œé è¨­é…ç½®å°±èƒ½å·¥ä½œï¼Œä½†ä½ å¯èƒ½é‡åˆ°é€™äº›å•é¡Œï¼š

- æƒ³ç‚ºä¸åŒå°ˆæ¡ˆè¨­å®šä¸åŒçš„ä¿®å‰ªç­–ç•¥
- ä¸å¸Œæœ›æŸäº›æª”æ¡ˆè¢«ä¿®å‰ª
- ä¿®å‰ªæç¤ºå¤ªé »ç¹æˆ–å¤ªè©³ç´°
- æƒ³ç¦ç”¨æŸå€‹è‡ªå‹•ä¿®å‰ªç­–ç•¥

é€™æ™‚å€™å°±éœ€è¦äº†è§£ DCP çš„é…ç½®ç³»çµ±äº†ã€‚

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

- **å°ˆæ¡ˆç´šå®šåˆ¶**ï¼šä¸åŒå°ˆæ¡ˆæœ‰ä¸åŒçš„ä¿®å‰ªéœ€æ±‚
- **é™¤éŒ¯å•é¡Œ**ï¼šå•Ÿç”¨ debug æ—¥èªŒå®šä½å•é¡Œ
- **æ•ˆèƒ½èª¿å„ª**ï¼šèª¿æ•´ç­–ç•¥é–‹é—œå’Œé–¾å€¼
- **å€‹äººåŒ–é«”é©—**ï¼šä¿®æ”¹é€šçŸ¥ç´šåˆ¥ã€ä¿è­·é—œéµå·¥å…·

## æ ¸å¿ƒæ€è·¯

DCP æ¡ç”¨**ä¸‰ç´šé…ç½®ç³»çµ±**ï¼ŒæŒ‰å„ªå…ˆç´šå¾ä½åˆ°é«˜ä¾æ¬¡æ˜¯ï¼š

```
é è¨­å€¼ï¼ˆç¨‹å¼ç¢¼ç¡¬ç·¨ç¢¼ï¼‰â†’ å…¨åŸŸé…ç½® â†’ ç’°å¢ƒè®Šæ•¸é…ç½® â†’ å°ˆæ¡ˆé…ç½®
         å„ªå…ˆç´šæœ€ä½                              å„ªå…ˆç´šæœ€é«˜
```

æ¯ç´šé…ç½®éƒ½æœƒè¦†è“‹ä¸Šä¸€ç´šçš„åŒåé…ç½®é …ï¼Œæ‰€ä»¥å°ˆæ¡ˆé…ç½®çš„å„ªå…ˆç´šæœ€é«˜ã€‚

::: info ç‚ºä»€éº¼éœ€è¦å¤šå±¤ç´šé…ç½®ï¼Ÿ

é€™æ¨£è¨­è¨ˆçš„ç›®çš„æ˜¯ï¼š
- **å…¨åŸŸé…ç½®**ï¼šè¨­å®šé€šç”¨çš„é è¨­è¡Œç‚ºï¼Œé©ç”¨æ–¼æ‰€æœ‰å°ˆæ¡ˆ
- **å°ˆæ¡ˆé…ç½®**ï¼šé‡å°ç‰¹å®šå°ˆæ¡ˆé€²è¡Œå®šåˆ¶ï¼Œä¸å½±éŸ¿å…¶ä»–å°ˆæ¡ˆ
- **ç’°å¢ƒè®Šæ•¸**ï¼šåœ¨ä¸åŒç’°å¢ƒï¼ˆå¦‚ CI/CDï¼‰ä¸­å¿«é€Ÿåˆ‡æ›é…ç½®

:::

## ğŸ’ é–‹å§‹å‰çš„æº–å‚™

ç¢ºä¿å·²å®Œæˆ [å®‰è£èˆ‡å¿«é€Ÿé–‹å§‹](../getting-started/)ï¼ŒDCP å¤–æ›å·²æˆåŠŸå®‰è£ä¸¦åœ¨ OpenCode ä¸­åŸ·è¡Œã€‚

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šæŸ¥çœ‹ç•¶å‰é…ç½®

**ç‚ºä»€éº¼**
å…ˆäº†è§£é è¨­é…ç½®ï¼Œå†æ±ºå®šå¦‚ä½•èª¿æ•´ã€‚

DCP é¦–æ¬¡åŸ·è¡Œæ™‚æœƒè‡ªå‹•å»ºç«‹å…¨åŸŸé…ç½®æª”æ¡ˆã€‚

```bash
# macOS/Linux
cat ~/.config/opencode/dcp.jsonc

# Windows PowerShell
Get-Content "$env:USERPROFILE\.config\opencode\dcp.jsonc"
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šé¡ä¼¼ä¸‹é¢çš„é è¨­é…ç½®

```jsonc
{
    "$schema": "https://raw.githubusercontent.com/Opencode-DCP/opencode-dynamic-context-pruning/master/dcp.schema.json",
    "enabled": true,
    "debug": false,
    "pruneNotification": "detailed",
    "commands": {
        "enabled": true,
        "protectedTools": []
    },
    "turnProtection": {
        "enabled": false,
        "turns": 4
    },
    "protectedFilePatterns": [],
    "tools": {
        "settings": {
            "nudgeEnabled": true,
            "nudgeFrequency": 10,
            "protectedTools": []
        },
        "discard": {
            "enabled": true
        },
        "extract": {
            "enabled": true,
            "showDistillation": false
        }
    },
    "strategies": {
        "deduplication": {
            "enabled": true,
            "protectedTools": []
        },
        "supersedeWrites": {
            "enabled": false
        },
        "purgeErrors": {
            "enabled": true,
            "turns": 4,
            "protectedTools": []
        }
    }
}
```

### ç¬¬ 2 æ­¥ï¼šç†è§£é…ç½®æª”æ¡ˆä½ç½®

DCP æ”¯æ´ä¸‰å€‹å±¤ç´šçš„é…ç½®æª”æ¡ˆï¼š

| å±¤ç´š | è·¯å¾‘ | å„ªå…ˆç´š | é©ç”¨å ´æ™¯ |
|---|---|---|---|
| **å…¨åŸŸ** | `~/.config/opencode/dcp.jsonc` æˆ– `dcp.json` | 2 | æ‰€æœ‰å°ˆæ¡ˆçš„é è¨­é…ç½® |
| **ç’°å¢ƒè®Šæ•¸** | `$OPENCODE_CONFIG_DIR/dcp.jsonc` æˆ– `dcp.json` | 3 | ç‰¹å®šç’°å¢ƒçš„é…ç½® |
| **å°ˆæ¡ˆ** | `<project>/.opencode/dcp.jsonc` æˆ– `dcp.json` | 4 | å–®å€‹å°ˆæ¡ˆçš„é…ç½®è¦†è“‹ |

::: tip é…ç½®æª”æ¡ˆæ ¼å¼

DCP æ”¯æ´ `.json` å’Œ `.jsonc` å…©ç¨®æ ¼å¼ï¼š
- `.json`ï¼šæ¨™æº– JSON æ ¼å¼ï¼Œä¸èƒ½åŒ…å«è¨»è§£
- `.jsonc`ï¼šæ”¯æ´ `//` è¨»è§£çš„ JSON æ ¼å¼ï¼ˆæ¨è–¦ä½¿ç”¨ï¼‰

:::

### ç¬¬ 3 æ­¥ï¼šé…ç½®ä¿®å‰ªé€šçŸ¥

**ç‚ºä»€éº¼**
æ§åˆ¶ DCP é¡¯ç¤ºä¿®å‰ªæç¤ºçš„è©³ç´°ç¨‹åº¦ï¼Œé¿å…éåº¦æ‰“æ“¾ã€‚

ç·¨è¼¯å…¨åŸŸé…ç½®æª”æ¡ˆï¼š

```jsonc
{
    "pruneNotification": "detailed"  // å¯é¸å€¼: "off", "minimal", "detailed"
}
```

**é€šçŸ¥ç´šåˆ¥èªªæ˜**ï¼š

| ç´šåˆ¥ | è¡Œç‚º | é©ç”¨å ´æ™¯ |
|---|---|---|
| **off** | ä¸é¡¯ç¤ºä¿®å‰ªé€šçŸ¥ | å°ˆæ³¨é–‹ç™¼ï¼Œä¸éœ€è¦å›é¥‹ |
| **minimal** | åªé¡¯ç¤ºç°¡è¦çµ±è¨ˆï¼ˆç¯€çœçš„ Token æ•¸ï¼‰ | éœ€è¦ç°¡å–®å›é¥‹ï¼Œä¸æƒ³è¢«å¤ªå¤šè³‡è¨Šæ‰“æ“¾ |
| **detailed** | é¡¯ç¤ºä¿®å‰ªçš„è©³ç´°è³‡è¨Šï¼ˆå·¥å…·åã€åŸå› ï¼‰ | äº†è§£ä¿®å‰ªè¡Œç‚ºï¼Œé™¤éŒ¯é…ç½® |

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šä¿®æ”¹é…ç½®å¾Œï¼Œä¸‹æ¬¡è§¸ç™¼ä¿®å‰ªæ™‚é€šçŸ¥æœƒæŒ‰æ–°ç´šåˆ¥é¡¯ç¤ºã€‚

### ç¬¬ 4 æ­¥ï¼šé…ç½®è‡ªå‹•ä¿®å‰ªç­–ç•¥

**ç‚ºä»€éº¼**
DCP æä¾›ä¸‰ç¨®è‡ªå‹•ä¿®å‰ªç­–ç•¥ï¼Œä½ å¯ä»¥æ ¹æ“šéœ€æ±‚é–‹é—œã€‚

ç·¨è¼¯é…ç½®æª”æ¡ˆï¼š

```jsonc
{
    "strategies": {
        // å»é‡ç­–ç•¥ï¼šç§»é™¤é‡è¤‡çš„å·¥å…·å‘¼å«
        "deduplication": {
            "enabled": true,           // å•Ÿç”¨/ç¦ç”¨
            "protectedTools": []         // é¡å¤–ä¿è­·çš„å·¥å…·å
        },

        // è¦†è“‹å¯«å…¥ç­–ç•¥ï¼šæ¸…ç†å·²è¢«è®€å–è¦†è“‹çš„å¯«æ“ä½œ
        "supersedeWrites": {
            "enabled": false          // é è¨­ç¦ç”¨
        },

        // æ¸…é™¤éŒ¯èª¤ç­–ç•¥ï¼šæ¸…ç†éæœŸéŒ¯èª¤å·¥å…·çš„è¼¸å…¥
        "purgeErrors": {
            "enabled": true,           // å•Ÿç”¨/ç¦ç”¨
            "turns": 4,               // å¹¾å›åˆå¾Œæ¸…ç†éŒ¯èª¤
            "protectedTools": []         // é¡å¤–ä¿è­·çš„å·¥å…·å
        }
    }
}
```

**ç­–ç•¥è©³è§£**ï¼š

- **deduplicationï¼ˆå»é‡ï¼‰**ï¼šé è¨­å•Ÿç”¨ã€‚æª¢æ¸¬ç›¸åŒå·¥å…·å’Œåƒæ•¸çš„å‘¼å«ï¼Œä¿ç•™æœ€æ–°ä¸€æ¬¡ã€‚
- **supersedeWritesï¼ˆè¦†è“‹å¯«å…¥ï¼‰**ï¼šé è¨­ç¦ç”¨ã€‚å¦‚æœå¯«æ“ä½œå¾Œæœ‰å¾ŒçºŒè®€å–ï¼Œæ¸…ç†è©²å¯«æ“ä½œçš„è¼¸å…¥ã€‚
- **purgeErrorsï¼ˆæ¸…é™¤éŒ¯èª¤ï¼‰**ï¼šé è¨­å•Ÿç”¨ã€‚è¶…éæŒ‡å®šå›åˆæ•¸çš„éŒ¯èª¤å·¥å…·æœƒè¢«ä¿®å‰ªï¼ˆåªä¿ç•™éŒ¯èª¤è¨Šæ¯ï¼Œç§»é™¤å¯èƒ½å¾ˆå¤§çš„è¼¸å…¥åƒæ•¸ï¼‰ã€‚

### ç¬¬ 5 æ­¥ï¼šé…ç½®ä¿è­·æ©Ÿåˆ¶

**ç‚ºä»€éº¼**
é¿å…èª¤ä¿®å‰ªé—œéµå…§å®¹ï¼ˆå¦‚é‡è¦æª”æ¡ˆã€æ ¸å¿ƒå·¥å…·ï¼‰ã€‚

DCP æä¾›ä¸‰ç¨®ä¿è­·æ©Ÿåˆ¶ï¼š

#### 1. å›åˆä¿è­·ï¼ˆTurn Protectionï¼‰

ä¿è­·æœ€è¿‘å¹¾å›åˆçš„å·¥å…·è¼¸å‡ºï¼Œçµ¦ AI è¶³å¤ æ™‚é–“å¼•ç”¨ã€‚

```jsonc
{
    "turnProtection": {
        "enabled": false,   // å•Ÿç”¨å¾Œä¿è­·æœ€è¿‘ 4 å›åˆ
        "turns": 4          // ä¿è­·å›åˆæ•¸
    }
}
```

**é©ç”¨å ´æ™¯**ï¼šç•¶ä½ ç™¼ç¾ AI é »ç¹éºå¤±ä¸Šä¸‹æ–‡æ™‚ï¼Œå¯ä»¥å•Ÿç”¨ã€‚

#### 2. å—ä¿è­·å·¥å…·ï¼ˆProtected Toolsï¼‰

æŸäº›å·¥å…·é è¨­å§‹çµ‚ä¸æœƒè¢«ä¿®å‰ªï¼š

```
task, todowrite, todoread, discard, extract, batch, write, edit, plan_enter, plan_exit
```

ä½ å¯ä»¥æ–°å¢é¡å¤–éœ€è¦ä¿è­·çš„å·¥å…·ï¼š

```jsonc
{
    "tools": {
        "settings": {
            "protectedTools": [
                "myCustomTool",   // æ–°å¢è‡ªè¨‚å·¥å…·
                "databaseQuery"    // æ–°å¢éœ€è¦ä¿è­·çš„å·¥å…·
            ]
        }
    },
    "strategies": {
        "deduplication": {
            "protectedTools": ["databaseQuery"]  // ç‚ºç‰¹å®šç­–ç•¥ä¿è­·å·¥å…·
        }
    }
}
```

#### 3. å—ä¿è­·æª”æ¡ˆæ¨¡å¼ï¼ˆProtected File Patternsï¼‰

ä½¿ç”¨ glob æ¨¡å¼ä¿è­·ç‰¹å®šæª”æ¡ˆï¼š

```jsonc
{
    "protectedFilePatterns": [
        "**/*.config.ts",           // ä¿è­·æ‰€æœ‰ .config.ts æª”æ¡ˆ
        "**/secrets/**",           // ä¿è­· secrets ç›®éŒ„ä¸‹çš„æ‰€æœ‰æª”æ¡ˆ
        "**/*.env",                // ä¿è­·ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ
        "**/critical/*.json"        // ä¿è­· critical ç›®éŒ„ä¸‹çš„ JSON æª”æ¡ˆ
    ]
}
```

::: warning æ³¨æ„
protectedFilePatterns åŒ¹é…çš„æ˜¯ `tool.parameters.filePath`ï¼Œè€Œä¸æ˜¯æª”æ¡ˆçš„å¯¦éš›è·¯å¾‘ã€‚é€™æ„å‘³è‘—å®ƒåªé©ç”¨æ–¼æœ‰ `filePath` åƒæ•¸çš„å·¥å…·ï¼ˆå¦‚ readã€writeã€editï¼‰ã€‚

:::

### ç¬¬ 6 æ­¥ï¼šå»ºç«‹å°ˆæ¡ˆç´šé…ç½®

**ç‚ºä»€éº¼**
ä¸åŒå°ˆæ¡ˆå¯èƒ½éœ€è¦ä¸åŒçš„ä¿®å‰ªç­–ç•¥ã€‚

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.opencode` ç›®éŒ„ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ï¼Œç„¶å¾Œå»ºç«‹ `dcp.jsonc`ï¼š

```bash
# åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œ
mkdir -p .opencode
cat > .opencode/dcp.jsonc << 'EOF'
{
    "$schema": "https://raw.githubusercontent.com/Opencode-DCP/opencode-dynamic-context-pruning/master/dcp.schema.json",
    // é€™å€‹å°ˆæ¡ˆçš„ç‰¹å®šé…ç½®
    "strategies": {
        "supersedeWrites": {
            "enabled": true   // é€™å€‹å°ˆæ¡ˆå•Ÿç”¨è¦†è“‹å¯«å…¥ç­–ç•¥
        }
    },
    "protectedFilePatterns": [
        "**/config/**/*.ts"   // ä¿è­·é€™å€‹å°ˆæ¡ˆçš„é…ç½®æª”æ¡ˆ
    ]
}
EOF
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- å°ˆæ¡ˆç´šé…ç½®æœƒè¦†è“‹å…¨åŸŸé…ç½®çš„åŒåé …
- æœªè¦†è“‹çš„é …ç¹¼çºŒä½¿ç”¨å…¨åŸŸé…ç½®

### ç¬¬ 7 æ­¥ï¼šå•Ÿç”¨é™¤éŒ¯æ—¥èªŒ

**ç‚ºä»€éº¼**
é‡åˆ°å•é¡Œæ™‚ï¼ŒæŸ¥çœ‹è©³ç´°çš„é™¤éŒ¯æ—¥èªŒã€‚

ç·¨è¼¯é…ç½®æª”æ¡ˆï¼š

```jsonc
{
    "debug": true
}
```

**æ—¥èªŒä½ç½®**ï¼š
```
~/.config/opencode/logs/dcp/daily/YYYY-MM-DD.log
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šæ—¥èªŒæª”æ¡ˆä¸­åŒ…å«è©³ç´°çš„ä¿®å‰ªæ“ä½œã€é…ç½®è¼‰å…¥ç­‰è³‡è¨Šã€‚

::: info ç”Ÿç”¢ç’°å¢ƒå»ºè­°
é™¤éŒ¯å®Œæˆå¾Œè¨˜å¾—å°‡ `debug` æ”¹å› `false`ï¼Œé¿å…æ—¥èªŒæª”æ¡ˆå¢é•·éå¿«ã€‚

:::

## æª¢æŸ¥é» âœ…

å®Œæˆä»¥ä¸Šæ­¥é©Ÿå¾Œï¼Œç¢ºèªä»¥ä¸‹å…§å®¹ï¼š

- [ ] çŸ¥é“é…ç½®æª”æ¡ˆçš„ä¸‰å€‹å±¤ç´šå’Œå„ªå…ˆç´š
- [ ] èƒ½ä¿®æ”¹é€šçŸ¥ç´šåˆ¥ä¸¦çœ‹åˆ°æ•ˆæœ
- [ ] ç†è§£ä¸‰ç¨®è‡ªå‹•ä¿®å‰ªç­–ç•¥çš„ä½œç”¨
- [ ] æœƒé…ç½®ä¿è­·æ©Ÿåˆ¶ï¼ˆå›åˆã€å·¥å…·ã€æª”æ¡ˆï¼‰
- [ ] èƒ½å»ºç«‹å°ˆæ¡ˆç´šé…ç½®è¦†è“‹å…¨åŸŸè¨­å®š

## è¸©å‘æé†’

### é…ç½®ä¿®æ”¹ä¸ç”Ÿæ•ˆ

**å•é¡Œ**ï¼šä¿®æ”¹é…ç½®æª”æ¡ˆå¾Œï¼ŒOpenCode æ²’æœ‰åæ‡‰ã€‚

**åŸå› **ï¼šOpenCode ä¸æœƒè‡ªå‹•é‡æ–°è¼‰å…¥é…ç½®æª”æ¡ˆã€‚

**è§£æ±º**ï¼šä¿®æ”¹é…ç½®å¾Œéœ€è¦**é‡å•Ÿ OpenCode**ã€‚

### é…ç½®æª”æ¡ˆèªæ³•éŒ¯èª¤

**å•é¡Œ**ï¼šé…ç½®æª”æ¡ˆæœ‰èªæ³•éŒ¯èª¤ï¼ŒDCP ç„¡æ³•è§£æã€‚

**è¡¨ç¾**ï¼šOpenCode æœƒé¡¯ç¤º Toast è­¦å‘Šæç¤º "Invalid config"ã€‚

**è§£æ±º**ï¼šæª¢æŸ¥ JSON èªæ³•ï¼Œç‰¹åˆ¥æ˜¯ï¼š
- å¼•è™Ÿã€é€—è™Ÿã€æ‹¬è™Ÿæ˜¯å¦åŒ¹é…
- æ˜¯å¦æœ‰å¤šé¤˜çš„é€—è™Ÿï¼ˆå¦‚æœ€å¾Œä¸€å€‹å…ƒç´ å¾Œçš„é€—è™Ÿï¼‰
- å¸ƒæ—å€¼ç”¨ `true`/`false`ï¼Œä¸è¦ç”¨å¼•è™Ÿ

**æ¨è–¦åšæ³•**ï¼šä½¿ç”¨æ”¯æ´ JSONC çš„ç·¨è¼¯å™¨ï¼ˆå¦‚ VS Code + JSONC å¤–æ›ï¼‰ã€‚

### å—ä¿è­·å·¥å…·ä¸ç”Ÿæ•ˆ

**å•é¡Œ**ï¼šæ–°å¢äº† `protectedTools`ï¼Œä½†å·¥å…·ä»è¢«ä¿®å‰ªã€‚

**åŸå› **ï¼š
1. å·¥å…·åæ‹¼å¯«éŒ¯èª¤
2. æ–°å¢åˆ°äº†éŒ¯èª¤çš„ `protectedTools` é™£åˆ—ï¼ˆå¦‚ `tools.settings.protectedTools` vs `strategies.deduplication.protectedTools`ï¼‰
3. å·¥å…·å‘¼å«åœ¨å›åˆä¿è­·æœŸå…§ï¼ˆå¦‚æœå•Ÿç”¨äº†å›åˆä¿è­·ï¼‰

**è§£æ±º**ï¼š
1. ç¢ºèªå·¥å…·åæ‹¼å¯«æ­£ç¢º
2. æª¢æŸ¥æ˜¯å¦æ–°å¢åˆ°äº†æ­£ç¢ºçš„ä½ç½®
3. æŸ¥çœ‹ debug æ—¥èªŒç­è§£ä¿®å‰ªåŸå› 

## æœ¬èª²å°çµ

DCP é…ç½®ç³»çµ±çš„æ ¸å¿ƒè¦é»ï¼š

- **ä¸‰ç´šé…ç½®**ï¼šé è¨­å€¼ â†’ å…¨åŸŸ â†’ ç’°å¢ƒè®Šæ•¸ â†’ å°ˆæ¡ˆï¼Œå„ªå…ˆç´šéå¢
- **éˆæ´»è¦†è“‹**ï¼šå°ˆæ¡ˆé…ç½®å¯ä»¥è¦†è“‹å…¨åŸŸé…ç½®
- **ä¿è­·æ©Ÿåˆ¶**ï¼šå›åˆä¿è­·ã€å—ä¿è­·å·¥å…·ã€å—ä¿è­·æª”æ¡ˆæ¨¡å¼ï¼Œé¿å…èª¤ä¿®å‰ª
- **è‡ªå‹•ç­–ç•¥**ï¼šå»é‡ã€è¦†è“‹å¯«å…¥ã€æ¸…é™¤éŒ¯èª¤ï¼ŒæŒ‰éœ€é–‹é—œ
- **é‡å•Ÿç”Ÿæ•ˆ**ï¼šä¿®æ”¹é…ç½®å¾Œè¨˜å¾—é‡å•Ÿ OpenCode

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[è‡ªå‹•ä¿®å‰ªç­–ç•¥è©³è§£](../../platforms/auto-pruning/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - å»é‡ç­–ç•¥å¦‚ä½•æª¢æ¸¬é‡è¤‡å·¥å…·å‘¼å«
> - è¦†è“‹å¯«å…¥ç­–ç•¥çš„å·¥ä½œåŸç†
> - æ¸…é™¤éŒ¯èª¤ç­–ç•¥çš„è§¸ç™¼æ¢ä»¶
> - å¦‚ä½•ç›£æ§ç­–ç•¥æ•ˆæœ

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»é¸å±•é–‹æŸ¥çœ‹åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-23

| åŠŸèƒ½        | æª”æ¡ˆè·¯å¾‘                                                                                                            | è¡Œè™Ÿ      |
|---|---|---|
| é…ç½®ç®¡ç†æ ¸å¿ƒ | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts)         | 1-798     |
| é…ç½® Schema  | [`dcp.schema.json`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/dcp.schema.json) | 1-232     |
| é è¨­é…ç½®    | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L423-L464) | 423-464   |
| é…ç½®å„ªå…ˆç´š  | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L669-L797) | 669-797   |
| é…ç½®é©—è­‰    | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L147-L375) | 147-375   |
| é…ç½®æª”æ¡ˆè·¯å¾‘ | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L484-L526) | 484-526   |
| é è¨­å—ä¿è­·å·¥å…· | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L68-L79) | 68-79     |
| åˆä½µç­–ç•¥é…ç½® | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L565-L595) | 565-595   |
| åˆä½µå·¥å…·é…ç½® | [`lib/config.ts`](https://github.com/Opencode-DCP/opencode-dynamic-context-pruning/blob/main/lib/config.ts#L597-L622) | 597-622   |

**é—œéµå¸¸æ•¸**ï¼š
- `DEFAULT_PROTECTED_TOOLS`ï¼šé è¨­å—ä¿è­·çš„å·¥å…·ååˆ—è¡¨ï¼ˆ`lib/config.ts:68-79`ï¼‰

**é—œéµå‡½å¼**ï¼š
- `getConfig()`ï¼šè¼‰å…¥ä¸¦åˆä½µæ‰€æœ‰å±¤ç´šçš„é…ç½®ï¼ˆ`lib/config.ts:669-797`ï¼‰
- `getInvalidConfigKeys()`ï¼šé©—è­‰é…ç½®æª”æ¡ˆä¸­çš„ç„¡æ•ˆéµï¼ˆ`lib/config.ts:135-138`ï¼‰
- `validateConfigTypes()`ï¼šé©—è­‰é…ç½®å€¼çš„å‹åˆ¥ï¼ˆ`lib/config.ts:147-375`ï¼‰
- `getConfigPaths()`ï¼šå–å¾—æ‰€æœ‰é…ç½®æª”æ¡ˆçš„è·¯å¾‘ï¼ˆ`lib/config.ts:484-526`ï¼‰

</details>
