---
title: "Google Search: è®“ Gemini æœå°‹ç¶²è·¯ | Antigravity"
sidebarTitle: "è®“ Gemini ä¸Šç¶²æŸ¥è³‡æ–™"
subtitle: "Google Search Groundingï¼šè®“ Gemini æœå°‹ç¶²è·¯è³‡è¨Š"
description: "å­¸ç¿’ç‚º Gemini å•Ÿç”¨ Google Search Groundingï¼Œè®“æ¨¡å‹æœå°‹å³æ™‚ç¶²è·¯è³‡è¨Šã€‚æŒæ¡é…ç½®æ–¹å¼å’Œé–¾å€¼èª¿ç¯€æŠ€å·§ï¼Œå¹³è¡¡æº–ç¢ºæ€§èˆ‡å›æ‡‰é€Ÿåº¦ã€‚"
tags:
  - "gemini"
  - "google-search"
  - "grounding"
  - "é…ç½®"
prerequisite:
  - "start-quick-install"
  - "start-first-request"
order: 3
---

# Google Search Groundingï¼šè®“ Gemini æœå°‹ç¶²è·¯è³‡è¨Š

## å­¸å®Œä½ èƒ½åšä»€éº¼

- ç‚º Gemini æ¨¡å‹å•Ÿç”¨ Google Searchï¼Œè®“ AI èƒ½å¤ æœå°‹å³æ™‚ç¶²è·¯è³‡è¨Š
- èª¿ç¯€æœå°‹é–¾å€¼ï¼Œæ§åˆ¶æ¨¡å‹æœå°‹çš„é »ç‡
- ç†è§£ Google Search Grounding çš„å·¥ä½œåŸç†å’Œé©ç”¨å ´æ™¯
- æ ¹æ“šä»»å‹™éœ€æ±‚é¸æ“‡åˆé©çš„é…ç½®

## ä½ ç¾åœ¨çš„å›°å¢ƒ

::: info ä»€éº¼æ˜¯ Google Search Groundingï¼Ÿ

**Google Search Grounding** æ˜¯ Gemini çš„ä¸€å€‹åŠŸèƒ½ï¼Œå®ƒå…è¨±æ¨¡å‹åœ¨éœ€è¦æ™‚è‡ªå‹•æœå°‹ Googleï¼Œå–å¾—å³æ™‚è³‡è¨Šï¼ˆå¦‚æ–°èã€çµ±è¨ˆæ•¸æ“šã€ç”¢å“åƒ¹æ ¼ç­‰ï¼‰ï¼Œè€Œä¸æ˜¯å®Œå…¨ä¾è³´è¨“ç·´è³‡æ–™ã€‚

:::

ä½ ç”¨ Gemini å•ã€Œä»Šå¤©å¤©æ°£å¦‚ä½•ã€æˆ–ã€Œæœ€æ–°ç‰ˆ VS Code ç‰ˆæœ¬è™Ÿã€ï¼Œæ¨¡å‹å¯èƒ½å›ç­”ä¸å‡ºä¾†ï¼Œå› ç‚ºå®ƒçš„è¨“ç·´è³‡æ–™å·²ç¶“éæ™‚äº†ã€‚å•Ÿç”¨ Google Search Grounding å¾Œï¼Œæ¨¡å‹å¯ä»¥è‡ªå·±ä¸Šç¶²æŸ¥ç­”æ¡ˆï¼Œå°±åƒä½ ç”¨ç€è¦½å™¨ä¸€æ¨£ã€‚

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

| å ´æ™¯ | æ˜¯å¦éœ€è¦å•Ÿç”¨ | åŸå›  |
|---|--- | ---|
| ç¨‹å¼ç¢¼ç”Ÿæˆã€ç¨‹å¼è¨­è¨ˆå•é¡Œ | âŒ ä¸éœ€è¦ | ç¨‹å¼è¨­è¨ˆçŸ¥è­˜ç›¸å°ç©©å®šï¼Œè¨“ç·´è³‡æ–™è¶³å¤  |
| å–å¾—æœ€æ–°è³‡è¨Šï¼ˆæ–°èã€åƒ¹æ ¼ã€ç‰ˆæœ¬ï¼‰ | âœ… å¼·çƒˆæ¨è–¦ | éœ€è¦å³æ™‚è³‡æ–™ |
| äº‹å¯¦æŸ¥æ ¸ï¼ˆå…·é«”æ—¥æœŸã€çµ±è¨ˆï¼‰ | âœ… æ¨è–¦ | é¿å…æ¨¡å‹ç·¨é€ è³‡è¨Š |
| å‰µæ„å¯«ä½œã€è…¦åŠ›æ¿€ç›ª | âŒ ä¸éœ€è¦ | ä¸éœ€è¦äº‹å¯¦æº–ç¢ºæ€§ |
| æŠ€è¡“æ–‡ä»¶æŸ¥è©¢ | âœ… æ¨è–¦ | æŸ¥æ‰¾æœ€æ–° API æ–‡ä»¶ |

## æ ¸å¿ƒæ€è·¯

Google Search Grounding çš„æ ¸å¿ƒæ˜¯è®“æ¨¡å‹**åœ¨éœ€è¦æ™‚**è‡ªå‹•æœå°‹ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½æœå°‹ã€‚å¤–æ›ç¨‹å¼é€šéæ³¨å…¥ `googleSearchRetrieval` å·¥å…·ï¼Œè®“ Gemini èƒ½å¤ å‘¼å« Google æœå°‹ APIã€‚

::: tip é—œéµæ¦‚å¿µ

- **Auto æ¨¡å¼**ï¼šæ¨¡å‹è‡ªå·±æ±ºå®šæ˜¯å¦æœå°‹ï¼ˆæ ¹æ“šé–¾å€¼ï¼‰
- **é–¾å€¼ï¼ˆgrounding_thresholdï¼‰**ï¼šæ§åˆ¶æ¨¡å‹æœå°‹çš„ã€Œé–€æª»ã€ã€‚å€¼è¶Šå°ï¼Œæœå°‹è¶Šé »ç¹

:::

## ğŸ’ é–‹å§‹å‰çš„æº–å‚™

::: warning å‰ç½®æª¢æŸ¥

åœ¨é–‹å§‹å‰ï¼Œè«‹ç¢ºèªï¼š

  - [ ] å·²å®Œæˆ [å¿«é€Ÿå®‰è£](../../start/quick-install/)
  - [ ] å·²æ–°å¢è‡³å°‘ä¸€å€‹ Google å¸³æˆ¶
  - [ ] å·²æˆåŠŸç™¼èµ·é¦–æ¬¡è«‹æ±‚ï¼ˆåƒè€ƒ [é¦–æ¬¡è«‹æ±‚](../../start/first-request/)ï¼‰

:::

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šæª¢æŸ¥è¨­å®šæª”ä½ç½®

å¤–æ›ç¨‹å¼çš„è¨­å®šæª”ä½æ–¼ï¼š

- **macOS/Linux**: `~/.config/opencode/antigravity.json`
- **Windows**: `%APPDATA%\opencode\antigravity.json`

å¦‚æœæª”æ¡ˆä¸å­˜åœ¨ï¼Œå…ˆå»ºç«‹å®ƒï¼š

```bash
# macOS/Linux
cat > ~/.config/opencode/antigravity.json << 'EOF'
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json"
}
EOF
```

```powershell
# Windows
@"
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json"
}
"@ | Out-File -FilePath "$env:APPDATA\opencode\antigravity.json" -Encoding utf8
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šè¨­å®šæª”å·²å»ºç«‹ï¼ŒåŒ…å« `$schema` æ¬„ä½

### ç¬¬ 2 æ­¥ï¼šå•Ÿç”¨ Google Search

åœ¨è¨­å®šæª”ä¸­æ–°å¢ `web_search` è¨­å®šï¼š

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "web_search": {
    "default_mode": "auto",
    "grounding_threshold": 0.3
  }
}
```

**è¨­å®šèªªæ˜**ï¼š

| æ¬„ä½ | å€¼ | èªªæ˜ |
|--- | --- | ---|
| `web_search.default_mode` | `"auto"` æˆ– `"off"` | å•Ÿç”¨æˆ–åœç”¨ Google Searchï¼Œé è¨­ `"off"` |
| `web_search.grounding_threshold` | `0.0` - `1.0` | æœå°‹é–¾å€¼ï¼Œé è¨­ `0.3`ï¼Œåƒ…åœ¨ `auto` æ¨¡å¼ç”Ÿæ•ˆ |

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šè¨­å®šæª”å·²æ›´æ–°ï¼ŒåŒ…å« `web_search` è¨­å®š

### ç¬¬ 3 æ­¥ï¼šèª¿æ•´æœå°‹é–¾å€¼ï¼ˆå¯é¸ï¼‰

`grounding_threshold` æ§åˆ¶æ¨¡å‹æœå°‹çš„é »ç‡ï¼š

| é–¾å€¼ | è¡Œç‚º | é©ç”¨å ´æ™¯ |
|--- | --- | ---|
| `0.0 - 0.2` | é »ç¹æœå°‹ï¼Œå¹¾ä¹æ¯æ¬¡ä¸ç¢ºå®šéƒ½æœ | éœ€è¦é«˜åº¦æº–ç¢ºçš„å³æ™‚è³‡æ–™ |
| `0.3`ï¼ˆé è¨­ï¼‰ | é©ä¸­ï¼Œæ¨¡å‹éœ€è¦è¼ƒç¢ºä¿¡æ‰æœƒæœ | æ—¥å¸¸ä½¿ç”¨ï¼Œå¹³è¡¡æº–ç¢ºæ€§å’Œé€Ÿåº¦ |
| `0.7 - 1.0` | å¾ˆå°‘æœå°‹ï¼Œåªåœ¨é«˜ç½®ä¿¡åº¦æ™‚æœ | æ¸›å°‘æœå°‹æ¬¡æ•¸ï¼Œæå‡é€Ÿåº¦ |

::: tip ç¶“é©—ä¹‹è«‡

å¾é è¨­å€¼ `0.3` é–‹å§‹ï¼Œå¦‚æœç™¼ç¾ï¼š
- **æ¨¡å‹æ²’æœå°‹** â†’ é™ä½é–¾å€¼ï¼ˆå¦‚ `0.2`ï¼‰
- **æœå°‹å¤ªé »ç¹ï¼Œå›æ‡‰æ…¢** â†’ æé«˜é–¾å€¼ï¼ˆå¦‚ `0.5`ï¼‰

:::

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šé–¾å€¼å·²èª¿æ•´ï¼Œå¯æ ¹æ“šå¯¦éš›ä½¿ç”¨é«”é©—å„ªåŒ–

### ç¬¬ 4 æ­¥ï¼šé©—è­‰è¨­å®š

é‡æ–°å•Ÿå‹• OpenCodeï¼Œæˆ–é‡æ–°è¼‰å…¥è¨­å®šï¼ˆå¦‚æœæ”¯æ´ï¼‰ï¼Œç„¶å¾Œç™¼èµ·ä¸€å€‹éœ€è¦å³æ™‚è³‡è¨Šçš„è«‹æ±‚ï¼š

```
ä½¿ç”¨è€…è¼¸å…¥ï¼š
VS Code æœ€æ–°ç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Ÿ

ç³»çµ±å›è¦†ï¼ˆå•Ÿç”¨ Google Searchï¼‰ï¼š
VS Code çš„æœ€æ–°ç©©å®šç‰ˆæœ¬æ˜¯ 1.96.4ï¼ˆæˆªè‡³ 2026 å¹´ 1 æœˆï¼‰...

[citation:1] â† å¼•ç”¨ä¾†æºæ¨™è¨˜
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- æ¨¡å‹å›ç­”åŒ…å«å¼•ç”¨ä¾†æºï¼ˆ`[citation:1]` ç­‰ï¼‰
- å›ç­”å…§å®¹æ˜¯æœ€æ–°çš„ï¼Œä¸æ˜¯è¨“ç·´è³‡æ–™ä¸­çš„èˆŠç‰ˆæœ¬

### ç¬¬ 5 æ­¥ï¼šæ¸¬è©¦ä¸åŒé–¾å€¼

å˜—è©¦èª¿æ•´ `grounding_threshold`ï¼Œè§€å¯Ÿæ¨¡å‹è¡Œç‚ºè®ŠåŒ–ï¼š

```json
// ä½é–¾å€¼ï¼ˆé »ç¹æœå°‹ï¼‰
"grounding_threshold": 0.1

// é«˜é–¾å€¼ï¼ˆå¾ˆå°‘æœå°‹ï¼‰
"grounding_threshold": 0.7
```

æ¯æ¬¡èª¿æ•´å¾Œï¼Œç”¨ç›¸åŒå•é¡Œæ¸¬è©¦ï¼Œè§€å¯Ÿï¼š
- æ˜¯å¦æœå°‹ï¼ˆæŸ¥çœ‹å›æ‡‰æ˜¯å¦æœ‰å¼•ç”¨ï¼‰
- æœå°‹æ¬¡æ•¸ï¼ˆå¤šå€‹ `citation`ï¼‰
- å›æ‡‰é€Ÿåº¦

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- ä½é–¾å€¼ï¼šæœå°‹æ›´é »ç¹ï¼Œä½†å›æ‡‰ç¨æ…¢
- é«˜é–¾å€¼ï¼šæœå°‹æ›´å°‘ï¼Œä½†å¯èƒ½å›ç­”ä¸æº–ç¢º

## æª¢æŸ¥é» âœ…

::: details é»æ“Šå±•é–‹é©—è­‰æ¸…å–®

å®Œæˆä»¥ä¸‹æª¢æŸ¥ï¼Œç¢ºèªè¨­å®šæ­£ç¢ºï¼š

- [ ] è¨­å®šæª”åŒ…å« `web_search` è¨­å®š
- [ ] `default_mode` è¨­å®šç‚º `"auto"`
- [ ] `grounding_threshold` åœ¨ `0.0` åˆ° `1.0` ä¹‹é–“
- [ ] ç™¼èµ·éœ€è¦å³æ™‚è³‡è¨Šçš„è«‹æ±‚ï¼Œæ¨¡å‹è¿”å›åŒ…å«å¼•ç”¨
- [ ] èª¿æ•´é–¾å€¼å¾Œï¼Œæ¨¡å‹æœå°‹è¡Œç‚ºæœ‰è®ŠåŒ–

å¦‚æœå…¨éƒ¨é€šéï¼Œèªªæ˜ Google Search Grounding å·²æ­£ç¢ºå•Ÿç”¨ï¼

:::

## è¸©å‘æé†’

### å•é¡Œ 1ï¼šæ¨¡å‹æ²’æœ‰æœå°‹

**ç—‡ç‹€**ï¼šå•Ÿç”¨ `auto` æ¨¡å¼å¾Œï¼Œæ¨¡å‹ä»ç„¶æ²’æœ‰æœå°‹ï¼Œä¹Ÿæ²’æœ‰å¼•ç”¨ä¾†æºã€‚

**åŸå› **ï¼š
- é–¾å€¼å¤ªé«˜ï¼ˆå¦‚ `0.9`ï¼‰ï¼Œæ¨¡å‹éœ€è¦æ¥µé«˜ç¢ºä¿¡åº¦æ‰æœå°‹
- å•é¡Œæœ¬èº«ä¸éœ€è¦æœå°‹ï¼ˆå¦‚ç¨‹å¼è¨­è¨ˆå•é¡Œï¼‰

**è§£æ±ºæ–¹æ³•**ï¼š
- é™ä½ `grounding_threshold` åˆ° `0.2` æˆ–æ›´ä½
- ç”¨æ˜ç¢ºéœ€è¦å³æ™‚è³‡è¨Šçš„å•é¡Œæ¸¬è©¦ï¼ˆå¦‚ã€Œä»Šå¤©å¤©æ°£å¦‚ä½•ã€ã€ã€Œæœ€æ–°æ–°èã€ï¼‰

### å•é¡Œ 2ï¼šæœå°‹å¤ªé »ç¹ï¼Œå›æ‡‰æ…¢

**ç—‡ç‹€**ï¼šæ¯å€‹å•é¡Œéƒ½æœå°‹ï¼Œå›æ‡‰æ™‚é–“æ˜é¡¯å¢åŠ ã€‚

**åŸå› **ï¼š
- é–¾å€¼å¤ªä½ï¼ˆå¦‚ `0.1`ï¼‰ï¼Œæ¨¡å‹éæ–¼é »ç¹è§¸ç™¼æœå°‹
- å•é¡Œé¡å‹æœ¬èº«éœ€è¦å³æ™‚è³‡è¨Šï¼ˆå¦‚è‚¡ç¥¨åƒ¹æ ¼ã€æ–°èï¼‰

**è§£æ±ºæ–¹æ³•**ï¼š
- æé«˜ `grounding_threshold` åˆ° `0.5` æˆ–æ›´é«˜
- å¦‚æœä»»å‹™ä¸éœ€è¦å³æ™‚è³‡è¨Šï¼Œå°‡ `default_mode` æ”¹ç‚º `"off"`

### å•é¡Œ 3ï¼šè¨­å®šæª”æ ¼å¼éŒ¯èª¤

**ç—‡ç‹€**ï¼šå¤–æ›ç¨‹å¼å ±éŒ¯ï¼Œç„¡æ³•è¼‰å…¥è¨­å®šã€‚

**åŸå› **ï¼šJSON æ ¼å¼éŒ¯èª¤ï¼ˆå¦‚å¤šé¤˜çš„é€—è™Ÿã€å¼•è™Ÿä¸åŒ¹é…ï¼‰ã€‚

**è§£æ±ºæ–¹æ³•**ï¼šä½¿ç”¨ JSON é©—è­‰å·¥å…·æª¢æŸ¥è¨­å®šæª”ï¼Œç¢ºä¿æ ¼å¼æ­£ç¢ºã€‚

```bash
# é©—è­‰ JSON æ ¼å¼
cat ~/.config/opencode/antigravity.json | python3 -m json.tool
```

## æœ¬èª²å°çµ

- **Google Search Grounding** è®“ Gemini æ¨¡å‹èƒ½å¤ æœå°‹å³æ™‚ç¶²è·¯è³‡è¨Š
- é€šé `web_search.default_mode: "auto"` å•Ÿç”¨ï¼Œ`"off"` åœç”¨
- `grounding_threshold` æ§åˆ¶æœå°‹é »ç‡ï¼šå€¼è¶Šå°ï¼Œæœå°‹è¶Šé »ç¹
- é è¨­é–¾å€¼ `0.3` é©åˆå¤§å¤šæ•¸å ´æ™¯ï¼Œå¯æ ¹æ“šå¯¦éš›é«”é©—èª¿æ•´
- æ¨¡å‹æœƒåœ¨å›ç­”ä¸­å¼•ç”¨ä¾†æºï¼Œæ¨™è¨˜ç‚º `[citation:1]` ç­‰

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[é›™é…é¡ç³»çµ±](../dual-quota-system/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - Antigravity å’Œ Gemini CLI å…©å€‹ç¨ç«‹é…é¡æ± å¦‚ä½•å·¥ä½œ
> - å¦‚ä½•åœ¨é…é¡æ± ä¹‹é–“åˆ‡æ›ï¼Œæœ€å¤§åŒ–åˆ©ç”¨ç‡
> - é…é¡æ± åŒ–çš„æœ€ä½³å¯¦è¸

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æŸ¥çœ‹åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-23

| åŠŸèƒ½ | æª”æ¡ˆè·¯å¾‘ | è¡Œè™Ÿ |
|--- | --- | ---|
| Google Search è¨­å®š Schema | [`src/plugin/config/schema.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/schema.ts) | 303-319 |
| Google Search å‹åˆ¥å®šç¾© | [`src/plugin/transform/types.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/transform/types.ts) | 85-88 |
| Google Search æ³¨å…¥é‚è¼¯ | [`src/plugin/transform/gemini.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/transform/gemini.ts) | 402-419 |
| Google Search è¨­å®šè¼‰å…¥ | [`src/plugin/config/loader.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/loader.ts) | 173-184 |
| Google Search è¨­å®šæ‡‰ç”¨ | [`src/plugin.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin.ts) | 1194-1196 |

**é—œéµè¨­å®šé …**ï¼š

- `web_search.default_mode`: `"auto"` æˆ– `"off"`ï¼Œé è¨­ `"off"`
- `web_search.grounding_threshold`: `0.0` - `1.0`ï¼Œé è¨­ `0.3`

**é—œéµå‡½å¼**ï¼š

- `applyGeminiTransforms()`ï¼šæ‡‰ç”¨æ‰€æœ‰ Gemini è½‰æ›ï¼ŒåŒ…æ‹¬ Google Search æ³¨å…¥
- `normalizeGeminiTools()`ï¼šè¦ç¯„åŒ–å·¥å…·æ ¼å¼ï¼Œä¿ç•™ `googleSearchRetrieval` å·¥å…·
- `wrapToolsAsFunctionDeclarations()`ï¼šå°‡å·¥å…·åŒ…è£ç‚º `functionDeclarations` æ ¼å¼

**å·¥ä½œåŸç†**ï¼š

1. å¤–æ›ç¨‹å¼å¾è¨­å®šæª”è®€å– `web_search.default_mode` å’Œ `web_search.grounding_threshold`
2. ç•¶ `mode === "auto"` æ™‚ï¼Œåœ¨è«‹æ±‚çš„ `tools` é™£åˆ—ä¸­æ³¨å…¥ `googleSearchRetrieval` å·¥å…·ï¼š
   ```json
   {
     "googleSearchRetrieval": {
       "dynamicRetrievalConfig": {
         "mode": "MODE_DYNAMIC",
         "dynamicThreshold": 0.3  // grounding_threshold
       }
     }
   }
   ```
3. Gemini æ¨¡å‹æ ¹æ“šé–¾å€¼æ±ºå®šæ˜¯å¦å‘¼å«æœå°‹å·¥å…·
4. æœå°‹çµæœæœƒåŒ…å«åœ¨å›æ‡‰ä¸­ï¼Œä¸¦æ¨™è¨˜å¼•ç”¨ä¾†æºï¼ˆ`[citation:1]` ç­‰ï¼‰

</details>
