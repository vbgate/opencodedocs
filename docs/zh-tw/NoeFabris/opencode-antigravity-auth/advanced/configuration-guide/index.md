---
title: "é…ç½®æŒ‡å—ï¼šå®Œæ•´é…ç½®é¸é …è©³è§£ | Antigravity Auth"
sidebarTitle: "é…ç½®å…¨æå®š"
subtitle: "é…ç½®é¸é …å®Œæ•´æŒ‡å—"
description: "æŒæ¡ Antigravity Auth å¤–æ›çš„å®Œæ•´é…ç½®é¸é …ã€‚è©³è§£é…ç½®æª”æ¡ˆä½ç½®ã€æ¨¡å‹è¡Œç‚ºã€å¸³æˆ¶è¼ªæ›ç­–ç•¥å’Œæ‡‰ç”¨è¡Œç‚ºè¨­å®šï¼Œæä¾›å–®å¸³æˆ¶ã€å¤šå¸³æˆ¶å’Œä¸¦è¡Œä»£ç†å ´æ™¯çš„æ¨è–¦é…ç½®æ–¹æ¡ˆã€‚"
tags:
  - "é…ç½®"
  - "é«˜ç´šé…ç½®"
  - "å¤šå¸³æˆ¶"
  - "å¸³æˆ¶è¼ªæ›"
prerequisite:
  - "start-quick-install"
  - "advanced-multi-account-setup"
order: 2
---

# é…ç½®é¸é …å®Œæ•´æŒ‡å—

## å­¸å®Œä½ èƒ½åšä»€éº¼

- âœ… åœ¨æ­£ç¢ºçš„ä½ç½®å»ºç«‹é…ç½®æª”æ¡ˆ
- âœ… æ ¹æ“šä½¿ç”¨å ´æ™¯é¸æ“‡åˆé©çš„é…ç½®æ–¹æ¡ˆ
- âœ… ç†è§£æ‰€æœ‰é…ç½®é¸é …çš„ä½œç”¨å’Œé è¨­å€¼
- âœ… ä½¿ç”¨ç’°å¢ƒè®Šæ•¸è‡¨æ™‚è¦†è“‹é…ç½®
- âœ… èª¿æ•´æ¨¡å‹è¡Œç‚ºã€å¸³æˆ¶è¼ªæ›å’Œå¤–æ›è¡Œç‚º

## ä½ ç¾åœ¨çš„å›°å¢ƒ

é…ç½®é¸é …å¤ªå¤šï¼Œä¸çŸ¥é“å¾å“ªè£¡é–‹å§‹ï¼Ÿé è¨­é…ç½®èƒ½ç”¨ï¼Œä½†æƒ³é€²ä¸€æ­¥æœ€ä½³åŒ–ï¼Ÿå¤šå¸³æˆ¶å ´æ™¯ä¸‹ä¸æ¸…æ¥šæ‡‰è©²ç”¨å“ªç¨®è¼ªæ›ç­–ç•¥ï¼Ÿ

## æ ¸å¿ƒæ€è·¯

é…ç½®æª”æ¡ˆå°±åƒçµ¦å¤–æ›å¯«ã€Œä½¿ç”¨èªªæ˜æ›¸ã€â€”â€”ä½ å‘Šè¨´å®ƒæ€éº¼å·¥ä½œï¼Œå®ƒå°±æŒ‰ä½ çš„æ–¹å¼åŸ·è¡Œã€‚Antigravity Auth å¤–æ›æä¾›äº†è±å¯Œçš„é…ç½®é¸é …ï¼Œä½†å¤§å¤šæ•¸ä½¿ç”¨è€…åªéœ€è¦é…ç½®å¹¾å€‹æ ¸å¿ƒé¸é …ã€‚

### é…ç½®æª”æ¡ˆå„ªå…ˆé †åº

é…ç½®é …çš„å„ªå…ˆé †åºå¾é«˜åˆ°ä½ï¼š

1. **ç’°å¢ƒè®Šæ•¸**ï¼ˆè‡¨æ™‚è¦†è“‹ï¼‰
2. **å°ˆæ¡ˆç´šé…ç½®** `.opencode/antigravity.json`ï¼ˆç•¶å‰å°ˆæ¡ˆï¼‰
3. **ä½¿ç”¨è€…ç´šé…ç½®** `~/.config/opencode/antigravity.json`ï¼ˆå…¨åŸŸï¼‰

::: info
ç’°å¢ƒè®Šæ•¸å„ªå…ˆé †åºæœ€é«˜ï¼Œé©åˆè‡¨æ™‚æ¸¬è©¦ã€‚é…ç½®æª”æ¡ˆé©åˆæŒä¹…åŒ–è¨­å®šã€‚
:::

### é…ç½®æª”æ¡ˆä½ç½®

æ ¹æ“šä½œæ¥­ç³»çµ±ï¼Œä½¿ç”¨è€…ç´šé…ç½®æª”æ¡ˆä½ç½®ä¸åŒï¼š

| ç³»çµ± | è·¯å¾‘ |
| --- | --- |
| Linux/macOS | `~/.config/opencode/antigravity.json` |
| Windows | `%APPDATA%\opencode\antigravity.json` |

å°ˆæ¡ˆç´šé…ç½®æª”æ¡ˆå§‹çµ‚åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„çš„ `.opencode/antigravity.json`ã€‚

### é…ç½®é¸é …åˆ†é¡

é…ç½®é¸é …åˆ†ç‚ºå››å¤§é¡ï¼š

1. **æ¨¡å‹è¡Œç‚º**ï¼šæ€è€ƒå€å¡Šã€å·¥ä½œéšæ®µæ¢å¾©ã€Google Search
2. **å¸³æˆ¶è¼ªæ›**ï¼šå¤šå¸³æˆ¶ç®¡ç†ã€é¸æ“‡ç­–ç•¥ã€PID åç§»
3. **æ‡‰ç”¨è¡Œç‚º**ï¼šé™¤éŒ¯æ—¥èªŒã€è‡ªå‹•æ›´æ–°ã€é€šçŸ¥éœé»˜
4. **é€²éšè¨­å®š**ï¼šéŒ¯èª¤æ¢å¾©ã€æ¬Šæ–ç®¡ç†ã€å¥åº·è©•åˆ†

---

## ğŸ’ é–‹å§‹å‰çš„æº–å‚™

- [x] å·²å®Œæˆå¤–æ›å®‰è£ï¼ˆåƒè€ƒ[å¿«é€Ÿå®‰è£](../../start/quick-install/)ï¼‰
- [x] å·²é…ç½®è‡³å°‘ä¸€å€‹ Google å¸³æˆ¶
- [x] äº†è§£ JSON åŸºæœ¬èªæ³•

---

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šå»ºç«‹é…ç½®æª”æ¡ˆ

**ç‚ºä»€éº¼**ï¼šé…ç½®æª”æ¡ˆè®“å¤–æ›æŒ‰ä½ çš„éœ€æ±‚å·¥ä½œ

æ ¹æ“šä½œæ¥­ç³»çµ±é¸æ“‡å°æ‡‰è·¯å¾‘å»ºç«‹é…ç½®æª”æ¡ˆï¼š

::: code-group

```bash [macOS/Linux]
cat > ~/.config/opencode/antigravity.json << 'EOF'
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json"
}
EOF
```

```powershell [Windows]
## ä½¿ç”¨ PowerShell
$env:APPDATA\opencode\antigravity.json = @{
  '$schema' = "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json"
} | ConvertTo-Json -Depth 10

Set-Content -Path "$env:APPDATA\opencode\antigravity.json" -Value $json
```

:::

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šæª”æ¡ˆå»ºç«‹æˆåŠŸï¼Œå…§å®¹åªæœ‰ `$schema` æ¬„ä½ã€‚

::: tip
æ–°å¢ `$schema` æ¬„ä½å¾Œï¼ŒVS Code æœƒè‡ªå‹•æä¾›æ™ºæ…§æç¤ºå’Œé¡å‹æª¢æŸ¥ã€‚
:::

### ç¬¬ 2 æ­¥ï¼šé…ç½®åŸºç¤é¸é …

**ç‚ºä»€éº¼**ï¼šæ ¹æ“šä½ çš„ä½¿ç”¨å ´æ™¯æœ€ä½³åŒ–å¤–æ›è¡Œç‚º

æ ¹æ“šä½ çš„é…ç½®é¸æ“‡ä»¥ä¸‹æ–¹æ¡ˆä¹‹ä¸€ï¼š

**å ´æ™¯ Aï¼šå–®å¸³æˆ¶ + éœ€è¦ Google Search**

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "sticky",
  "web_search": {
    "default_mode": "auto"
  }
}
```

**å ´æ™¯ Bï¼š2-3 å€‹å¸³æˆ¶ + æ™ºæ…§è¼ªæ›**

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "hybrid",
  "web_search": {
    "default_mode": "auto"
  }
}
```

**å ´æ™¯ Cï¼šå¤šå¸³æˆ¶ + ä¸¦è¡Œä»£ç†**

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "round-robin",
  "switch_on_first_rate_limit": true,
  "pid_offset_enabled": true,
  "web_search": {
    "default_mode": "auto"
  }
}
```

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šé…ç½®æª”æ¡ˆå„²å­˜æˆåŠŸï¼ŒOpenCode è‡ªå‹•é‡æ–°è¼‰å…¥å¤–æ›é…ç½®ã€‚

### ç¬¬ 3 æ­¥ï¼šé©—è­‰é…ç½®

**ç‚ºä»€éº¼**ï¼šç¢ºèªé…ç½®ç”Ÿæ•ˆ

åœ¨ OpenCode ä¸­ç™¼èµ·ä¸€å€‹æ¨¡å‹è«‹æ±‚ï¼Œè§€å¯Ÿï¼š

1. å–®å¸³æˆ¶ä½¿ç”¨ `sticky` ç­–ç•¥ï¼šæ‰€æœ‰è«‹æ±‚ä½¿ç”¨åŒä¸€å¸³æˆ¶
2. å¤šå¸³æˆ¶ä½¿ç”¨ `hybrid` ç­–ç•¥ï¼šè«‹æ±‚æœƒæ™ºæ…§åˆ†é…åˆ°ä¸åŒå¸³æˆ¶
3. Gemini æ¨¡å‹å•Ÿç”¨ `web_search`ï¼šæ¨¡å‹åœ¨éœ€è¦æ™‚æœƒæœå°‹ç¶²è·¯

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šå¤–æ›è¡Œç‚ºç¬¦åˆä½ çš„é…ç½®é æœŸã€‚

---

## é…ç½®é¸é …è©³è§£

### æ¨¡å‹è¡Œç‚º

é€™äº›é¸é …å½±éŸ¿æ¨¡å‹çš„æ€è€ƒå’Œå›æ‡‰æ–¹å¼ã€‚

#### keep_thinking

| å€¼ | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `true` | - | ä¿ç•™ Claude æ€è€ƒå€å¡Šï¼Œè·¨è¼ªæ¬¡ä¿æŒé€£è²«æ€§ |
| `false` | âœ“ | å‰é›¢æ€è€ƒå€å¡Šï¼Œæ›´ç©©å®šï¼Œä¸Šä¸‹æ–‡æ›´å° |

::: warning æ³¨æ„
å•Ÿç”¨ `keep_thinking` å¯èƒ½å°è‡´æ¨¡å‹ç©©å®šæ€§ä¸‹é™å’Œç°½ç« éŒ¯èª¤ã€‚æ¨è–¦ä¿æŒ `false`ã€‚
:::

#### session_recovery

| å€¼ | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `true` | âœ“ | è‡ªå‹•æ¢å¾©å·¥å…·å‘¼å«ä¸­æ–·çš„å·¥ä½œéšæ®µ |
| `false` | - | é‡åˆ°éŒ¯èª¤æ™‚ä¸è‡ªå‹•æ¢å¾© |

#### auto_resume

| å€¼ | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `true` | - | æ¢å¾©å¾Œè‡ªå‹•å‚³é€ "continue" |
| `false` | âœ“ | æ¢å¾©å¾Œåªé¡¯ç¤ºæç¤ºï¼Œæ‰‹å‹•ç¹¼çºŒ |

#### resume_text

è‡ªè¨‚æ¢å¾©æ™‚å‚³é€çš„æ–‡å­—ã€‚é è¨­ç‚º `"continue"`ï¼Œä½ å¯ä»¥æ”¹ç‚ºä»»ä½•æ–‡å­—ã€‚

#### web_search

| é¸é … | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `default_mode` | `"off"` | `"auto"` æˆ– `"off"` |
| `grounding_threshold` | `0.3` | æœå°‹é–¾å€¼ï¼ˆ0=ç¸½æ˜¯æœå°‹ï¼Œ1=å¾ä¸æœå°‹ï¼‰ |

::: info
`grounding_threshold` åƒ…åœ¨ `default_mode: "auto"` æ™‚ç”Ÿæ•ˆã€‚å€¼è¶Šå¤§ï¼Œæ¨¡å‹æœå°‹è¶Šä¿å®ˆã€‚
:::

---

### å¸³æˆ¶è¼ªæ›

é€™äº›é¸é …ç®¡ç†å¤šå¸³æˆ¶çš„è«‹æ±‚åˆ†é…ã€‚

#### account_selection_strategy

| ç­–ç•¥ | é è¨­å€¼ | é©ç”¨å ´æ™¯ |
| --- | --- | --- |
| `sticky` | - | å–®å¸³æˆ¶ï¼Œä¿ç•™ prompt cache |
| `round-robin` | - | 4+ å¸³æˆ¶ï¼Œæœ€å¤§åŒ–ååé‡ |
| `hybrid` | âœ“ | 2-3 å¸³æˆ¶ï¼Œæ™ºæ…§è¼ªæ› |

::: tip
ä¸åŒå¸³æˆ¶æ•¸çš„æ¨è–¦ç­–ç•¥ï¼š
- 1 å€‹å¸³æˆ¶ â†’ `sticky`
- 2-3 å€‹å¸³æˆ¶ â†’ `hybrid`
- 4+ å€‹å¸³æˆ¶ â†’ `round-robin`
- ä¸¦è¡Œä»£ç† â†’ `round-robin` + `pid_offset_enabled: true`
:::

#### switch_on_first_rate_limit

| å€¼ | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `true` | âœ“ | ç¬¬ä¸€æ¬¡é‡åˆ° 429 ç«‹å³åˆ‡æ›å¸³æˆ¶ |
| `false` | - | å…ˆé‡è©¦ç•¶å‰å¸³æˆ¶ï¼Œç¬¬äºŒæ¬¡ 429 æ‰åˆ‡æ› |

#### pid_offset_enabled

| å€¼ | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `true` | - | ä¸åŒå·¥ä½œéšæ®µï¼ˆPIDï¼‰ä½¿ç”¨ä¸åŒèµ·å§‹å¸³æˆ¶ |
| `false` | âœ“ | æ‰€æœ‰å·¥ä½œéšæ®µå¾åŒä¸€å¸³æˆ¶é–‹å§‹ |

::: tip
å–®å·¥ä½œéšæ®µä½¿ç”¨ä¿æŒ `false`ï¼Œä¿ç•™ Anthropic prompt cacheã€‚å¤šå·¥ä½œéšæ®µä¸¦è¡Œå»ºè­°å•Ÿç”¨ `true`ã€‚
:::

#### quota_fallback

| å€¼ | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `true` | - | Gemini æ¨¡å‹é…é¡æ±  fallback |
| `false` | âœ“ | ä¸å•Ÿç”¨ fallback |

::: info
åƒ…é©ç”¨æ–¼ Gemini æ¨¡å‹ã€‚ç•¶ä¸»é…é¡æ± è€—ç›¡æ™‚ï¼Œå˜—è©¦åŒä¸€å¸³æˆ¶çš„å‚™ç”¨é…é¡æ± ã€‚
:::

---

### æ‡‰ç”¨è¡Œç‚º

é€™äº›é¸é …æ§åˆ¶å¤–æ›æœ¬èº«çš„è¡Œç‚ºã€‚

#### quiet_mode

| å€¼ | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `true` | - | éœé»˜å¤§å¤šæ•¸ toast é€šçŸ¥ï¼ˆæ¢å¾©é€šçŸ¥é™¤å¤–ï¼‰ |
| `false` | âœ“ | é¡¯ç¤ºæ‰€æœ‰é€šçŸ¥ |

#### debug

| å€¼ | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `true` | - | å•Ÿç”¨é™¤éŒ¯æ—¥èªŒ |
| `false` | âœ“ | ä¸è¨˜éŒ„é™¤éŒ¯æ—¥èªŒ |

::: tip
è‡¨æ™‚å•Ÿç”¨é™¤éŒ¯æ—¥èªŒç„¡éœ€ä¿®æ”¹é…ç½®æª”æ¡ˆï¼Œä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼š
```bash
OPENCODE_ANTIGRAVITY_DEBUG=1 opencode   # åŸºç¤æ—¥èªŒ
OPENCODE_ANTIGRAVITY_DEBUG=2 opencode   # è©³ç´°æ—¥èªŒ
```
:::

#### log_dir

è‡ªè¨‚é™¤éŒ¯æ—¥èªŒç›®éŒ„ã€‚é è¨­ç‚º `~/.config/opencode/antigravity-logs/`ã€‚

#### auto_update

| å€¼ | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `true` | âœ“ | è‡ªå‹•æª¢æŸ¥ä¸¦æ›´æ–°å¤–æ› |
| `false` | - | ä¸è‡ªå‹•æ›´æ–° |

---

### é€²éšè¨­å®š

é€™äº›é¸é …ç”¨æ–¼é‚Šç·£å ´æ™¯ï¼Œå¤§å¤šæ•¸ä½¿ç”¨è€…ä¸éœ€è¦ä¿®æ”¹ã€‚

<details>
<summary><strong>å±•é–‹æª¢è¦–é€²éšè¨­å®š</strong></summary>

#### éŒ¯èª¤æ¢å¾©

| é¸é … | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `empty_response_max_attempts` | `4` | ç©ºå›æ‡‰é‡è©¦æ¬¡æ•¸ |
| `empty_response_retry_delay_ms` | `2000` | é‡è©¦é–“éš”ï¼ˆæ¯«ç§’ï¼‰ |
| `tool_id_recovery` | `true` | ä¿®å¾©å·¥å…· ID ä¸åŒ¹é… |
| `claude_tool_hardening` | `true` | é˜²æ­¢å·¥å…·åƒæ•¸å¹»è¦º |
| `max_rate_limit_wait_seconds` | `300` | é™é€Ÿæœ€å¤§ç­‰å¾…æ™‚é–“ï¼ˆ0=ç„¡é™ï¼‰ |

#### æ¬Šæ–ç®¡ç†

| é¸é … | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `proactive_token_refresh` | `true` | éæœŸå‰ä¸»å‹•é‡æ–°æ•´ç†æ¬Šæ– |
| `proactive_refresh_buffer_seconds` | `1800` | æå‰ 30 åˆ†é˜é‡æ–°æ•´ç† |
| `proactive_refresh_check_interval_seconds` | `300` | é‡æ–°æ•´ç†æª¢æŸ¥é–“éš”ï¼ˆç§’ï¼‰ |

#### ç°½ç« å¿«å–ï¼ˆ`keep_thinking: true` æ™‚ç”Ÿæ•ˆï¼‰

| é¸é … | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `signature_cache.enabled` | `true` | å•Ÿç”¨ç£ç¢Ÿå¿«å– |
| `signature_cache.memory_ttl_seconds` | `3600` | è¨˜æ†¶é«”å¿«å– TTLï¼ˆ1 å°æ™‚ï¼‰ |
| `signature_cache.disk_ttl_seconds` | `172800` | ç£ç¢Ÿå¿«å– TTLï¼ˆ48 å°æ™‚ï¼‰ |
| `signature_cache.write_interval_seconds` | `60` | èƒŒæ™¯å¯«å…¥é–“éš”ï¼ˆç§’ï¼‰ |

#### å¥åº·è©•åˆ†ï¼ˆ`hybrid` ç­–ç•¥ä½¿ç”¨ï¼‰

| é¸é … | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `health_score.initial` | `70` | åˆå§‹å¥åº·åˆ† |
| `health_score.success_reward` | `1` | æˆåŠŸçå‹µåˆ†æ•¸ |
| `health_score.rate_limit_penalty` | `-10` | é™é€Ÿæ‡²ç½°åˆ†æ•¸ |
| `health_score.failure_penalty` | `-20` | å¤±æ•—æ‡²ç½°åˆ†æ•¸ |
| `health_score.recovery_rate_per_hour` | `2` | æ¯å°æ™‚æ¢å¾©åˆ†æ•¸ |
| `health_score.min_usable` | `50` | å¯ç”¨å¸³æˆ¶æœ€ä½åˆ†æ•¸ |
| `health_score.max_score` | `100` | å¥åº·åˆ†ä¸Šé™ |

#### Token Bucketï¼ˆ`hybrid` ç­–ç•¥ä½¿ç”¨ï¼‰

| é¸é … | é è¨­å€¼ | èªªæ˜ |
| --- | --- | --- |
| `token_bucket.max_tokens` | `50` | æ¡¶æœ€å¤§å®¹é‡ |
| `token_bucket.regeneration_rate_per_minute` | `6` | æ¯åˆ†é˜æ¢å¾©é€Ÿåº¦ |
| `token_bucket.initial_tokens` | `50` | åˆå§‹æ¬Šæ–æ•¸ |

</details>

---

## æ¨è–¦é…ç½®æ–¹æ¡ˆ

### å–®å¸³æˆ¶é…ç½®

é©åˆï¼šåªæœ‰ä¸€å€‹ Google å¸³æˆ¶çš„ä½¿ç”¨è€…

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "sticky",
  "web_search": {
    "default_mode": "auto"
  }
}
```

**é…ç½®èªªæ˜**ï¼š
- `sticky`ï¼šä¸è¼ªæ›ï¼Œä¿ç•™ Anthropic prompt cache
- `web_search: auto`ï¼šGemini å¯æ ¹æ“šéœ€è¦æœå°‹

### 2-3 å¸³æˆ¶é…ç½®

é©åˆï¼šå°åœ˜éšŠæˆ–éœ€è¦ä¸€å®šå½ˆæ€§çš„ä½¿ç”¨è€…

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "hybrid",
  "web_search": {
    "default_mode": "auto"
  }
}
```

**é…ç½®èªªæ˜**ï¼š
- `hybrid`ï¼šæ™ºæ…§è¼ªæ›ï¼Œå¥åº·è©•åˆ†é¸æ“‡æœ€ä½³å¸³æˆ¶
- `web_search: auto`ï¼šGemini å¯æ ¹æ“šéœ€è¦æœå°‹

### å¤šå¸³æˆ¶ + ä¸¦è¡Œä»£ç†é…ç½®

é©åˆï¼šåŸ·è¡Œå¤šå€‹ä¸¦è¡Œä»£ç†çš„ä½¿ç”¨è€…

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "round-robin",
  "switch_on_first_rate_limit": true,
  "pid_offset_enabled": true,
  "web_search": {
    "default_mode": "auto"
  }
}
```

**é…ç½®èªªæ˜**ï¼š
- `round-robin`ï¼šæ¯æ¬¡è«‹æ±‚è¼ªæ›å¸³æˆ¶
- `switch_on_first_rate_limit: true`ï¼šç¬¬ä¸€æ¬¡ 429 ç«‹å³åˆ‡æ›
- `pid_offset_enabled: true`ï¼šä¸åŒå·¥ä½œéšæ®µä½¿ç”¨ä¸åŒèµ·å§‹å¸³æˆ¶
- `web_search: auto`ï¼šGemini å¯æ ¹æ“šéœ€è¦æœå°‹

---

## è¸©å‘æé†’

### âŒ éŒ¯èª¤ï¼šä¿®æ”¹é…ç½®å¾Œæ²’æœ‰ç”Ÿæ•ˆ

**åŸå› **ï¼šOpenCode å¯èƒ½æ²’æœ‰é‡æ–°è¼‰å…¥é…ç½®æª”æ¡ˆã€‚

**è§£æ±ºæ–¹æ³•**ï¼šé‡æ–°å•Ÿå‹• OpenCode æˆ–æª¢æŸ¥ JSON èªæ³•æ˜¯å¦æ­£ç¢ºã€‚

### âŒ éŒ¯èª¤ï¼šé…ç½®æª”æ¡ˆ JSON æ ¼å¼éŒ¯èª¤

**åŸå› **ï¼šJSON èªæ³•éŒ¯èª¤ï¼ˆç¼ºå°‘é€—è™Ÿã€å¤šé¤˜çš„é€—è™Ÿã€è¨»è§£ç­‰ï¼‰ã€‚

**è§£æ±ºæ–¹æ³•**ï¼šä½¿ç”¨ JSON é©—è­‰å·¥å…·æª¢æŸ¥ï¼Œæˆ–æ–°å¢ `$schema` æ¬„ä½å•Ÿç”¨ IDE æ™ºæ…§æç¤ºã€‚

### âŒ éŒ¯èª¤ï¼šç’°å¢ƒè®Šæ•¸æ²’æœ‰ç”Ÿæ•ˆ

**åŸå› **ï¼šç’°å¢ƒè®Šæ•¸åæ‹¼å¯«éŒ¯èª¤æˆ–æ²’æœ‰é‡æ–°å•Ÿå‹• OpenCodeã€‚

**è§£æ±ºæ–¹æ³•**ï¼šç¢ºèªè®Šæ•¸åç‚º `OPENCODE_ANTIGRAVITY_*`ï¼ˆå…¨å¤§å¯«ï¼Œå‰ç¶´æ­£ç¢ºï¼‰ï¼Œé‡æ–°å•Ÿå‹• OpenCodeã€‚

### âŒ éŒ¯èª¤ï¼šå•Ÿç”¨ `keep_thinking: true` å¾Œé »ç¹å‡ºéŒ¯

**åŸå› **ï¼šæ€è€ƒå€å¡Šç°½ç« ä¸åŒ¹é…ã€‚

**è§£æ±ºæ–¹æ³•**ï¼šä¿æŒ `keep_thinking: false`ï¼ˆé è¨­å€¼ï¼‰ï¼Œæˆ–èª¿æ•´ `signature_cache` é…ç½®ã€‚

---

## æœ¬èª²å°çµ

é…ç½®æª”æ¡ˆä½ç½®å„ªå…ˆé †åºï¼šç’°å¢ƒè®Šæ•¸ > å°ˆæ¡ˆç´š > ä½¿ç”¨è€…ç´šã€‚

æ ¸å¿ƒé…ç½®é …ï¼š
- æ¨¡å‹è¡Œç‚ºï¼š`keep_thinking`ã€`session_recovery`ã€`web_search`
- å¸³æˆ¶è¼ªæ›ï¼š`account_selection_strategy`ã€`pid_offset_enabled`
- æ‡‰ç”¨è¡Œç‚ºï¼š`debug`ã€`quiet_mode`ã€`auto_update`

ä¸åŒå ´æ™¯æ¨è–¦é…ç½®ï¼š
- å–®å¸³æˆ¶ï¼š`sticky`
- 2-3 å¸³æˆ¶ï¼š`hybrid`
- 4+ å¸³æˆ¶ï¼š`round-robin`
- ä¸¦è¡Œä»£ç†ï¼š`round-robin` + `pid_offset_enabled: true`

---

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[é™¤éŒ¯æ—¥èªŒ](../debug-logging/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - å¦‚ä½•å•Ÿç”¨é™¤éŒ¯æ—¥èªŒ
> - å¦‚ä½•è§£è®€æ—¥èªŒå…§å®¹
> - å¦‚ä½•æ’æŸ¥å¸¸è¦‹å•é¡Œ

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æª¢è¦–åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-23

| åŠŸèƒ½ | æª”æ¡ˆè·¯å¾‘ | è¡Œè™Ÿ |
| --- | --- | --- |
| é…ç½® Schema å®šç¾© | [`src/plugin/config/schema.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/schema.ts) | 12-323 |
| é è¨­é…ç½®å€¼ | [`src/plugin/config/schema.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/schema.ts) | 325-373 |
| é…ç½®è¼‰å…¥é‚è¼¯ | [`src/plugin/config/loader.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/loader.ts) | 1-100 |

**é—œéµå¸¸æ•¸**ï¼š
- `DEFAULT_CONFIG`: æ‰€æœ‰é…ç½®é …çš„é è¨­å€¼

**é—œéµé¡å‹**ï¼š
- `AntigravityConfig`: é…ç½®ç‰©ä»¶é¡å‹
- `AccountSelectionStrategy`: å¸³æˆ¶é¸æ“‡ç­–ç•¥é¡å‹
- `SignatureCacheConfig`: ç°½ç« å¿«å–é…ç½®é¡å‹

</details>
