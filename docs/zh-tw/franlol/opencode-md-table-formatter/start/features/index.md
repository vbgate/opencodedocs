---
title: "åŠŸèƒ½å…¨è¦½ï¼š8 å¤§æ ¸å¿ƒåŠŸèƒ½ | opencode-md-table-formatter"
sidebarTitle: "8 å¤§åŠŸèƒ½ä¸€è¦½"
subtitle: "åŠŸèƒ½å…¨è¦½ï¼š8 å¤§æ ¸å¿ƒåŠŸèƒ½"
description: "å­¸ç¿’ opencode-md-table-formatter å¤–æ›çš„ 8 å¤§æ ¸å¿ƒåŠŸèƒ½ã€‚æŒæ¡è‡ªå‹•è¡¨æ ¼æ ¼å¼åŒ–ã€éš±è—æ¨¡å¼ç›¸å®¹å’Œå°é½Šæ”¯æ´ï¼Œå¿«é€Ÿè™•ç† Emoji å’Œ Unicodeã€‚"
tags:
  - "è‡ªå‹•æ ¼å¼åŒ–"
  - "éš±è—æ¨¡å¼"
  - "å°é½Šæ”¯æ´"
  - "ç¨‹å¼ç¢¼ä¿è­·"
prerequisite:
  - "start-getting-started"
order: 20
---

# åŠŸèƒ½å…¨è¦½ï¼šè‡ªå‹•æ ¼å¼åŒ–çš„é­”æ³•

::: info å­¸å®Œä½ èƒ½åšä»€éº¼
- äº†è§£å¤–æ›çš„ 8 å¤§æ ¸å¿ƒåŠŸèƒ½
- çŸ¥é“å“ªäº›å ´æ™¯é©åˆç”¨é€™å€‹å¤–æ›
- æ˜ç™½å¤–æ›çš„é‚Šç•Œåœ¨å“ªè£¡ï¼ˆä¸èƒ½åšä»€éº¼ï¼‰
:::

## ä½ ç¾åœ¨çš„å›°å¢ƒ

::: info å¤–æ›è³‡è¨Š
æœ¬å¤–æ›å…¨åç‚º **@franlol/opencode-md-table-formatter**ï¼Œä»¥ä¸‹ç°¡ç¨±"è¡¨æ ¼æ ¼å¼åŒ–å¤–æ›"ã€‚
:::

AI ç”Ÿæˆçš„ Markdown è¡¨æ ¼ç¶“å¸¸æ˜¯é€™æ¨£çš„ï¼š

```markdown
| åç¨± | æè¿° | ç‹€æ…‹ |
|--- | --- | ---|
| **ä½¿ç”¨è€…ç®¡ç†** | ç®¡ç†ç³»çµ±ä½¿ç”¨è€… | âœ… å®Œæˆ |
| API | ä»‹é¢æ–‡ä»¶ | ğŸš§ é€²è¡Œä¸­ |
```

åˆ—å¯¬åƒå·®ä¸é½Šï¼Œçœ‹è‘—é›£å—ã€‚æ‰‹å‹•èª¿æ•´ï¼Ÿæ¯æ¬¡ AI ç”Ÿæˆæ–°è¡¨æ ¼éƒ½è¦èª¿ä¸€éï¼Œå¤ªç´¯äº†ã€‚

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

- AI ç”Ÿæˆäº† Markdown è¡¨æ ¼ï¼Œä½ æƒ³è®“å®ƒæ›´æ•´é½Š
- ä½ é–‹å•Ÿäº† OpenCode çš„éš±è—æ¨¡å¼ï¼ˆConcealment Modeï¼‰ï¼Œè¡¨æ ¼å°é½Šç¸½æ˜¯å‡ºå•é¡Œ
- ä½ æ‡¶å¾—æ‰‹å‹•èª¿æ•´è¡¨æ ¼åˆ—å¯¬

## æ ¸å¿ƒæ€è·¯

é€™å€‹å¤–æ›çš„å·¥ä½œåŸç†å¾ˆç°¡å–®ï¼š

```
AI ç”Ÿæˆæ–‡å­— â†’ å¤–æ›æª¢æ¸¬è¡¨æ ¼ â†’ é©—è­‰çµæ§‹ â†’ æ ¼å¼åŒ– â†’ è¿”å›ç¾åŒ–å¾Œçš„æ–‡å­—
```

å®ƒæ›è¼‰åœ¨ OpenCode çš„ `experimental.text.complete` é‰¤å­ä¸Šï¼ŒAI æ¯æ¬¡ç”Ÿæˆå®Œæ–‡å­—ï¼Œå¤–æ›å°±è‡ªå‹•è™•ç†ã€‚ä½ ä¸éœ€è¦æ‰‹å‹•è§¸ç™¼ï¼Œå…¨ç¨‹ç„¡æ„Ÿã€‚

## 8 å¤§æ ¸å¿ƒåŠŸèƒ½

### 1. è‡ªå‹•è¡¨æ ¼æ ¼å¼åŒ–

å¤–æ›æœƒè‡ªå‹•æª¢æ¸¬ AI ç”Ÿæˆæ–‡å­—ä¸­çš„ Markdown è¡¨æ ¼ï¼Œçµ±ä¸€åˆ—å¯¬ï¼Œè®“è¡¨æ ¼æ•´é½Šç¾è§€ã€‚

**æ ¼å¼åŒ–å‰**ï¼š

```markdown
| åç¨± | æè¿° | ç‹€æ…‹ |
|--- | --- | ---|
| **ä½¿ç”¨è€…ç®¡ç†** | ç®¡ç†ç³»çµ±ä½¿ç”¨è€… | âœ… å®Œæˆ |
| API | ä»‹é¢æ–‡ä»¶ | ğŸš§ é€²è¡Œä¸­ |
```

**æ ¼å¼åŒ–å¾Œ**ï¼š

```markdown
| åç¨±         | æè¿°         | ç‹€æ…‹       |
|--- | --- | ---|
| **ä½¿ç”¨è€…ç®¡ç†** | ç®¡ç†ç³»çµ±ä½¿ç”¨è€… | âœ… å®Œæˆ    |
| API          | ä»‹é¢æ–‡ä»¶     | ğŸš§ é€²è¡Œä¸­  |
```

::: tip è§¸ç™¼æ¢ä»¶
å¤–æ›æ›è¼‰åœ¨ `experimental.text.complete` é‰¤å­ä¸Šï¼ŒAI ç”Ÿæˆæ–‡å­—å®Œæˆå¾Œè‡ªå‹•è§¸ç™¼ï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œã€‚
:::

### 2. éš±è—æ¨¡å¼ç›¸å®¹

OpenCode é è¨­é–‹å•Ÿéš±è—æ¨¡å¼ï¼ˆConcealment Modeï¼‰ï¼Œæœƒéš±è— Markdown ç¬¦è™Ÿï¼ˆå¦‚ `**`ã€`*`ã€`~~`ï¼‰ã€‚

æ™®é€šçš„è¡¨æ ¼æ ¼å¼åŒ–å·¥å…·ä¸è€ƒæ…®é€™ä¸€é»ï¼Œè¨ˆç®—å¯¬åº¦æ™‚æœƒæŠŠ `**` ä¹Ÿç®—é€²å»ï¼Œå°è‡´å°é½ŠéŒ¯ä½ã€‚

é€™å€‹å¤–æ›å°ˆé–€ç‚ºéš±è—æ¨¡å¼æœ€ä½³åŒ–ï¼š

- è¨ˆç®—å¯¬åº¦æ™‚ï¼Œå‰é›¢ `**ç²—é«”**`ã€`*æ–œé«”*`ã€`~~åˆªé™¤ç·š~~` ç­‰ç¬¦è™Ÿ
- è¼¸å‡ºæ™‚ä¿ç•™åŸå§‹ Markdown èªæ³•
- æœ€çµ‚æ•ˆæœï¼šéš±è—æ¨¡å¼ä¸‹è¡¨æ ¼å®Œç¾å°é½Š

::: details æŠ€è¡“ç´°ç¯€ï¼šå¯¬åº¦è¨ˆç®—é‚è¼¯
```typescript
// å‰é›¢ Markdown ç¬¦è™Ÿï¼ˆç”¨æ–¼å¯¬åº¦è¨ˆç®—ï¼‰
visualText = visualText
  .replace(/\*\*\*(.+?)\*\*\*/g, "$1") // ***ç²—æ–œé«”*** â†’ æ–‡å­—
  .replace(/\*\*(.+?)\*\*/g, "$1")     // **ç²—é«”** â†’ ç²—é«”
  .replace(/\*(.+?)\*/g, "$1")         // *æ–œé«”* â†’ æ–œé«”
  .replace(/~~(.+?)~~/g, "$1")         // ~~åˆªé™¤ç·š~~ â†’ åˆªé™¤ç·š
```
åŸå§‹ç¢¼ä½ç½®ï¼š`index.ts:181-185`
:::

### 3. å°é½Šæ”¯æ´

æ”¯æ´ Markdown è¡¨æ ¼çš„ä¸‰ç¨®å°é½Šæ–¹å¼ï¼š

| èªæ³• | å°é½Šæ–¹å¼ | æ•ˆæœ |
|--- | --- | ---|
| `---` æˆ– `:---` | å·¦å°é½Š | æ–‡å­—é å·¦ï¼ˆå…©ç¨®èªæ³•æ•ˆæœç›¸åŒï¼‰|
| `:---:` | å±…ä¸­ | æ–‡å­—å±…ä¸­ |
| `---:` | å³å°é½Š | æ–‡å­—é å³ |

**ç¯„ä¾‹**ï¼š

```markdown
| å·¦å°é½Š | å±…ä¸­ | å³å°é½Š |
|--- | --- | ---|
| æ–‡å­— | æ–‡å­— | æ–‡å­— |
```

æ ¼å¼åŒ–å¾Œï¼Œæ¯åˆ—æœƒæŒ‰æŒ‡å®šæ–¹å¼å°é½Šï¼Œåˆ†éš”è¡Œæœƒæ ¹æ“šå°é½Šæ–¹å¼é‡æ–°ç”Ÿæˆã€‚

### 4. å·¢ç‹€ Markdown è™•ç†

è¡¨æ ¼å„²å­˜æ ¼è£¡å¯èƒ½æœ‰å·¢ç‹€çš„ Markdown èªæ³•ï¼Œæ¯”å¦‚ `***ç²—æ–œé«”***`ã€‚

å¤–æ›ä½¿ç”¨å¤šè¼ªæ­£å‰‡æ¼”ç®—æ³•ï¼Œå¾å¤–åˆ°å…§é€å±¤å‰é›¢ï¼š

```
***ç²—æ–œé«”*** â†’ **ç²—æ–œé«”** â†’ *ç²—æ–œé«”* â†’ ç²—æ–œé«”
```

é€™æ¨£å³ä½¿å·¢ç‹€å¤šå±¤ï¼Œå¯¬åº¦è¨ˆç®—ä¹Ÿæ˜¯æº–ç¢ºçš„ã€‚

### 5. ç¨‹å¼ç¢¼ä¿è­·

è¡Œå…§ç¨‹å¼ç¢¼ï¼ˆç”¨åå¼•è™ŸåŒ…è£¹ï¼‰è£¡çš„ Markdown ç¬¦è™Ÿæ‡‰è©²ä¿æŒåŸæ¨£ï¼Œä¸è¢«å‰é›¢ã€‚

æ¯”å¦‚ `` `**bold**` ``ï¼Œä½¿ç”¨è€…çœ‹åˆ°çš„å°±æ˜¯ `**bold**` é€™ 8 å€‹å­—å…ƒï¼Œè€Œä¸æ˜¯ `bold` é€™ 4 å€‹å­—å…ƒã€‚

å¤–æ›æœƒå…ˆæå–ç¨‹å¼ç¢¼å…§å®¹ï¼Œå‰é›¢å…¶ä»–éƒ¨åˆ†çš„ Markdown ç¬¦è™Ÿå¾Œï¼Œå†æŠŠç¨‹å¼ç¢¼å…§å®¹æ”¾å›å»ã€‚

::: details æŠ€è¡“ç´°ç¯€ï¼šç¨‹å¼ç¢¼ä¿è­·é‚è¼¯
```typescript
// ç¬¬ 1 æ­¥ï¼šæå–ä¸¦ä¿è­·è¡Œå…§ç¨‹å¼ç¢¼
const codeBlocks: string[] = []
let textWithPlaceholders = text.replace(/`(.+?)`/g, (match, content) => {
  codeBlocks.push(content)
  return `\x00CODE${codeBlocks.length - 1}\x00`
})

// ç¬¬ 2 æ­¥ï¼šå‰é›¢éç¨‹å¼ç¢¼éƒ¨åˆ†çš„ Markdown ç¬¦è™Ÿ
// ...

// ç¬¬ 3 æ­¥ï¼šæ¢å¾©è¡Œå…§ç¨‹å¼ç¢¼å…§å®¹
visualText = visualText.replace(/\x00CODE(\d+)\x00/g, (match, index) => {
  return codeBlocks[parseInt(index)]
})
```
åŸå§‹ç¢¼ä½ç½®ï¼š`index.ts:168-193`
:::

### 6. é‚Šç•Œæƒ…æ³è™•ç†

å¤–æ›èƒ½æ­£ç¢ºè™•ç†å„ç¨®é‚Šç•Œæƒ…æ³ï¼š

| å ´æ™¯ | è™•ç†æ–¹å¼ |
|--- | ---|
| Emoji è¡¨æƒ… | ä½¿ç”¨ `Bun.stringWidth` æ­£ç¢ºè¨ˆç®—é¡¯ç¤ºå¯¬åº¦ |
| Unicode å­—å…ƒ | ä¸­æ–‡ã€æ—¥æ–‡ç­‰å¯¬å­—å…ƒæ­£ç¢ºå°é½Š |
| ç©ºå„²å­˜æ ¼ | å¡«å……ç©ºæ ¼åˆ°æœ€å°å¯¬åº¦ï¼ˆ3 å­—å…ƒï¼‰ |
| è¶…é•·å…§å®¹ | æ­£å¸¸è™•ç†ï¼Œä¸æˆªæ–· |

### 7. éœé»˜æ“ä½œ

å¤–æ›åœ¨å¾Œå°éœé»˜åŸ·è¡Œï¼š

- **ç„¡æ—¥èªŒè¼¸å‡º**ï¼šä¸æœƒåœ¨æ§åˆ¶å°åˆ—å°ä»»ä½•è³‡è¨Š
- **éŒ¯èª¤ä¸ä¸­æ–·**ï¼šå³ä½¿æ ¼å¼åŒ–å¤±æ•—ï¼Œä¹Ÿä¸æœƒå½±éŸ¿ AI çš„æ­£å¸¸è¼¸å‡º

å¦‚æœæ ¼å¼åŒ–éç¨‹ä¸­å‡ºéŒ¯ï¼Œå¤–æ›æœƒä¿ç•™åŸæ–‡ï¼Œä¸¦åœ¨æœ«å°¾æ–°å¢ä¸€æ¢ HTML è¨»è§£ï¼š

```markdown
<!-- table formatting failed: [éŒ¯èª¤è³‡è¨Š] -->
```

### 8. é©—è­‰å›é¥‹

å¤–æ›æœƒé©—è­‰è¡¨æ ¼çµæ§‹æ˜¯å¦æœ‰æ•ˆã€‚ç„¡æ•ˆçš„è¡¨æ ¼ä¸æœƒè¢«æ ¼å¼åŒ–ï¼Œè€Œæ˜¯ä¿ç•™åŸæ¨£ï¼Œä¸¦æ–°å¢æç¤ºï¼š

```markdown
<!-- table not formatted: invalid structure -->
```

**æœ‰æ•ˆè¡¨æ ¼çš„è¦æ±‚**ï¼š

- è‡³å°‘ 2 è¡Œï¼ˆå«åˆ†éš”è¡Œï¼‰
- æ‰€æœ‰è¡Œçš„åˆ—æ•¸ä¸€è‡´
- å¿…é ˆæœ‰åˆ†éš”è¡Œï¼ˆæ ¼å¼ï¼š`|---|---|`ï¼‰

## å¤–æ›çš„é‚Šç•Œ

::: warning ä¸æ”¯æ´çš„å ´æ™¯
- **HTML è¡¨æ ¼**ï¼šåªè™•ç† Markdown ç®¡ç·šè¡¨æ ¼ï¼ˆ`| ... |`ï¼‰
- **å¤šè¡Œå„²å­˜æ ¼**ï¼šå« `<br>` æ¨™ç±¤çš„å„²å­˜æ ¼ä¸æ”¯æ´
- **ç„¡åˆ†éš”è¡Œè¡¨æ ¼**ï¼šå¿…é ˆæœ‰ `|---|---|` åˆ†éš”è¡Œ
- **ç„¡è¡¨é ­è¡¨æ ¼**ï¼šå¿…é ˆæœ‰è¡¨é ­è¡Œ
:::

## æª¢æŸ¥é»

å®Œæˆæœ¬èª²å¾Œï¼Œä½ æ‡‰è©²èƒ½å›ç­”ï¼š

- [ ] å¤–æ›æ˜¯å¦‚ä½•è‡ªå‹•è§¸ç™¼çš„ï¼Ÿï¼ˆç­”ï¼š`experimental.text.complete` é‰¤å­ï¼‰
- [ ] ç‚ºä»€éº¼éœ€è¦"éš±è—æ¨¡å¼ç›¸å®¹"ï¼Ÿï¼ˆç­”ï¼šéš±è—æ¨¡å¼æœƒéš±è— Markdown ç¬¦è™Ÿï¼Œå½±éŸ¿å¯¬åº¦è¨ˆç®—ï¼‰
- [ ] è¡Œå…§ç¨‹å¼ç¢¼è£¡çš„ Markdown ç¬¦è™Ÿæœƒè¢«å‰é›¢å—ï¼Ÿï¼ˆç­”ï¼šä¸æœƒï¼Œç¨‹å¼ç¢¼å…§çš„ Markdown ç¬¦è™Ÿæœƒè¢«å®Œæ•´ä¿ç•™ï¼‰
- [ ] ç„¡æ•ˆè¡¨æ ¼æœƒæ€éº¼è™•ç†ï¼Ÿï¼ˆç­”ï¼šä¿ç•™åŸæ¨£ï¼Œæ–°å¢éŒ¯èª¤è¨»è§£ï¼‰

## æœ¬èª²å°çµ

| åŠŸèƒ½ | èªªæ˜ |
|--- | ---|
| è‡ªå‹•æ ¼å¼åŒ– | AI ç”Ÿæˆå®Œæ–‡å­—è‡ªå‹•è§¸ç™¼ï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œ |
| éš±è—æ¨¡å¼ç›¸å®¹ | æ­£ç¢ºè¨ˆç®— Markdown ç¬¦è™Ÿéš±è—å¾Œçš„é¡¯ç¤ºå¯¬åº¦ |
| å°é½Šæ”¯æ´ | å·¦å°é½Šã€å±…ä¸­ã€å³å°é½Š |
| å·¢ç‹€ Markdown | å¤šè¼ªæ­£å‰‡å‰é›¢ï¼Œæ”¯æ´å·¢ç‹€èªæ³• |
| ç¨‹å¼ç¢¼ä¿è­· | è¡Œå…§ç¨‹å¼ç¢¼ä¸­çš„ç¬¦è™Ÿä¿æŒåŸæ¨£ |
| é‚Šç•Œæƒ…æ³ | Emojiã€Unicodeã€ç©ºå„²å­˜æ ¼ã€è¶…é•·å…§å®¹ |
| éœé»˜æ“ä½œ | ç„¡æ—¥ç„¡æ—¥èªŒï¼ŒéŒ¯èª¤ä¸ä¸­æ–· |
| é©—è­‰å›é¥‹ | ç„¡æ•ˆè¡¨æ ¼æ–°å¢éŒ¯èª¤è¨»è§£ |

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘æ·±å…¥ **[éš±è—æ¨¡å¼åŸç†](../../advanced/concealment-mode/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - OpenCode éš±è—æ¨¡å¼çš„å·¥ä½œåŸç†
> - å¤–æ›å¦‚ä½•æ­£ç¢ºè¨ˆç®—é¡¯ç¤ºå¯¬åº¦
> - `Bun.stringWidth` çš„ä½œç”¨

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æŸ¥çœ‹åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-26

| åŠŸèƒ½ | æª”æ¡ˆè·¯å¾‘ | è¡Œè™Ÿ |
|--- | --- | ---|
| å¤–æ›å…¥å£ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L9-L23) | 9-23 |
| è¡¨æ ¼æª¢æ¸¬ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L58-L61) | 58-61 |
| è¡¨æ ¼é©—è­‰ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L70-L88) | 70-88 |
| å¯¬åº¦è¨ˆç®—ï¼ˆéš±è—æ¨¡å¼ï¼‰ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L161-L196) | 161-196 |
| å°é½Šæ–¹å¼è§£æ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L141-L149) | 141-149 |
| ç¨‹å¼ç¢¼ä¿è­· | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L168-L173) | 168-173 |

**é—œéµå¸¸é‡**ï¼š
- `colWidths[col] = 3`ï¼šåˆ—æœ€å°å¯¬åº¦ç‚º 3 å­—å…ƒï¼ˆ`index.ts:115`ï¼‰

**é—œéµå‡½æ•¸**ï¼š
- `formatMarkdownTables()`ï¼šä¸»è™•ç†å‡½æ•¸ï¼Œæ ¼å¼åŒ–æ–‡å­—ä¸­çš„æ‰€æœ‰è¡¨æ ¼
- `getStringWidth()`ï¼šè¨ˆç®—å­—ä¸²é¡¯ç¤ºé¡¯ç¤ºå¯¬åº¦ï¼Œå‰é›¢ Markdown ç¬¦è™Ÿ
- `isValidTable()`ï¼šé©—è­‰è¡¨æ ¼çµæ§‹æ˜¯å¦æœ‰æ•ˆ

</details>
