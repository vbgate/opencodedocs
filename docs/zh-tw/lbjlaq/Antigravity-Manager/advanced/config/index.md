---
title: "é…ç½®ï¼šç†±æ›´æ–°èˆ‡é·ç§» | Antigravity-Manager"
subtitle: "é…ç½®ï¼šç†±æ›´æ–°èˆ‡é·ç§» | Antigravity-Manager"
sidebarTitle: "é…ç½®ä¸ç”Ÿæ•ˆæ€éº¼è¾¦"
description: "å­¸ç¿’é…ç½®ç³»çµ±çš„è½ç›¤ã€ç†±æ›´æ–°èˆ‡é·ç§»æ©Ÿåˆ¶ã€‚æŒæ¡æ¬„ä½é è¨­å€¼èˆ‡é‘‘æ¬Šé©—è­‰æ–¹æ³•ï¼Œé¿å…å¸¸è¦‹é™·é˜±ã€‚"
tags:
  - "é…ç½®"
  - "gui_config.json"
  - "AppConfig"
  - "ProxyConfig"
  - "ç†±æ›´æ–°"
prerequisite:
  - "start-first-run-data"
  - "start-proxy-and-first-client"
order: 1
---
# é…ç½®å…¨è§£ï¼šAppConfig/ProxyConfigã€è½ç›¤ä½ç½®èˆ‡ç†±æ›´æ–°èªç¾©

ä½ æ”¹äº† `auth_mode` ä½†å®¢æˆ¶ç«¯é‚„æ˜¯ 401ï¼›ä½ é–‹äº† `allow_lan_access`ï¼ŒåŒç¶²æ®µè¨­å‚™å»é€£ä¸ä¸Šï¼›ä½ æƒ³æŠŠé…ç½®é·åˆ°æ–°æ©Ÿå™¨ï¼Œå»ä¸çŸ¥é“è©²æ‹·å“ªäº›æª”æ¡ˆã€‚

é€™ç¯€èª²æŠŠ Antigravity Tools çš„é…ç½®ç³»çµ±ä¸€æ¬¡è¬›é€ï¼šé…ç½®å­˜åœ¨å“ªã€é è¨­å€¼æ˜¯ä»€éº¼ã€å“ªäº›èƒ½ç†±æ›´æ–°ã€å“ªäº›å¿…é ˆé‡å•Ÿåä»£ã€‚

## ä»€éº¼æ˜¯ AppConfig/ProxyConfigï¼Ÿ

**AppConfig/ProxyConfig**æ˜¯ Antigravity Tools çš„é…ç½®è³‡æ–™æ¨¡å‹ï¼šAppConfig ç®¡æ¡Œé¢ç«¯çš„é€šç”¨è¨­å®šï¼ˆèªè¨€ã€ä¸»é¡Œã€é ç†±ã€é…é¡ä¿è­·ç­‰ï¼‰ï¼ŒProxyConfig ç®¡æœ¬åœ°åä»£æœå‹™çš„é‹è¡Œåƒæ•¸ï¼ˆé€£æ¥åŸ ã€é‘‘æ¬Šã€æ¨¡å‹å°æ‡‰ã€ä¸Šæ¸¸ä»£ç†ç­‰ï¼‰ã€‚å®ƒå€‘æœ€çµ‚éƒ½åºåˆ—åŒ–åˆ°åŒä¸€å€‹ `gui_config.json` æª”æ¡ˆï¼Œåä»£å•Ÿå‹•æ™‚è®€å–å…¶ä¸­çš„ ProxyConfigã€‚

## å­¸å®Œä½ èƒ½åšä»€éº¼

- æ‰¾åˆ°é…ç½®æª”æ¡ˆ `gui_config.json` çš„çœŸå¯¦è½ç›¤ä½ç½®ï¼Œä¸¦èƒ½åšå‚™ä»½/é·ç§»
- è®€æ‡‚ AppConfig/ProxyConfig çš„æ ¸å¿ƒæ¬„ä½èˆ‡é è¨­å€¼ï¼ˆä»¥æºç¢¼ç‚ºæº–ï¼‰
- æ˜ç¢ºå“ªäº›é…ç½®å„²å­˜å¾Œæœƒç†±æ›´æ–°ï¼Œå“ªäº›å¿…é ˆé‡å•Ÿåä»£æ‰èƒ½ç”Ÿæ•ˆ
- çœ‹æ‡‚ä¸€æ¬¡ã€Œé…ç½®é·ç§»ã€ï¼ˆèˆŠæ¬„ä½è¢«è‡ªå‹•åˆä½µ/åˆªé™¤ï¼‰çš„ç™¼ç”Ÿæ¢ä»¶

## ä½ ç¾åœ¨çš„å›°å¢ƒ

- æ”¹äº†é…ç½®å»ã€Œä¸ç”Ÿæ•ˆã€ï¼Œä½ ä¸çŸ¥é“æ˜¯æ²’å„²å­˜ã€æ²’ç†±æ›´æ–°ï¼Œé‚„æ˜¯éœ€è¦é‡å•Ÿ
- ä½ åªæƒ³æŠŠã€Œåä»£é…ç½®ã€å¸¶åˆ°æ–°æ©Ÿå™¨ï¼Œä½†åˆæ“”å¿ƒæŠŠå¸³è™Ÿè³‡æ–™ä¸€èµ·å¸¶å‡ºå»
- å‡ç´šå¾Œå‡ºç¾èˆŠæ¬„ä½ï¼Œä½ æ“”å¿ƒé…ç½®æª”æ¡ˆæ ¼å¼ã€Œå£äº†ã€

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

- ä½ æº–å‚™æŠŠåä»£å¾ã€Œåƒ…æœ¬æ©Ÿã€åˆ‡åˆ°ã€Œå€åŸŸç¶²è·¯å¯å­˜å–ã€
- ä½ è¦æ”¹é‘‘æ¬Šç­–ç•¥ï¼ˆ`auth_mode`/`api_key`ï¼‰ï¼Œä¸¦æƒ³ç«‹åˆ»é©—è­‰ç”Ÿæ•ˆ
- ä½ è¦æ‰¹é‡ç¶­è­·æ¨¡å‹å°æ‡‰/ä¸Šæ¸¸ä»£ç†/z.ai é…ç½®

## ğŸ’ é–‹å§‹å‰çš„æº–å‚™

- ä½ å·²ç¶“çŸ¥é“è³‡æ–™ç›®éŒ„æ˜¯ä»€éº¼ï¼ˆè¦‹ [é¦–æ¬¡å•Ÿå‹•å¿…æ‡‚ï¼šè³‡æ–™ç›®éŒ„ã€æ—¥èªŒã€è¨—ç›¤èˆ‡è‡ªå‹•å•Ÿå‹•](../../start/first-run-data/)ï¼‰
- ä½ èƒ½å•Ÿå‹•ä¸€æ¬¡åä»£æœå‹™ï¼ˆè¦‹ [å•Ÿå‹•æœ¬åœ°åä»£ä¸¦æ¥å…¥ç¬¬ä¸€å€‹å®¢æˆ¶ç«¯](../../start/proxy-and-first-client/)ï¼‰

::: warning å…ˆèªªå€‹é‚Šç•Œ
æœ¬èª²æœƒæ•™ä½ è®€/å‚™ä»½/é·ç§» `gui_config.json`ï¼Œä½†ä¸å»ºè­°ä½ æŠŠå®ƒç•¶æˆã€Œé•·æœŸæ‰‹å¯«ç¶­è­·çš„é…ç½®æª”æ¡ˆã€ã€‚å› ç‚ºå¾Œç«¯å„²å­˜é…ç½®æ™‚æœƒæŒ‰ Rust çš„ `AppConfig` çµæ§‹é‡æ–°åºåˆ—åŒ–ï¼Œæ‰‹å‹•å¡é€²å»çš„æœªçŸ¥æ¬„ä½ï¼Œå¾ˆå¯èƒ½åœ¨ä¸‹ä¸€æ¬¡å„²å­˜æ™‚è¢«è‡ªå‹•ä¸Ÿæ‰ã€‚
:::

## æ ¸å¿ƒæ€è·¯

é…ç½®é€™ä»¶äº‹ï¼Œå…ˆè¨˜ä½ä¸‰å¥è©±ï¼š

1. AppConfig æ˜¯æŒä¹…åŒ–é…ç½®çš„æ ¹ç‰©ä»¶ï¼Œè½åœ¨ `gui_config.json`ã€‚
2. ProxyConfig æ˜¯ `AppConfig.proxy` çš„å­ç‰©ä»¶ï¼Œåä»£å•Ÿå‹•/ç†±æ›´æ–°éƒ½åœç¹å®ƒã€‚
3. ç†±æ›´æ–°æ˜¯ã€Œåªæ›´æ–°è¨˜æ†¶é«”ç‹€æ…‹ã€ï¼šèƒ½ç†±æ›´çš„ä¸ä»£è¡¨èƒ½æ”¹ç›£è½é€£æ¥åŸ /ç›£è½ä½å€ã€‚

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šå®šä½ `gui_config.json`ï¼ˆé…ç½®çš„å–®ä¸€çœŸç›¸æºï¼‰

**ç‚ºä»€éº¼**
ä½ å¾Œé¢æ‰€æœ‰çš„ã€Œå‚™ä»½/é·ç§»/æ’éšœã€ï¼Œéƒ½è¦ä»¥é€™å€‹æª”æ¡ˆç‚ºæº–ã€‚

å¾Œç«¯çš„è³‡æ–™ç›®éŒ„æ˜¯ä½ çš„ Home ç›®éŒ„ä¸‹çš„ `.antigravity_tools`ï¼ˆä¸å­˜åœ¨æœƒè‡ªå‹•å»ºç«‹ï¼‰ï¼Œé…ç½®æª”æ¡ˆåç¨±å›ºå®šç‚º `gui_config.json`ã€‚

::: code-group

```bash [macOS/Linux]
CONFIG_FILE="$HOME/.antigravity_tools/gui_config.json"
echo "$CONFIG_FILE"
ls -la "$CONFIG_FILE" || true
```

```powershell [Windows]
$configFile = Join-Path $HOME ".antigravity_tools\gui_config.json"
$configFile
Get-ChildItem -Force $configFile -ErrorAction SilentlyContinue
```

:::

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š
- å¦‚æœä½ é‚„æ²’å•Ÿå‹•éåä»£ï¼Œé€™å€‹æª”æ¡ˆå¯èƒ½ä¸å­˜åœ¨ï¼ˆå¾Œç«¯æœƒç›´æ¥ç”¨é è¨­é…ç½®ï¼‰ã€‚
- å•Ÿå‹•åä»£æœå‹™æˆ–å„²å­˜è¨­å®šæ™‚ï¼Œå®ƒæœƒè¢«è‡ªå‹•å»ºç«‹ä¸¦å¯«å…¥ JSONã€‚

### ç¬¬ 2 æ­¥ï¼šå…ˆå‚™ä»½ä¸€ä»½ï¼ˆé˜²æ‰‹æ»‘ + æ–¹ä¾¿å›æ»¾ï¼‰

**ç‚ºä»€éº¼**
é…ç½®è£¡å¯èƒ½åŒ…å« `proxy.api_key`ã€z.ai çš„ `api_key` ç­‰æ•æ„Ÿæ¬„ä½ã€‚ä½ æƒ³é·ç§»/æ¯”å°æ™‚ï¼Œå‚™ä»½æ¯”ã€Œè¨˜æ†¶ã€å¯é ã€‚

::: code-group

```bash [macOS/Linux]
mkdir -p "$HOME/antigravity-config-backup"
cp "$HOME/.antigravity_tools/gui_config.json" "$HOME/antigravity-config-backup/gui_config.$(date +%Y%m%d%H%M%S).json"
```

```powershell [Windows]
$backupDir = Join-Path $HOME "antigravity-config-backup"
New-Item -ItemType Directory -Force -Path $backupDir | Out-Null
$ts = Get-Date -Format "yyyyMMddHHmmss"
Copy-Item (Join-Path $HOME ".antigravity_tools\gui_config.json") (Join-Path $backupDir "gui_config.$ts.json")
```

:::

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šå‚™ä»½ç›®éŒ„è£¡å‡ºç¾äº†ä¸€å€‹å¸¶æ™‚é–“æˆ³è¨˜çš„ JSON æª”æ¡ˆã€‚

### ç¬¬ 3 æ­¥ï¼šææ¸…é è¨­å€¼ï¼ˆåˆ¥æ†‘æ„Ÿè¦ºçŒœï¼‰

**ç‚ºä»€éº¼**
å¾ˆå¤šã€Œæ€éº¼éƒ½é…ä¸å°ã€çš„å•é¡Œï¼Œå…¶å¯¦æ˜¯ä½ å°é è¨­å€¼çš„é æœŸä¸å°ã€‚

ä¸‹é¢é€™äº›é è¨­å€¼ä¾†è‡ªå¾Œç«¯ `AppConfig::new()` å’Œ `ProxyConfig::default()`ï¼š

| é…ç½®å¡Š | æ¬„ä½ | é è¨­å€¼ï¼ˆæºç¢¼ï¼‰ | ä½ éœ€è¦è¨˜ä½çš„é» |
| --- | --- | --- | --- |
| AppConfig | `language` | `"zh"` | é è¨­ä¸­æ–‡ |
| AppConfig | `theme` | `"system"` | è·Ÿéš¨ç³»çµ± |
| AppConfig | `auto_refresh` | `true` | é è¨­æœƒè‡ªå‹•é‡æ–°æ•´ç†é…é¡ |
| AppConfig | `refresh_interval` | `15` | å–®ä½ï¼šåˆ†é˜ |
| ProxyConfig | `enabled` | `false` | é è¨­ä¸å•Ÿå‹•åä»£ |
| ProxyConfig | `allow_lan_access` | `false` | é è¨­åªç¶å®šæœ¬æ©Ÿï¼ˆéš±ç§å„ªå…ˆï¼‰ |
| ProxyConfig | `auth_mode` | `"off"` | é è¨­ä¸é‘‘æ¬Šï¼ˆåƒ…æœ¬æ©Ÿå ´æ™¯ï¼‰ |
| ProxyConfig | `port` | `"8045"` | é€™æ˜¯ä½ æœ€å¸¸æ”¹çš„æ¬„ä½ |
| ProxyConfig | `api_key` | `"sk-<uuid>"` | é è¨­æœƒç”Ÿæˆéš¨æ©Ÿ key |
| ProxyConfig | `request_timeout` | `"120"` | å–®ä½ï¼šç§’ï¼ˆæ³¨æ„ï¼šåä»£å…§éƒ¨ç›®å‰ä¸ä¸€å®šç”¨åˆ°å®ƒï¼‰ |
| ProxyConfig | `enable_logging` | `true` | é è¨­é–‹å•Ÿç›£æ§/çµ±è¨ˆä¾è³´çš„æ—¥èªŒæ¡é›† |
| StickySessionConfig | `mode` | `"Balance"` | èª¿åº¦ç­–ç•¥é è¨­å¹³è¡¡ |
| StickySessionConfig | `max_wait_seconds` | `"60"` | åƒ… CacheFirst æ¨¡å¼æ‰æœ‰æ„ç¾© |

::: tip æƒ³çœ‹å®Œæ•´æ¬„ä½æ€éº¼è¾¦ï¼Ÿ
ä½ å¯ä»¥ç›´æ¥æ‰“é–‹ `gui_config.json` å°ç…§æºç¢¼ï¼š`src-tauri/src/models/config.rs`ï¼ˆAppConfigï¼‰å’Œ `src-tauri/src/proxy/config.rs`ï¼ˆProxyConfigï¼‰ã€‚æœ¬èª²æœ«å°¾çš„ã€Œæºç¢¼åƒè€ƒã€çµ¦äº†å¯é»æ“Šçš„è¡Œè™Ÿé€£çµã€‚
:::

### ç¬¬ 4 æ­¥ï¼šæ”¹ä¸€å€‹ã€Œç¢ºå®šæœƒç†±æ›´æ–°ã€çš„é…ç½®ä¸¦ç«‹åˆ»é©—è­‰ï¼ˆä»¥é‘‘æ¬Šç‚ºä¾‹ï¼‰

**ç‚ºä»€éº¼**
ä½ éœ€è¦ä¸€å€‹ã€Œæ”¹äº†ç«‹åˆ»èƒ½é©—è­‰ã€çš„é–‰ç’°ï¼Œé¿å…åœ¨ UI è£¡ç›²æ”¹ã€‚

ç•¶åä»£æ­£åœ¨é‹è¡Œæ™‚ï¼Œå¾Œç«¯ `save_config` æœƒæŠŠé€™äº›å…§å®¹ç†±æ›´æ–°åˆ°è¨˜æ†¶é«”ï¼š

- `proxy.custom_mapping`
- `proxy.upstream_proxy`
- `proxy.auth_mode` / `proxy.api_key`ï¼ˆå®‰å…¨ç­–ç•¥ï¼‰
- `proxy.zai`
- `proxy.experimental`

é€™è£¡æˆ‘å€‘ç”¨ `auth_mode` åšä¾‹å­ï¼š

1. æ‰“é–‹ `API Proxy` é é¢ï¼Œç¢ºä¿åä»£æœå‹™è™•æ–¼ Runningã€‚
2. æŠŠ `auth_mode` è¨­ç‚º `all_except_health`ï¼Œä¸¦ç¢ºèªä½ çŸ¥é“ç•¶å‰ `api_key`ã€‚
3. ç”¨ä¸‹é¢çš„è«‹æ±‚é©—è­‰ã€Œå¥åº·æª¢æŸ¥æ”¾è¡Œã€å…¶ä»–ä»‹é¢æ””æˆªã€ã€‚

::: code-group

```bash [macOS/Linux]
#ä¸å¸¶ key è«‹æ±‚ /healthzï¼šæ‡‰æˆåŠŸ
curl -sS "http://127.0.0.1:8045/healthz" && echo

#ä¸å¸¶ key è«‹æ±‚ /v1/modelsï¼šæ‡‰ 401
curl -sS -i "http://127.0.0.1:8045/v1/models"

#å¸¶ key å†è«‹æ±‚ /v1/modelsï¼šæ‡‰æˆåŠŸ
curl -sS -H "Authorization: Bearer <proxy.api_key>" "http://127.0.0.1:8045/v1/models"
```

```powershell [Windows]
#ä¸å¸¶ key è«‹æ±‚ /healthzï¼šæ‡‰æˆåŠŸ
Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8045/healthz" | Select-Object -ExpandProperty StatusCode

#ä¸å¸¶ key è«‹æ±‚ /v1/modelsï¼šæ‡‰ 401
try { Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8045/v1/models" } catch { $_.Exception.Response.StatusCode.value__ }

#å¸¶ key å†è«‹æ±‚ /v1/modelsï¼šæ‡‰æˆåŠŸ
$headers = @{ Authorization = "Bearer <proxy.api_key>" }
(Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8045/v1/models" -Headers $headers).StatusCode
```

:::

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼š`/healthz` è¿”å› 200ï¼›`/v1/models` åœ¨ä¸å¸¶ key æ™‚è¿”å› 401ï¼Œå¸¶ key æ™‚æˆåŠŸã€‚

### ç¬¬ 5 æ­¥ï¼šæ”¹ä¸€å€‹ã€Œå¿…é ˆé‡å•Ÿåä»£ã€çš„é…ç½®ï¼ˆé€£æ¥åŸ  / ç›£è½ä½å€ï¼‰

**ç‚ºä»€éº¼**
å¾ˆå¤šé…ç½®æ˜¯ã€Œå„²å­˜äº†ä½†ä¸ç”Ÿæ•ˆã€ï¼Œæ ¹å› ä¸æ˜¯ bugï¼Œè€Œæ˜¯å®ƒæ±ºå®šäº† TCP Listener æ€éº¼ç¶å®šã€‚

åœ¨å•Ÿå‹•åä»£æ™‚ï¼Œå¾Œç«¯æœƒç”¨ `allow_lan_access` è¨ˆç®—ç›£è½ä½å€ï¼ˆ`127.0.0.1` æˆ– `0.0.0.0`ï¼‰ï¼Œä¸¦ç”¨ `port` ç¶å®šé€£æ¥åŸ ï¼›é€™ä¸€æ­¥åªç™¼ç”Ÿåœ¨ `start_proxy_service`ã€‚

æ“ä½œå»ºè­°ï¼š

1. åœ¨ `API Proxy` é é¢æŠŠ `port` æ”¹æˆä¸€å€‹æ–°å€¼ï¼ˆæ¯”å¦‚ `8050`ï¼‰ï¼Œå„²å­˜ã€‚
2. åœæ­¢åä»£æœå‹™ï¼Œç„¶å¾Œé‡æ–°å•Ÿå‹•ã€‚
3. ç”¨æ–°é€£æ¥åŸ é©—è­‰ `/healthz`ã€‚

::: code-group

```bash [macOS/Linux]
curl -sS "http://127.0.0.1:8050/healthz" && echo
```

```powershell [Windows]
Invoke-WebRequest -UseBasicParsing "http://127.0.0.1:8050/healthz" | Select-Object -ExpandProperty StatusCode
```

:::

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šæ–°é€£æ¥åŸ å¯å­˜å–ï¼›èˆŠé€£æ¥åŸ é€£æ¥å¤±æ•—æˆ–è¿”å›ç©ºã€‚

::: warning é—œæ–¼ `allow_lan_access`
æºç¢¼è£¡ `allow_lan_access` åŒæ™‚å½±éŸ¿å…©ä»¶äº‹ï¼š

1. **ç›£è½ä½å€**ï¼šæ±ºå®šç¶å®š `127.0.0.1` é‚„æ˜¯ `0.0.0.0`ï¼ˆéœ€è¦é‡å•Ÿåä»£æ‰èƒ½é‡æ–° bindï¼‰ã€‚
2. **auto é‘‘æ¬Šç­–ç•¥**ï¼šç•¶ `auth_mode=auto` æ™‚ï¼Œå€åŸŸç¶²è·¯å ´æ™¯æœƒè‡ªå‹•è½‰æˆ `all_except_health`ï¼ˆé€™éƒ¨åˆ†èƒ½ç†±æ›´æ–°ï¼‰ã€‚
:::

### ç¬¬ 6 æ­¥ï¼šçœ‹æ‡‚ä¸€æ¬¡ã€Œé…ç½®é·ç§»ã€ï¼ˆèˆŠæ¬„ä½æœƒè¢«è‡ªå‹•æ¸…ç†ï¼‰

**ç‚ºä»€éº¼**
ä½ å‡ç´šå¾Œå¯èƒ½æœƒåœ¨ `gui_config.json` è£¡çœ‹åˆ°è€æ¬„ä½ï¼Œæ“”å¿ƒã€Œå£äº†ã€ã€‚å¯¦éš›ä¸Šï¼Œå¾Œç«¯è¼‰å…¥é…ç½®æ™‚æœƒåšä¸€æ¬¡é·ç§»ï¼šæŠŠ `anthropic_mapping/openai_mapping` åˆä½µåˆ° `custom_mapping`ï¼Œä¸¦åˆªé™¤èˆŠæ¬„ä½ï¼Œç„¶å¾Œè‡ªå‹•å„²å­˜ä¸€æ¬¡ã€‚

ä½ å¯ä»¥ç”¨é€™å€‹è¦å¾‹è‡ªæª¢ï¼š

- å¦‚æœä½ åœ¨æª”æ¡ˆè£¡çœ‹è¦‹ `proxy.anthropic_mapping` æˆ– `proxy.openai_mapping`ï¼Œä¸‹æ¬¡å•Ÿå‹•/è¼‰å…¥é…ç½®å¾Œï¼Œå®ƒå€‘æœƒè¢«ç§»é™¤ã€‚
- åˆä½µæ™‚æœƒè·³éä»¥ `-series` çµå°¾çš„ keyï¼ˆé€™äº›ç¾åœ¨äº¤çµ¦ preset/builtin é‚è¼¯è™•ç†ï¼‰ã€‚

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šé·ç§»ç™¼ç”Ÿå¾Œï¼Œ`gui_config.json` è£¡åªç•™ä¸‹ `proxy.custom_mapping`ã€‚

## æª¢æŸ¥é» âœ…

- ä½ èƒ½åœ¨æœ¬æ©Ÿæ‰¾åˆ° `$HOME/.antigravity_tools/gui_config.json`
- ä½ èƒ½èªªæ¸…ï¼š`auth_mode/api_key/custom_mapping` é€™é¡é…ç½®ç‚ºä»€éº¼èƒ½ç†±æ›´æ–°
- ä½ èƒ½èªªæ¸…ï¼š`port/allow_lan_access` é€™é¡é…ç½®ç‚ºä»€éº¼å¿…é ˆé‡å•Ÿåä»£

## è¸©å‘æé†’

1. `save_config` çš„ç†±æ›´æ–°åªè¦†è“‹å°‘æ•¸æ¬„ä½ï¼šå®ƒä¸æœƒå¹«ä½ é‡å•Ÿ listenerï¼Œä¹Ÿä¸æœƒæŠŠ `scheduling` ä¹‹é¡çš„é…ç½®æ¨çµ¦ TokenManagerã€‚
2. `request_timeout` åœ¨åä»£å…§éƒ¨ç•¶å‰å¯¦ä½œè£¡ä¸¦æ²’æœ‰çœŸæ­£ç”Ÿæ•ˆï¼šAxumServer çš„ `start` åƒæ•¸è£¡æ˜¯ `_request_timeout`ï¼Œè€Œç‹€æ…‹è£¡æŠŠé€¾æ™‚å¯«æ­»æˆäº† `300` ç§’ã€‚
3. æ‰‹å‹•å¾€ `gui_config.json` è£¡å¡ã€Œè‡ªè¨‚æ¬„ä½ã€ä¸å¯é ï¼šå¾Œç«¯å„²å­˜æ™‚æœƒæŠŠå®ƒé‡æ–°åºåˆ—åŒ–æˆ `AppConfig`ï¼ŒæœªçŸ¥æ¬„ä½æœƒè¢«ä¸Ÿæ£„ã€‚

## æœ¬èª²å°çµ

- é…ç½®è½ç›¤åªæœ‰ä¸€å€‹å…¥å£ï¼š`$HOME/.antigravity_tools/gui_config.json`
- ProxyConfig çš„ã€Œèƒ½ç†±æ›´æ–°ã€ä¸ç­‰æ–¼ã€Œèƒ½æ”¹é€£æ¥åŸ /æ”¹ç›£è½ä½å€ã€ï¼›æ¶‰åŠ bind çš„éƒ½è¦é‡å•Ÿåä»£
- çœ‹åˆ°èˆŠæ˜ å°„æ¬„ä½åˆ¥æ…Œï¼šè¼‰å…¥é…ç½®æ™‚æœƒè‡ªå‹•é·ç§»åˆ° `custom_mapping` ä¸¦æ¸…ç†èˆŠæ¬„ä½

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[å®‰å…¨èˆ‡éš±ç§ï¼šauth_modeã€allow_lan_accessã€ä»¥åŠã€Œä¸è¦æ´©æ¼å¸³è™Ÿè³‡è¨Šã€çš„è¨­è¨ˆ](../security/)**ã€‚
>
> ä½ æœƒå­¸åˆ°ï¼š
> - ä»€éº¼æ™‚å€™å¿…é ˆé–‹é‘‘æ¬Šï¼ˆä»¥åŠç‚ºä»€éº¼ `auto` åœ¨ LAN å ´æ™¯æœƒæ›´åš´æ ¼ï¼‰
> - æŠŠæœ¬åœ°åä»£æš´éœ²åˆ°å€åŸŸç¶²è·¯/å…¬ç¶²æ™‚çš„æœ€å°æš´éœ²ç­–ç•¥
> - å“ªäº›è³‡æ–™æœƒè¢«ç™¼é€åˆ°ä¸Šæ¸¸ï¼Œå“ªäº›åªä¿å­˜åœ¨æœ¬æ©Ÿ

---

## é™„éŒ„ï¼šæºç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æŸ¥çœ‹æºç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-24

| ä¸»é¡Œ | æª”æ¡ˆè·¯å¾‘ | è¡Œè™Ÿ |
| --- | --- | --- |
| AppConfig é è¨­å€¼ï¼ˆ`AppConfig::new()`ï¼‰ | [`src-tauri/src/models/config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/models/config.rs#L4-L158) | 4-158 |
| ProxyConfig é è¨­å€¼ï¼ˆé€£æ¥åŸ /é‘‘æ¬Š/ç›£è½ä½å€ï¼‰ | [`src-tauri/src/proxy/config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/config.rs#L74-L292) | 74-292 |
| StickySessionConfig é è¨­å€¼ï¼ˆèª¿åº¦ï¼‰ | [`src-tauri/src/proxy/sticky_config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/sticky_config.rs#L3-L36) | 3-36 |
| é…ç½®è½ç›¤æª”æ¡ˆå + é·ç§»é‚è¼¯ï¼ˆ`gui_config.json`ï¼‰ | [`src-tauri/src/modules/config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/modules/config.rs#L7-L88) | 7-88 |
| è³‡æ–™ç›®éŒ„ï¼ˆ`$HOME/.antigravity_tools`ï¼‰ | [`src-tauri/src/modules/account.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/modules/account.rs#L16-L33) | 16-33 |
| `save_config`ï¼šå„²å­˜é…ç½® + ç†±æ›´æ–°å“ªäº›æ¬„ä½ | [`src-tauri/src/commands/mod.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/mod.rs#L296-L334) | 296-334 |
| AxumServerï¼š`update_mapping/update_proxy/update_security/...` | [`src-tauri/src/proxy/server.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/server.rs#L45-L117) | 45-117 |
| `allow_lan_access` çš„ç›£è½ä½å€é¸æ“‡ | [`src-tauri/src/proxy/config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/config.rs#L81-L92) | 81-92 |
| Proxy å•Ÿå‹•æ™‚ bind ä½å€èˆ‡é€£æ¥åŸ ï¼ˆå¿…é ˆé‡å•Ÿæ‰æœƒè®Šï¼‰ | [`src-tauri/src/commands/proxy.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/proxy.rs#L42-L134) | 42-134 |
| `auth_mode=auto` çš„å¯¦éš›è¦å‰‡ | [`src-tauri/src/proxy/security.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/security.rs#L3-L31) | 3-31 |
| å‰ç«¯å„²å­˜èª¿åº¦é…ç½®ï¼ˆåªå„²å­˜ï¼Œä¸æœƒæ¨é€åˆ°å¾Œç«¯é‹è¡Œæ™‚ï¼‰ | [`src/pages/ApiProxy.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/pages/ApiProxy.tsx#L476-L501) | 476-501 |
| Monitor é é¢å‹•æ…‹é–‹å•Ÿ/é—œé–‰æ—¥èªŒæ¡é›† | [`src/components/proxy/ProxyMonitor.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/proxy/ProxyMonitor.tsx#L174-L263) | 174-263 |

</details>
