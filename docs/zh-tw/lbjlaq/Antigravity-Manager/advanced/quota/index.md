---
title: "é…é¡æ²»ç†ï¼šQuota Protection èˆ‡é ç†± | Antigravity-Manager"
subtitle: "é…é¡æ²»ç†ï¼šQuota Protection èˆ‡é ç†± | Antigravity-Manager"
sidebarTitle: "ä¿è­·ä½ çš„æ¨¡å‹é…é¡"
description: "å­¸ç¿’ Antigravity-Manager é…é¡æ²»ç†æ©Ÿåˆ¶ã€‚ä½¿ç”¨ Quota Protection æŒ‰é–¾å€¼ä¿è­·æ¨¡å‹ï¼ŒSmart Warmup è‡ªå‹•é ç†±ï¼Œæ”¯æ´å®šæ™‚æƒæèˆ‡å†·å»æ§åˆ¶ã€‚"
tags:
  - "quota"
  - "warmup"
  - "accounts"
  - "proxy"
prerequisite:
  - "start-add-account"
  - "start-proxy-and-first-client"
order: 5
---

# é…é¡æ²»ç†ï¼šQuota Protection + Smart Warmup çš„çµ„åˆæ‰“æ³•

ä½ ç”¨ Antigravity Tools è·‘ä»£ç†è·‘å¾—æŒºç©©ï¼Œä½†æœ€æ€•é‚„æ˜¯ä¸€ä»¶äº‹ï¼šä¸»åŠ›æ¨¡å‹çš„é…é¡è¢«ã€Œæ‚„æ‚„åƒå…‰ã€ï¼Œç­‰ä½ çœŸè¦ç”¨çš„æ™‚å€™æ‰ç™¼ç¾å·²ç¶“ä½åˆ°æ²’æ³•æ‰“ã€‚

é€™ä¸€èª²å°ˆè¬› **é…é¡æ²»ç†**ï¼šç”¨ Quota Protection æŠŠé—œéµæ¨¡å‹ç•™ä½ï¼›ç”¨ Smart Warmup åœ¨é…é¡å›æ»¿æ™‚åšä¸€æ¬¡ã€Œè¼•é‡ç†±èº«ã€ï¼Œæ¸›å°‘è‡¨æ™‚æ‰éˆå­ã€‚

## ä»€éº¼æ˜¯é…é¡æ²»ç†ï¼Ÿ

**é…é¡æ²»ç†**æ˜¯æŒ‡åœ¨ Antigravity Tools è£¡ç”¨å…©å¥—è¯å‹•æ©Ÿåˆ¶æ§åˆ¶ã€Œé…é¡æ€éº¼èŠ±ã€ï¼šç•¶æŸå€‹æ¨¡å‹çš„å‰©é¤˜é…é¡ä½åˆ°é–¾å€¼ä»¥ä¸‹æ™‚ï¼ŒQuota Protection æœƒæŠŠè©²æ¨¡å‹åŠ å…¥å¸³è™Ÿçš„ `protected_models`ï¼Œè«‹æ±‚è©²æ¨¡å‹æ™‚æœƒå„ªå…ˆé¿é–‹ï¼›ç•¶é…é¡å›åˆ° 100% æ™‚ï¼ŒSmart Warmup æœƒè§¸ç™¼ä¸€æ¬¡æ¥µå°æµé‡çš„é ç†±è«‹æ±‚ï¼Œä¸¦ç”¨æœ¬åœ°æ­·å²æª”æ¡ˆåš 4 å°æ™‚å†·å»ã€‚

## å­¸å®Œä½ èƒ½åšä»€éº¼

- é–‹å•Ÿ Quota Protectionï¼Œè®“ä½é…é¡å¸³è™Ÿè‡ªå‹•ã€Œè®“è·¯ã€ï¼ŒæŠŠé«˜åƒ¹å€¼æ¨¡å‹ç•™çµ¦é—œéµè«‹æ±‚
- é–‹å•Ÿ Smart Warmupï¼Œè®“é…é¡å›æ»¿å¾Œè‡ªå‹•é ç†±ï¼ˆä¸¦çŸ¥é“ 4 å°æ™‚å†·å»æ€éº¼å½±éŸ¿è§¸ç™¼é »ç‡ï¼‰
- ææ¸…æ¥š `quota_protection` / `scheduled_warmup` / `protected_models` ä¸‰å€‹æ¬„ä½åˆ†åˆ¥åœ¨å“ªè£¡ç”Ÿæ•ˆ
- çŸ¥é“å“ªäº›æ¨¡å‹åæœƒè¢«æ­¸ä¸€åŒ–æˆã€Œä¿è­·çµ„ã€ï¼ˆä»¥åŠå“ªäº›ä¸æœƒï¼‰

## ä½ ç¾åœ¨çš„å›°å¢ƒ

- ä½ ä»¥ç‚ºè‡ªå·±åœ¨ã€Œè¼ªæ›å¸³è™Ÿã€ï¼Œä½†å…¶å¯¦ä¸€ç›´åœ¨æ¶ˆè€—åŒä¸€é¡é«˜åƒ¹å€¼æ¨¡å‹
- é…é¡ä½äº†æ‰ç™¼ç¾ï¼Œç”šè‡³æ˜¯ Claude Code/å®¢æˆ¶ç«¯åœ¨å¾Œå° warmup æŠŠé¡åº¦å•ƒæ‰
- ä½ é–‹äº†é ç†±ï¼Œä½†ä¸çŸ¥é“å®ƒåˆ°åº•ä½•æ™‚è§¸ç™¼ã€æœ‰æ²’æœ‰å†·å»ã€æ˜¯å¦æœƒå½±éŸ¿é…é¡

## ä»€éº¼æ™‚å€™ç”¨é€™ä¸€æ‹›

- ä½ æœ‰å¤šå€‹å¸³è™Ÿæ± ï¼Œå¸Œæœ›é—œéµæ¨¡å‹åœ¨ã€Œé‡è¦æ™‚åˆ»ã€é‚„æœ‰é¤˜ç³§
- ä½ ä¸æƒ³æ‰‹å‹•ç›¯è‘—é…é¡å›æ»¿æ™‚é–“ï¼Œæƒ³è®“ç³»çµ±è‡ªå‹•åšã€Œå›æ»¿å¾Œçš„è¼•é‡é©—è­‰ã€

## ğŸ’ é–‹å§‹å‰çš„æº–å‚™

::: warning å‰ç½®æ¢ä»¶
æœ¬èª²é è¨­ä½ å·²ç¶“èƒ½ï¼š

- åœ¨ **Accounts** é é¢çœ‹åˆ°å¸³è™Ÿåˆ—è¡¨ï¼Œä¸¦èƒ½æ‰‹å‹•åˆ·æ–°é…é¡
- å·²ç¶“å•Ÿå‹•éæœ¬åœ°åä»£ï¼ˆè‡³å°‘èƒ½å­˜å– `/healthz`ï¼‰

å¦‚æœé‚„æ²’è·‘é€šï¼Œå…ˆçœ‹ **[å•Ÿå‹•æœ¬åœ°åä»£ä¸¦æ¥å…¥ç¬¬ä¸€å€‹å®¢æˆ¶ç«¯](/zh-tw/lbjlaq/Antigravity-Manager/start/proxy-and-first-client/)**ã€‚
:::

å¦å¤–ï¼ŒSmart Warmup æœƒå¯«å…¥æœ¬åœ°æ­·å²æª”æ¡ˆ `warmup_history.json`ã€‚å®ƒæ”¾åœ¨è³‡æ–™ç›®éŒ„è£¡ï¼Œè³‡æ–™ç›®éŒ„ä½ç½®å’Œå‚™ä»½æ–¹å¼å¯ä»¥å…ˆçœ‹ **[é¦–æ¬¡å•Ÿå‹•å¿…æ‡‚ï¼šè³‡æ–™ç›®éŒ„ã€æ—¥èªŒã€æ‰˜ç›¤èˆ‡è‡ªå‹•å•Ÿå‹•](/zh-tw/lbjlaq/Antigravity-Manager/start/first-run-data/)**ã€‚

## æ ¸å¿ƒæ€è·¯

é€™å¥—ã€Œçµ„åˆæ‰“æ³•ã€èƒŒå¾Œå…¶å¯¦å¾ˆæ¨¸ç´ ï¼š

- Quota Protection è² è²¬ã€Œåˆ¥å†æµªè²»ã€ï¼šç•¶æŸå€‹æ¨¡å‹ä½æ–¼é–¾å€¼ï¼Œå°±æŠŠå®ƒæ¨™è¨˜ç‚ºå—ä¿è­·ï¼Œè«‹æ±‚è©²æ¨¡å‹æ™‚å„ªå…ˆé¿é–‹ï¼ˆæ¨¡å‹ç´šåˆ¥ï¼Œè€Œä¸æ˜¯ä¸€åˆ€åˆ‡ç¦ç”¨å¸³è™Ÿï¼‰ã€‚
- Smart Warmup è² è²¬ã€Œé…é¡å›æ»¿å°±é©—ä¸€ä¸‹ã€ï¼šç•¶æ¨¡å‹å›åˆ° 100% æ™‚ï¼Œè§¸ç™¼ä¸€æ¬¡è¼•é‡è«‹æ±‚ï¼Œç¢ºèªéˆè·¯å¯ç”¨ï¼Œä¸¦ç”¨ 4 å°æ™‚å†·å»é¿å…åè¦†æ‰“æ“¾ã€‚

å®ƒå€‘å°æ‡‰çš„è¨­å®šæ¬„ä½éƒ½åœ¨å‰ç«¯çš„ `AppConfig` è£¡ï¼š

- `quota_protection.enabled / threshold_percentage / monitored_models`ï¼ˆè¦‹ `src/types/config.ts`ï¼‰
- `scheduled_warmup.enabled / monitored_models`ï¼ˆè¦‹ `src/types/config.ts`ï¼‰

è€ŒçœŸæ­£æ±ºå®šã€Œè«‹æ±‚è©²æ¨¡å‹æ™‚è¦ä¸è¦è·³éè©²å¸³è™Ÿã€çš„é‚è¼¯åœ¨å¾Œç«¯ TokenManagerï¼š

- å¸³è™Ÿæª”æ¡ˆè£¡çš„ `protected_models` æœƒåœ¨ `get_token(..., target_model)` è£¡åƒèˆ‡éæ¿¾ï¼ˆè¦‹ `src-tauri/src/proxy/token_manager.rs`ï¼‰
- `target_model` æœƒå…ˆåšä¸€æ¬¡æ­¸ä¸€åŒ–ï¼ˆ`normalize_to_standard_id`ï¼‰ï¼Œæ‰€ä»¥ `claude-sonnet-4-5-thinking` é€™é¡è®Šé«”æœƒè¢«æŠ˜ç–Šåˆ°åŒä¸€å€‹ã€Œä¿è­·çµ„ã€ï¼ˆè¦‹ `src-tauri/src/proxy/common/model_mapping.rs`ï¼‰

## ä¸‹ä¸€èª²é å‘Š

> ä¸‹ä¸€èª²æˆ‘å€‘å­¸ç¿’ **[Proxy Monitorï¼šè«‹æ±‚æ—¥èªŒã€ç¯©é¸ã€è©³æƒ…é‚„åŸèˆ‡åŒ¯å‡º](/zh-tw/lbjlaq/Antigravity-Manager/advanced/monitoring/)**ï¼ŒæŠŠå‘¼å«é»‘ç›’è®Šæˆå¯è¦†ç›¤çš„è­‰æ“šéˆã€‚

## è·Ÿæˆ‘åš

### ç¬¬ 1 æ­¥ï¼šå…ˆæŠŠé…é¡åˆ·åˆ°ã€Œæœ‰æ•¸ã€

**ç‚ºä»€éº¼**
Quota Protection æ˜¯åŸºæ–¼å¸³è™Ÿçš„ `quota.models[].percentage` åšåˆ¤æ–·çš„ã€‚ä½ é…é¡æ²’åˆ·å‡ºä¾†ï¼Œä¿è­·é‚è¼¯å°±æ²’æ³•å°ä½ åšä»»ä½•äº‹ã€‚

æ“ä½œè·¯å¾‘ï¼šæ‰“é–‹ **Accounts** é é¢ï¼Œé»å·¥å…·æ¬„çš„åˆ·æ–°æŒ‰éˆ•ï¼ˆå–®å€‹å¸³è™Ÿæˆ–å…¨é‡éƒ½è¡Œï¼‰ã€‚

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šå¸³è™Ÿè¡Œè£¡å‡ºç¾å„æ¨¡å‹çš„é…é¡ç™¾åˆ†æ¯”ï¼ˆä¾‹å¦‚ 0-100ï¼‰å’Œ reset timeã€‚

### ç¬¬ 2 æ­¥ï¼šåœ¨ Settings è£¡æ‰“é–‹ Smart Warmupï¼ˆå¯é¸ï¼Œä½†æ¨è–¦ï¼‰

**ç‚ºä»€éº¼**
Smart Warmup çš„ç›®æ¨™ä¸æ˜¯ã€Œçœé…é¡ã€ï¼Œè€Œæ˜¯ã€Œé…é¡å›æ»¿å°±è‡ªæª¢ä¸€ä¸‹éˆè·¯ã€ã€‚å®ƒåªåœ¨æ¨¡å‹é…é¡åˆ° 100% æ™‚è§¸ç™¼ï¼Œè€Œä¸”æœ‰ 4 å°æ™‚å†·å»ã€‚

æ“ä½œè·¯å¾‘ï¼šé€²å…¥ **Settings**ï¼Œåˆ‡åˆ°å¸³è™Ÿç›¸é—œè¨­å®šå€åŸŸï¼Œæ‰“é–‹ **Smart Warmup** é–‹é—œï¼Œç„¶å¾Œå‹¾é¸ä½ è¦ç›£æ§çš„æ¨¡å‹ã€‚

åˆ¥å¿˜äº†å„²å­˜è¨­å®šã€‚

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šSmart Warmup å±•é–‹å¾Œå‡ºç¾æ¨¡å‹åˆ—è¡¨ï¼›è‡³å°‘ä¿ç•™ 1 å€‹æ¨¡å‹è¢«å‹¾é¸ã€‚

### ç¬¬ 3 æ­¥ï¼šæ‰“é–‹ Quota Protectionï¼Œä¸¦è¨­å®šé–¾å€¼èˆ‡ç›£æ§æ¨¡å‹

**ç‚ºä»€éº¼**
Quota Protection æ˜¯ã€Œç•™é¤˜ç³§ã€çš„æ ¸å¿ƒï¼šç•¶ç›£æ§æ¨¡å‹çš„é…é¡ç™¾åˆ†æ¯” `<= threshold_percentage` æ™‚ï¼ŒæœƒæŠŠè©²æ¨¡å‹å¯«é€²å¸³è™Ÿæª”æ¡ˆçš„ `protected_models`ï¼Œå¾ŒçºŒè«‹æ±‚è©²æ¨¡å‹æœƒå„ªå…ˆé¿é–‹é€™é¡å¸³è™Ÿã€‚

æ“ä½œè·¯å¾‘ï¼šåœ¨ **Settings** è£¡æ‰“é–‹ **Quota Protection**ã€‚

1. è¨­å®šé–¾å€¼ï¼ˆ`1-99`ï¼‰
2. å‹¾é¸ä½ è¦ç›£æ§çš„æ¨¡å‹ï¼ˆè‡³å°‘ 1 å€‹ï¼‰

::: tip ä¸€å€‹å¾ˆå¥½ç”¨çš„èµ·æ‰‹è¨­å®š
å¦‚æœä½ ä¸æƒ³ç³¾çµï¼Œå¾é è¨­ `threshold_percentage=10` é–‹å§‹å°±è¡Œï¼ˆè¦‹ `src/pages/Settings.tsx`ï¼‰ã€‚
:::

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šQuota Protection çš„æ¨¡å‹å‹¾é¸è‡³å°‘ä¿ç•™ 1 å€‹ï¼ˆUI æœƒé˜»æ“‹ä½ æŠŠæœ€å¾Œä¸€å€‹ä¹Ÿå–æ¶ˆæ‰ï¼‰ã€‚

### ç¬¬ 4 æ­¥ï¼šç¢ºèªã€Œä¿è­·çµ„æ­¸ä¸€åŒ–ã€ä¸æœƒè®“ä½ è¸©å‘

**ç‚ºä»€éº¼**
TokenManager åšé…é¡ä¿è­·åˆ¤æ–·æ™‚ï¼Œæœƒå…ˆæŠŠ `target_model` æ­¸ä¸€åŒ–æˆæ¨™æº– IDï¼ˆ`normalize_to_standard_id`ï¼‰ã€‚ä¾‹å¦‚ `claude-sonnet-4-5-thinking` æœƒè¢«æ­¸ä¸€åˆ° `claude-sonnet-4-5`ã€‚

é€™æ„å‘³è‘—ï¼š

- ä½ åœ¨ Quota Protection è£¡å‹¾é¸ `claude-sonnet-4-5`
- ç•¶ä½ å¯¦éš›è«‹æ±‚ `claude-sonnet-4-5-thinking`

ä»ç„¶æœƒå‘½ä¸­ä¿è­·ï¼ˆå› ç‚ºå®ƒå€‘å±¬æ–¼åŒä¸€çµ„ï¼‰ã€‚

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šç•¶æŸå¸³è™Ÿçš„ `protected_models` è£¡åŒ…å« `claude-sonnet-4-5` æ™‚ï¼Œå° `claude-sonnet-4-5-thinking` çš„è«‹æ±‚æœƒå„ªå…ˆé¿é–‹è©²å¸³è™Ÿã€‚

### ç¬¬ 5 æ­¥ï¼šéœ€è¦ç«‹åˆ»é©—è­‰æ™‚ï¼Œç”¨ã€Œæ‰‹å‹•é ç†±ã€è§¸ç™¼ä¸€æ¬¡ warmup

**ç‚ºä»€éº¼**
å®šæ™‚ Smart Warmup çš„æƒæé€±æœŸæ˜¯ 10 åˆ†é˜ä¸€æ¬¡ï¼ˆè¦‹ `src-tauri/src/modules/scheduler.rs`ï¼‰ã€‚ä½ æƒ³ç«‹åˆ»é©—è­‰éˆè·¯ï¼Œæ‰‹å‹•é ç†±æ›´ç›´æ¥ã€‚

æ“ä½œè·¯å¾‘ï¼šæ‰“é–‹ **Accounts** é é¢ï¼Œé»å·¥å…·æ¬„çš„ã€Œé ç†±ã€æŒ‰éˆ•ï¼š

- ä¸é¸å¸³è™Ÿï¼šè§¸ç™¼å…¨é‡é ç†±ï¼ˆå‘¼å« `warm_up_all_accounts`ï¼‰
- é¸ä¸­å¸³è™Ÿï¼šå°é¸ä¸­çš„å¸³è™Ÿé€å€‹è§¸ç™¼é ç†±ï¼ˆå‘¼å« `warm_up_account`ï¼‰

**ä½ æ‡‰è©²çœ‹åˆ°**ï¼šå‡ºç¾ toastï¼Œå…§å®¹ä¾†è‡ªå¾Œç«¯è¿”å›çš„å­—ä¸²ï¼ˆä¾‹å¦‚ "Warmup task triggered ..."ï¼‰ã€‚

## æª¢æŸ¥é» âœ…

- ä½ èƒ½åœ¨ Accounts é é¢çœ‹åˆ°æ¯å€‹å¸³è™Ÿçš„æ¨¡å‹é…é¡ç™¾åˆ†æ¯”ï¼ˆè­‰æ˜é…é¡è³‡æ–™éˆè·¯ OKï¼‰
- ä½ èƒ½åœ¨ Settings è£¡æ‰“é–‹ Quota Protection / Smart Warmupï¼Œä¸¦æˆåŠŸå„²å­˜è¨­å®š
- ä½ ç†è§£ `protected_models` æ˜¯ã€Œæ¨¡å‹ç´šã€é™åˆ¶ï¼šä¸€å€‹å¸³è™Ÿå¯èƒ½åªå°æŸäº›æ¨¡å‹è¢«é¿é–‹
- ä½ çŸ¥é“ warmup æœ‰ 4 å°æ™‚å†·å»ï¼šçŸ­æ™‚é–“å…§é‡è¤‡é»é ç†±ï¼Œå¯èƒ½æœƒçœ‹åˆ° "skipped/cooldown" ç›¸é—œæç¤º

## è¸©å‘æé†’

### 1) ä½ é–‹äº† Quota Protectionï¼Œä½†ä¸€ç›´æ²’ç”Ÿæ•ˆ

æœ€å¸¸è¦‹åŸå› æ˜¯ï¼šå¸³è™Ÿæ²’æœ‰ `quota` è³‡æ–™ã€‚ä¿è­·é‚è¼¯åœ¨å¾Œç«¯éœ€è¦å…ˆè®€å– `quota.models[]` æ‰èƒ½åˆ¤æ–·é–¾å€¼ï¼ˆè¦‹ `src-tauri/src/proxy/token_manager.rs`ï¼‰ã€‚

ä½ å¯ä»¥å›åˆ° **ç¬¬ 1 æ­¥**ï¼Œå…ˆæŠŠé…é¡åˆ·æ–°å‡ºä¾†ã€‚

### 2) ç‚ºä»€éº¼åªæœ‰å°‘æ•¸æ¨¡å‹æœƒè¢«ç•¶æˆã€Œä¿è­·çµ„ã€ï¼Ÿ

TokenManager å° `target_model` çš„æ­¸ä¸€åŒ–æ˜¯ã€Œç™½åå–®å¼ã€çš„ï¼šåªæœ‰æ˜ç¢ºåˆ—å‡ºä¾†çš„æ¨¡å‹åæ‰æœƒè¢«æ˜ å°„åˆ°æ¨™æº– IDï¼ˆè¦‹ `src-tauri/src/proxy/common/model_mapping.rs`ï¼‰ã€‚

æ­¸ä¸€åŒ–å¾Œçš„é‚è¼¯æ˜¯ï¼šç”¨æ­¸ä¸€åŒ–å¾Œçš„åç¨±ï¼ˆæ¨™æº– ID æˆ–åŸå§‹æ¨¡å‹åï¼‰å»åŒ¹é…å¸³è™Ÿçš„ `protected_models` æ¬„ä½ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œè©²å¸³è™Ÿæœƒè¢«è·³éï¼ˆè¦‹ `src-tauri/src/proxy/token_manager.rs:555-560, 716-719`ï¼‰ã€‚é€™æ„å‘³è‘—ï¼š

- ç™½åå–®å…§çš„æ¨¡å‹ï¼ˆå¦‚ `claude-sonnet-4-5-thinking`ï¼‰æœƒè¢«æ­¸ä¸€åŒ–ç‚ºæ¨™æº– IDï¼ˆ`claude-sonnet-4-5`ï¼‰ï¼Œç„¶å¾Œåˆ¤æ–·æ˜¯å¦åœ¨ `protected_models` ä¸­
- ç™½åå–®å¤–çš„æ¨¡å‹æ­¸ä¸€åŒ–å¤±æ•—æ™‚ï¼Œå›é€€åˆ°åŸå§‹æ¨¡å‹åï¼Œä»ç„¶æœƒå»åŒ¹é… `protected_models`

æ›å¥è©±èªªï¼Œé…é¡ä¿è­·åˆ¤æ–·å°ã€Œæ‰€æœ‰æ¨¡å‹åã€éƒ½ç”Ÿæ•ˆï¼Œåªæ˜¯ç™½åå–®å…§çš„æ¨¡å‹æœƒå…ˆæ­¸ä¸€åŒ–ã€‚

### 3) æ‰‹å‹•/å®šæ™‚é ç†±ç‚ºä»€éº¼éœ€è¦ä»£ç†åœ¨è·‘ï¼Ÿ

é ç†±è«‹æ±‚æœ€çµ‚æœƒæ‰“åˆ°æœ¬åœ°ä»£ç†çš„å…§éƒ¨ç«¯é»ï¼š`POST /internal/warmup`ï¼ˆè¦‹ `src-tauri/src/proxy/server.rs` çš„è·¯ç”±ï¼Œä»¥åŠ `src-tauri/src/proxy/handlers/warmup.rs` çš„å¯¦ä½œï¼‰ã€‚å¦‚æœä½ æ²’å•Ÿå‹•ä»£ç†æœå‹™ï¼Œwarmup æœƒå¤±æ•—ã€‚

å¦å¤–ï¼Œé ç†±å‘¼å«çš„é€£æ¥åŸ ä¾†è‡ªè¨­å®šï¼š`proxy.port`ï¼ˆå¦‚æœè®€å–è¨­å®šå¤±æ•—ï¼Œæœƒå›é€€åˆ° `8045`ï¼Œè¦‹ `src-tauri/src/modules/quota.rs`ï¼‰ã€‚

## æœ¬èª²å°çµ

- Quota Protection åšã€Œæ­¢æã€ï¼šé–¾å€¼ä»¥ä¸‹å°±æŠŠæ¨¡å‹å¯«é€² `protected_models`ï¼Œè«‹æ±‚è©²æ¨¡å‹æ™‚å„ªå…ˆé¿é–‹
- Smart Warmup åšã€Œå›æ»¿è‡ªæª¢ã€ï¼šåªåœ¨ 100% æ™‚è§¸ç™¼ï¼Œ10 åˆ†é˜æƒæä¸€æ¬¡ï¼Œ4 å°æ™‚å†·å»
- å…©è€…éƒ½ä¾è³´ã€Œé…é¡åˆ·æ–°ã€éˆè·¯ï¼šå…ˆæœ‰ `quota.models[]`ï¼Œæ²»ç†æ‰æœ‰åŸºç¤

## ä¸‹ä¸€èª²é å‘Š

é…é¡æ²»ç†è§£æ±ºçš„æ˜¯ã€Œæ€éº¼èŠ±æ›´ç©©ã€ã€‚ä¸‹ä¸€èª²å»ºè­°æ¥è‘—çœ‹ **Proxy Monitor**ï¼ŒæŠŠè«‹æ±‚æ—¥èªŒã€å¸³è™Ÿå‘½ä¸­ã€æ¨¡å‹æ˜ å°„éƒ½è®Šæˆå¯å›æ”¾çš„è­‰æ“šéˆã€‚

---

## é™„éŒ„ï¼šåŸå§‹ç¢¼åƒè€ƒ

<details>
<summary><strong>é»æ“Šå±•é–‹æŸ¥çœ‹åŸå§‹ç¢¼ä½ç½®</strong></summary>

> æ›´æ–°æ™‚é–“ï¼š2026-01-23

| åŠŸèƒ½ | æª”æ¡ˆè·¯å¾‘ | è¡Œè™Ÿ |
| --- | --- | --- |
| Quota Protection UIï¼ˆé–¾å€¼ã€æ¨¡å‹å‹¾é¸ã€è‡³å°‘ä¿ç•™ 1 å€‹ï¼‰ | [`src/components/settings/QuotaProtection.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/settings/QuotaProtection.tsx#L13-L168) | 13-168 |
| Smart Warmup UIï¼ˆå•Ÿç”¨å¾Œé è¨­å‹¾é¸ã€è‡³å°‘ä¿ç•™ 1 å€‹ï¼‰ | [`src/components/settings/SmartWarmup.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/settings/SmartWarmup.tsx#L14-L120) | 14-120 |
| é…é¡æ²»ç†è¨­å®šæ¬„ä½ï¼ˆ`quota_protection` / `scheduled_warmup`ï¼‰ | [`src/types/config.ts`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/types/config.ts#L54-L94) | 54-94 |
| é è¨­é–¾å€¼èˆ‡é è¨­è¨­å®šï¼ˆ`threshold_percentage: 10`ï¼‰ | [`src/pages/Settings.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/pages/Settings.tsx#L20-L51) | 20-51 |
| å¯«å…¥/æ¢å¾© `protected_models`ï¼ˆé–¾å€¼åˆ¤æ–·èˆ‡è½ç›¤ï¼‰ | [`src-tauri/src/proxy/token_manager.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/token_manager.rs#L254-L467) | 254-467 |
| è«‹æ±‚å´é…é¡ä¿è­·éæ¿¾ï¼ˆ`get_token(..., target_model)`ï¼‰ | [`src-tauri/src/proxy/token_manager.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/token_manager.rs#L470-L674) | 470-674 |
| ä¿è­·çµ„æ­¸ä¸€åŒ–ï¼ˆ`normalize_to_standard_id`ï¼‰ | [`src-tauri/src/proxy/common/model_mapping.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/common/model_mapping.rs#L230-L254) | 230-254 |
| Smart Warmup å®šæ™‚æƒæï¼ˆ10 åˆ†é˜ä¸€æ¬¡ + 4 å°æ™‚å†·å» + `warmup_history.json`ï¼‰ | [`src-tauri/src/modules/scheduler.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/modules/scheduler.rs#L11-L221) | 11-221 |
| æ‰‹å‹•é ç†±æŒ‡ä»¤ï¼ˆ`warm_up_all_accounts` / `warm_up_account`ï¼‰ | [`src-tauri/src/commands/mod.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/mod.rs#L167-L212) | 167-212 |
| é ç†±å¯¦ä½œï¼ˆå‘¼å«å…§éƒ¨ç«¯é» `/internal/warmup`ï¼‰ | [`src-tauri/src/modules/quota.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/modules/quota.rs#L271-L512) | 271-512 |
| å…§éƒ¨é ç†±ç«¯é»å¯¦ä½œï¼ˆå»ºæ§‹è«‹æ±‚ + å‘¼å«ä¸Šæ¸¸ï¼‰ | [`src-tauri/src/proxy/handlers/warmup.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/warmup.rs#L3-L220) | 3-220 |

</details>
