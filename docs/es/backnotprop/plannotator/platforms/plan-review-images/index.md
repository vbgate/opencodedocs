---
title: "Anotaci√≥n de Im√°genes: Tres Herramientas de Marcado | Plannotator"
sidebarTitle: "Marcar Im√°genes con Tres Herramientas"
subtitle: "Anotaci√≥n de Im√°genes: Tres Herramientas de Marcado"
description: "Aprende las tres herramientas de anotaci√≥n de im√°genes de Plannotator. Adjunta im√°genes en la revisi√≥n de planes, usa pincel, flecha y c√≠rculo para marcar, con soporte para ajuste de colores y atajos de teclado."
tags:
  - "Anotaci√≥n de im√°genes"
  - "Pincel"
  - "Flecha"
  - "C√≠rculo"
  - "Atajos de teclado"
  - "Revisi√≥n de planes"
  - "Revisi√≥n de c√≥digo"
prerequisite:
  - "platforms-plan-review-basics"
order: 3
---

# Agregar Anotaciones de Imagen: Marcar con Pincel, Flecha y C√≠rculo

## Lo Que Aprender√°s

- ‚úÖ Adjuntar im√°genes en la revisi√≥n de planes o c√≥digo
- ‚úÖ Usar la herramienta de pincel para dibujo libre
- ‚úÖ Usar la herramienta de flecha para se√±alar √°reas importantes
- ‚úÖ Usar la herramienta de c√≠rculo para seleccionar regiones
- ‚úÖ Ajustar el color y grosor del trazo
- ‚úÖ Usar atajos de teclado para cambiar herramientas r√°pidamente

## Tu Situaci√≥n Actual

**Problema 1**: Al revisar dise√±os de UI o diagramas de flujo, las descripciones textuales no son suficientemente claras y necesitas marcar las √°reas problem√°ticas.

**Problema 2**: Quieres agregar capturas de pantalla con anotaciones a la revisi√≥n de c√≥digo, pero solo puedes usar texto como "hay un problema aqu√≠", sin poder marcar directamente en la imagen.

**Problema 3**: Recibes enlaces de im√°genes compartidas por el equipo y quieres agregar comentarios r√°pidamente, pero no quieres descargarlas localmente para procesarlas con otras herramientas.

**Plannotator te ayuda**:
- Anota im√°genes directamente en el navegador, sin necesidad de descargarlas
- Tres herramientas: pincel, flecha y c√≠rculo, cubriendo todos los escenarios de anotaci√≥n
- Cinco colores y cinco tama√±os de trazo para ajustar el efecto de las anotaciones
- Atajos de teclado para mejorar la eficiencia

## Cu√°ndo Usar Esta T√©cnica

**Escenarios de uso**:
- Revisar dise√±os de UI, diagramas de flujo o arquitectura que requieren marcar problemas
- Agregar capturas de pantalla con anotaciones durante la revisi√≥n de c√≥digo
- Compartir im√°genes anotadas con miembros del equipo
- Seleccionar √°reas importantes o agregar flechas indicativas en im√°genes

## üéí Preparaci√≥n Previa

::: warning Prerrequisitos

Este tutorial asume que ya has:

- ‚úÖ Completado [Fundamentos de Revisi√≥n de Planes](../plan-review-basics/) o [Fundamentos de Revisi√≥n de C√≥digo](../code-review-basics/)
- ‚úÖ Sabes c√≥mo abrir la p√°gina de revisi√≥n de planes o c√≥digo
- ‚úÖ Conoces las operaciones b√°sicas de anotaci√≥n

:::

## Concepto Principal

**Las tres herramientas de anotaci√≥n de im√°genes**:

| Herramienta | Icono | Atajo | Uso |
| --- | --- | --- | --- |
| **Pincel** | üñäÔ∏è | 1 | Dibujo libre, ideal para notas manuscritas o seleccionar formas arbitrarias |
| **Flecha** | ‚û°Ô∏è | 2 | Se√±alar √°reas importantes o indicar direcci√≥n, ideal para marcado punto a punto |
| **C√≠rculo** | ‚≠ï | 3 | Seleccionar regiones, ideal para resaltar elementos espec√≠ficos |

**Flujo de trabajo**:
```
Subir imagen ‚Üí Seleccionar herramienta ‚Üí Ajustar color y tama√±o ‚Üí Dibujar en la imagen ‚Üí Guardar
```

## Paso a Paso

### Paso 1: Abrir la P√°gina de Revisi√≥n de Planes o C√≥digo

**Por qu√©**
La funci√≥n de anotaci√≥n de im√°genes de Plannotator est√° integrada en la revisi√≥n de planes y c√≥digo.

**Acci√≥n**

1. Inicia la revisi√≥n de planes (activada por Claude Code o llamando a submit_plan en OpenCode)
2. O ejecuta el comando `/plannotator-review` para iniciar la revisi√≥n de c√≥digo

**Deber√≠as ver**:
- El navegador abre la p√°gina de revisi√≥n
- En la esquina superior derecha hay un bot√≥n ¬´Upload¬ª o ¬´Adjuntar¬ª

### Paso 2: Subir una Imagen

**Por qu√©**
Necesitas subir una imagen antes de poder anotarla.

**Acci√≥n**

1. Haz clic en el bot√≥n ¬´Upload¬ª o ¬´Adjuntar¬ª en la esquina superior derecha
2. Selecciona la imagen a anotar (formatos soportados: PNG, JPEG, WebP)
3. Despu√©s de subir, la imagen aparecer√° en la lista de anotaciones

**Deber√≠as ver**:
- La miniatura de la imagen aparece en el √°rea de anotaciones
- Al hacer clic en la miniatura se abre el editor de anotaciones

::: tip Fuentes de Im√°genes
Puedes obtener im√°genes de las siguientes formas:
- Captura de pantalla y pegar (Ctrl+V / Cmd+V)
- Seleccionar desde archivos locales
- Arrastrar y soltar im√°genes en la p√°gina
:::

### Paso 3: Abrir el Editor de Anotaciones de Imagen

**Por qu√©**
El editor de anotaciones proporciona herramientas de dibujo y selecci√≥n de colores.

**Acci√≥n**

1. Haz clic en la miniatura de la imagen subida
2. El editor de anotaciones se abrir√° en una ventana emergente

**Deber√≠as ver**:
- La imagen centrada en pantalla
- Una barra de herramientas en la parte superior
- La barra de herramientas de izquierda a derecha: selecci√≥n de herramienta, tama√±o de trazo, selecci√≥n de color, deshacer, limpiar, guardar

### Paso 4: Usar la Herramienta de Pincel para Dibujo Libre

**Por qu√©**
La herramienta de pincel es ideal para notas manuscritas o seleccionar formas arbitrarias.

**Acci√≥n**

1. Aseg√∫rate de que la herramienta de pincel est√© seleccionada (icono üñäÔ∏è, seleccionada por defecto)
2. Mant√©n presionado el bot√≥n izquierdo del rat√≥n y dibuja en la imagen
3. Suelta el rat√≥n para completar el dibujo

**Deber√≠as ver**:
- El trazo sigue el movimiento del rat√≥n
- Al soltar el rat√≥n, la forma dibujada queda fija en la imagen

::: info Caracter√≠sticas del Pincel
- Usa la biblioteca perfect-freehand para un efecto de dibujo suave
- Soporta sensibilidad a la presi√≥n (si tu dispositivo lo permite)
- Cuanto m√°s grueso el trazo, m√°s suave la l√≠nea
:::

### Paso 5: Usar la Herramienta de Flecha para Se√±alar Puntos Importantes

**Por qu√©**
Las flechas son ideales para marcado punto a punto, indicando claramente la ubicaci√≥n del problema.

**Acci√≥n**

1. Haz clic en la herramienta de flecha (icono ‚û°Ô∏è) o presiona el atajo `2`
2. Haz clic en la imagen para definir el punto de inicio de la flecha
3. Arrastra hasta la posici√≥n objetivo y suelta el rat√≥n para completar la flecha

**Deber√≠as ver**:
- Una l√≠nea recta desde el punto de inicio hasta el punto final
- Una punta de flecha en el punto final, apuntando hacia el objetivo

::: tip Consejos para Dibujar Flechas
- El **punto de inicio** es la cola de la flecha, el **punto final** es la cabeza
- Durante el arrastre puedes ver una vista previa en tiempo real de la direcci√≥n
- Ideal para marcar "hay un problema aqu√≠" o "necesita modificaci√≥n aqu√≠"
:::

### Paso 6: Usar la Herramienta de C√≠rculo para Seleccionar Regiones

**Por qu√©**
Los c√≠rculos son ideales para resaltar elementos espec√≠ficos, con una selecci√≥n clara del √°rea.

**Acci√≥n**

1. Haz clic en la herramienta de c√≠rculo (icono ‚≠ï) o presiona el atajo `3`
2. Haz clic en la imagen para definir un borde del c√≠rculo
3. Arrastra hasta el borde opuesto y suelta el rat√≥n para completar el c√≠rculo

**Deber√≠as ver**:
- Un c√≠rculo donde la l√≠nea entre el punto inicial y final es el di√°metro
- El centro del c√≠rculo es el punto medio de la l√≠nea entre los dos puntos

::: details Principio de Dibujo del C√≠rculo

La herramienta de c√≠rculo dibuja de borde a borde:
- **Primer clic**: Un borde del c√≠rculo
- **Arrastrar**: Define el di√°metro del c√≠rculo
- **Soltar**: Completa el c√≠rculo

Implementaci√≥n en c√≥digo fuente (`utils.ts:95-124`):
```typescript
// El centro es el punto medio entre inicio y fin
const cx = (x1 + x2) / 2;
const cy = (y1 + y2) / 2;

// El radio es la mitad de la distancia entre los dos puntos
const radius = Math.hypot(x2 - x1, y2 - y1) / 2;
```

:::

### Paso 7: Ajustar el Color de las Anotaciones

**Por qu√©**
Diferentes colores pueden distinguir diferentes tipos de anotaciones (por ejemplo, rojo para errores, verde para sugerencias).

**Acci√≥n**

1. Haz clic en los puntos de color en la barra de herramientas
2. Colores disponibles: rojo, amarillo, verde, azul, blanco

**Deber√≠as ver**:
- El punto del color seleccionado se muestra m√°s grande
- Todas las nuevas anotaciones usar√°n el color actual

::: info Sugerencias de Uso de Colores
- **Rojo**: Errores, problemas, contenido a eliminar
- **Amarillo**: Advertencias, atenci√≥n, puntos a confirmar
- **Verde**: Sugerencias, optimizaciones, mejoras
- **Azul**: Informaci√≥n adicional, notas
- **Blanco**: Adecuado para im√°genes con fondo oscuro
:::

### Paso 8: Ajustar el Tama√±o del Trazo

**Por qu√©**
Diferentes tama√±os de trazo son adecuados para diferentes escenarios de anotaci√≥n.

**Acci√≥n**

1. Haz clic en los botones `-` o `+` en la barra de herramientas
2. O observa la vista previa del tama√±o actual del trazo (un punto)

**Deber√≠as ver**:
- Tama√±os de trazo disponibles: 3, 6, 10, 16, 24
- En el centro de la barra de herramientas se muestra un punto de vista previa del tama√±o actual

::: tip Sugerencias de Tama√±o de Trazo
- **3**: Anotaci√≥n precisa de elementos peque√±os (como botones, iconos)
- **6**: Anotaci√≥n regular (valor predeterminado)
- **10**: Trazo grueso, adecuado para seleccionar √°reas grandes
- **16**: Trazo muy grueso, adecuado para enfatizar puntos importantes
- **24**: Trazo m√°ximo, adecuado para resaltar √°reas muy grandes
:::

### Paso 9: Deshacer y Limpiar

**Por qu√©**
Es inevitable cometer errores durante la anotaci√≥n, necesitas deshacer o empezar de nuevo.

**Acci√≥n**

1. **Deshacer el √∫ltimo paso**: Haz clic en el icono de deshacer (‚Ü©Ô∏è) o presiona `Cmd+Z` / `Ctrl+Z`
2. **Limpiar todas las anotaciones**: Haz clic en el icono de limpiar (‚ùå)

**Deber√≠as ver**:
- Deshacer: La √∫ltima anotaci√≥n dibujada desaparece
- Limpiar: Todas las anotaciones se eliminan, volviendo a la imagen original

::: warning Aviso sobre Limpiar
La operaci√≥n de limpiar no se puede deshacer, √∫sala con precauci√≥n. Se recomienda usar deshacer para retroceder paso a paso.
:::

### Paso 10: Guardar las Anotaciones

**Por qu√©**
Despu√©s de guardar, la imagen se fusionar√° con las anotaciones y podr√° verse en la revisi√≥n.

**Acci√≥n**

1. Haz clic en el icono de guardar (‚úÖ) en el lado derecho de la barra de herramientas
2. O presiona las teclas `Esc` o `Enter`
3. O haz clic fuera de la ventana emergente

**Deber√≠as ver**:
- La ventana emergente se cierra
- La miniatura de la imagen se actualiza con la versi√≥n anotada
- La imagen se adjunta a la anotaci√≥n actual

::: tip Mecanismo de Guardado
- Si **no has dibujado ninguna anotaci√≥n**, se guarda la imagen original directamente
- Si **hay anotaciones**, la imagen original y las anotaciones se fusionan en una nueva imagen
- La imagen fusionada se guarda en formato PNG, manteniendo alta calidad
:::

## Punto de Verificaci√≥n ‚úÖ

**Verifica tu aprendizaje**:

- [ ] Puedes subir im√°genes exitosamente a la p√°gina de revisi√≥n
- [ ] Puedes usar las tres herramientas (pincel, flecha, c√≠rculo) para dibujar anotaciones
- [ ] Puedes ajustar el color y tama√±o del trazo de las anotaciones
- [ ] Puedes usar atajos de teclado (1/2/3, Cmd+Z, Esc) para operaciones r√°pidas
- [ ] Puedes deshacer anotaciones err√≥neas
- [ ] Puedes guardar im√°genes anotadas

## Errores Comunes

### Problema 1: La Flecha Apunta en Direcci√≥n Incorrecta

**S√≠ntoma**: La flecha apunta en la direcci√≥n equivocada.

**Causa**: La herramienta de flecha dibuja desde el punto de inicio (cola) hasta el punto final (cabeza).

**Soluci√≥n**:
- Vuelve a dibujar, asegur√°ndote de que el punto de inicio sea la cola y el punto final sea la cabeza
- Si ya dibujaste, deshaz y vuelve a dibujar

### Problema 2: El C√≠rculo Est√° en Posici√≥n Incorrecta

**S√≠ntoma**: El c√≠rculo no selecciona el √°rea objetivo.

**Causa**: La herramienta de c√≠rculo dibuja de borde a borde, el centro es el punto medio entre los dos puntos.

**Soluci√≥n**:
- El primer clic debe ser en el borde del √°rea objetivo
- Arrastra hasta el borde opuesto, asegur√°ndote de que el √°rea objetivo est√© dentro del c√≠rculo
- Puedes deshacer y volver a dibujar para ajustar

### Problema 3: El Trazo Es Demasiado Grueso o Fino

**S√≠ntoma**: El efecto de la anotaci√≥n no es ideal.

**Causa**: El tama√±o del trazo no es adecuado para el escenario actual.

**Soluci√≥n**:
- Usa los botones `-` o `+` en la barra de herramientas para ajustar el tama√±o
- Usa 3-6 para elementos peque√±os, 10-24 para √°reas grandes

### Problema 4: El Color No Se Ve Bien

**S√≠ntoma**: Usas un trazo oscuro en un fondo oscuro y la anotaci√≥n no se ve.

**Causa**: Selecci√≥n de color inadecuada.

**Soluci√≥n**:
- Usa blanco o amarillo en fondos oscuros
- Usa rojo, verde o azul en fondos claros

## Referencia R√°pida de Atajos

| Atajo | Funci√≥n |
| --- | --- |
| `1` | Cambiar a herramienta de pincel |
| `2` | Cambiar a herramienta de flecha |
| `3` | Cambiar a herramienta de c√≠rculo |
| `Cmd+Z` / `Ctrl+Z` | Deshacer √∫ltimo paso |
| `Esc` / `Enter` | Guardar anotaciones |

## Resumen de Esta Lecci√≥n

En esta lecci√≥n aprendiste:

1. **Subir im√°genes**: A trav√©s del bot√≥n de subir o pegando en la p√°gina de revisi√≥n
2. **Tres herramientas de anotaci√≥n**:
   - Pincel (1): Dibujo libre, ideal para notas manuscritas
   - Flecha (2): Marcado punto a punto, ideal para se√±alar puntos importantes
   - C√≠rculo (3): Selecci√≥n de regiones, ideal para resaltar elementos
3. **Ajustar estilos de anotaci√≥n**: 5 colores, 5 tama√±os de trazo
4. **Deshacer y limpiar**: Corregir anotaciones err√≥neas
5. **Guardar anotaciones**: Fusionar las anotaciones con la imagen

## Pr√≥xima Lecci√≥n

> En la pr√≥xima lecci√≥n aprenderemos **[Fundamentos de Revisi√≥n de C√≥digo](../code-review-basics/)**.
>
> Aprender√°s:
> - C√≥mo usar el comando /plannotator-review para revisar git diff
> - Cambiar entre vistas side-by-side y unified
> - Hacer clic en n√∫meros de l√≠nea para seleccionar rangos de c√≥digo
> - Agregar comentarios a nivel de l√≠nea (comment/suggestion/concern)
> - Cambiar entre diferentes tipos de diff
> - Enviar feedback al AI Agent

---

## Ap√©ndice: Referencia del C√≥digo Fuente

<details>
<summary><strong>Haz clic para expandir y ver la ubicaci√≥n del c√≥digo fuente</strong></summary>

> Fecha de actualizaci√≥n: 2026-01-24

| Funcionalidad | Ruta del Archivo | L√≠neas |
| --- | --- | --- |
| Definici√≥n de tipos de herramientas | [`packages/ui/components/ImageAnnotator/types.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/components/ImageAnnotator/types.ts#L1-L40) | 1-40 |
| Funciones de renderizado | [`packages/ui/components/ImageAnnotator/utils.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/components/ImageAnnotator/utils.ts#L1-L148) | 1-148 |
| Componente principal | [`packages/ui/components/ImageAnnotator/index.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/components/ImageAnnotator/index.tsx#L1-L233) | 1-233 |
| Componente de barra de herramientas | [`packages/ui/components/ImageAnnotator/Toolbar.tsx`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/components/ImageAnnotator/Toolbar.tsx#L1-L219) | 1-219 |
| Interfaz Annotation | [`packages/ui/types.ts`](https://github.com/backnotprop/plannotator/blob/main/packages/ui/types.ts#L11-L33) | 11-33 |

**Tipos clave**:

**Tool** (tipo de herramienta):
```typescript
export type Tool = 'pen' | 'arrow' | 'circle';
```

**Point** (punto de coordenadas):
```typescript
export interface Point {
  x: number;
  y: number;
  pressure?: number;
}
```

**Stroke** (trazo):
```typescript
export interface Stroke {
  id: string;
  tool: Tool;
  points: Point[];
  color: string;
  size: number;
}
```

**AnnotatorState** (estado del anotador):
```typescript
export interface AnnotatorState {
  tool: Tool;
  color: string;
  strokeSize: number;
  strokes: Stroke[];
  currentStroke: Stroke | null;
}
```

**COLORS** (array de colores):
```typescript
export const COLORS = [
  '#ef4444', // rojo
  '#eab308', // amarillo
  '#22c55e', // verde
  '#3b82f6', // azul
  '#ffffff', // blanco
] as const;
```

**STROKE_SIZES** (tama√±os de trazo):
```typescript
const STROKE_SIZES = [3, 6, 10, 16, 24];
```

**Funciones clave**:

**renderPenStroke()** (renderizar trazo de pincel):
- Usa la biblioteca perfect-freehand para un efecto de dibujo suave
- Soporta sensibilidad a la presi√≥n (campo pressure)

**renderArrow()** (renderizar flecha):
- Dibuja una l√≠nea recta desde el punto de inicio hasta el punto final
- Dibuja la cabeza de la flecha en el punto final

**renderCircle()** (renderizar c√≠rculo):
- Calcula el punto medio de los dos puntos como centro
- Calcula la mitad de la distancia entre los dos puntos como radio

**renderStroke()** (renderizar seg√∫n tipo de herramienta):
- Llama a la funci√≥n de renderizado correspondiente seg√∫n el campo tool
- Soporta escalado (par√°metro scale)

**Annotation.imagePaths** (campo de im√°genes adjuntas):
```typescript
export interface Annotation {
  // ...
  imagePaths?: string[]; // Im√°genes adjuntas (rutas locales o URLs)
}
```

**Manejo de atajos de teclado** (index.tsx:33-59):
```typescript
// 1/2/3 para cambiar herramientas
if (e.key === '1') setState(s => ({ ...s, tool: 'pen' }));
if (e.key === '2') setState(s => ({ ...s, tool: 'arrow' }));
if (e.key === '3') setState(s => ({ ...s, tool: 'circle' }));

// Cmd+Z para deshacer
if ((e.metaKey || e.ctrlKey) && e.key === 'z') {
  e.preventDefault();
  handleUndo();
}
```

</details>
