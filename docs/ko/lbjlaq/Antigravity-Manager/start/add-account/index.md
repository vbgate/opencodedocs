---
title: "ê³„ì • ì¶”ê°€: OAuthì™€ Refresh Token ì´ì¤‘ ì±„ë„ | Antigravity Tools"
sidebarTitle: "Google ê³„ì • ì¶”ê°€"
subtitle: "ê³„ì • ì¶”ê°€: OAuth/Refresh Token ì´ì¤‘ ì±„ë„ê³¼ ëª¨ë²” ì‚¬ë¡€"
description: "Antigravity Toolsì—ì„œ ê³„ì •ì„ ì¶”ê°€í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤. OAuth ì¼íšŒì„± ê¶Œí•œ ë¶€ì—¬ ë˜ëŠ” Refresh Token ìˆ˜ë™ ì¶”ê°€ë¥¼ í†µí•´ ì¼ê´„ ê°€ì ¸ì˜¤ê¸°, ì½œë°± ì‹¤íŒ¨ ì²˜ë¦¬, ê³„ì • í’€ í™•ì¸ì„ ì§€ì›í•©ë‹ˆë‹¤."
tags:
  - "ê³„ì • ê´€ë¦¬"
  - "OAuth"
  - "refresh_token"
  - "Google"
  - "ëª¨ë²” ì‚¬ë¡€"
prerequisite:
  - "start-getting-started"
duration: 15
order: 4
---

# ê³„ì • ì¶”ê°€: OAuth/Refresh Token ì´ì¤‘ ì±„ë„ê³¼ ëª¨ë²” ì‚¬ë¡€

Antigravity Toolsì—ì„œ "ê³„ì • ì¶”ê°€"ëŠ” Google ê³„ì •ì˜ `refresh_token`ì„ ë¡œì»¬ ê³„ì • í’€ì— ì‘ì„±í•˜ì—¬ ì´í›„ ì—­ë°©í–¥ í”„ë¡ì‹œ ìš”ì²­ì—ì„œ ìˆœí™˜í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. OAuth ì¼íšŒì„± ê¶Œí•œ ë¶€ì—¬ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ `refresh_token`ì„ ì§ì ‘ ë¶™ì—¬ë„£ì–´ ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## í•™ìŠµ ì™„ë£Œ í›„ ê°€ëŠ¥í•œ ì‘ì—…

- OAuth ë˜ëŠ” Refresh Tokenì„ ì‚¬ìš©í•˜ì—¬ Google ê³„ì •ì„ Antigravity Tools ê³„ì • í’€ì— ì¶”ê°€
- ê¶Œí•œ ë¶€ì—¬ ë§í¬ ë³µì‚¬/ìˆ˜ë™ ì—´ê¸°, ì½œë°± ì„±ê³µ í›„ ìë™ìœ¼ë¡œ ì¶”ê°€ ì™„ë£Œ
- `refresh_token`ì„ ì–»ì„ ìˆ˜ ì—†ê±°ë‚˜ `localhost`ì— ì—°ê²°í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œ ë°œìƒ ì‹œ í•´ê²° ë°©ë²• íŒŒì•…

## í˜„ì¬ ê²ªê³  ìˆëŠ” ë¬¸ì œ

- "OAuth ê¶Œí•œ ë¶€ì—¬"ë¥¼ í´ë¦­í–ˆì§€ë§Œ ê³„ì† ë¡œë”© ì¤‘ì´ê±°ë‚˜ ë¸Œë¼ìš°ì €ì—ì„œ `localhost refused to connect` ì˜¤ë¥˜ ë°œìƒ
- ê¶Œí•œ ë¶€ì—¬ ì„±ê³µ í›„ "Refresh Tokenì„ ê°€ì ¸ì˜¤ì§€ ëª»í•¨" ë©”ì‹œì§€ í‘œì‹œ
- `refresh_token`ë§Œ ê°€ì§€ê³  ìˆì–´ì„œ ì¼ê´„ë¡œ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì„ ëª¨ë¦„

## ì´ ê¸°ëŠ¥ì„ ì–¸ì œ ì‚¬ìš©í•´ì•¼ í• ê¹Œ

- ê³„ì •ì„ ê°€ì¥ ì•ˆì •ì ì¸ ë°©ë²•ìœ¼ë¡œ ì¶”ê°€í•˜ê³  ì‹¶ì„ ë•Œ (OAuth ìš°ì„ )
- ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥/ë°±ì—… ê°€ëŠ¥ì„ ë” ì¤‘ìš”í•˜ê²Œ ìƒê°í•  ë•Œ (Refresh Tokenì´ "ê³„ì • í’€ ìì‚°"ìœ¼ë¡œ ë” ì í•©)
- ë§ì€ ê³„ì •ì„ ì¶”ê°€í•˜ê³  `refresh_token`ì„ ì¼ê´„ë¡œ ê°€ì ¸ì˜¤ê³  ì‹¶ì„ ë•Œ (í…ìŠ¤íŠ¸/JSONì—ì„œ ì¶”ì¶œ ì§€ì›)

## ğŸ’ ì‹œì‘ ì „ ì¤€ë¹„

- Antigravity Tools ë°ìŠ¤í¬í†± ë²„ì „ì„ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ìƒíƒœ
- ì§„ì… ê²½ë¡œ íŒŒì•…: ì™¼ìª½ ë„¤ë¹„ê²Œì´ì…˜ì—ì„œ `Accounts` í˜ì´ì§€ë¡œ ì§„ì… (ë¼ìš°íŠ¸ëŠ” `source/lbjlaq/Antigravity-Manager/src/App.tsx` ì°¸ì¡°)

::: info ì´ ìˆ˜ì—…ì—ì„œ ìì£¼ ë“±ì¥í•˜ëŠ” ë‘ ê°€ì§€ í•µì‹¬ í‚¤ì›Œë“œ
**OAuth**: "ë¸Œë¼ìš°ì €ë¡œ ì´ë™í•˜ì—¬ ë¡œê·¸ì¸í•˜ê³  ê¶Œí•œ ë¶€ì—¬"í•˜ëŠ” í”„ë¡œì„¸ìŠ¤. Antigravity ToolsëŠ” ë¡œì»¬ì— ì„ì‹œ ì½œë°± ì£¼ì†Œë¥¼ ìƒì„± (`http://localhost/127.0.0.1/[::1]:<port>/oauth-callback`, ì‹œìŠ¤í…œ IPv4/IPv6 ìˆ˜ì‹  ìƒíƒœì— ë”°ë¼ ìë™ ì„ íƒ)í•˜ê³ , ë¸Œë¼ìš°ì €ê°€ `code`ë¥¼ ê°€ì ¸ì˜¤ë©´ í† í°ìœ¼ë¡œ êµí™˜ (êµ¬í˜„ì€ `source/lbjlaq/Antigravity-Manager/src-tauri/src/modules/oauth_server.rs` ì°¸ì¡°)

**refresh_token**: "access_tokenì„ ì¥ê¸°ì ìœ¼ë¡œ ê°±ì‹ í•  ìˆ˜ ìˆëŠ” ìê²© ì¦ëª…". ì´ í”„ë¡œì íŠ¸ì—ì„œ ê³„ì •ì„ ì¶”ê°€í•  ë•Œ ë¨¼ì € access_tokenìœ¼ë¡œ êµí™˜í•œ ë‹¤ìŒ Googleì—ì„œ ì‹¤ì œ ì´ë©”ì¼ì„ ê°€ì ¸ì˜¤ê³ , í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì…ë ¥í•œ emailì€ ë¬´ì‹œí•¨ (êµ¬í˜„ì€ `source/lbjlaq/Antigravity-Manager/src-tauri/src/commands/mod.rs` ì°¸ì¡°)
:::

## í•µì‹¬ ê°œë…

Antigravity Toolsì˜ "ê³„ì • ì¶”ê°€"ëŠ” ê²°êµ­ ì‚¬ìš© ê°€ëŠ¥í•œ `refresh_token`ì„ í™•ë³´í•˜ê³  ê³„ì • ì •ë³´ë¥¼ ë¡œì»¬ ê³„ì • í’€ì— ì‘ì„±í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

- **OAuth ì±„ë„**: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê¶Œí•œ ë¶€ì—¬ ë§í¬ë¥¼ ìƒì„±í•˜ê³  ë¡œì»¬ ì½œë°±ì„ ìˆ˜ì‹  ëŒ€ê¸°; ê¶Œí•œ ë¶€ì—¬ ì™„ë£Œ í›„ ìë™ìœ¼ë¡œ í† í° êµí™˜ ë° ê³„ì • ì €ì¥ (`prepare_oauth_url`, `start_oauth_login`, `complete_oauth_login` ì°¸ì¡°)
- **Refresh Token ì±„ë„**: `refresh_token`ì„ ì§ì ‘ ë¶™ì—¬ë„£ìœ¼ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ access_tokenì„ ê°±ì‹ í•˜ê³  Googleì—ì„œ ì‹¤ì œ ì´ë©”ì¼ì„ ê°€ì ¸ì™€ì„œ ì €ì¥ (`add_account` ì°¸ì¡°)

## í•¨ê»˜ ì‹¤ìŠµ

### 1ë‹¨ê³„: "ê³„ì • ì¶”ê°€" ëŒ€í™”ìƒì ì—´ê¸°

**ì´ìœ **
ëª¨ë“  ì¶”ê°€ ì§„ì…ì ì€ `Accounts` í˜ì´ì§€ì—ì„œ í†µí•© ê´€ë¦¬ë©ë‹ˆë‹¤.

ì‘ì—…: `Accounts` í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ ì˜¤ë¥¸ìª½ì˜ **Add Account** ë²„íŠ¼ í´ë¦­ (ì»´í¬ë„ŒíŠ¸: `AddAccountDialog`).

**ì˜ˆìƒ í™”ë©´**: 3ê°œì˜ íƒ­ì„ í¬í•¨í•˜ëŠ” ëŒ€í™”ìƒìê°€ í‘œì‹œë¨: `OAuth` / `Refresh Token` / `Import` (`source/lbjlaq/Antigravity-Manager/src/components/accounts/AddAccountDialog.tsx` ì°¸ì¡°).

### 2ë‹¨ê³„: OAuth ì¼íšŒì„± ê¶Œí•œ ë¶€ì—¬ ìš°ì„  ì‚¬ìš© (ê¶Œì¥)

**ì´ìœ **
ì œí’ˆì˜ ê¸°ë³¸ ê¶Œì¥ ê²½ë¡œ: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê¶Œí•œ ë¶€ì—¬ ë§í¬ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³  ê¸°ë³¸ ë¸Œë¼ìš°ì €ë¥¼ ì—´ë©°, ì½œë°±ì´ ëŒì•„ì˜¤ë©´ ìë™ìœ¼ë¡œ ì €ì¥ ì™„ë£Œ.

1. `OAuth` íƒ­ìœ¼ë¡œ ì „í™˜.
2. ë¨¼ì € ê¶Œí•œ ë¶€ì—¬ ë§í¬ ë³µì‚¬: ëŒ€í™”ìƒìê°€ ì—´ë¦¬ë©´ ìë™ìœ¼ë¡œ `prepare_oauth_url`ì„ í˜¸ì¶œí•˜ì—¬ URL ë¯¸ë¦¬ ìƒì„± (í”„ë¡ íŠ¸ì—”ë“œ í˜¸ì¶œì€ `AddAccountDialog.tsx:111-125` ì°¸ì¡°; ë°±ì—”ë“œ ìƒì„± ë° ìˆ˜ì‹ ì€ `oauth_server.rs` ì°¸ì¡°).
3. **Start OAuth** í´ë¦­ (í”„ë¡ íŠ¸ì—”ë“œ `startOAuthLogin()` / ë°±ì—”ë“œ `start_oauth_login` í•´ë‹¹), ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê¸°ë³¸ ë¸Œë¼ìš°ì €ë¥¼ ì—´ê³  ì½œë°± ëŒ€ê¸° ì‹œì‘.

**ì˜ˆìƒ í™”ë©´**:
- ëŒ€í™”ìƒìì— ë³µì‚¬ ê°€ëŠ¥í•œ ê¶Œí•œ ë¶€ì—¬ ë§í¬ í‘œì‹œë¨ (ì´ë²¤íŠ¸ ì´ë¦„: `oauth-url-generated`)
- ë¸Œë¼ìš°ì €ì—ì„œ Google ê¶Œí•œ ë¶€ì—¬ í˜ì´ì§€ ì—´ë¦¼; ê¶Œí•œ ë¶€ì—¬ í›„ ë¡œì»¬ ì£¼ì†Œë¡œ ë¦¬ë””ë ‰ì…˜ë˜ê³  "Authorization Successful!" í‘œì‹œë¨ (`oauth_success_html()`)

### 3ë‹¨ê³„: OAuthê°€ ìë™ìœ¼ë¡œ ì™„ë£Œë˜ì§€ ì•Šì„ ë•Œ, "OAuth ì™„ë£Œ"ë¡œ ìˆ˜ë™ ë§ˆë¬´ë¦¬

**ì´ìœ **
OAuth í”„ë¡œì„¸ìŠ¤ëŠ” ë‘ ë‹¨ê³„ë¡œ ë‚˜ë‰¨: ë¸Œë¼ìš°ì € ê¶Œí•œ ë¶€ì—¬ë¡œ `code` íšë“, ê·¸ ë‹¤ìŒ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ `code`ë¡œ í† í° êµí™˜. "Start OAuth"ë¥¼ í´ë¦­í•˜ì§€ ì•Šë”ë¼ë„ ê¶Œí•œ ë¶€ì—¬ ë§í¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì—´ê³  ì½œë°±ì„ ì™„ë£Œí•˜ë©´ ëŒ€í™”ìƒìê°€ ìë™ìœ¼ë¡œ ë§ˆë¬´ë¦¬ ì‹œë„; ë§ˆë¬´ë¦¬ ì‹¤íŒ¨ ì‹œ ìˆ˜ë™ìœ¼ë¡œ í•œ ë²ˆ í´ë¦­.

1. "ë§í¬ë¥¼ ë³µì‚¬í•˜ì—¬ ìì‹ ì˜ ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°"(ê¸°ë³¸ ë¸Œë¼ìš°ì € ì•„ë‹˜)ë¥¼ í•œ ê²½ìš°, ê¶Œí•œ ë¶€ì—¬ ì½œë°±ì´ ëŒì•„ì˜¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ `oauth-callback-received` ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ê³  ìë™ìœ¼ë¡œ `completeOAuthLogin()` í˜¸ì¶œ (`source/lbjlaq/Antigravity-Manager/src/components/accounts/AddAccountDialog.tsx:67-109` ì°¸ì¡°).
2. ìë™ ì™„ë£Œê°€ ë³´ì´ì§€ ì•Šìœ¼ë©´, ëŒ€í™”ìƒìì—ì„œ **Finish OAuth** í´ë¦­ (ë°±ì—”ë“œ `complete_oauth_login` í•´ë‹¹).

**ì˜ˆìƒ í™”ë©´**: ëŒ€í™”ìƒìì—ì„œ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œë˜ê³  ìë™ìœ¼ë¡œ ë‹«í˜; `Accounts` ëª©ë¡ì— ìƒˆ ê³„ì • í‘œì‹œë¨.

::: tip íŒ: ì½œë°± ì—°ê²° ì‹¤íŒ¨ ì‹œ ë§í¬ ë³µì‚¬ ìš°ì„ 
ë°±ì—”ë“œëŠ” ê°€ëŠ¥í•œ í•œ IPv6 `::1`ê³¼ IPv4 `127.0.0.1`ì„ ë™ì‹œì— ìˆ˜ì‹  ëŒ€ê¸°í•˜ê³ , ìˆ˜ì‹  ìƒíƒœì— ë”°ë¼ `localhost/127.0.0.1/[::1]`ì„ ì½œë°± ì£¼ì†Œë¡œ ì„ íƒ. ì£¼ë¡œ "ë¸Œë¼ìš°ì €ê°€ localhostë¥¼ IPv6ë¡œ í•´ì„"ìœ¼ë¡œ ì¸í•œ ì—°ê²° ì‹¤íŒ¨ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•¨ (`source/lbjlaq/Antigravity-Manager/src-tauri/src/modules/oauth_server.rs:53-113` ì°¸ì¡°).
:::

### 4ë‹¨ê³„: Refresh Tokenìœ¼ë¡œ ìˆ˜ë™ ì¶”ê°€ (ì¼ê´„ ì§€ì›)

**ì´ìœ **
`refresh_token`ì„ ì–»ì„ ìˆ˜ ì—†ê±°ë‚˜(ë˜ëŠ” "ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥ ìì‚°"ì„ ë” ì„ í˜¸í•  ë•Œ), Refresh Tokenìœ¼ë¡œ ì§ì ‘ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ë” ì œì–´ ê°€ëŠ¥.

1. `Refresh Token` íƒ­ìœ¼ë¡œ ì „í™˜.
2. `refresh_token`ì„ í…ìŠ¤íŠ¸ ìƒìì— ë¶™ì—¬ë„£ê¸°.

ì§€ì›í•˜ëŠ” ì…ë ¥ í˜•ì‹ (í”„ë¡ íŠ¸ì—”ë“œê°€ ë¶„ì„í•˜ì—¬ ì¼ê´„ ì¶”ê°€):

| ì…ë ¥ ìœ í˜• | ì˜ˆì‹œ | ë¶„ì„ ë¡œì§ |
| --- | --- | --- |
| ìˆœìˆ˜ í† í° í…ìŠ¤íŠ¸ | `1//abc...` | ì •ê·œì‹ ì¶”ì¶œ: `/1\/\/[a-zA-Z0-9_\-]+/g` (`AddAccountDialog.tsx:213-220` ì°¸ì¡°) |
| í° í…ìŠ¤íŠ¸ ë‚´ì— í¬í•¨ | ë¡œê·¸/ë‚´ë³´ë‚´ê¸° í…ìŠ¤íŠ¸ì— ì—¬ëŸ¬ ê°œì˜ `1//...` í¬í•¨ | ì •ê·œì‹ ì¼ê´„ ì¶”ì¶œ ë° ì¤‘ë³µ ì œê±° (`AddAccountDialog.tsx:213-224` ì°¸ì¡°) |
| JSON ë°°ì—´ | `[{"refresh_token":"1//..."}]` | ë°°ì—´ ë¶„ì„ í›„ `item.refresh_token` ì¶”ì¶œ (`AddAccountDialog.tsx:198-207` ì°¸ì¡°) |

**Confirm** í´ë¦­ í›„, ëŒ€í™”ìƒìê°€ í† í° ìˆ˜ëŸ‰ë§Œí¼ ìˆœì°¨ì ìœ¼ë¡œ `onAdd("", token)` í˜¸ì¶œ (`AddAccountDialog.tsx:231-248` ì°¸ì¡°), ìµœì¢…ì ìœ¼ë¡œ ë°±ì—”ë“œ `add_account`ì— ì „ë‹¬.

**ì˜ˆìƒ í™”ë©´**:
- ëŒ€í™”ìƒìì— ì¼ê´„ ì§„ë„ í‘œì‹œ (ì˜ˆ: `1/5`)
- ì„±ê³µ í›„ `Accounts` ëª©ë¡ì— ìƒˆ ê³„ì • í‘œì‹œë¨

### 5ë‹¨ê³„: "ê³„ì • í’€ ì‚¬ìš© ê°€ëŠ¥" í™•ì¸

**ì´ìœ **
ì¶”ê°€ ì„±ê³µì´ "ì¦‰ì‹œ ì•ˆì •ì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥"ì„ ì˜ë¯¸í•˜ì§€ ì•ŠìŒ. ë°±ì—”ë“œëŠ” ì¶”ê°€ í›„ ìë™ìœ¼ë¡œ "í• ë‹¹ëŸ‰ ê°±ì‹ "ì„ íŠ¸ë¦¬ê±°í•˜ê³ , Proxy ì‹¤í–‰ ì‹œ í† í° í’€ ë¦¬ë¡œë“œë¥¼ ì‹œë„í•˜ì—¬ ë³€ê²½ ì¦‰ì‹œ ì ìš©.

ë‹¤ìŒ ë‘ ê°€ì§€ ì‹ í˜¸ë¡œ í™•ì¸:

1. ê³„ì •ì´ ëª©ë¡ì— í‘œì‹œë˜ê³  ì´ë©”ì¼ í‘œì‹œë¨ (ì´ë©”ì¼ì€ ë°±ì—”ë“œ `get_user_info`ì—ì„œ ì˜´, ì…ë ¥í•œ email ì•„ë‹˜).
2. ê³„ì • í• ë‹¹ëŸ‰/êµ¬ë… ì •ë³´ ê°±ì‹  ì‹œì‘ (ë°±ì—”ë“œëŠ” ìë™ìœ¼ë¡œ `internal_refresh_account_quota` í˜¸ì¶œ).

**ì˜ˆìƒ í™”ë©´**: ì¶”ê°€ í›„ ìˆ˜ë™ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨í•  í•„ìš” ì—†ìŒ, ê³„ì •ì— í• ë‹¹ëŸ‰ ì •ë³´ í‘œì‹œ ì‹œì‘ (ì„±ê³µ ì—¬ë¶€ëŠ” ì‹¤ì œ UI í‘œì‹œ ê¸°ì¤€).

## ì²´í¬í¬ì¸íŠ¸ âœ…

- ê³„ì • ëª©ë¡ì—ì„œ ìƒˆ ê³„ì •ì˜ ì´ë©”ì¼ í™•ì¸ ê°€ëŠ¥
- "loading" ìƒíƒœë¡œ ë„ˆë¬´ ì˜¤ë˜ ë¨¸ë¬¼ì§€ ì•ŠìŒ (OAuth ì½œë°± ì™„ë£Œ í›„ ë¹¨ë¦¬ ë§ˆë¬´ë¦¬ë˜ì–´ì•¼ í•¨)
- Proxy ì‹¤í–‰ ì¤‘ì¸ ê²½ìš°, ìƒˆ ê³„ì •ì´ ë¹ ë¥´ê²Œ ìŠ¤ì¼€ì¤„ë§ì— ì°¸ì—¬ (ë°±ì—”ë“œëŠ” ë¦¬ë¡œë“œ ì‹œë„)

## í”í•œ ì˜¤ë¥˜

### 1) OAuthì—ì„œ "Refresh Tokenì„ ê°€ì ¸ì˜¤ì§€ ëª»í•¨" ë©”ì‹œì§€

ë°±ì—”ë“œëŠ” `start_oauth_login/complete_oauth_login`ì—ì„œ `refresh_token` ì¡´ì¬ ì—¬ë¶€ë¥¼ ëª…ì‹œì ìœ¼ë¡œ í™•ì¸; ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ í•´ê²° ë°©ë²•ì´ í¬í•¨ëœ ì˜¤ë¥˜ ë©”ì‹œì§€ ë°˜í™˜ (`source/lbjlaq/Antigravity-Manager/src-tauri/src/commands/mod.rs:45-56` ì°¸ì¡°).

ì†ŒìŠ¤ ì½”ë“œì˜ í•´ê²° ë°©ë²•:

1. `https://myaccount.google.com/permissions` ì—´ê¸°
2. **Antigravity Tools**ì˜ ì•¡ì„¸ìŠ¤ ê¶Œí•œ ì·¨ì†Œ
3. ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ëŒì•„ê°€ OAuth ë‹¤ì‹œ ì§„í–‰

> ì´ ìˆ˜ì—…ì˜ Refresh Token ì±„ë„ë¡œ ì „í™˜í•  ìˆ˜ë„ ìˆìŒ.

### 2) ë¸Œë¼ìš°ì €ì—ì„œ `localhost refused to connect` ë©”ì‹œì§€

OAuth ì½œë°±ì€ ë¸Œë¼ìš°ì €ê°€ ë¡œì»¬ ì½œë°± ì£¼ì†Œë¥¼ ìš”ì²­í•´ì•¼ í•¨. ì‹¤íŒ¨ìœ¨ì„ ë‚®ì¶”ê¸° ìœ„í•´ ë°±ì—”ë“œëŠ”:

- `127.0.0.1`ê³¼ `::1`ì„ ë™ì‹œì— ìˆ˜ì‹  ëŒ€ê¸° ì‹œë„
- ë‘˜ ë‹¤ ì‚¬ìš© ê°€ëŠ¥í•  ë•Œë§Œ `localhost` ì‚¬ìš©, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê°•ì œë¡œ `127.0.0.1` ë˜ëŠ” `[::1]` ì‚¬ìš©

í•´ë‹¹ êµ¬í˜„ì€ `source/lbjlaq/Antigravity-Manager/src-tauri/src/modules/oauth_server.rs:53-113` ì°¸ì¡°.

### 3) ë‹¤ë¥¸ íƒ­ìœ¼ë¡œ ì „í™˜í•˜ë©´ OAuth ì¤€ë¹„ ì·¨ì†Œ

ëŒ€í™”ìƒìê°€ `OAuth`ì—ì„œ ë‹¤ë¥¸ íƒ­ìœ¼ë¡œ ì „í™˜í•˜ë©´, í”„ë¡ íŠ¸ì—”ë“œëŠ” `cancelOAuthLogin()`ì„ í˜¸ì¶œí•˜ê³  URLì„ ë¹„ì›€ (`AddAccountDialog.tsx:127-136` ì°¸ì¡°).

ê¶Œí•œ ë¶€ì—¬ ì¤‘ì¸ ê²½ìš°, íƒ­ì„ ì „í™˜í•˜ì§€ ë§ˆì„¸ìš”.

### 4) Refresh Tokenì˜ ì˜¬ë°”ë¥¸/ì˜ëª»ëœ ì˜ˆì‹œ

| ì˜ˆì‹œ | ì¸ì‹ ì—¬ë¶€ | ì›ì¸ |
| --- | --- | --- |
| `1//0gAbC...` | âœ“ | `1//` ì ‘ë‘ì‚¬ ê·œì¹™ ì¤€ìˆ˜ (`AddAccountDialog.tsx:215-219` ì°¸ì¡°) |
| `ya29.a0...` | âœ— | í”„ë¡ íŠ¸ì—”ë“œ ì¶”ì¶œ ê·œì¹™ ë¶ˆì¼ì¹˜, ì˜ëª»ëœ ì…ë ¥ìœ¼ë¡œ ê°„ì£¼ë¨ |

## ì´ ìˆ˜ì—… ìš”ì•½

- OAuth: "ë¹ ë¦„"ì— ì í•©, ë§í¬ë¥¼ ë³µì‚¬í•˜ì—¬ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê³  ìë™/ìˆ˜ë™ìœ¼ë¡œ ë§ˆë¬´ë¦¬ ì§€ì›
- Refresh Token: "ì•ˆì •"ê³¼ "ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥"ì— ì í•©, í…ìŠ¤íŠ¸/JSONì—ì„œ `1//...` ì¼ê´„ ì¶”ì¶œ ì§€ì›
- `refresh_token`ì„ ì–»ì„ ìˆ˜ ì—†ì„ ë•Œ, ì˜¤ë¥˜ ë©”ì‹œì§€ì— ë”°ë¼ ê¶Œí•œ ì·¨ì†Œ í›„ ì¬ì‹œë„í•˜ê±°ë‚˜ Refresh Token ì±„ë„ë¡œ ì „í™˜

## ë‹¤ìŒ ìˆ˜ì—… ì˜ˆê³ 

ë‹¤ìŒ ìˆ˜ì—…ì—ì„œëŠ” ë” í™•ì‹¤í•œ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤: ê³„ì • í’€ì„ "ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥ ìì‚°"ìœ¼ë¡œ ë³€í™˜.

> **[ê³„ì • ë°±ì—… ë° ë§ˆì´ê·¸ë ˆì´ì…˜: ê°€ì ¸ì˜¤ê¸°/ë‚´ë³´ë‚´ê¸°, V1/DB í•« ë§ˆì´ê·¸ë ˆì´ì…˜](../backup-migrate/)** í•™ìŠµ.

---

## ë¶€ë¡: ì†ŒìŠ¤ ì½”ë“œ ì°¸ì¡°

<details>
<summary><strong>í™•ì¥í•˜ì—¬ ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜ ë³´ê¸°</strong></summary>

> ì—…ë°ì´íŠ¸ ì‹œê°„: 2026-01-23

| ê¸°ëŠ¥ | íŒŒì¼ ê²½ë¡œ | í–‰ ë²ˆí˜¸ |
| --- | --- | --- |
| Accounts í˜ì´ì§€ì— ì¶”ê°€ ëŒ€í™”ìƒì ë§ˆìš´íŠ¸ | [`src/pages/Accounts.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/pages/Accounts.tsx#L267-L731) | 267-731 |
| OAuth URL ë¯¸ë¦¬ ìƒì„± + ì½œë°± ì´ë²¤íŠ¸ ìë™ ë§ˆë¬´ë¦¬ | [`src/components/accounts/AddAccountDialog.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/accounts/AddAccountDialog.tsx#L49-L125) | 49-125 |
| OAuth ì½œë°± ì´ë²¤íŠ¸ê°€ `completeOAuthLogin()` íŠ¸ë¦¬ê±° | [`src/components/accounts/AddAccountDialog.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/accounts/AddAccountDialog.tsx#L67-L109) | 67-109 |
| Refresh Token ì¼ê´„ ë¶„ì„ ë° ì¤‘ë³µ ì œê±° | [`src/components/accounts/AddAccountDialog.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/components/accounts/AddAccountDialog.tsx#L185-L268) | 185-268 |
| í”„ë¡ íŠ¸ì—”ë“œ Tauri commands í˜¸ì¶œ (add/OAuth/cancel) | [`src/services/accountService.ts`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/services/accountService.ts#L5-L91) | 5-91 |
| ë°±ì—”ë“œ add_account: email ë¬´ì‹œ, refresh_tokenìœ¼ë¡œ ì‹¤ì œ ì´ë©”ì¼ ê°€ì ¸ì™€ì„œ ì €ì¥ | [`src-tauri/src/commands/mod.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/mod.rs#L19-L60) | 19-60 |
| ë°±ì—”ë“œ OAuth: refresh_token ëˆ„ë½ í™•ì¸ ë° ê¶Œí•œ ì·¨ì†Œ í•´ê²° ë°©ë²• ì œê³µ | [`src-tauri/src/commands/mod.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/mod.rs#L38-L79) | 38-79 |
| OAuth ì½œë°± server: IPv4/IPv6 ë™ì‹œ ìˆ˜ì‹  ë° redirect_uri ì„ íƒ | [`src-tauri/src/modules/oauth_server.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/modules/oauth_server.rs#L43-L113) | 43-113 |
| OAuth ì½œë°±ì´ `code` ë¶„ì„í•˜ì—¬ `oauth-callback-received` ì „ì†¡ | [`src-tauri/src/modules/oauth_server.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/modules/oauth_server.rs#L140-L180) | 140-180 |

**í•µì‹¬ ì´ë²¤íŠ¸ ì´ë¦„**:
- `oauth-url-generated`: ë°±ì—”ë“œì—ì„œ OAuth URL ìƒì„± í›„ í”„ë¡ íŠ¸ì—”ë“œë¡œ ì „ì†¡ (`oauth_server.rs:250-252` ì°¸ì¡°)
- `oauth-callback-received`: ë°±ì—”ë“œì—ì„œ ì½œë°± ìˆ˜ì‹  ë° code ë¶„ì„ í›„ í”„ë¡ íŠ¸ì—”ë“œì— ì•Œë¦¼ (`oauth_server.rs:177-180` / `oauth_server.rs:232-235` ì°¸ì¡°)

**í•µì‹¬ ëª…ë ¹**:
- `prepare_oauth_url`: ê¶Œí•œ ë¶€ì—¬ ë§í¬ ë¯¸ë¦¬ ìƒì„± ë° ì½œë°± ìˆ˜ì‹  ì‹œì‘ (`src-tauri/src/commands/mod.rs:469-473` ì°¸ì¡°)
- `start_oauth_login`: ê¸°ë³¸ ë¸Œë¼ìš°ì € ì—´ê¸° ë° ì½œë°± ëŒ€ê¸° (`src-tauri/src/commands/mod.rs:339-401` ì°¸ì¡°)
- `complete_oauth_login`: ë¸Œë¼ìš°ì € ì—´ì§€ ì•Šê³ , ì½œë°±ë§Œ ëŒ€ê¸°í•˜ì—¬ í† í° êµí™˜ ì™„ë£Œ (`src-tauri/src/commands/mod.rs:405-467` ì°¸ì¡°)
- `add_account`: refresh_tokenìœ¼ë¡œ ê³„ì • ì €ì¥ (`src-tauri/src/commands/mod.rs:19-60` ì°¸ì¡°)

</details>
