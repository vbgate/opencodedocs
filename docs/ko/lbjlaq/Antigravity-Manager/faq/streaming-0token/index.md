---
title: "ìŠ¤íŠ¸ë¦¬ë° ì¤‘ë‹¨: 0 Token ë¬¸ì œ í•´ê²° | Antigravity-Manager"
sidebarTitle: "ìê°€ ì¹˜ìœ  ë˜ëŠ” ìˆ˜ë™ ê°œì…"
subtitle: "ìŠ¤íŠ¸ë¦¬ë° ì¤‘ë‹¨/0 Token/ì„œëª… ë¬´íš¨: ìê°€ ì¹˜ìœ  ë©”ì»¤ë‹ˆì¦˜ ë° ë¬¸ì œ í•´ê²° ê²½ë¡œ"
description: "Antigravity Toolsì˜ ìŠ¤íŠ¸ë¦¬ë° ì¤‘ë‹¨, 0 Token ë° ì„œëª… ë¬´íš¨ ë¬¸ì œ í•´ê²° ê²½ë¡œë¥¼ í•™ìŠµí•©ë‹ˆë‹¤. /v1/messages ë˜ëŠ” Gemini ìŠ¤íŠ¸ë¦¬ë° í˜¸ì¶œì„ í™•ì¸í•˜ê³ , peek ì‚¬ì „ ì½ê¸° ë° ë°±ì˜¤í”„ ì¬ì‹œë„ë¥¼ ì´í•´í•˜ì—¬ Proxy Monitor ë° ë¡œê·¸ë¡œ ë¹ ë¥´ê²Œ ì›ì¸ì„ ì°¾ì•„ë‚´ê³  ê³„ì • ë¡œí…Œì´ì…˜ì´ í•„ìš”í•œì§€ íŒë‹¨í•˜ì„¸ìš”."
tags:
  - "faq"
  - "streaming"
  - "troubleshooting"
  - "retry"
prerequisite:
  - "start-getting-started"
  - "start-first-run-data"
  - "advanced-monitoring"
  - "advanced-scheduling"
order: 5
---
# ìŠ¤íŠ¸ë¦¬ë° ì¤‘ë‹¨/0 Token/ì„œëª… ë¬´íš¨: ìê°€ ì¹˜ìœ  ë©”ì»¤ë‹ˆì¦˜ ë° ë¬¸ì œ í•´ê²° ê²½ë¡œ

Antigravity Toolsì—ì„œ `/v1/messages`(Anthropic í˜¸í™˜) ë˜ëŠ” Gemini ë„¤ì´í‹°ë¸Œ ìŠ¤íŠ¸ë¦¬ë° ì¸í„°í˜ì´ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ "ìŠ¤íŠ¸ë¦¬ë° ì¶œë ¥ ì¤‘ë‹¨", "200 OKì´ì§€ë§Œ 0 Token", "Invalid `signature`"ì™€ ê°™ì€ ë¬¸ì œë¥¼ ë§Œë‚˜ë©´, ì´ ê³¼ì •ì€ UIì—ì„œ ë¡œê·¸ê¹Œì§€ ë¬¸ì œ í•´ê²° ê²½ë¡œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ì´ ê³¼ì •ì„ í†µí•´ í•  ìˆ˜ ìˆëŠ” ê²ƒ

- 0 Token/ì¤‘ë‹¨ ë¬¸ì œê°€ í”„ë¡ì‹œì—ì„œ ë³´í†µ "peek ì‚¬ì „ ì½ê¸°"ì— ì˜í•´ ë¨¼ì € ì°¨ë‹¨ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ
- Proxy Monitorì—ì„œ ì´ë²ˆ ìš”ì²­ì˜ ê³„ì •ê³¼ ë§¤í•‘ ëª¨ë¸(`X-Account-Email` / `X-Mapped-Model`)ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ
- ë¡œê·¸ë¥¼ í†µí•´ "ìƒë¥˜ ìŠ¤íŠ¸ë¦¼ ì¡°ê¸° ì¢…ë£Œ", "ë°±ì˜¤í”„ ì¬ì‹œë„", "ê³„ì • ë¡œí…Œì´ì…˜" ë˜ëŠ” "ì„œëª… ìˆ˜ì • ì¬ì‹œë„"ì¸ì§€ íŒë‹¨í•  ìˆ˜ ìˆìŒ
- ì–´ë–¤ ìƒí™©ì—ì„œ í”„ë¡ì‹œ ìê°€ ì¹˜ìœ ë¥¼ ê¸°ë‹¤ë¦¬ê³  ì–´ë–¤ ìƒí™©ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ê°œì…í•´ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ

## í˜„ì¬ ê²ªê³  ìˆëŠ” ë¬¸ì œ

ë‹¤ìŒê³¼ ê°™ì€ "í˜„ìƒ"ì„ ë³¼ ìˆ˜ ìˆì§€ë§Œ ì–´ë””ì„œë¶€í„° ì‹œì‘í•´ì•¼ í• ì§€ ëª¨ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- ìŠ¤íŠ¸ë¦¬ë° ì¶œë ¥ì´ ì¤‘ê°„ì— ì¤‘ë‹¨ë˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ "ë©ˆì¶¤"ì²˜ëŸ¼ ë” ì´ìƒ ì§„í–‰í•˜ì§€ ì•ŠìŒ
- 200 OKì´ì§€ë§Œ `usage.output_tokens=0` ë˜ëŠ” ë‚´ìš©ì´ ë¹„ì–´ ìˆìŒ
- 400 ì˜¤ë¥˜ì— `Invalid \`signature\``, `Corrupted thought signature`, `must be \`thinking\`` ë“±ì´ ë‚˜íƒ€ë‚¨

ì´ëŸ¬í•œ ë¬¸ì œì˜ ëŒ€ë¶€ë¶„ì€ "ìš”ì²­ì„ ì˜ëª» ì‘ì„±í•œ ê²ƒ"ì´ ì•„ë‹ˆë¼ ìŠ¤íŠ¸ë¦¬ë° ì „ì†¡, ìƒë¥˜ ì†ë„ ì œí•œ/ë³€ë™, ë˜ëŠ” ê³¼ê±° ë©”ì‹œì§€ì— í¬í•¨ëœ ì„œëª… ë¸”ë¡ì´ ìƒë¥˜ ê²€ì¦ì„ íŠ¸ë¦¬ê±°í•œ ê²ƒì…ë‹ˆë‹¤. Antigravity ToolsëŠ” í”„ë¡ì‹œ ê³„ì¸µì—ì„œ ì—¬ëŸ¬ ë°©ì–´ì„ ì„ ë§Œë“¤ì—ˆìœ¼ë©°, ê³ ì • ê²½ë¡œì— ë”°ë¼ í™•ì¸í•˜ê¸°ë§Œ í•˜ë©´ ì–´ë””ì„œ ë§‰íˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 0 Tokenì´ë€?

**0 Token**ì€ ë³´í†µ í•œ ë²ˆì˜ ìš”ì²­ì´ ìµœì¢…ì ìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” `output_tokens=0`ì´ë©° "ë‚´ìš©ì´ ìƒì„±ë˜ì§€ ì•Šì€ ê²ƒ"ì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. Antigravity Toolsì—ì„œ ë” ì¼ë°˜ì ì¸ ì›ì¸ì€ "ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µì´ ì‹¤ì œ ì¶œë ¥ ì „ì— ëë‚˜ê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒ"í•˜ëŠ” ê²ƒì´ì§€, ëª¨ë¸ì´ ì •ë§ë¡œ 0ê°œ í† í°ì„ ìƒì„±í•œ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. í”„ë¡ì‹œëŠ” peek ì‚¬ì „ ì½ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ëŸ¬í•œ ë¹ˆ ì‘ë‹µì„ ì°¨ë‹¨í•˜ê³  ì¬ì‹œë„ë¥¼ íŠ¸ë¦¬ê±°í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤.

## í”„ë¡ì‹œê°€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìˆ˜í–‰í•˜ëŠ” ì„¸ ê°€ì§€ ì‘ì—…(ë¨¼ì € ë©˜íƒˆ ëª¨ë¸ êµ¬ì¶•)

### 1) ë¹„ìŠ¤íŠ¸ë¦¬ë° ìš”ì²­ì´ ìë™ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ë³€í™˜ë  ìˆ˜ ìˆìŒ

`/v1/messages` ê²½ë¡œì—ì„œ í”„ë¡ì‹œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ "í´ë¼ì´ì–¸íŠ¸ ë¹„ìŠ¤íŠ¸ë¦¬ë° ìš”ì²­"ì„ ìŠ¤íŠ¸ë¦¬ë° ìš”ì²­ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ìƒë¥˜ì— ìš”ì²­í•˜ê³ , SSEë¥¼ ë°›ì€ í›„ JSONìœ¼ë¡œ ìˆ˜ì§‘í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤(ì´ë ‡ê²Œ í•˜ëŠ” ì´ìœ ëŠ” ë¡œê·¸ì— "better quota"ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŒ).

ì†ŒìŠ¤ ì½”ë“œ ì¦ê±°: `src-tauri/src/proxy/handlers/claude.rs#L665-L913`.

### 2) Peek ì‚¬ì „ ì½ê¸°: "ì²« ë²ˆì§¸ ìœ íš¨ ë°ì´í„°"ë¥¼ ê¸°ë‹¤ë ¸ë‹¤ê°€ í´ë¼ì´ì–¸íŠ¸ì— ìŠ¤íŠ¸ë¦¼ ì „ë‹¬

`/v1/messages`ì˜ SSE ì¶œë ¥ì— ëŒ€í•´ í”„ë¡ì‹œëŠ” ë¨¼ì € `timeout + next()`ë¡œ ì‚¬ì „ ì½ê¸°ë¥¼ í•˜ì—¬ í•˜íŠ¸ë¹„íŠ¸/ì£¼ì„ í–‰(`:`ë¡œ ì‹œì‘)ì„ ê±´ë„ˆë›°ê³ , ì²« ë²ˆì§¸ "ë¹„ì–´ ìˆì§€ ì•Šê³  í•˜íŠ¸ë¹„íŠ¸ê°€ ì•„ë‹Œ" ë°ì´í„°ë¥¼ ì–»ì„ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ê³µì‹ì ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. peek ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜/ì‹œê°„ ì´ˆê³¼/ìŠ¤íŠ¸ë¦¼ ì¢…ë£Œê°€ ë°œìƒí•˜ë©´ ì§ì ‘ ë‹¤ìŒ ì‹œë„ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤(ë‹¤ìŒ ì‹œë„ëŠ” ë³´í†µ ê³„ì • ë¡œí…Œì´ì…˜ì„ íŠ¸ë¦¬ê±°í•¨).

ì†ŒìŠ¤ ì½”ë“œ ì¦ê±°: `src-tauri/src/proxy/handlers/claude.rs#L812-L926`; Gemini ë„¤ì´í‹°ë¸Œ ìŠ¤íŠ¸ë¦¬ë°ë„ ìœ ì‚¬í•œ peekê°€ ìˆìŒ: `src-tauri/src/proxy/handlers/gemini.rs#L117-L149`.

### 3) í†µí•© ë°±ì˜¤í”„ ì¬ì‹œë„ + ìƒíƒœ ì½”ë“œì— ë”°ë¼ "ê³„ì • ë¡œí…Œì´ì…˜ ì—¬ë¶€" ê²°ì •

í”„ë¡ì‹œëŠ” ì¼ë°˜ì ì¸ ìƒíƒœ ì½”ë“œì— ëŒ€í•´ ëª…í™•í•œ ë°±ì˜¤í”„ ì „ëµì„ ë§Œë“¤ì—ˆìœ¼ë©°, ì–´ë–¤ ìƒíƒœ ì½”ë“œê°€ ê³„ì • ë¡œí…Œì´ì…˜ì„ íŠ¸ë¦¬ê±°í•˜ëŠ”ì§€ ì •ì˜í–ˆìŠµë‹ˆë‹¤.

ì†ŒìŠ¤ ì½”ë“œ ì¦ê±°: `src-tauri/src/proxy/handlers/claude.rs#L117-L236`.

## ğŸ’ ì‹œì‘ ì „ ì¤€ë¹„

- Proxy Monitorë¥¼ ì—´ ìˆ˜ ìˆìŒ(ì°¸ì¡°: [Proxy Monitor: ìš”ì²­ ë¡œê·¸, í•„í„°, ì„¸ë¶€ ì •ë³´ ë³µì› ë° ë‚´ë³´ë‚´ê¸°](../../advanced/monitoring/))
- ë¡œê·¸ê°€ ë°ì´í„° ë””ë ‰í† ë¦¬ì˜ `logs/` ì•„ë˜ì— ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆìŒ(ì°¸ì¡°: [ì²« ì‹œì‘ í•„ìˆ˜: ë°ì´í„° ë””ë ‰í† ë¦¬, ë¡œê·¸, íŠ¸ë ˆì´ ë° ìë™ ì‹œì‘](../../start/first-run-data/))

## ë”°ë¼ í•´ë³´ì„¸ìš”

### 1ë‹¨ê³„: í˜¸ì¶œ ì¤‘ì¸ ì¸í„°í˜ì´ìŠ¤ ê²½ë¡œ í™•ì¸

**ì´ìœ **
`/v1/messages`(claude handler)ì™€ Gemini ë„¤ì´í‹°ë¸Œ(gemini handler)ì˜ ìê°€ ì¹˜ìœ  ì„¸ë¶€ ì •ë³´ê°€ ë‹¤ë¥´ë¯€ë¡œ, ê²½ë¡œë¥¼ ë¨¼ì € í™•ì¸í•˜ì—¬ ì˜ëª»ëœ ë¡œê·¸ í‚¤ì›Œë“œì—ì„œ ì‹œê°„ì„ ë‚­ë¹„í•˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.

Proxy Monitorë¥¼ ì—´ê³  ì‹¤íŒ¨í•œ ìš”ì²­ì„ ì°¾ì•„ ë¨¼ì € Pathë¥¼ ê¸°ë¡í•˜ì„¸ìš”:

- `/v1/messages`: `src-tauri/src/proxy/handlers/claude.rs`ì˜ ë¡œì§ ë³´ê¸°
- `/v1beta/models/...:streamGenerateContent`: `src-tauri/src/proxy/handlers/gemini.rs`ì˜ ë¡œì§ ë³´ê¸°

**ì˜ˆìƒ ê²°ê³¼**: ìš”ì²­ ê¸°ë¡ì—ì„œ URL/ë©”ì„œë“œ/ìƒíƒœ ì½”ë“œ(ë° ìš”ì²­ ì†Œìš” ì‹œê°„)ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 2ë‹¨ê³„: ì‘ë‹µ í—¤ë”ì—ì„œ "ê³„ì • + ë§¤í•‘ ëª¨ë¸" ì¡ê¸°

**ì´ìœ **
ë™ì¼í•œ ìš”ì²­ì´ ì‹¤íŒ¨/ì„±ê³µí•˜ëŠ”ì§€ëŠ” ì¢…ì¢… "ì´ë²ˆì— ì–´ë–¤ ê³„ì •ì„ ì„ íƒí–ˆëŠ”ì§€" "ì–´ë–¤ ìƒë¥˜ ëª¨ë¸ë¡œ ë¼ìš°íŒ…ë˜ì—ˆëŠ”ì§€"ì— ë‹¬ë ¤ ìˆìŠµë‹ˆë‹¤. í”„ë¡ì‹œëŠ” ì´ ë‘ ê°€ì§€ ì •ë³´ë¥¼ ì‘ë‹µ í—¤ë”ì— ì“°ë¯€ë¡œ ë¨¼ì € ê¸°ë¡í•˜ê³  ë‚˜ì¤‘ì— ë¡œê·¸ë¥¼ ë³´ê³  ëŒ€ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‹¤íŒ¨í•œ ìš”ì²­ì—ì„œ ë‹¤ìŒ ì‘ë‹µ í—¤ë”ë¥¼ ì°¾ìœ¼ì„¸ìš”:

- `X-Account-Email`
- `X-Mapped-Model`

ì´ ë‘ í•­ëª©ì€ `/v1/messages`ì™€ Gemini handler ëª¨ë‘ì—ì„œ ì„¤ì •ë©ë‹ˆë‹¤(ì˜ˆ: `/v1/messages`ì˜ SSE ì‘ë‹µ: `src-tauri/src/proxy/handlers/claude.rs#L887-L896`; Gemini SSE: `src-tauri/src/proxy/handlers/gemini.rs#L235-L245`).

**ì˜ˆìƒ ê²°ê³¼**: `X-Account-Email`ì€ ì´ë©”ì¼ì´ê³  `X-Mapped-Model`ì€ ì‹¤ì œ ìš”ì²­ëœ ëª¨ë¸ëª…ì…ë‹ˆë‹¤.

### 3ë‹¨ê³„: app.logì—ì„œ "peek ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨"ì¸ì§€ íŒë‹¨

**ì´ìœ **
peek ì‹¤íŒ¨ëŠ” ë³´í†µ "ìƒë¥˜ê°€ ì „í˜€ ìœ íš¨ ë°ì´í„°ë¥¼ ì¶œë ¥í•˜ì§€ ì•ŠìŒ"ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œì˜ ê°€ì¥ ì¼ë°˜ì ì¸ ì²˜ë¦¬ ë°©ë²•ì€ ì¬ì‹œë„/ê³„ì • ë¡œí…Œì´ì…˜ì…ë‹ˆë‹¤. í”„ë¡ì‹œê°€ íŠ¸ë¦¬ê±°í–ˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.

ë¨¼ì € ë¡œê·¸ íŒŒì¼ì„ ì°¾ìœ¼ì„¸ìš”(ë¡œê·¸ ë””ë ‰í† ë¦¬ëŠ” ë°ì´í„° ë””ë ‰í† ë¦¬ì˜ `logs/`ì´ë©°, í•˜ë£¨ë³„ë¡œ `app.log*`ì— ë¡¤ë§ ì‘ì„±ë¨).

::: code-group

```bash [macOS/Linux]
ls -lt "$HOME/.antigravity_tools/logs" | head
```

```powershell [Windows]
Get-ChildItem -Force (Join-Path $HOME ".antigravity_tools\logs") | Sort-Object LastWriteTime -Descending | Select-Object -First 5
```

:::

ê·¸ ë‹¤ìŒ ìµœì‹  `app.log*`ì—ì„œ ë‹¤ìŒ í‚¤ì›Œë“œë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”:

- `/v1/messages`(claude handler): `Stream error during peek` / `Stream ended during peek` / `Timeout waiting for first data`(`src-tauri/src/proxy/handlers/claude.rs#L828-L864`)
- Gemini ë„¤ì´í‹°ë¸Œ ìŠ¤íŠ¸ë¦¬ë°: `[Gemini] Empty first chunk received, retrying...` / `Stream error during peek` / `Stream ended immediately`(`src-tauri/src/proxy/handlers/gemini.rs#L117-L144`)

**ì˜ˆìƒ ê²°ê³¼**: peek ì¬ì‹œë„ê°€ íŠ¸ë¦¬ê±°ë˜ë©´ ë¡œê·¸ì— "retrying..."ì™€ ìœ ì‚¬í•œ ê²½ê³ ê°€ ë‚˜íƒ€ë‚˜ë©° ê·¸ í›„ ë‹¤ìŒ ì‹œë„ attemptë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤(ë³´í†µ ê³„ì • ë¡œí…Œì´ì…˜ì„ ê°€ì ¸ì˜´).

### 4ë‹¨ê³„: 400/Invalid `signature`ì¸ ê²½ìš° í”„ë¡ì‹œê°€ "ì„œëª… ìˆ˜ì • ì¬ì‹œë„"ë¥¼ í–ˆëŠ”ì§€ í™•ì¸

**ì´ìœ **
ì„œëª… ìœ í˜• ì˜¤ë¥˜ëŠ” ì¢…ì¢… ê³¼ê±° ë©”ì‹œì§€ì˜ Thinking ë¸”ë¡/ì„œëª… ë¸”ë¡ì´ ìƒë¥˜ ìš”êµ¬ ì‚¬í•­ì— ë§ì§€ ì•Šì•„ì„œ ë°œìƒí•©ë‹ˆë‹¤. Antigravity ToolsëŠ” "ê³¼ê±° thinking ë¸”ë¡ ë‹¤ìš´ê·¸ë ˆì´ë“œ + ìˆ˜ì • í”„ë¡¬í”„íŠ¸ ì£¼ì…"ìœ¼ë¡œ ì¬ì‹œë„ë¥¼ ì‹œë„í•©ë‹ˆë‹¤. ë¨¼ì € ìê°€ ì¹˜ìœ ê°€ ì™„ë£Œë˜ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤.

ë‹¤ìŒ ë‘ ê°€ì§€ ì‹ í˜¸ë¡œ ìˆ˜ì • ë¡œì§ì— ë“¤ì–´ê°”ëŠ”ì§€ íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. ë¡œê·¸ì— `Unexpected thinking signature error ... Retrying with all thinking blocks removed.`ê°€ ë‚˜íƒ€ë‚¨(`src-tauri/src/proxy/handlers/claude.rs#L999-L1025`)
2. ì´í›„ ê³¼ê±° `Thinking` ë¸”ë¡ì´ `Text`ë¡œ ë³€í™˜ë˜ê³  ë§ˆì§€ë§‰ user messageì— ìˆ˜ì • í”„ë¡¬í”„íŠ¸ê°€ ì¶”ê°€ë¨(`src-tauri/src/proxy/handlers/claude.rs#L1027-L1102`; Gemini handlerë„ `contents[].parts`ì— ë™ì¼í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì¶”ê°€í•¨: `src-tauri/src/proxy/handlers/gemini.rs#L300-L325`)

**ì˜ˆìƒ ê²°ê³¼**: í”„ë¡ì‹œëŠ” ì§§ì€ ì§€ì—° í›„ ìë™ìœ¼ë¡œ ì¬ì‹œë„(`FixedDelay`)í•˜ë©° ë‹¤ìŒ ì‹œë„ attemptë¡œ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ âœ…

- [ ] Proxy Monitorì—ì„œ ìš”ì²­ ê²½ë¡œ(`/v1/messages` ë˜ëŠ” Gemini ë„¤ì´í‹°ë¸Œ)ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ
- [ ] ì´ë²ˆ ìš”ì²­ì˜ `X-Account-Email`ê³¼ `X-Mapped-Model`ì„ ì–»ì„ ìˆ˜ ìˆìŒ
- [ ] `logs/app.log*`ì—ì„œ peek/ì¬ì‹œë„ ê´€ë ¨ í‚¤ì›Œë“œë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆìŒ
- [ ] 400 ì„œëª… ì˜¤ë¥˜ë¥¼ ë§Œë‚¬ì„ ë•Œ í”„ë¡ì‹œê°€ "ìˆ˜ì • í”„ë¡¬í”„íŠ¸ + thinking ë¸”ë¡ ì •ë¦¬" ì¬ì‹œë„ ë¡œì§ì— ë“¤ì–´ê°”ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŒ

## ì¼ë°˜ì ì¸ ë¬¸ì œ

| ì‹œë‚˜ë¦¬ì˜¤ | í•  ìˆ˜ ìˆëŠ” ë°©ë²•(âŒ) | ê¶Œì¥ ë°©ë²•(âœ“) |
|--- | --- | ---|
| 0 Tokenì„ ë³´ë©´ ì¦‰ì‹œ ìˆ˜ë™ìœ¼ë¡œ ì—¬ëŸ¬ ë²ˆ ì¬ì‹œë„ | í´ë¼ì´ì–¸íŠ¸ ì¬ì‹œë„ ë²„íŠ¼ì„ ê³„ì† ëˆ„ë¥´ê³  ë¡œê·¸ë¥¼ ì „í˜€ ë³´ì§€ ì•ŠìŒ | ë¨¼ì € Proxy Monitor + app.logë¥¼ í•œ ë²ˆ ë³´ê³  peek ë‹¨ê³„ ì¡°ê¸° ì¢…ë£Œì¸ì§€ í™•ì¸(ìë™ ì¬ì‹œë„/ë¡œí…Œì´ì…˜ë¨) |
| `Invalid \`signature\``ë¥¼ ë§Œë‚˜ë©´ ì¦‰ì‹œ ë°ì´í„° ë””ë ‰í† ë¦¬ë¥¼ ë¹„ì›€ | `.antigravity_tools` ì „ì²´ë¥¼ ì‚­ì œí•˜ì—¬ ê³„ì •/í†µê³„ ëª¨ë‘ ì‚¬ë¼ì§ | ë¨¼ì € í”„ë¡ì‹œê°€ "ì„œëª… ìˆ˜ì • ì¬ì‹œë„"ë¥¼ ìˆ˜í–‰í•˜ê²Œ í•˜ì„¸ìš”. ë¡œê·¸ê°€ ëª…í™•í•˜ê²Œ ë³µêµ¬ ë¶ˆê°€ëŠ¥í•˜ë‹¤ê³  í‘œì‹œí•  ë•Œë§Œ ìˆ˜ë™ ê°œì… ê³ ë ¤ |
| "ì„œë²„ ì¸¡ ë³€ë™"ì„ "ê³„ì • ê³ ì¥"ìœ¼ë¡œ ì·¨ê¸‰ | 400/503/529ëŠ” ë¬´ì¡°ê±´ ê³„ì • ë¡œí…Œì´ì…˜ | ë¡œí…Œì´ì…˜ íš¨ê³¼ ì—¬ë¶€ëŠ” ìƒíƒœ ì½”ë“œì— ë”°ë¼ ë‹¤ë¦„. í”„ë¡ì‹œ ìì²´ì— `should_rotate_account(...)` ê·œì¹™ì´ ìˆìŒ(`src-tauri/src/proxy/handlers/claude.rs#L226-L236`) |

## ì´ ê³¼ì • ìš”ì•½

- 0 Token/ìŠ¤íŠ¸ë¦¬ë° ì¤‘ë‹¨ì€ í”„ë¡ì‹œì—ì„œ ë³´í†µ ë¨¼ì € peek ì‚¬ì „ ì½ê¸°ë¥¼ ê±°ì¹¨. peek ë‹¨ê³„ ì‹¤íŒ¨ëŠ” ì¬ì‹œë„ë¥¼ íŠ¸ë¦¬ê±°í•˜ê³  ë‹¤ìŒ attempt attemptë¡œ ë“¤ì–´ê°
- `/v1/messages`ëŠ” ë¹„ìŠ¤íŠ¸ë¦¬ë° ìš”ì²­ì„ ë‚´ë¶€ì ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ë³€í™˜í•œ í›„ JSONìœ¼ë¡œ ë‹¤ì‹œ ìˆ˜ì§‘í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ "ì™œ ìŠ¤íŠ¸ë¦¬ë° ë¬¸ì œì²˜ëŸ¼ ë³´ì´ëŠ”ì§€" ì´í•´ì— ì˜í–¥ì„ ì¤Œ
- ì„œëª… ë¬´íš¨ ìœ í˜• 400 ì˜¤ë¥˜ëŠ” í”„ë¡ì‹œê°€ "ìˆ˜ì • í”„ë¡¬í”„íŠ¸ + thinking ë¸”ë¡ ì •ë¦¬"ë¡œ ì¬ì‹œë„ë¥¼ ì‹œë„í•˜ë¯€ë¡œ ì´ ìê°€ ì¹˜ìœ  ê²½ë¡œê°€ í†µê³¼í•˜ëŠ”ì§€ ìš°ì„  í™•ì¸

## ë‹¤ìŒ ê³¼ì • ì˜ˆê³ 

> ë‹¤ìŒ ê³¼ì •ì—ì„œëŠ” **[ì—”ë“œí¬ì¸íŠ¸ ë¹ ë¥¸ ì°¸ì¡°í‘œ](../../appendix/endpoints/)**ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤.

---

## ë¶€ë¡: ì†ŒìŠ¤ ì½”ë“œ ì°¸ì¡°

<details>
<summary><strong>í´ë¦­í•˜ì—¬ ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜ í¼ì¹˜ê¸°</strong></summary>

> ì—…ë°ì´íŠ¸ ì‹œê°„: 2026-01-23

| ê¸°ëŠ¥ | íŒŒì¼ ê²½ë¡œ | í–‰ ë²ˆí˜¸ |
|--- | --- | ---|
| Claude handler: ë°±ì˜¤í”„ ì¬ì‹œë„ ì „ëµ + ë¡œí…Œì´ì…˜ ê·œì¹™ | [`src-tauri/src/proxy/handlers/claude.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/claude.rs#L117-L236) | 117-236 |
| Claude handler: ë‚´ë¶€ì—ì„œ ë¹„ìŠ¤íŠ¸ë¦¬ë°ì„ ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ë³€í™˜(better quota) | [`src-tauri/src/proxy/handlers/claude.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/claude.rs#L665-L776) | 665-776 |
| Claude handler: peek ì‚¬ì „ ì½ê¸°(í•˜íŠ¸ë¹„íŠ¸/ì£¼ì„ ê±´ë„ˆëœ€, ë¹ˆ ìŠ¤íŠ¸ë¦¼ ë°©ì§€) | [`src-tauri/src/proxy/handlers/claude.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/claude.rs#L812-L926) | 812-926 |
| Claude handler: 400 ì„œëª…/ë¸”ë¡ ìˆœì„œ ì˜¤ë¥˜ ìˆ˜ì • ì¬ì‹œë„ | [`src-tauri/src/proxy/handlers/claude.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/claude.rs#L999-L1102) | 999-1102 |
| Gemini handler: peek ì‚¬ì „ ì½ê¸°(ë¹ˆ ìŠ¤íŠ¸ë¦¼ 200 OK ë°©ì§€) | [`src-tauri/src/proxy/handlers/gemini.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/gemini.rs#L117-L149) | 117-149 |
| Gemini handler: 400 ì„œëª… ì˜¤ë¥˜ ìˆ˜ì • í”„ë¡¬í”„íŠ¸ ì£¼ì… | [`src-tauri/src/proxy/handlers/gemini.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/gemini.rs#L300-L325) | 300-325 |
| ì„œëª… ìºì‹œ(ì„¸ ê³„ì¸µ: tool/family/session, TTL/ìµœì†Œ ê¸¸ì´ í¬í•¨) | [`src-tauri/src/proxy/signature_cache.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/signature_cache.rs#L5-L207) | 5-207 |
| Claude SSE ë³€í™˜: ì„œëª… ìº¡ì²˜ ë° ì„œëª… ìºì‹œ ì‘ì„± | [`src-tauri/src/proxy/mappers/claude/streaming.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/mappers/claude/streaming.rs#L639-L787) | 639-787 |

**í•µì‹¬ ìƒìˆ˜**:
- `MAX_RETRY_ATTEMPTS = 3`: ìµœëŒ€ ì¬ì‹œì‹œ íšŸìˆ˜(`src-tauri/src/proxy/handlers/claude.rs#L27`)
- `SIGNATURE_TTL = 2 * 60 * 60` ì´ˆ: ì„œëª… ìºì‹œ TTL(`src-tauri/src/proxy/signature_cache.rs#L6`)
- `MIN_SIGNATURE_LENGTH = 50`: ì„œëª… ìµœì†Œ ê¸¸ì´(`src-tauri/src/proxy/signature_cache.rs#L7`)

**í•µì‹¬ í•¨ìˆ˜**:
- `determine_retry_strategy(...)`: ìƒíƒœ ì½”ë“œì— ë”°ë¼ ë°±ì˜¤í”„ ì „ëµ ì„ íƒ(`src-tauri/src/proxy/handlers/claude.rs#L117-L167`)
- `should_rotate_account(...)`: ìƒíƒœ ì½”ë“œì— ë”°ë¼ ê³„ì • ë¡œí…Œì´ì…˜ ì—¬ë¶€ ê²°ì •(`src-tauri/src/proxy/handlers/claude.rs#L226-L236`)
- `SignatureCache::cache_session_signature(...)`: ì„¸ì…˜ ì„œëª… ìºì‹œ(`src-tauri/src/proxy/signature_cache.rs#L149-L188`)

</details>
