---
title: "ê³„ì • ì„ íƒ ì „ëµ: ë‹¤ì¤‘ ê³„ì • ë¡œí…Œì´ì…˜ ì„¤ì • | Antigravity Auth"
sidebarTitle: "ì „ëµ ì„ íƒìœ¼ë¡œ í• ë‹¹ëŸ‰ ë‚­ë¹„ ë°©ì§€"
subtitle: "ê³„ì • ì„ íƒ ì „ëµ: sticky, round-robin, hybrid ëª¨ë²” ì‚¬ë¡€"
description: "sticky, round-robin, hybrid ì„¸ ê°€ì§€ ê³„ì • ì„ íƒ ì „ëµì„ í•™ìŠµí•©ë‹ˆë‹¤. ê³„ì • ìˆ˜ì— ë”°ë¼ ìµœì ì˜ ì„¤ì •ì„ ì„ íƒí•˜ì—¬ í• ë‹¹ëŸ‰ í™œìš©ë¥ ê³¼ ìš”ì²­ ë¶„ì‚°ì„ ìµœì í™”í•˜ê³  ì†ë„ ì œí•œì„ ë°©ì§€í•˜ì„¸ìš”."
tags:
  - "ë‹¤ì¤‘ ê³„ì •"
  - "ë¡œë“œ ë°¸ëŸ°ì‹±"
  - "ì„¤ì •"
  - "ê³ ê¸‰"
prerequisite:
  - "advanced-multi-account-setup"
order: 1
---

# ê³„ì • ì„ íƒ ì „ëµ: sticky, round-robin, hybrid ëª¨ë²” ì‚¬ë¡€

## í•™ìŠµ ëª©í‘œ

Google ê³„ì • ìˆ˜ì™€ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ì í•©í•œ ê³„ì • ì„ íƒ ì „ëµì„ ì„ íƒí•˜ê³  ì„¤ì •í•©ë‹ˆë‹¤:
- 1ê°œ ê³„ì • â†’ `sticky` ì „ëµìœ¼ë¡œ í”„ë¡¬í”„íŠ¸ ìºì‹œ ìœ ì§€
- 2-3ê°œ ê³„ì • â†’ `hybrid` ì „ëµìœ¼ë¡œ ì§€ëŠ¥ì  ìš”ì²­ ë¶„ì‚°
- 4ê°œ ì´ìƒ ê³„ì • â†’ `round-robin` ì „ëµìœ¼ë¡œ ì²˜ë¦¬ëŸ‰ ê·¹ëŒ€í™”

"ëª¨ë“  ê³„ì •ì´ ì†ë„ ì œí•œì— ê±¸ë ¸ëŠ”ë° ì‹¤ì œ í• ë‹¹ëŸ‰ì€ ë‚¨ì•„ìˆëŠ”" ë‚œê°í•œ ìƒí™©ì„ ë°©ì§€í•©ë‹ˆë‹¤.

## í˜„ì¬ ê²ªê³  ìˆëŠ” ë¬¸ì œ

ì—¬ëŸ¬ Google ê³„ì •ì„ ì„¤ì •í–ˆì§€ë§Œ:
- í• ë‹¹ëŸ‰ í™œìš©ë¥ ì„ ê·¹ëŒ€í™”í•˜ë ¤ë©´ ì–´ë–¤ ì „ëµì„ ì‚¬ìš©í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ìŒ
- ëª¨ë“  ê³„ì •ì´ ì†ë„ ì œí•œì— ê±¸ë ¸ëŠ”ë° íŠ¹ì • ê³„ì •ì˜ í• ë‹¹ëŸ‰ì€ ì•„ì§ ë‚¨ì•„ìˆëŠ” ê²½ìš°ê°€ ìì£¼ ë°œìƒ
- ë³‘ë ¬ ì—ì´ì „íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì—¬ëŸ¬ í•˜ìœ„ í”„ë¡œì„¸ìŠ¤ê°€ í•­ìƒ ê°™ì€ ê³„ì •ì„ ì‚¬ìš©í•˜ì—¬ ì†ë„ ì œí•œ ë°œìƒ

## í•µì‹¬ ê°œë…

### ê³„ì • ì„ íƒ ì „ëµì´ë€

Antigravity Auth í”ŒëŸ¬ê·¸ì¸ì€ ì—¬ëŸ¬ Google ê³„ì • ê°„ì— ëª¨ë¸ ìš”ì²­ì„ ë¶„ë°°í•˜ëŠ” ë°©ë²•ì„ ê²°ì •í•˜ëŠ” ì„¸ ê°€ì§€ ê³„ì • ì„ íƒ ì „ëµì„ ì§€ì›í•©ë‹ˆë‹¤:

| ì „ëµ | ë™ì‘ | ì ìš© ì‹œë‚˜ë¦¬ì˜¤ |
| --- | --- | --- |
| `sticky` | í˜„ì¬ ê³„ì •ì´ ì†ë„ ì œí•œì— ê±¸ë¦¬ì§€ ì•ŠëŠ” í•œ ê³„ì† ê°™ì€ ê³„ì • ì‚¬ìš© | ë‹¨ì¼ ê³„ì •, í”„ë¡¬í”„íŠ¸ ìºì‹œ í•„ìš” ì‹œ |
| `round-robin` | ë§¤ ìš”ì²­ë§ˆë‹¤ ë‹¤ìŒ ì‚¬ìš© ê°€ëŠ¥í•œ ê³„ì •ìœ¼ë¡œ ìˆœí™˜ | ë‹¤ì¤‘ ê³„ì •, ì²˜ë¦¬ëŸ‰ ê·¹ëŒ€í™” |
| `hybrid`(ê¸°ë³¸ê°’) | ê±´ê°• ì ìˆ˜ + Token bucket + LRUë¥¼ ê²°í•©í•œ ì§€ëŠ¥ì  ì„ íƒ | 2-3ê°œ ê³„ì •, ì„±ëŠ¥ê³¼ ì•ˆì •ì„± ê· í˜• |

::: info ì™œ ì „ëµì´ í•„ìš”í•œê°€ìš”?
Googleì€ ê° ê³„ì •ì— ì†ë„ ì œí•œì„ ì ìš©í•©ë‹ˆë‹¤. ê³„ì •ì´ í•˜ë‚˜ë¿ì´ë©´ ë¹ˆë²ˆí•œ ìš”ì²­ìœ¼ë¡œ ì‰½ê²Œ ì†ë„ ì œí•œì— ê±¸ë¦½ë‹ˆë‹¤. ë‹¤ì¤‘ ê³„ì •ì€ ë¡œí…Œì´ì…˜ì´ë‚˜ ì§€ëŠ¥ì  ì„ íƒì„ í†µí•´ ìš”ì²­ì„ ë¶„ì‚°ì‹œì¼œ ë‹¨ì¼ ê³„ì •ì˜ ê³¼ë„í•œ í• ë‹¹ëŸ‰ ì†Œë¹„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
:::

### ì„¸ ê°€ì§€ ì „ëµì˜ ì‘ë™ ì›ë¦¬

#### 1. Sticky ì „ëµ (ê³ ì •)

**í•µì‹¬ ë¡œì§**: ì†ë„ ì œí•œì— ê±¸ë¦´ ë•Œê¹Œì§€ í˜„ì¬ ê³„ì •ì„ ìœ ì§€í•©ë‹ˆë‹¤.

**ì¥ì **:
- í”„ë¡¬í”„íŠ¸ ìºì‹œ ìœ ì§€, ë™ì¼ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë” ë¹ ë¥¸ ì‘ë‹µ
- ê³„ì • ì‚¬ìš© íŒ¨í„´ì´ ì•ˆì •ì ì´ì–´ì„œ ìœ„í—˜ ê°ì§€ íŠ¸ë¦¬ê±° ê°€ëŠ¥ì„± ë‚®ìŒ

**ë‹¨ì **:
- ë‹¤ì¤‘ ê³„ì • í• ë‹¹ëŸ‰ í™œìš© ë¶ˆê· í˜•
- ì†ë„ ì œí•œ ë³µêµ¬ ì „ê¹Œì§€ ë‹¤ë¥¸ ê³„ì • ì‚¬ìš© ë¶ˆê°€

**ì ìš© ì‹œë‚˜ë¦¬ì˜¤**:
- ê³„ì •ì´ í•˜ë‚˜ë¿ì¸ ê²½ìš°
- í”„ë¡¬í”„íŠ¸ ìºì‹œ ì¤‘ì‹œ (ì˜ˆ: ì¥ê¸° ëŒ€í™”)

#### 2. Round-Robin ì „ëµ (ìˆœí™˜)

**í•µì‹¬ ë¡œì§**: ë§¤ ìš”ì²­ë§ˆë‹¤ ë‹¤ìŒ ì‚¬ìš© ê°€ëŠ¥í•œ ê³„ì •ìœ¼ë¡œ ìˆœí™˜í•˜ë©° ë°˜ë³µ ì‚¬ìš©í•©ë‹ˆë‹¤.

**ì¥ì **:
- ê°€ì¥ ê· í˜• ì¡íŒ í• ë‹¹ëŸ‰ í™œìš©
- ë™ì‹œ ì²˜ë¦¬ëŸ‰ ê·¹ëŒ€í™”
- ê³ ë™ì‹œì„± ì‹œë‚˜ë¦¬ì˜¤ì— ì í•©

**ë‹¨ì **:
- ê³„ì • ê±´ê°• ìƒíƒœë¥¼ ê³ ë ¤í•˜ì§€ ì•Šì•„ ì†ë„ ì œí•œì—ì„œ ë§‰ ë³µêµ¬ëœ ê³„ì •ì„ ì„ íƒí•  ìˆ˜ ìˆìŒ
- í”„ë¡¬í”„íŠ¸ ìºì‹œ í™œìš© ë¶ˆê°€

**ì ìš© ì‹œë‚˜ë¦¬ì˜¤**:
- 4ê°œ ì´ìƒì˜ ê³„ì •
- ìµœëŒ€ ì²˜ë¦¬ëŸ‰ì´ í•„ìš”í•œ ë°°ì¹˜ ì‘ì—…
- ë³‘ë ¬ ì—ì´ì „íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (`pid_offset_enabled`ì™€ í•¨ê»˜ ì‚¬ìš©)

#### 3. Hybrid ì „ëµ (í˜¼í•©, ê¸°ë³¸ê°’)

**í•µì‹¬ ë¡œì§**: ì„¸ ê°€ì§€ ìš”ì†Œë¥¼ ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤í•˜ì—¬ ìµœì ì˜ ê³„ì •ì„ ì„ íƒí•©ë‹ˆë‹¤:

**ì ìˆ˜ ê³µì‹**:
```
ì´ì  = ê±´ê°• ì ìˆ˜ Ã— 2 + Token ì ìˆ˜ Ã— 5 + ì‹ ì„ ë„ ì ìˆ˜ Ã— 0.1
```

- **ê±´ê°• ì ìˆ˜** (0-200): ê³„ì •ì˜ ì„±ê³µ/ì‹¤íŒ¨ ì´ë ¥ ê¸°ë°˜
  - ì„±ê³µ ìš”ì²­: +1ì 
  - ì†ë„ ì œí•œ: -10ì 
  - ê¸°íƒ€ ì‹¤íŒ¨ (ì¸ì¦, ë„¤íŠ¸ì›Œí¬): -20ì 
  - ì´ˆê¸°ê°’: 70ì , ìµœì†Œ 0ì , ìµœëŒ€ 100ì 
  - ë§¤ì‹œê°„ 2ì  íšŒë³µ (ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„)

- **Token ì ìˆ˜** (0-500): Token bucket ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜
  - ê° ê³„ì • ìµœëŒ€ 50 token, ì´ˆê¸° 50 token
  - ë¶„ë‹¹ 6 token íšŒë³µ
  - ìš”ì²­ë‹¹ 1 token ì†Œë¹„
  - Token ì ìˆ˜ = (í˜„ì¬ token / 50) Ã— 100 Ã— 5

- **ì‹ ì„ ë„ ì ìˆ˜** (0-360): ë§ˆì§€ë§‰ ì‚¬ìš© ì´í›„ ê²½ê³¼ ì‹œê°„ ê¸°ë°˜
  - ë§ˆì§€ë§‰ ì‚¬ìš© ì´í›„ ì‹œê°„ì´ ê¸¸ìˆ˜ë¡ ì ìˆ˜ê°€ ë†’ìŒ
  - ìµœëŒ€ 3600ì´ˆ (1ì‹œê°„) í›„ ìµœëŒ€ê°’ ë„ë‹¬

**ì¥ì **:
- ê±´ê°•ë„ê°€ ë‚®ì€ ê³„ì •ì„ ì§€ëŠ¥ì ìœ¼ë¡œ íšŒí”¼
- Token bucketìœ¼ë¡œ ì§‘ì¤‘ ìš”ì²­ìœ¼ë¡œ ì¸í•œ ì†ë„ ì œí•œ ë°©ì§€
- LRU (ê°€ì¥ ì˜¤ë˜ ë¯¸ì‚¬ìš© ìš°ì„ )ë¡œ ê³„ì •ì— ì¶©ë¶„í•œ íœ´ì‹ ì‹œê°„ ì œê³µ
- ì„±ëŠ¥ê³¼ ì•ˆì •ì„±ì„ ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤

**ë‹¨ì **:
- ì•Œê³ ë¦¬ì¦˜ì´ ë³µì¡í•˜ì—¬ round-robinë§Œí¼ ì§ê´€ì ì´ì§€ ì•ŠìŒ
- 2ê°œ ê³„ì •ì¼ ë•Œ íš¨ê³¼ê°€ ëšœë ·í•˜ì§€ ì•ŠìŒ

**ì ìš© ì‹œë‚˜ë¦¬ì˜¤**:
- 2-3ê°œ ê³„ì • (ê¸°ë³¸ ì „ëµ)
- í• ë‹¹ëŸ‰ í™œìš©ë¥ ê³¼ ì•ˆì •ì„±ì˜ ê· í˜• í•„ìš” ì‹œ

### ì „ëµ ì„ íƒ ë¹ ë¥¸ ì°¸ì¡°í‘œ

READMEì™€ CONFIGURATION.mdì˜ ê¶Œì¥ ì‚¬í•­ ê¸°ì¤€:

| ì„¤ì • | ê¶Œì¥ ì „ëµ | ì´ìœ  |
| --- | --- | --- |
| **1ê°œ ê³„ì •** | `sticky` | ë¡œí…Œì´ì…˜ ë¶ˆí•„ìš”, í”„ë¡¬í”„íŠ¸ ìºì‹œ ìœ ì§€ |
| **2-3ê°œ ê³„ì •** | `hybrid`(ê¸°ë³¸ê°’) | ì§€ëŠ¥ì  ë¡œí…Œì´ì…˜, ê³¼ë„í•œ ì†ë„ ì œí•œ ë°©ì§€ |
| **4ê°œ ì´ìƒ ê³„ì •** | `round-robin` | ì²˜ë¦¬ëŸ‰ ê·¹ëŒ€í™”, ê°€ì¥ ê· í˜• ì¡íŒ í• ë‹¹ëŸ‰ í™œìš© |
| **ë³‘ë ¬ ì—ì´ì „íŠ¸** | `round-robin` + `pid_offset_enabled: true` | ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ë‹¤ë¥¸ ê³„ì • ì‚¬ìš© |

## ğŸ’ ì‹œì‘ ì „ ì¤€ë¹„

::: warning ì‚¬ì „ í™•ì¸
ë‹¤ìŒì„ ì™„ë£Œí–ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
- [x] ë‹¤ì¤‘ ê³„ì • ì„¤ì • (ìµœì†Œ 2ê°œ Google ê³„ì •)
- [x] [ì´ì¤‘ í• ë‹¹ëŸ‰ ì‹œìŠ¤í…œ](/ko/NoeFabris/opencode-antigravity-auth/platforms/dual-quota-system/) ì´í•´
:::

## ë”°ë¼í•˜ê¸°

### 1ë‹¨ê³„: í˜„ì¬ ì„¤ì • í™•ì¸

**ì™œ í•„ìš”í•œê°€**
í˜„ì¬ ì„¤ì • ìƒíƒœë¥¼ ë¨¼ì € íŒŒì•…í•˜ì—¬ ì¤‘ë³µ ìˆ˜ì •ì„ ë°©ì§€í•©ë‹ˆë‹¤.

**ì‘ì—…**

í”ŒëŸ¬ê·¸ì¸ ì„¤ì • íŒŒì¼ì„ í™•ì¸í•©ë‹ˆë‹¤:

```bash
cat ~/.config/opencode/antigravity.json
```

**ì˜ˆìƒ ê²°ê³¼**:
```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json"
}
```

íŒŒì¼ì´ ì—†ìœ¼ë©´ í”ŒëŸ¬ê·¸ì¸ì€ ê¸°ë³¸ ì„¤ì •ì„ ì‚¬ìš©í•©ë‹ˆë‹¤ (`account_selection_strategy` = `"hybrid"`).

### 2ë‹¨ê³„: ê³„ì • ìˆ˜ì— ë”°ë¥¸ ì „ëµ ì„¤ì •

**ì™œ í•„ìš”í•œê°€**
ê³„ì • ìˆ˜ì— ë”°ë¼ ì í•©í•œ ì „ëµì´ ë‹¤ë¥´ë©°, ì˜ëª»ëœ ì „ëµ ì„ íƒì€ í• ë‹¹ëŸ‰ ë‚­ë¹„ë‚˜ ë¹ˆë²ˆí•œ ì†ë„ ì œí•œì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

::: code-group

```bash [1ê°œ ê³„ì • - Sticky ì „ëµ]
cat > ~/.config/opencode/antigravity.json << 'EOF'
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "sticky"
}
EOF
```

```bash [2-3ê°œ ê³„ì • - Hybrid ì „ëµ(ê¸°ë³¸ê°’)]
cat > ~/.config/opencode/antigravity.json << 'EOF'
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "hybrid"
}
EOF
```

```bash [4ê°œ ì´ìƒ ê³„ì • - Round-Robin ì „ëµ]
cat > ~/.config/opencode/antigravity.json << 'EOF'
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "round-robin"
}
EOF
```

:::

**ì˜ˆìƒ ê²°ê³¼**: ì„¤ì • íŒŒì¼ì´ í•´ë‹¹ ì „ëµìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.

### 3ë‹¨ê³„: PID ì˜¤í”„ì…‹ í™œì„±í™” (ë³‘ë ¬ ì—ì´ì „íŠ¸ ì‹œë‚˜ë¦¬ì˜¤)

**ì™œ í•„ìš”í•œê°€**
oh-my-opencode ë“±ì˜ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ë³‘ë ¬ ì—ì´ì „íŠ¸ë¥¼ ìƒì„±í•˜ë©´ ì—¬ëŸ¬ í•˜ìœ„ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ê°™ì€ ì‹œì‘ ê³„ì •ì—ì„œ ì„ íƒì„ ì‹œì‘í•˜ì—¬ ê³„ì • ê²½ìŸê³¼ ì†ë„ ì œí•œì´ ë°œìƒí•©ë‹ˆë‹¤.

**ì‘ì—…**

ì„¤ì •ì„ ìˆ˜ì •í•˜ì—¬ PID ì˜¤í”„ì…‹ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

```bash
cat > ~/.config/opencode/antigravity.json << 'EOF'
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "account_selection_strategy": "round-robin",
  "pid_offset_enabled": true
}
EOF
```

**ì˜ˆìƒ ê²°ê³¼**: `pid_offset_enabled`ê°€ `true`ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.

**ì‘ë™ ì›ë¦¬**:
- ê° í”„ë¡œì„¸ìŠ¤ëŠ” PID (í”„ë¡œì„¸ìŠ¤ ID)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì˜¤í”„ì…‹ì„ ê³„ì‚°
- ì˜¤í”„ì…‹ = `PID % ê³„ì • ìˆ˜`
- ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ë¥¸ ì‹œì‘ ê³„ì •ì„ ìš°ì„  ì‚¬ìš©
- ì˜ˆì‹œ: 3ê°œ ê³„ì •, PID 100, 101, 102ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ê°ê° ê³„ì • 1, 2, 0ì„ ì‚¬ìš©

### 4ë‹¨ê³„: ì „ëµ ì ìš© í™•ì¸

**ì™œ í•„ìš”í•œê°€**
ì„¤ì •ì´ ì˜¬ë°”ë¥´ê³  ì „ëµì´ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

**ì‘ì—…**

ì—¬ëŸ¬ ë™ì‹œ ìš”ì²­ì„ ë³´ë‚´ê³  ê³„ì • ì „í™˜ì„ ê´€ì°°í•©ë‹ˆë‹¤:

```bash
# ë””ë²„ê·¸ ë¡œê·¸ í™œì„±í™”
export OPENCODE_ANTIGRAVITY_DEBUG=1

# 5ê°œ ìš”ì²­ ë³´ë‚´ê¸°
for i in {1..5}; do
  opencode run "Test $i" --model=google/antigravity-gemini-3-pro &
done
wait
```

**ì˜ˆìƒ ê²°ê³¼**:
- ë¡œê·¸ì—ì„œ ë‹¤ë¥¸ ìš”ì²­ì´ ë‹¤ë¥¸ ê³„ì •ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸
- `account-switch` ì´ë²¤íŠ¸ì—ì„œ ê³„ì • ì „í™˜ ê¸°ë¡

ì˜ˆì‹œ ë¡œê·¸ (round-robin ì „ëµ):
```
[DEBUG] Selected account: user1@gmail.com (index: 0) - reason: rotation
[DEBUG] Selected account: user2@gmail.com (index: 1) - reason: rotation
[DEBUG] Selected account: user3@gmail.com (index: 2) - reason: rotation
[DEBUG] Selected account: user1@gmail.com (index: 0) - reason: rotation
[DEBUG] Selected account: user2@gmail.com (index: 1) - reason: rotation
```

### 5ë‹¨ê³„: ê³„ì • ê±´ê°• ìƒíƒœ ëª¨ë‹ˆí„°ë§ (Hybrid ì „ëµ)

**ì™œ í•„ìš”í•œê°€**
Hybrid ì „ëµì€ ê±´ê°• ì ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³„ì •ì„ ì„ íƒí•˜ë¯€ë¡œ, ê±´ê°• ìƒíƒœë¥¼ íŒŒì•…í•˜ë©´ ì„¤ì •ì´ ì ì ˆí•œì§€ íŒë‹¨í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

**ì‘ì—…**

ë””ë²„ê·¸ ë¡œê·¸ì—ì„œ ê±´ê°• ì ìˆ˜ë¥¼ í™•ì¸í•©ë‹ˆë‹¤:

```bash
export OPENCODE_ANTIGRAVITY_DEBUG=2 opencode run "Hello" --model=google/antigravity-gemini-3-pro
```

**ì˜ˆìƒ ê²°ê³¼**:
```
[VERBOSE] Health scores: {
  "0": { "score": 85, "consecutiveFailures": 0 },
  "1": { "score": 60, "consecutiveFailures": 2 },
  "2": { "score": 70, "consecutiveFailures": 0 }
}
[DEBUG] Selected account: user1@gmail.com (index: 0) - hybrid score: 270.2
```

**í•´ì„**:
- ê³„ì • 0: ê±´ê°• ì ìˆ˜ 85 (ìš°ìˆ˜)
- ê³„ì • 1: ê±´ê°• ì ìˆ˜ 60 (ì‚¬ìš© ê°€ëŠ¥, ì—°ì† 2íšŒ ì‹¤íŒ¨)
- ê³„ì • 2: ê±´ê°• ì ìˆ˜ 70 (ì–‘í˜¸)
- ìµœì¢… ì„ íƒ: ê³„ì • 0, ì¢…í•© ì ìˆ˜ 270.2

## ì²´í¬í¬ì¸íŠ¸ âœ…

::: tip ì„¤ì • ì ìš© í™•ì¸ ë°©ë²•
1. ì„¤ì • íŒŒì¼ì—ì„œ `account_selection_strategy` ê°’ í™•ì¸
2. ì—¬ëŸ¬ ìš”ì²­ì„ ë³´ë‚´ê³  ë¡œê·¸ì—ì„œ ê³„ì • ì „í™˜ ë™ì‘ ê´€ì°°
3. Hybrid ì „ëµ: ê±´ê°• ì ìˆ˜ê°€ ë‚®ì€ ê³„ì •ì˜ ì„ íƒ ë¹ˆë„ê°€ ë‚®ì•„ì•¼ í•¨
4. Round-robin ì „ëµ: ê³„ì •ì´ ìˆœí™˜ ì‚¬ìš©ë˜ë©° íŠ¹ì • ê³„ì • ì„ í˜¸ ì—†ìŒ
:::

## ì£¼ì˜ì‚¬í•­

### âŒ ê³„ì • ìˆ˜ì™€ ì „ëµ ë¶ˆì¼ì¹˜

**ì˜ëª»ëœ í–‰ë™**:
- 2ê°œ ê³„ì •ë§Œ ìˆëŠ”ë° round-robin ì‚¬ìš©, ë¹ˆë²ˆí•œ ì „í™˜ ë°œìƒ
- 5ê°œ ê³„ì •ì´ ìˆëŠ”ë° sticky ì‚¬ìš©, í• ë‹¹ëŸ‰ í™œìš© ë¶ˆê· í˜•

**ì˜¬ë°”ë¥¸ ë°©ë²•**: ë¹ ë¥¸ ì°¸ì¡°í‘œì— ë”°ë¼ ì „ëµì„ ì„ íƒí•©ë‹ˆë‹¤.

### âŒ ë³‘ë ¬ ì—ì´ì „íŠ¸ì—ì„œ PID ì˜¤í”„ì…‹ ë¯¸í™œì„±í™”

**ì˜ëª»ëœ í–‰ë™**:
- ì—¬ëŸ¬ ë³‘ë ¬ ì—ì´ì „íŠ¸ê°€ ë™ì‹œì— ê°™ì€ ê³„ì • ì‚¬ìš©
- ê³„ì •ì´ ë¹ ë¥´ê²Œ ì†ë„ ì œí•œì— ê±¸ë¦¼

**ì˜¬ë°”ë¥¸ ë°©ë²•**: `pid_offset_enabled: true`ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

### âŒ ê±´ê°• ì ìˆ˜ ë¬´ì‹œ (Hybrid ì „ëµ)

**ì˜ëª»ëœ í–‰ë™**:
- íŠ¹ì • ê³„ì •ì´ ìì£¼ ì†ë„ ì œí•œì— ê±¸ë¦¬ëŠ”ë°ë„ ê³„ì† ë†’ì€ ë¹ˆë„ë¡œ ì‚¬ìš©
- ê±´ê°• ì ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ ë¬¸ì œ ê³„ì •ì„ íšŒí”¼í•˜ì§€ ì•ŠìŒ

**ì˜¬ë°”ë¥¸ ë°©ë²•**: ë””ë²„ê·¸ ë¡œê·¸ì—ì„œ ê±´ê°• ì ìˆ˜ë¥¼ ì •ê¸°ì ìœ¼ë¡œ í™•ì¸í•˜ê³ , ì´ìƒì´ ìˆìœ¼ë©´ (ì˜ˆ: íŠ¹ì • ê³„ì •ì˜ ì—°ì† ì‹¤íŒ¨ íšŸìˆ˜ > 5) í•´ë‹¹ ê³„ì • ì œê±° ë˜ëŠ” ì „ëµ ë³€ê²½ì„ ê³ ë ¤í•©ë‹ˆë‹¤.

### âŒ ì´ì¤‘ í• ë‹¹ëŸ‰ í’€ê³¼ ë‹¨ì¼ í• ë‹¹ëŸ‰ ì „ëµ í˜¼ìš©

**ì˜ëª»ëœ í–‰ë™**:
- Gemini ëª¨ë¸ì— `:antigravity` ì ‘ë¯¸ì‚¬ë¥¼ ì‚¬ìš©í•˜ì—¬ Antigravity í• ë‹¹ëŸ‰ í’€ ê°•ì œ ì‚¬ìš©
- ë™ì‹œì— `quota_fallback: false` ì„¤ì •
- íŠ¹ì • í• ë‹¹ëŸ‰ í’€ì´ ì†Œì§„ë˜ë©´ ë‹¤ë¥¸ í’€ë¡œ fallback ë¶ˆê°€

**ì˜¬ë°”ë¥¸ ë°©ë²•**: [ì´ì¤‘ í• ë‹¹ëŸ‰ ì‹œìŠ¤í…œ](/ko/NoeFabris/opencode-antigravity-auth/platforms/dual-quota-system/)ì„ ì´í•´í•˜ê³  í•„ìš”ì— ë”°ë¼ `quota_fallback`ì„ ì„¤ì •í•©ë‹ˆë‹¤.

## ì´ë²ˆ ê°•ì˜ ìš”ì•½

| ì „ëµ | í•µì‹¬ íŠ¹ì§• | ì ìš© ì‹œë‚˜ë¦¬ì˜¤ |
| --- | --- | --- |
| `sticky` | ì†ë„ ì œí•œê¹Œì§€ ê³„ì • ìœ ì§€ | 1ê°œ ê³„ì •, í”„ë¡¬í”„íŠ¸ ìºì‹œ í•„ìš” ì‹œ |
| `round-robin` | ê³„ì • ìˆœí™˜ ì‚¬ìš© | 4ê°œ ì´ìƒ ê³„ì •, ì²˜ë¦¬ëŸ‰ ê·¹ëŒ€í™” |
| `hybrid` | ê±´ê°• + Token + LRU ì§€ëŠ¥ì  ì„ íƒ | 2-3ê°œ ê³„ì •, ì„±ëŠ¥ê³¼ ì•ˆì •ì„± ê· í˜• |

**ì£¼ìš” ì„¤ì •**:
- `account_selection_strategy`: ì „ëµ ì„¤ì • (`sticky` / `round-robin` / `hybrid`)
- `pid_offset_enabled`: ë³‘ë ¬ ì—ì´ì „íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ í™œì„±í™” (`true`)
- `quota_fallback`: Gemini ì´ì¤‘ í• ë‹¹ëŸ‰ í’€ fallback (`true` / `false`)

**í™•ì¸ ë°©ë²•**:
- ë””ë²„ê·¸ ë¡œê·¸ í™œì„±í™”: `OPENCODE_ANTIGRAVITY_DEBUG=1`
- ê³„ì • ì „í™˜ ë¡œê·¸ì™€ ê±´ê°• ì ìˆ˜ í™•ì¸
- ë‹¤ë¥¸ ìš”ì²­ì´ ì‚¬ìš©í•˜ëŠ” ê³„ì • ì¸ë±ìŠ¤ ê´€ì°°

## ë‹¤ìŒ ê°•ì˜ ì˜ˆê³ 

> ë‹¤ìŒ ê°•ì˜ì—ì„œëŠ” **[ì†ë„ ì œí•œ ì²˜ë¦¬](/ko/NoeFabris/opencode-antigravity-auth/advanced/rate-limit-handling/)**ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤.
>
> ë°°ìš¸ ë‚´ìš©:
> - ë‹¤ì–‘í•œ ìœ í˜•ì˜ 429 ì˜¤ë¥˜ ì´í•´ (í• ë‹¹ëŸ‰ ì†Œì§„, ì†ë„ ì œí•œ, ìš©ëŸ‰ ì†Œì§„)
> - ìë™ ì¬ì‹œë„ì™€ ë°±ì˜¤í”„ ì•Œê³ ë¦¬ì¦˜ì˜ ì‘ë™ ì›ë¦¬
> - ì–¸ì œ ê³„ì •ì„ ì „í™˜í•˜ê³  ì–¸ì œ ë¦¬ì…‹ì„ ê¸°ë‹¤ë ¤ì•¼ í•˜ëŠ”ì§€

---

## ë¶€ë¡: ì†ŒìŠ¤ ì½”ë“œ ì°¸ì¡°

<details>
<summary><strong>í´ë¦­í•˜ì—¬ ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜ ë³´ê¸°</strong></summary>

> ì—…ë°ì´íŠ¸ ì‹œê°„: 2026-01-23

| ê¸°ëŠ¥ | íŒŒì¼ ê²½ë¡œ | ë¼ì¸ ë²ˆí˜¸ |
| --- | --- | --- |
| ê³„ì • ì„ íƒ ì „ëµ ì§„ì…ì  | [`src/plugin/accounts.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/accounts.ts#L340-L412) | 340-412 |
| Sticky ì „ëµ êµ¬í˜„ | [`src/plugin/accounts.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/accounts.ts#L395-L411) | 395-411 |
| --- | --- | --- |
| Hybrid ì „ëµ êµ¬í˜„ | [`src/plugin/accounts.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/accounts.ts#L358-L383) | 358-383 |
| ê±´ê°• ì ìˆ˜ ì‹œìŠ¤í…œ | [`src/plugin/rotation.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/rotation.ts#L14-L163) | 14-163 |
| Token bucket ì‹œìŠ¤í…œ | [`src/plugin/rotation.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/rotation.ts#L290-L402) | 290-402 |
| LRU ì„ íƒ ì•Œê³ ë¦¬ì¦˜ | [`src/plugin/rotation.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/rotation.ts#L215-L288) | 215-288 |
| PID ì˜¤í”„ì…‹ ë¡œì§ | [`src/plugin/accounts.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/accounts.ts#L387-L393) | 387-393 |
| ì„¤ì • Schema | [`src/plugin/config/schema.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/schema.ts) | íŒŒì¼ ì°¸ì¡° |

**ì£¼ìš” ìƒìˆ˜**:
- `DEFAULT_HEALTH_SCORE_CONFIG.initial = 70`: ìƒˆ ê³„ì • ì´ˆê¸° ê±´ê°• ì ìˆ˜
- `DEFAULT_HEALTH_SCORE_CONFIG.minUsable = 50`: ê³„ì • ìµœì†Œ ì‚¬ìš© ê°€ëŠ¥ ê±´ê°• ì ìˆ˜
- `DEFAULT_TOKEN_BUCKET_CONFIG.maxTokens = 50`: ê° ê³„ì • ìµœëŒ€ token ìˆ˜
- `DEFAULT_TOKEN_BUCKET_CONFIG.regenerationRatePerMinute = 6`: ë¶„ë‹¹ íšŒë³µ token ìˆ˜

**ì£¼ìš” í•¨ìˆ˜**:
- `getCurrentOrNextForFamily()`: ì „ëµì— ë”°ë¥¸ ê³„ì • ì„ íƒ
- `selectHybridAccount()`: Hybrid ì „ëµ ì ìˆ˜ ì„ íƒ ì•Œê³ ë¦¬ì¦˜
- `getScore()`: ê³„ì • ê±´ê°• ì ìˆ˜ ì¡°íšŒ (ì‹œê°„ íšŒë³µ í¬í•¨)
- `hasTokens()` / `consume()`: Token bucket í™•ì¸ ë° ì†Œë¹„
- `sortByLruWithHealth()`: LRU + ê±´ê°• ì ìˆ˜ ì •ë ¬

</details>
