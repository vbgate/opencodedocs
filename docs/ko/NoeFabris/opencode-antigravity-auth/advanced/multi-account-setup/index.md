---
title: "ë‹¤ì¤‘ ê³„ì • ì„¤ì •: ì¿¼í„° í’€ë§ ë° ë¡œë“œ ë°¸ëŸ°ì‹± | opencode-antigravity-auth"
sidebarTitle: "ë‹¤ì¤‘ ê³„ì • ì‹œë„í•˜ê¸°"
subtitle: "ë‹¤ì¤‘ ê³„ì • ì„¤ì •: ì¿¼í„° í’€ë§ ë° ë¡œë“œ ë°¸ëŸ°ì‹±"
description: "ë‹¤ì¤‘ Google ê³„ì •ì„ êµ¬ì„±í•˜ì—¬ ì¿¼í„° í’€ë§ ë° ë¡œë“œ ë°¸ëŸ°ì‹±ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. ë“€ì–¼ ì¿¼í„° ì‹œìŠ¤í…œ, ê³„ì • ì„ íƒ ì „ëµ ë° PID ì˜¤í”„ì…‹ êµ¬ì„±ì„ ë§ˆìŠ¤í„°í•˜ì—¬ API ì¿¼í„° í™œìš©ë„ë¥¼ ê·¹ëŒ€í™”í•˜ì„¸ìš”."
tags:
  - "advanced"
  - "multi-account"
  - "load-balancing"
  - "quota-management"
prerequisite:
  - "start-quick-install"
  - "start-first-auth-login"
order: 4
---

# ë‹¤ì¤‘ ê³„ì • ì„¤ì •: ì¿¼í„° í’€ë§ ë° ë¡œë“œ ë°¸ëŸ°ì‹±

## í•™ìŠµ ì™„ë£Œ í›„ í•  ìˆ˜ ìˆëŠ” ê²ƒ

- ë‹¤ìˆ˜ì˜ Google ê³„ì •ì„ ì¶”ê°€í•˜ì—¬ ì´ ì¿¼í„° í•œë„ í–¥ìƒ
- ë“€ì–¼ ì¿¼í„° ì‹œìŠ¤í…œì„ ì´í•´í•˜ê³  Antigravity ë° Gemini CLI ì¿¼í„° í’€ì„ íš¨ê³¼ì ìœ¼ë¡œ í™œìš©
- ê³„ì • ìˆ˜ì™€ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ì ì ˆí•œ ë¡œë“œ ë°¸ëŸ°ì‹± ì „ëµ ì„ íƒ
- ë‹¤ì¤‘ ê³„ì • êµ¬ì„±ì—ì„œ ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°

## í˜„ì¬ ì§ë©´í•œ ë¬¸ì œ

ë‹¨ì¼ ê³„ì • ì‚¬ìš© ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì— ì§ë©´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- ë¹ˆë²ˆí•œ 429 ì†ë„ ì œí•œ ì˜¤ë¥˜ ë°œìƒìœ¼ë¡œ ì¿¼í„° ë³µêµ¬ ëŒ€ê¸° í•„ìš”
- ê°œë°œ/í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ë™ì‹œ ìš”ì²­ì´ ë„ˆë¬´ ë§ì•„ í•˜ë‚˜ì˜ ê³„ì •ìœ¼ë¡œ ì²˜ë¦¬ ë¶ˆê°€
- Gemini 3 Pro ë˜ëŠ” Claude Opus ëª¨ë¸ì˜ ì¿¼í„° ì†Œì§„ í›„ ë‹¤ìŒ ë‚ ê¹Œì§€ ëŒ€ê¸°
- ë‹¤ì¤‘ OpenCode ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” oh-my-opencode í•˜ìœ„ ì—ì´ì „íŠ¸ë¥¼ ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ë•Œ ê³„ì • ê°„ ê²½ìŸ

## ì´ ë°©ë²•ì„ ì‚¬ìš©í•´ì•¼ í•  ë•Œ

ë‹¤ì¤‘ ê³„ì • êµ¬ì„±ì€ ë‹¤ìŒ ì‹œë‚˜ë¦¬ì˜¤ì— ì í•©í•©ë‹ˆë‹¤:

| ì‹œë‚˜ë¦¬ì˜¤ | ê¶Œì¥ ê³„ì • ìˆ˜ | ì´ìœ  |
| --- | --- | ---|
| ê°œì¸ ê°œë°œ | 2-3ê°œ | ë°±ì—… ê³„ì •ìœ¼ë¡œ ì¤‘ë‹¨ ë°©ì§€ |
| íŒ€ í˜‘ì—… | 3-5ê°œ | ìš”ì²­ ë¶„ì‚°, ê²½ìŸ ê°ì†Œ |
| ê³ ë¹ˆë„ API í˜¸ì¶œ | 5ê°œ ì´ìƒ | ë¡œë“œ ë°¸ëŸ°ì‹±, ì²˜ë¦¬ëŸ‰ ê·¹ëŒ€í™” |
| ë³‘ë ¬ ì—ì´ì „íŠ¸ | 3ê°œ ì´ìƒ + PID ì˜¤í”„ì…‹ | ê° ì—ì´ì „íŠ¸ê°€ ë…ë¦½ì ì¸ ê³„ì • ì‚¬ìš© |

::: warning ì‚¬ì „ í™•ì¸
ë³¸ íŠœí† ë¦¬ì–¼ì„ ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒì„ ì™„ë£Œí–ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
- âœ… opencode-antigravity-auth í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜
- âœ… OAuth ì¸ì¦ ì„±ê³µ ë° ì²« ë²ˆì§¸ ê³„ì • ì¶”ê°€
- âœ… Antigravity ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ ë°œì‹  ê°€ëŠ¥

[ë¹ ë¥¸ ì„¤ì¹˜ íŠœí† ë¦¬ì–¼](../../start/quick-install/) | [ì²« ë¡œê·¸ì¸ íŠœí† ë¦¬ì–¼](../../start/first-auth-login/)
:::

## í•µì‹¬ ê°œë…

ë‹¤ì¤‘ ê³„ì • êµ¬ì„±ì˜ í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜:

1. **ì¿¼í„° í’€ë§**: ê° Google ê³„ì •ì—ëŠ” ë…ë¦½ì ì¸ ì¿¼í„°ê°€ ìˆìœ¼ë©°, ì—¬ëŸ¬ ê³„ì •ì˜ ì¿¼í„°ë¥¼ í•©ì‚°í•˜ì—¬ ë” í° ì´ í’€ í˜•ì„±
2. **ë¡œë“œ ë°¸ëŸ°ì‹±**: í”ŒëŸ¬ê·¸ì¸ì´ ìë™ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ê³„ì •ì„ ì„ íƒí•˜ê³ , ì†ë„ ì œí•œ ì‹œ ë‹¤ìŒ ê³„ì •ìœ¼ë¡œ ì „í™˜
3. **ë“€ì–¼ ì¿¼í„° ì‹œìŠ¤í…œ** (Gemini ì „ìš©): ê° ê³„ì •ì€ Antigravity ë° Gemini CLI ë‘ ê°œì˜ ë…ë¦½ì ì¸ ì¿¼í„° í’€ì— ì•¡ì„¸ìŠ¤ ê°€ëŠ¥
4. **ì§€ëŠ¥í˜• ë³µêµ¬**: ì†ë„ ì œí•œ ì¤‘ë³µ ì œê±°(2ì´ˆ ìœˆë„ìš°) + ì§€ìˆ˜ ë°±ì˜¤í”„, ë¬´íš¨ ì¬ì‹œë„ ë°©ì§€

**ì¿¼í„° ê³„ì‚° ì˜ˆì‹œ**:

ê° ê³„ì •ì˜ Claude ì¿¼í„°ê°€ ë¶„ë‹¹ 1000ìš”ì²­ì´ë¼ê³  ê°€ì •:

| ê³„ì • ìˆ˜ | ì´ë¡ ì  ì´ ì¿¼í„° | ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥(ìºì‹œ ê³ ë ¤) |
| --- | --- | ---|
| 1 | 1000/ë¶„ | 1000/ë¶„ |
| 3 | 3000/ë¶„ | ~2500/ë¶„ (sticky ì „ëµ) |
| 5 | 5000/ë¶„ | ~4000/ë¶„ (round-robin) |

> ğŸ’¡ **ì™œ sticky ì „ëµì˜ ì‚¬ìš© ê°€ëŠ¥ ì¿¼í„°ê°€ ë” ë‚®ë‚˜ìš”?**
>
> sticky ì „ëµì€ ì†ë„ ì œí•œê¹Œì§€ ë™ì¼í•œ ê³„ì •ì„ ê³„ì† ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ê³„ì •ì˜ ì¿¼í„°ë¥¼ ìœ íœ´ ìƒíƒœë¡œ ë§Œë“­ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ í•˜ë©´ Anthropicì˜ í”„ë¡¬í”„íŠ¸ ìºì‹œê°€ ìœ ì§€ë˜ì–´ ì‘ë‹µ ì†ë„ê°€ í–¥ìƒë©ë‹ˆë‹¤.

## ë”°ë¼í•˜ê¸°

### 1ë‹¨ê³„: ë‘ ë²ˆì§¸ ê³„ì • ì¶”ê°€

**ì´ìœ **
ë‘ ë²ˆì§¸ ê³„ì •ì„ ì¶”ê°€í•˜ë©´ ì£¼ ê³„ì •ì´ ì†ë„ ì œí•œì— ë„ë‹¬í•  ë•Œ í”ŒëŸ¬ê·¸ì¸ì´ ìë™ìœ¼ë¡œ ë°±ì—… ê³„ì •ìœ¼ë¡œ ì „í™˜í•˜ì—¬ ìš”ì²­ ì‹¤íŒ¨ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.

**ì‘ì—…**

OAuth ë¡œê·¸ì¸ ëª…ë ¹ ì‹¤í–‰:

```bash
opencode auth login
```

ì´ë¯¸ ê³„ì •ì´ í•˜ë‚˜ ìˆëŠ” ê²½ìš° ë‹¤ìŒ í”„ë¡¬í”„íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤:

```
1 account(s) saved:
  1. user1@gmail.com

(a)dd new account(s) or (f)resh start? [a/f]:
```

`a`ë¥¼ ì…ë ¥í•˜ê³  Enterë¥¼ ëˆ„ë¥´ë©´ ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ Google ì¸ì¦ í˜ì´ì§€ë¥¼ ì—½ë‹ˆë‹¤.

**ë³´ì—¬ì•¼ í•  ë‚´ìš©**:

1. ë¸Œë¼ìš°ì €ê°€ Google OAuth ì¸ì¦ í˜ì´ì§€ ì—´ê¸°
2. ë‘ ë²ˆì§¸ Google ê³„ì • ì„ íƒ ë˜ëŠ” ë¡œê·¸ì¸
3. ì¸ì¦ ë™ì˜ í›„ í„°ë¯¸ë„ì— í‘œì‹œ:

```
Account added successfully!

2 account(s) saved:
  1. user1@gmail.com
  2. user2@gmail.com
```

::: tip
ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì—´ë¦¬ì§€ ì•Šìœ¼ë©´ í„°ë¯¸ë„ì— í‘œì‹œëœ OAuth URLì„ ë³µì‚¬í•˜ì—¬ ìˆ˜ë™ìœ¼ë¡œ ë¸Œë¼ìš°ì €ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
:::

### 2ë‹¨ê³„: ë‹¤ì¤‘ ê³„ì • ìƒíƒœ í™•ì¸

**ì´ìœ **
ê³„ì •ì´ ì˜¬ë°”ë¥´ê²Œ ì¶”ê°€ë˜ê³  ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.

**ì‘ì—…**

ê³„ì • ì €ì¥ íŒŒì¼ ë³´ê¸°:

```bash
cat ~/.config/opencode/antigravity-accounts.json
```

**ë³´ì—¬ì•¼ í•  ë‚´ìš©**:

```json
{
  "version": 3,
  "accounts": [
    {
      "email": "user1@gmail.com",
      "refreshToken": "1//0abc...",
      "projectId": "project-id-123",
      "addedAt": 1737609600000,
      "lastUsed": 1737609600000
    },
    {
      "email": "user2@gmail.com",
      "refreshToken": "1//0xyz...",
      "addedAt": 1737609700000,
      "lastUsed": 1737609700000
    }
  ],
  "activeIndex": 0,
  "activeIndexByFamily": {
    "claude": 0,
    "gemini": 0
  }
}
```

::: warning ë³´ì•ˆ ê²½ê³ 
`antigravity-accounts.json`ì—ëŠ” OAuth ë¦¬í”„ë ˆì‹œ í† í°ì´ í¬í•¨ë˜ì–´ ìˆì–´ ë¹„ë°€ë²ˆí˜¸ íŒŒì¼ê³¼ ë™ì¼í•œ ìˆ˜ì¤€ì˜ ë³´ì•ˆì´ í•„ìš”í•©ë‹ˆë‹¤. ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”.
:::

### 3ë‹¨ê³„: ê³„ì • ì „í™˜ í…ŒìŠ¤íŠ¸

**ì´ìœ **
ë‹¤ì¤‘ ê³„ì • ë¡œë“œ ë°¸ëŸ°ì‹±ì´ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

**ì‘ì—…**

ì—¬ëŸ¬ ë™ì‹œ ìš”ì²­ì„ ë³´ë‚´ì–´ ì†ë„ ì œí•œ íŠ¸ë¦¬ê±°:

```bash
# macOS/Linux
for i in {1..10}; do
  opencode run "Test $i" --model=google/antigravity-claude-sonnet-4-5 &
done
wait

# Windows PowerShell
1..10 | ForEach-Object {
  Start-Process -FilePath "opencode" -ArgumentList "run","Test $_","--model=google/antigravity-claude-sonnet-4-5"
}
```

**ë³´ì—¬ì•¼ í•  ë‚´ìš©**:

1. ì²˜ìŒ Nê°œ ìš”ì²­ì´ ê³„ì • 1 ì‚¬ìš©(user1@gmail.com)
2. 429 ë°œìƒ í›„ ìë™ìœ¼ë¡œ ê³„ì • 2ë¡œ ì „í™˜(user2@gmail.com)
3. ì•Œë¦¼ì´ í™œì„±í™”ëœ ê²½ìš° "Switched to account 2" í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ

::: info ê³„ì • ì „í™˜ ì•Œë¦¼
`quiet_mode: false`(ê¸°ë³¸ê°’)ìœ¼ë¡œ ì„¤ì •ëœ ê²½ìš° í”ŒëŸ¬ê·¸ì¸ì´ ê³„ì • ì „í™˜ ì•Œë¦¼ì„ í‘œì‹œí•©ë‹ˆë‹¤. ì²« ì „í™˜ ì‹œ ì´ë©”ì¼ ì£¼ì†Œ í‘œì‹œ, ì´í›„ ê³„ì • ì¸ë±ìŠ¤ë§Œ í‘œì‹œ.
:::

### 4ë‹¨ê³„: ë“€ì–¼ ì¿¼í„° ì‹œìŠ¤í…œ êµ¬ì„± (Gemini ì „ìš©)

**ì´ìœ **
ë“€ì–¼ ì¿¼í„° í´ë°±ì„ í™œì„±í™”í•˜ë©´ Antigravity ì¿¼í„°ê°€ ì†Œì§„ë  ë•Œ í”ŒëŸ¬ê·¸ì¸ì´ ë™ì¼ ê³„ì •ì˜ Gemini CLI ì¿¼í„°ë¥¼ ìë™ìœ¼ë¡œ ì‹œë„í•˜ì—¬ ê³„ì • ì „í™˜ ì—†ì´ ê³„ì† ì‚¬ìš© ê°€ëŠ¥.

**ì‘ì—…**

í”ŒëŸ¬ê·¸ì¸ êµ¬ì„± íŒŒì¼ í¸ì§‘:

```bash
# macOS/Linux
nano ~/.config/opencode/antigravity.json

# Windows
notepad %APPDATA%\opencode\antigravity.json
```

ë‹¤ìŒ êµ¬ì„± ì¶”ê°€:

```json
{
  "$schema": "https://raw.githubusercontent.com/NoeFabris/opencode-antigravity-auth/main/assets/antigravity.schema.json",
  "quota_fallback": true
}
```

íŒŒì¼ ì €ì¥ í›„ OpenCode ì¬ì‹œì‘.

**ë³´ì—¬ì•¼ í•  ë‚´ìš©**:

1. Gemini ëª¨ë¸ ì‚¬ìš© ì‹œ í”ŒëŸ¬ê·¸ì¸ì´ Antigravity ì¿¼í„°ë¥¼ ìš°ì„ ì ìœ¼ë¡œ ì‚¬ìš©
2. Antigravityê°€ 429ë¥¼ ë°˜í™˜í•˜ë©´ ë™ì¼ ê³„ì •ì˜ Gemini CLI ì¿¼í„°ë¡œ ìë™ ì „í™˜
3. ë‘ ì¿¼í„° ëª¨ë‘ ì œí•œì— ë„ë‹¬í•œ ê²½ìš° ë‹¤ìŒ ê³„ì •ìœ¼ë¡œ ì „í™˜

::: tip ë“€ì–¼ ì¿¼í„° vs ë‹¤ì¤‘ ê³„ì •
- **ë“€ì–¼ ì¿¼í„°**: ë™ì¼ ê³„ì •ì˜ ë‘ ê°œì˜ ë…ë¦½ì ì¸ ì¿¼í„° í’€(Antigravity + Gemini CLI)
- **ë‹¤ì¤‘ ê³„ì •**: ì—¬ëŸ¬ ê³„ì •ì˜ ì¿¼í„° í’€ ì¤‘ì²©
- ëª¨ë²” ì‚¬ë¡€: ë‹¤ì¤‘ ê³„ì •ì„ ì¶”ê°€í•˜ê¸° ì „ì— ë¨¼ì € ë“€ì–¼ ì¿¼í„° í™œì„±í™”
:::

### 5ë‹¨ê³„: ê³„ì • ì„ íƒ ì „ëµ ì„ íƒ

**ì´ìœ **
ë‹¤ë¥¸ ê³„ì • ìˆ˜ì™€ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ì„œë¡œ ë‹¤ë¥¸ ì „ëµì´ í•„ìš”í•˜ë©°, ìµœì ì˜ ì„±ëŠ¥ì„ ì–»ìœ¼ë ¤ë©´ ì ì ˆí•œ ì „ëµ ì„ íƒì´ í•„ìˆ˜ì .

**ì‘ì—…**

`antigravity.json`ì—ì„œ ì „ëµ êµ¬ì„±:

```json
{
  "account_selection_strategy": "hybrid"
}
```

ê³„ì • ìˆ˜ì— ë”°ë¼ ì„ íƒ:

| ê³„ì • ìˆ˜ | ê¶Œì¥ ì „ëµ | êµ¬ì„± ê°’ | ì´ìœ  |
| --- | --- | --- | --- |
| 1 | sticky | `"sticky"` | í”„ë¡¬í”„íŠ¸ ìºì‹œ ìœ ì§€ |
| 2-5 | hybrid | `"hybrid"` | ì²˜ë¦¬ëŸ‰ê³¼ ìºì‹œ ê°„ ê· í˜• |
| 5+ | round-robin | `"round-robin"` | ì²˜ë¦¬ëŸ‰ ê·¹ëŒ€í™” |

**ì „ëµ ìƒì„¸ ì„¤ëª…**:

- **sticky** (ë‹¨ì¼ ê³„ì • ê¸°ë³¸ê°’): ì†ë„ ì œí•œì— ë„ë‹¬í•  ë•Œê¹Œì§€ ë™ì¼í•œ ê³„ì •ì„ ê³„ì† ì‚¬ìš©, ê°œë³„ ê°œë°œ ì„¸ì…˜ì— ì í•©
- **round-robin**: ê° ìš”ì²­ì„ ë‹¤ìŒ ê³„ì •ìœ¼ë¡œ ìˆœí™˜, ì²˜ë¦¬ëŸ‰ì„ ê·¹ëŒ€í™”í•˜ì§€ë§Œ ìºì‹œ í¬ìƒ
- **hybrid** (ë‹¤ì¤‘ ê³„ì • ê¸°ë³¸ê°’): ê±´ê°• ì ìˆ˜ + í† í° ë²„í‚· + LRUë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì¢…í•© ì˜ì‚¬ ê²°ì •

**ë³´ì—¬ì•¼ í•  ë‚´ìš©**:

1. `hybrid` ì „ëµ ì‚¬ìš© ì‹œ í”ŒëŸ¬ê·¸ì¸ì´ ìë™ìœ¼ë¡œ í˜„ì¬ ìµœì ì˜ ê³„ì • ì„ íƒ
2. `round-robin` ì „ëµ ì‚¬ìš© ì‹œ ìš”ì²­ì´ ëª¨ë“  ê³„ì •ì— ê· ë“±í•˜ê²Œ ë¶„ì‚°
3. `sticky` ì „ëµ ì‚¬ìš© ì‹œ ë™ì¼í•œ ì„¸ì…˜ì´ í•­ìƒ ë™ì¼í•œ ê³„ì • ì‚¬ìš©

### 6ë‹¨ê³„: PID ì˜¤í”„ì…‹ í™œì„±í™” (ë³‘ë ¬ ì—ì´ì „íŠ¸ ì‹œë‚˜ë¦¬ì˜¤)

**ì´ìœ **
ì—¬ëŸ¬ OpenCode ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” oh-my-opencode ë³‘ë ¬ ì—ì´ì „íŠ¸ë¥¼ ì‹¤í–‰í•  ë•Œ, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì¼í•œ ê³„ì •ì„ ì„ íƒí•˜ì—¬ ê²½ìŸì´ ë°œìƒí•  ìˆ˜ ìˆìŒ.

**ì‘ì—…**

`antigravity.json`ì— ì¶”ê°€:

```json
{
  "pid_offset_enabled": true
}
```

ì €ì¥ í›„ OpenCode ì¬ì‹œì‘.

**ë³´ì—¬ì•¼ í•  ë‚´ìš©**:

1. ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤(ë‹¤ë¥¸ PID)ê°€ ë‹¤ë¥¸ ê³„ì • ì¸ë±ìŠ¤ì—ì„œ ì‹œì‘
2. ë³‘ë ¬ ì—ì´ì „íŠ¸ ê°„ì˜ ê³„ì • ê²½ìŸ ê°ì†Œ
3. ì „ì²´ ì²˜ë¦¬ëŸ‰ í–¥ìƒ

::: tip PID ì˜¤í”„ì…‹ ì‘ë™ ë°©ì‹
PID ì˜¤í”„ì…‹ì€ í”„ë¡œì„¸ìŠ¤ IDë¥¼ ê³„ì • ì˜¤í”„ì…‹ì— ë§¤í•‘í•©ë‹ˆë‹¤.
- PID 100 â†’ ì˜¤í”„ì…‹ 0 â†’ ê³„ì • 0ì—ì„œ ì‹œì‘
- PID 101 â†’ ì˜¤í”„ì…‹ 1 â†’ ê³„ì • 1ì—ì„œ ì‹œì‘
- PID 102 â†’ ì˜¤í”„ì…‹ 2 â†’ ê³„ì • 2ì—ì„œ ì‹œì‘
:::

## ì²´í¬í¬ì¸íŠ¸ âœ…

ìœ„ì˜ ë‹¨ê³„ë¥¼ ì™„ë£Œí•œ í›„, ë‹¤ìŒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:

- [ ] `opencode auth login`ì„ í†µí•´ ì—¬ëŸ¬ Google ê³„ì • ì¶”ê°€
- [ ] `antigravity-accounts.json`ì—ì„œ ì—¬ëŸ¬ ê³„ì • ë ˆì½”ë“œ í™•ì¸
- [ ] ì†ë„ ì œí•œ ë°œìƒ ì‹œ í”ŒëŸ¬ê·¸ì¸ì´ ìë™ìœ¼ë¡œ ë‹¤ìŒ ê³„ì •ìœ¼ë¡œ ì „í™˜
- [ ] Gemini ëª¨ë¸ì— ë“€ì–¼ ì¿¼í„° í´ë°± í™œì„±í™”
- [ ] ê³„ì • ìˆ˜ì— ë”°ë¼ ì ì ˆí•œ ê³„ì • ì„ íƒ ì „ëµ ì„ íƒ
- [ ] ë³‘ë ¬ ì—ì´ì „íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ PID ì˜¤í”„ì…‹ í™œì„±í™”

## ë¬¸ì œ í•´ê²°

### ëª¨ë“  ê³„ì •ì´ ì†ë„ ì œí•œë¨

**ì¦ìƒ**: ëª¨ë“  ê³„ì •ì´ 429 ì˜¤ë¥˜ë¥¼ í‘œì‹œí•˜ê³  ìš”ì²­ì„ ê³„ì†í•  ìˆ˜ ì—†ìŒ

**ì›ì¸**: ì¿¼í„° ì†Œì§„ ë˜ëŠ” ë™ì‹œ ìš”ì²­ ê³¼ë‹¤

**í•´ê²° ë°©ë²•**:

1. ì†ë„ ì œí•œì´ ìë™ìœ¼ë¡œ ì¬ì„¤ì •ë  ë•Œê¹Œì§€ ëŒ€ê¸°(ì¼ë°˜ì ìœ¼ë¡œ 1-5ë¶„)
2. ì¥ê¸°ì ìœ¼ë¡œ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ê²½ìš° ë” ë§ì€ ê³„ì • ì¶”ê°€
3. êµ¬ì„±ì˜ `max_rate_limit_wait_seconds`ë¥¼ í™•ì¸í•˜ê³  ì ì ˆí•œ ëŒ€ê¸° ìƒí•œ ì„¤ì •

### ê³„ì • ì „í™˜ì´ ë„ˆë¬´ ì¦ìŒ

**ì¦ìƒ**: ê° ìš”ì²­ë§ˆë‹¤ ê³„ì •ì„ ì „í™˜í•˜ì—¬ ë™ì¼í•œ ê³„ì •ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ

**ì›ì¸**: ì „ëµ ì„ íƒ ë¶€ì ì ˆ ë˜ëŠ” ê±´ê°• ì ìˆ˜ ë¹„ì •ìƒ

**í•´ê²° ë°©ë²•**:

1. ì „ëµì„ `sticky`ë¡œ ë³€ê²½
2. `health_score` êµ¬ì„±ì„ í™•ì¸í•˜ê³  `min_usable` ë° `rate_limit_penalty` ì¡°ì •
3. ê³„ì •ì´ ê±´ê°•í•˜ì§€ ì•Šë‹¤ê³  í‘œì‹œë˜ëŠ” ë¹ˆë²ˆí•œ 429 ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ í™•ì¸

### Gemini CLI ê¶Œí•œ ì˜¤ë¥˜(403)

**ì¦ìƒ**: Gemini CLI ëª¨ë¸ ì‚¬ìš© ì‹œ `Permission denied` ì˜¤ë¥˜ ë°˜í™˜

**ì›ì¸**: ê³„ì •ì— ìœ íš¨í•œ Project IDê°€ ì—†ìŒ

**í•´ê²° ë°©ë²•**:

1. ê° ê³„ì •ì— ëŒ€í•´ ìˆ˜ë™ìœ¼ë¡œ `projectId` ì¶”ê°€:

```json
{
  "accounts": [
    {
      "email": "your@email.com",
      "refreshToken": "...",
      "projectId": "your-project-id"
    }
  ]
}
```

2. [Google Cloud Console](https://console.cloud.google.com/)ì—ì„œ Gemini for Google Cloud APIê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

### í† í° ë¬´íš¨(invalid_grant)

**ì¦ìƒ**: ê³„ì •ì´ ìë™ìœ¼ë¡œ ì œê±°ë˜ê³  `invalid_grant` ì˜¤ë¥˜ê°€ í‘œì‹œë¨

**ì›ì¸**: Google ê³„ì • ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, ë³´ì•ˆ ì´ë²¤íŠ¸ ë˜ëŠ” í† í° ë§Œë£Œ

**í•´ê²° ë°©ë²•**:

1. ë¬´íš¨í•œ ê³„ì •ì„ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ì¸ì¦:

```bash
rm ~/.config/opencode/antigravity-accounts.json
opencode auth login
```

2. ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ëŠ” ê²½ìš° ë” ì•ˆì •ì ì¸ Google ê³„ì • ì‚¬ìš© ê³ ë ¤

## ìˆ˜ì—… ìš”ì•½

- ë‹¤ì¤‘ ê³„ì • êµ¬ì„±ì€ ì´ ì¿¼í„° í•œë„ì™€ ì‹œìŠ¤í…œ ì•ˆì •ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŒ
- ê³„ì • ì¶”ê°€ëŠ” ë§¤ìš° ê°„ë‹¨í•˜ë©° `opencode auth login`ì„ ë°˜ë³µ ì‹¤í–‰í•˜ë©´ ë¨
- ë“€ì–¼ ì¿¼í„° ì‹œìŠ¤í…œì€ ê° Gemini ê³„ì •ì˜ ì‚¬ìš© ê°€ëŠ¥í•œ ì¿¼í„°ë¥¼ ë‘ ë°°ë¡œ ì¦ê°€ì‹œí‚´
- ê³„ì • ì„ íƒ ì „ëµì€ ê³„ì • ìˆ˜ì™€ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ì¡°ì •ë˜ì–´ì•¼ í•¨
- PID ì˜¤í”„ì…‹ì€ ë³‘ë ¬ ì—ì´ì „íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ë§¤ìš° ì¤‘ìš”í•¨

## ë‹¤ìŒ ìˆ˜ì—… ì˜ˆê³ 

> ë‹¤ìŒ ìˆ˜ì—…ì—ì„œëŠ” **[ê³„ì • ì„ íƒ ì „ëµ](../account-selection-strategies/)**ì„ ë°°ì›ë‹ˆë‹¤.
>
> í•™ìŠµ ë‚´ìš©:
> - sticky, round-robin, hybrid ì„¸ ê°€ì§€ ì „ëµì˜ ìƒì„¸í•œ ì‘ë™ ì›ë¦¬
> - ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¥¸ ìµœì ì˜ ì „ëµ ì„ íƒ ë°©ë²•
> - ê±´ê°• ì ìˆ˜ ë° í† í° ë²„í‚· íŠœë‹ ë°©ë²•

---

## ë¶€ë¡: ì†ŒìŠ¤ ì½”ë“œ ì°¸ì¡°

<details>
<summary><strong>ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜ ë³´ê¸°</strong></summary>

> ì—…ë°ì´íŠ¸ ë‚ ì§œ: 2026-01-23

| ê¸°ëŠ¥ | íŒŒì¼ ê²½ë¡œ | ë¼ì¸ ë²ˆí˜¸ |
| --- | --- | --- |
| AccountManager í´ë˜ìŠ¤ | [`src/plugin/accounts.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/accounts.ts#L174-L250) | 174-250 |
| ë¡œë“œ ë°¸ëŸ°ì‹± ì „ëµ | [`src/plugin/rotation.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/rotation.ts) | ì „ì²´ |
| êµ¬ì„± ìŠ¤í‚¤ë§ˆ | [`src/plugin/config/schema.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/config/schema.ts) | ì „ì²´ |
| ê³„ì • ì €ì¥ | [`src/plugin/storage.ts`](https://github.com/NoeFabris/opencode-antigravity-auth/blob/main/src/plugin/storage.ts) | ì „ì²´ |

**ì£¼ìš” ìƒìˆ˜**:

| ìƒìˆ˜ëª… | ê°’ | ì„¤ëª… |
| --- | --- | --- |
| `QUOTA_EXHAUSTED_BACKOFFS` | `[60000, 300000, 1800000, 7200000]` | ì¿¼í„° ì†Œì§„ ë°±ì˜¤í”„ ì‹œê°„(1ë¶„â†’5ë¶„â†’30ë¶„â†’2ì‹œê°„) |
| `RATE_LIMIT_EXCEEDED_BACKOFF` | `30000` | ì†ë„ ì œí•œ ë°±ì˜¤í”„ ì‹œê°„(30ì´ˆ) |
| `MIN_BACKOFF_MS` | `2000` | ìµœì†Œ ë°±ì˜¤í”„ ì‹œê°„(2ì´ˆ) |

**ì£¼ìš” í•¨ìˆ˜**:

- `calculateBackoffMs(reason, consecutiveFailures, retryAfterMs)`: ë°±ì˜¤í”„ ì§€ì—° ì‹œê°„ ê³„ì‚°
- `getQuotaKey(family, headerStyle, model)`: ì¿¼í„° í‚¤ ìƒì„±(ëª¨ë¸ ìˆ˜ì¤€ ì†ë„ ì œí•œ ì§€ì›)
- `isRateLimitedForQuotaKey(account, key)`: íŠ¹ì • ì¿¼í„° í‚¤ì˜ ì†ë„ ì œí•œ ì—¬ë¶€ í™•ì¸
- `selectHybridAccount(accounts, family)`: hybrid ì „ëµì˜ ê³„ì • ì„ íƒ ë¡œì§

**êµ¬ì„± í•­ëª©** (schema.tsì—ì„œ):

| êµ¬ì„± í•­ëª© | ìœ í˜• | ê¸°ë³¸ê°’ | ì„¤ëª… |
| --- | --- | --- | --- |
| `account_selection_strategy` | enum | `"hybrid"` | ê³„ì • ì„ íƒ ì „ëµ |
| `quota_fallback` | boolean | `false` | Gemini ë“€ì–¼ ì¿¼í„° í´ë°± í™œì„±í™” |
| `pid_offset_enabled` | boolean | `false` | PID ì˜¤í”„ì…‹ í™œì„±í™” |
| `switch_on_first_rate_limit` | boolean | `true` | ì²« ë²ˆì§¸ ì†ë„ ì œí•œ ì‹œ ì¦‰ì‹œ ì „í™˜ |

</details>
