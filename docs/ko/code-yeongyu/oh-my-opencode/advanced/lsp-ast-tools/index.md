---
title: "LSPì™€ AST: IDE ìˆ˜ì¤€ ë¦¬íŒ©í† ë§ | oh-my-opencode"
sidebarTitle: "LSPì™€ AST-Grep"
subtitle: "LSPì™€ AST-Grep: IDE ìˆ˜ì¤€ì˜ ì½”ë“œ ë¶„ì„ ë° ì¡°ì‘ ê¸°ëŠ¥"
description: "LSPì™€ AST-Grep ë„êµ¬ ì‚¬ìš©ë²•ì„ í•™ìŠµí•˜ê³ , 7ë‹¨ê³„ë¥¼ í†µí•´ ì½”ë“œ íƒìƒ‰, ë¦¬íŒ©í† ë§, íŒ¨í„´ ë§¤ì¹­ì„ ë§ˆìŠ¤í„°í•©ë‹ˆë‹¤."
tags:
  - "lsp"
  - "ast-grep"
  - "code-analysis"
  - "refactoring"
prerequisite:
  - "start-quick-start"
order: 90
---

# LSPì™€ AST-Grep: IDE ìˆ˜ì¤€ì˜ ì½”ë“œ ë¶„ì„ ë° ì¡°ì‘ ê¸°ëŠ¥

## í•™ìŠµ í›„ í•  ìˆ˜ ìˆëŠ” ê²ƒ

- LSP ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë² ì´ìŠ¤ ë‚´ ì´ë™, ê¸°í˜¸ ì°¾ê¸°, ì§„ë‹¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
- AST-Grepì„ ì‚¬ìš©í•˜ì—¬ ì •í™•í•œ ì½”ë“œ íŒ¨í„´ ê²€ìƒ‰ ë° ëŒ€ì²´
- LSPì™€ AST-Grepì˜ ì°¨ì´ ë° ì ìš© ì‹œë‚˜ë¦¬ì˜¤ ì´í•´
- ì—ì´ì „íŠ¸ì— IDE ìˆ˜ì¤€ì˜ ì½”ë“œ ì´í•´ ë° ì¡°ì‘ ê¸°ëŠ¥ ë¶€ì—¬

## í˜„ì¬ ê²ªê³  ìˆëŠ” ë¬¸ì œ

ì „í†µì ì¸ ì½”ë“œ ê²€ìƒ‰ ë° ë¦¬íŒ©í† ë§ ë„êµ¬ì—ëŠ” ëª…í™•í•œ í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤:

| ë¬¸ì œ | ì „í†µ ë°©ì‹ | ì‹¤ì œ ìš”êµ¬ì‚¬í•­ |
|--- | --- | ---|
| **ê¸°í˜¸ ì´ë™ ë¶€ì •í™•** | ë‹¨ìˆœ ë¬¸ìì—´ ë§¤ì¹­ | ì½”ë“œ ì˜ë¯¸ë¥¼ ì´í•´í•˜ê³  ì‹¤ì œ ì •ì˜ë¡œ ì´ë™ í•„ìš” |
| **ì°¸ì¡° ê²€ìƒ‰ ëˆ„ë½** | ì •ê·œí‘œí˜„ì‹ ê²€ìƒ‰ | íŒŒì¼ ê°„, ë²”ìœ„ ê°„ ì •í™•í•œ ì°¸ì¡° ì¶”ì  í•„ìš” |
| **ë¦¬íŒ©í† ë§ ë¶ˆì•ˆì „** | ìˆ˜ë™ ëŒ€ì²´ + grep | ì½”ë“œ êµ¬ì¡° ì´í•´, íŒŒê´´ì  ìˆ˜ì • ë°©ì§€ í•„ìš” |
| **íŒ¨í„´ ë§¤ì¹­ ë¶€ìì—°ìŠ¤ëŸ¬ì›€** | ì •ê·œí‘œí˜„ì‹ | AST ê¸°ë°˜ êµ¬ì¡°í™”ëœ íŒ¨í„´ ë§¤ì¹­ í•„ìš” |

::: info í•µì‹¬ ê°œë…
**LSP (Language Server Protocol)**ëŠ” IDEì™€ ì–¸ì–´ ì„œë²„ ê°„ì˜ í‘œì¤€ í”„ë¡œí† ì½œë¡œ, í†µí•© ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì½”ë“œ ì™„ì„±, ì •ì˜ë¡œ ì´ë™, ì°¸ì¡° ì°¾ê¸°, ê¸°í˜¸ ì´ë¦„ ë³€ê²½, ì§„ë‹¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°, ê¸°í˜¸ ê°œìš” ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ í¸ì§‘ê¸°ì— ê°•ë ¥í•œ ì½”ë“œ ì´í•´ ëŠ¥ë ¥ì„ ë¶€ì—¬í•˜ê³  íƒ€ì… ì •ë³´, ìƒì† ê´€ê³„ ë“± ê³ ê¸‰ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. **AST-Grep**ëŠ” ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬ ê¸°ë°˜ì˜ ì½”ë“œ íŒ¨í„´ ë§¤ì¹­ ë„êµ¬ë¡œ, ë‹¨ìˆœ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ ì½”ë“œ êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ë©”íƒ€ ë³€ìˆ˜(ì˜ˆ: `$VAR`ëŠ” ë‹¨ì¼ ë…¸ë“œ, `$$$`ëŠ” ì—¬ëŸ¬ ë…¸ë“œ)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ì—°í•œ íŒ¨í„´ ë§¤ì¹­ê³¼ ì¼ê´„ ë¦¬íŒ©í† ë§ì„ ì§€ì›í•˜ë©°, 25ê°œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´(TypeScript, Python, Go, Rust ë“± í¬í•¨)ë¥¼ ë‹¤ë£¨ëŠ” ì½”ë“œ ë¦¬íŒ©í† ë§, ê·œì¹™ ê²€ì‚¬, êµ¬ì¡°í™”ëœ ê²€ìƒ‰ì˜ ê°•ë ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤.
:::

## ì–¸ì œ ì‚¬ìš©í•˜ëŠ”ê°€

| ë„êµ¬ | ì ìš© ì‹œë‚˜ë¦¬ì˜¤ | ì˜ˆì‹œ |
|--- | --- | ---|
| **LSP ë„êµ¬** | IDE ê¸°ëŠ¥ì´ í•„ìš”í•  ë•Œ | ì •ì˜ë¡œ ì´ë™, ëª¨ë“  ì°¸ì¡° ì°¾ê¸°, ì˜¤ë¥˜ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°, ê¸°í˜¸ ì´ë¦„ ë³€ê²½ |
| **AST-Grep** | ì½”ë“œ íŒ¨í„´ ë§¤ì¹­ì´ í•„ìš”í•  ë•Œ | íŠ¹ì • ì½”ë“œ êµ¬ì¡° ê²€ìƒ‰, ì¼ê´„ ë¦¬íŒ©í† ë§, ì½”ë“œ ê·œì¹™ ê²€ì‚¬ |
| **Grep/Glob** | ë‹¨ìˆœ í…ìŠ¤íŠ¸ ê²€ìƒ‰ | í•¨ìˆ˜ëª… ì°¾ê¸°, íŒŒì¼ëª… ë§¤ì¹­ |

## ğŸ’ ì‹œì‘ ì „ ì¤€ë¹„

LSP ë° AST-Grep ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

1. **Language Server ì„¤ì¹˜ ì™„ë£Œ**
   - TypeScript/JavaScript: `npm install -g typescript-language-server`
   - Python: `pip install basedpyright` ë˜ëŠ” `pip install ruff`
   - Go: `go install golang.org/x/tools/gopls@latest`
   - Rust: `rustup component add rust-analyzer`

2. **AST-Grep CLI ì„¤ì¹˜ ì™„ë£Œ**
   ```bash
   bun add -D @ast-grep/cli
   ```

3. **LSP ì„œë²„ êµ¬ì„± ì™„ë£Œ**
   - LSP ì„œë²„ êµ¬ì„±ì€ OpenCodeì˜ `opencode.json`ì— ìˆìŠµë‹ˆë‹¤
   - oh-my-opencodeëŠ” ì´ëŸ¬í•œ êµ¬ì„±ì„ ìë™ìœ¼ë¡œ ì½ì–´ ì‚¬ìš©í•©ë‹ˆë‹¤

::: tip í™˜ê²½ í™•ì¸
ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ í™˜ê²½ì„ í™•ì¸í•˜ì„¸ìš”:
```bash
# LSP ì„œë²„ í™•ì¸
oh-my-opencode doctor

# AST-Grep í™•ì¸
which sg
```
:::

## í•µì‹¬ ì•„ì´ë””ì–´

### LSP ë„êµ¬: IDE ìˆ˜ì¤€ì˜ ì½”ë“œ ì´í•´

LSP ë„êµ¬ëŠ” AI ì—ì´ì „íŠ¸ì— IDEì™€ ë™ì¼í•œ ì½”ë“œ ì´í•´ ëŠ¥ë ¥ì„ ì œê³µí•©ë‹ˆë‹¤:

```mermaid
graph LR
  A[ì—ì´ì „íŠ¸ LSP ë„êµ¬ í˜¸ì¶œ] --> B[LSP ì„œë²„]
  B --> C[ì˜ë¯¸ ë¶„ì„]
  C --> D[êµ¬ì¡°í™”ëœ ê²°ê³¼ ë°˜í™˜]
  D --> E[ì—ì´ì „íŠ¸ ì½”ë“œ ë§¥ë½ ì´í•´]
```

**í•µì‹¬ ì¥ì **:
- âœ… ì˜ë¯¸ ì´í•´, ë‹¨ìˆœ ë¬¸ìì—´ ë§¤ì¹­ ì•„ë‹˜
- âœ… íŒŒì¼ ê°„, ë²”ìœ„ ê°„ ì •í™•í•œ ì¶”ì 
- âœ… íƒ€ì… ì •ë³´, ìƒì† ê´€ê³„ ë“± ê³ ê¸‰ ê¸°ëŠ¥ ì§€ì›
- âœ… í”„ë¡œì íŠ¸ êµ¬ì„±ê³¼ ì™„ì „íˆ ì¼ì¹˜(ë™ì¼í•œ LSP ì„œë²„ ì‚¬ìš©)

### AST-Grep: êµ¬ì¡°í™”ëœ ì½”ë“œ íŒ¨í„´ ë§¤ì¹­

AST-Grepì€ AI ì—ì´ì „íŠ¸ê°€ ì •í™•í•œ ì½”ë“œ êµ¬ì¡° ë§¤ì¹­ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤:

```mermaid
graph LR
  A[AST-Grep íŒ¨í„´] --> B[ì½”ë“œë¥¼ ASTë¡œ íŒŒì‹±]
  B --> C[êµ¬ì¡°í™”ëœ ë§¤ì¹­]
  C --> D[ì½”ë“œ ë…¸ë“œ ì¶”ì¶œ/ëŒ€ì²´]
  D --> E[ì¼ê´„ ë¦¬íŒ©í† ë§/ê²€ì‚¬]
```

**í•µì‹¬ ì¥ì **:
- âœ… ì½”ë“œ êµ¬ì¡° ê¸°ë°˜, í…ìŠ¤íŠ¸ ê¸°ë°˜ ì•„ë‹˜
- âœ… ë©”íƒ€ ë³€ìˆ˜(`$VAR`, `$$$`) ì§€ì› íŒ¨í„´ ë§¤ì¹­
- âœ… ì—¬ëŸ¬ ì–¸ì–´ ì§€ì›(25ê°œ)
- âœ… ë¦¬íŒ©í† ë§, ê²€ì‚¬, ì½”ë“œ ê·œì¹™ ê²€ì¦ì— í™œìš© ê°€ëŠ¥

## ë”°ë¼í•´ ë³´ì„¸ìš”

### 1ë‹¨ê³„: LSPë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì˜ë¡œ ì´ë™

**ì´ìœ **
íŠ¹ì • ê¸°í˜¸ì˜ ì •ì˜ ìœ„ì¹˜ë¥¼ í™•ì¸í•´ì•¼ í•  ë•Œ, LSPì˜ `goto_definition` ë„êµ¬ëŠ” ë¬¸ìì—´ ê²€ìƒ‰ë³´ë‹¤ ë” ì •í™•í•œ ì´ë™ì„ ì œê³µí•©ë‹ˆë‹¤.

OpenCodeì—ì„œ ì—ì´ì „íŠ¸ëŠ” ìë™ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```typescript
// ì—ì´ì „íŠ¸ê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œ
lsp_goto_definition({
  filePath: "src/utils.ts",
  line: 15,
  character: 10
})
```

**ì˜ˆìƒ ê²°ê³¼**:
```
â†’ ì •ì˜ ë°œê²¬:
  íŒŒì¼: src/types.ts
  ë¼ì¸: 45
  í…ìŠ¤íŠ¸: export interface UserConfig {
```

::: tip ì‹¤ì œ ì‚¬ìš©
ì´ëŸ¬í•œ ë„êµ¬ë¥¼ ì§ì ‘ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. AI ì—ì´ì „íŠ¸ê°€ ìë™ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ì´í•´í•©ë‹ˆë‹¤. "ì´ í•¨ìˆ˜ì˜ ì •ì˜ë¡œ ì´ë™í•´" ë˜ëŠ” "ì´ ë³€ìˆ˜ëŠ” ì–´ë””ì— ì •ì˜ë˜ì–´ ìˆì–´?"ë¼ê³  ì§ì ‘ ë¬¼ì–´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
:::

### 2ë‹¨ê³„: ëª¨ë“  ì°¸ì¡° ì°¾ê¸°

**ì´ìœ **
íŠ¹ì • ê¸°í˜¸ë¥¼ ìˆ˜ì •í•´ì•¼ í•  ë•Œ, ë¨¼ì € ëª¨ë“  ì°¸ì¡°ë¥¼ ì°¾ìœ¼ë©´ ìˆ˜ì •ì´ ë‹¤ë¥¸ ê³³ì˜ ì‚¬ìš©ì„ ë§ê°€ëœ¨ë¦¬ì§€ ì•Šë„ë¡ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì—ì´ì „íŠ¸ê°€ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```typescript
lsp_find_references({
  filePath: "src/api.ts",
  line: 10,
  character: 5,
  includeDeclaration: true  // ì •ì˜ ìì²´ í¬í•¨ ì—¬ë¶€
})
```

**ì˜ˆìƒ ê²°ê³¼**:
```
15ê°œ ì°¸ì¡° ë°œê²¬ (ì²˜ìŒ 200ê°œ í‘œì‹œ):
  src/api.ts:10:5  - [ì •ì˜] fetchData
  src/components/List.tsx:23:12 - [ì‚¬ìš©] fetchData()
  src/pages/Home.tsx:45:8 - [ì‚¬ìš©] fetchData()
  ...
```

### 3ë‹¨ê³„: íŒŒì¼ ê¸°í˜¸ ë° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê¸°í˜¸ ê°€ì ¸ì˜¤ê¸°

**ì´ìœ **
íŒŒì¼ êµ¬ì¡°ë¥¼ ì´í•´í•˜ê±°ë‚˜ ì „ì²´ í”„ë¡œì íŠ¸ì—ì„œ íŠ¹ì • ê¸°í˜¸ ìœ í˜•ì„ ê²€ìƒ‰í•  ë•Œ `lsp_symbols` ë„êµ¬ê°€ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.

**íŒŒì¼ ê°œìš”**(scope="document"):

```typescript
lsp_symbols({
  filePath: "src/app.tsx",
  scope: "document"
})
```

**ì˜ˆìƒ ê²°ê³¼**:
```
12ê°œ ê¸°í˜¸ ë°œê²¬:
  [ì»´í¬ë„ŒíŠ¸] App (ë¼ì¸: 10-150)
    [í•¨ìˆ˜] useEffect (ë¼ì¸: 25-35)
    [í•¨ìˆ˜] handleClick (ë¼ì¸: 40-55)
    [ë³€ìˆ˜] count (ë¼ì¸: 15)
  ...
```

**ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê²€ìƒ‰**(scope="workspace"):

```typescript
lsp_symbols({
  filePath: "src/app.tsx",
  scope: "workspace",
  query: "fetchData"
})
```

### 4ë‹¨ê³„: ì§„ë‹¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸°

**ì´ìœ **
ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— LSPì˜ ì§„ë‹¨ ë„êµ¬ë¡œ ì˜¤ë¥˜, ê²½ê³ , íŒíŠ¸ë¥¼ ë¯¸ë¦¬ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```typescript
lsp_diagnostics({
  filePath: "src/utils.ts",
  severity: "error"  // ì„ íƒ: "error", "warning", "information", "hint", "all"
})
```

**ì˜ˆìƒ ê²°ê³¼**:
```
3ê°œ ì§„ë‹¨ ë°œê²¬:
  [ì˜¤ë¥˜] src/utils.ts:23:5 - 'result'ê°€ í• ë‹¹ë˜ê¸° ì „ì— ì‚¬ìš©ë¨
  [ê²½ê³ ] src/utils.ts:45:12 - ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ 'temp'
  [íŒíŠ¸] src/utils.ts:67:8 - ì´ë¥¼ const x = valueë¡œ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆìŒ
```

::: tip ì‚¬ì „ ê²€ì‚¬
AI ì—ì´ì „íŠ¸ê°€ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì „ì— `lsp_diagnostics`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì ì¬ì ì¸ ë¬¸ì œë¥¼ í™•ì¸í•˜ë©´ ë°˜ë³µì ì¸ ìˆ˜ì •ì„ í”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
:::

### 5ë‹¨ê³„: ì•ˆì „í•˜ê²Œ ê¸°í˜¸ ì´ë¦„ ë³€ê²½

**ì´ìœ **
ê¸°í˜¸ ì´ë¦„ ë³€ê²½ì€ ì¼ë°˜ì ì¸ ë¦¬íŒ©í† ë§ ì‘ì—…ì´ì§€ë§Œ ìˆ˜ë™ ëŒ€ì²´ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. LSPì˜ `lsp_rename` ë„êµ¬ëŠ” ì „ì²´ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ ê¸°í˜¸ë¥¼ ì•ˆì „í•˜ê²Œ ì´ë¦„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**1ë‹¨ê³„: ì´ë¦„ ë³€ê²½ í™•ì¸**

```typescript
lsp_prepare_rename({
  filePath: "src/api.ts",
  line: 10,
  character: 5
})
```

**ì˜ˆìƒ ê²°ê³¼**:
```
ì´ë¦„ ë³€ê²½ ê²€ì¦:
  í˜„ì¬ ì´ë¦„: fetchData
  í”Œë ˆì´ìŠ¤í™€ë” ë²”ìœ„: ë¼ì¸ 10, ì»¬ëŸ¼ 5-14
  ìƒíƒœ: âœ… ìœ íš¨í•¨
```

**2ë‹¨ê³„: ì´ë¦„ ë³€ê²½ ì‹¤í–‰**

```typescript
lsp_rename({
  filePath: "src/api.ts",
  line: 10,
  character: 5,
  newName: "fetchUserData"
})
```

**ì˜ˆìƒ ê²°ê³¼**:
```
15ê°œ íŒŒì¼ì— ì´ë¦„ ë³€ê²½ ì ìš©:
  src/api.ts:10:5 - fetchData â†’ fetchUserData
  src/components/List.tsx:23:12 - fetchData() â†’ fetchUserData()
  src/pages/Home.tsx:45:8 - fetchData â†’ fetchUserData()
  ...
```

### 6ë‹¨ê³„: AST-Grepì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ íŒ¨í„´ ê²€ìƒ‰

**ì´ìœ **
íŠ¹ì • ì½”ë“œ êµ¬ì¡°(ì˜ˆ: `console.log`ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ê³³)ë¥¼ ì°¾ì•„ì•¼ í•  ë•Œ, AST-Grepì€ grepë³´ë‹¤ ë” ì •í™•í•©ë‹ˆë‹¤.

**ê¸°ë³¸ íŒ¨í„´ ê²€ìƒ‰**:

```typescript
ast_grep_search({
  pattern: "console.log($MSG)",
  lang: "typescript",
  paths: ["src"],
  context: 2  // ë§¤ì¹­ ì „í›„ì˜ ì»¨í…ìŠ¤íŠ¸ ë¼ì¸ ìˆ˜ í‘œì‹œ
})
```

**ì˜ˆìƒ ê²°ê³¼**:
```
src/utils.ts:15:
  13 | function debug(message) {
  14 |   console.log(message)
  15 |   console.log("Debug mode")
  16 | }
  17 | }

src/components/App.tsx:23:
  21 | useEffect(() => {
  22 |   console.log("Component mounted")
  23 | }, [])
```

**ë©”íƒ€ ë³€ìˆ˜ ì‚¬ìš©**:

```typescript
// ëª¨ë“  í•¨ìˆ˜ í˜¸ì¶œ ë§¤ì¹­
ast_grep_search({
  pattern: "$FUNC($$$)",
  lang: "typescript",
  paths: ["src"]
})
```

```typescript
// ëª¨ë“  ë¹„ë™ê¸° í•¨ìˆ˜ ë§¤ì¹­
ast_grep_search({
  pattern: "async function $NAME($$$) { $$$ }",
  lang: "typescript",
  paths: ["src"]
})
```

::: warning ì¤‘ìš”: íŒ¨í„´ì€ ì™„ì „í•œ AST ë…¸ë“œì—¬ì•¼ í•¨
âŒ ì˜¤ë¥˜: `export async function $NAME`
âœ… ì •í™•: `export async function $NAME($$$) { $$$ }`

íŒ¨í„´ì€ ìœ íš¨í•œ ì½”ë“œ ì¡°ê°ì´ì–´ì•¼ í•˜ë©°, ì™„ì „í•œ í•¨ìˆ˜ ì„œëª…ê³¼ í•¨ìˆ˜ ë³¸ë¬¸ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
:::

### 7ë‹¨ê³„: AST-Grepì„ ì‚¬ìš©í•˜ì—¬ ì¼ê´„ ëŒ€ì²´

**ì´ìœ **
ì½”ë“œë¥¼ ì¼ê´„ ë¦¬íŒ©í† ë§í•´ì•¼ í•  ë•Œ(ì˜ˆ: ëª¨ë“  `console.log`ë¥¼ `logger.info`ë¡œ ë³€ê²½), AST-Grepì˜ ëŒ€ì²´ ê¸°ëŠ¥ì´ ë§¤ìš° ê°•ë ¥í•©ë‹ˆë‹¤.

**ëŒ€ì²´ ë¯¸ë¦¬ë³´ê¸°**(dry-run):

```typescript
ast_grep_replace({
  pattern: "console.log($MSG)",
  rewrite: "logger.info($MSG)",
  lang: "typescript",
  paths: ["src"],
  dryRun: true  // ê¸°ë³¸ê°’ true, ë¯¸ë¦¬ë³´ê¸°ë§Œ í•˜ê³  ìˆ˜ì •í•˜ì§€ ì•ŠìŒ
})
```

**ì˜ˆìƒ ê²°ê³¼**:
```
ë³€ê²½ ë¯¸ë¦¬ë³´ê¸° (dry-run):
  src/utils.ts:15:2 - console.log("Debug mode")
                  â†’ logger.info("Debug mode")
  src/components/App.tsx:23:4 - console.log("Component mounted")
                               â†’ logger.info("Component mounted")

ì´: 2ê°œ ë³€ê²½
```

**ëŒ€ì²´ ì ìš©**:

```typescript
ast_grep_replace({
  pattern: "console.log($MSG)",
  rewrite: "logger.info($MSG)",
  lang: "typescript",
  paths: ["src"],
  dryRun: false  // falseë¡œ ì„¤ì •í•˜ì—¬ ë³€ê²½ ì ìš©
})
```

**ì˜ˆìƒ ê²°ê³¼**:
```
2ê°œ ë³€ê²½ ì ìš©:
  src/utils.ts:15:2 - console.log("Debug mode")
                  â†’ logger.info("Debug mode")
  src/components/App.tsx:23:4 - console.log("Component mounted")
                               â†’ logger.info("Component mounted")
```

::: danger íŒŒê´´ì  ì‘ì—…
`ast_grep_replace`ì˜ `dryRun: false`ëŠ” íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•©ë‹ˆë‹¤. ë‹¤ìŒì„ ê¶Œì¥í•©ë‹ˆë‹¤:
1. ë¨¼ì € `dryRun: true`ë¡œ ë¯¸ë¦¬ë³´ê¸°
2. í™•ì¸ í›„ ì ìš©
3. í”„ë¡œì íŠ¸ê°€ Gitì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° í˜„ì¬ ìƒíƒœë¥¼ ë¨¼ì € ì»¤ë°‹
:::

## ì²´í¬í¬ì¸íŠ¸ âœ…

**LSP ë„êµ¬ í™•ì¸**:
- [ ] ê¸°í˜¸ ì •ì˜ë¡œ ì´ë™í•  ìˆ˜ ìˆë‚˜ìš”?
- [ ] ëª¨ë“  ì°¸ì¡°ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‚˜ìš”?
- [ ] ì§„ë‹¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‚˜ìš”?
- [ ] ì•ˆì „í•˜ê²Œ ê¸°í˜¸ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ìˆë‚˜ìš”?

**AST-Grep ë„êµ¬ í™•ì¸**:
- [ ] ì½”ë“œ íŒ¨í„´ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆë‚˜ìš”?
- [ ] ë©”íƒ€ ë³€ìˆ˜ ë§¤ì¹­ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?
- [ ] ëŒ€ì²´ë¥¼ ë¯¸ë¦¬ë³´ê¸°í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‚˜ìš”?

## ì£¼ì˜ ì‚¬í•­

### LSP ë„êµ¬ ì¼ë°˜ì ì¸ ë¬¸ì œ

| ë¬¸ì œ | ì›ì¸ | í•´ê²° ë°©ë²• |
|--- | --- | ---|
| **ì •ì˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ** | LSP ì„œë²„ê°€ ì‹œì‘ë˜ì§€ ì•Šì•˜ê±°ë‚˜ êµ¬ì„± ì˜¤ë¥˜ | `opencode.json`ì˜ LSP êµ¬ì„± í™•ì¸ |
| **ì°¸ì¡° ëª©ë¡ ë¶ˆì™„ì „** | ì½”ë“œì— ì˜¤ë¥˜ê°€ ìˆì–´ LSP ì„œë²„ê°€ ì™„ì „íˆ ë¶„ì„í•˜ì§€ ëª»í•¨ | ì½”ë“œì˜ ì˜¤ë¥˜ë¥¼ ë¨¼ì € ìˆ˜ì • |
| **ì´ë¦„ ë³€ê²½ ì‹¤íŒ¨** | ìƒˆ ì´ë¦„ì´ ê¸°ì¡´ ê¸°í˜¸ì™€ ì¶©ëŒ | ë” êµ¬ì²´ì ì¸ ì´ë¦„ ì‚¬ìš© |

### AST-Grep ì¼ë°˜ì ì¸ ë¬¸ì œ

| ë¬¸ì œ | ì›ì¸ | í•´ê²° ë°©ë²• |
|--- | --- | ---|
| **íŒ¨í„´ ë§¤ì¹­ ì•ˆë¨** | íŒ¨í„´ ë¶ˆì™„ì „ ë˜ëŠ” êµ¬ë¬¸ ì˜¤ë¥˜ | íŒ¨í„´ì´ ì™„ì „í•œ AST ë…¸ë“œì¸ì§€ í™•ì¸ |
| **Python íŒ¨í„´ ë’¤ë”°ë¥´ëŠ” ì½œë¡ ** | Pythonì˜ `def`ì™€ `class`ëŠ” ì½œë¡ ì´ í•„ìš” ì—†ìŒ | âŒ `def func():` â†’ âœ… `def func($$$):` |
| **ê³¼ë„í•œ ë§¤ì¹­** | íŒ¨í„´ì´ ë„ˆë¬´ ê´‘ë²”ìœ„í•¨ | ë” êµ¬ì²´ì ì¸ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš© ë˜ëŠ” ê²½ë¡œ ì œí•œ |

### ì„±ëŠ¥ ìµœì í™” ì œì•ˆ

```typescript
// âœ… ì¢‹ìŒ: ê²€ìƒ‰ ë²”ìœ„ ì œí•œ
ast_grep_search({
  pattern: "$FUNC($$$)",
  lang: "typescript",
  paths: ["src/api"],  // íŠ¹ì • ë””ë ‰í† ë¦¬ë§Œ ê²€ìƒ‰
  globs: ["*.ts"]      // íŠ¹ì • íŒŒì¼ë§Œ ë§¤ì¹­
})

// âŒ ë‚˜ì¨: ì „ì²´ í”„ë¡œì íŠ¸ ê²€ìƒ‰
ast_grep_search({
  pattern: "$FUNC($$$)",
  lang: "typescript",
  paths: ["./"]  // ëª¨ë“  íŒŒì¼ ê²€ìƒ‰
})
```

## LSP ë„êµ¬ ì „ì²´ ëª©ë¡

| ë„êµ¬ | ê¸°ëŠ¥ | ë§¤ê°œë³€ìˆ˜ |
|--- | --- | ---|
| `lsp_goto_definition` | ê¸°í˜¸ ì •ì˜ë¡œ ì´ë™ | `filePath`, `line`, `character` |
| `lsp_find_references` | ëª¨ë“  ì°¸ì¡° ì°¾ê¸° | `filePath`, `line`, `character`, `includeDeclaration?` |
| `lsp_symbols` | íŒŒì¼ ê°œìš” ë˜ëŠ” ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê¸°í˜¸ ê°€ì ¸ì˜¤ê¸° | `filePath`, `scope`, `query?`, `limit?` |
| `lsp_diagnostics` | ì˜¤ë¥˜ ë° ê²½ê³  ê°€ì ¸ì˜¤ê¸° | `filePath`, `severity?` |
| `lsp_prepare_rename` | ì´ë¦„ ë³€ê²½ ì‘ì—… í™•ì¸ | `filePath`, `line`, `character` |
| `lsp_rename` | ì´ë¦„ ë³€ê²½ ì‘ì—… ì‹¤í–‰ | `filePath`, `line`, `character`, `newName` |

**ì œí•œ**:
- ìµœëŒ€ 200ê°œ ê¸°í˜¸, ì°¸ì¡° ë˜ëŠ” ì§„ë‹¨ ë°˜í™˜(êµ¬ì„± ê°€ëŠ¥)
- LSP ì„œë²„ê°€ êµ¬ì„±ë˜ì–´ ì‹¤í–‰ë˜ì–´ì•¼ í•¨

## AST-Grep ë„êµ¬ ì „ì²´ ëª©ë¡

| ë„êµ¬ | ê¸°ëŠ¥ | ë§¤ê°œë³€ìˆ˜ |
|--- | --- | ---|
| `ast_grep_search` | AST íŒ¨í„´ ê²€ìƒ‰ | `pattern`, `lang`, `paths?`, `globs?`, `context?` |
| `ast_grep_replace` | AST íŒ¨í„´ ëŒ€ì²´ | `pattern`, `rewrite`, `lang`, `paths?`, `globs?`, `dryRun?` |

**ì§€ì› ì–¸ì–´**(25ê°œ):
`bash`, `c`, `cpp`, `csharp`, `css`, `elixir`, `go`, `haskell`, `html`, `java`, `javascript`, `json`, `kotlin`, `lua`, `nix`, `php`, `python`, `ruby`, `rust`, `scala`, `solidity`, `swift`, `typescript`, `tsx`, `yaml`

**ë©”íƒ€ ë³€ìˆ˜**:
- `$VAR` - ë‹¨ì¼ ë…¸ë“œ ë§¤ì¹­
- `$$$` - ì—¬ëŸ¬ ë…¸ë“œ ë§¤ì¹­

## ì‹¤ì „ ì‚¬ë¡€

### ì‚¬ë¡€ 1: API í˜¸ì¶œ ë¦¬íŒ©í† ë§

**ì‹œë‚˜ë¦¬ì˜¤**: ëª¨ë“  `fetch` í˜¸ì¶œì— ì˜¤ë¥˜ ì²˜ë¦¬ ì¶”ê°€

**AST-Grepì„ ì‚¬ìš©í•œ íŒ¨í„´ ì°¾ê¸°**:

```typescript
ast_grep_search({
  pattern: "fetch($URL).then($RES => $BODY)",
  lang: "typescript",
  paths: ["src/api"]
})
```

**AST-Grepì„ ì‚¬ìš©í•œ ëŒ€ì²´**:

```typescript
ast_grep_replace({
  pattern: "fetch($URL).then($RES => $BODY)",
  rewrite: "fetch($URL).then($RES => $BODY).catch(err => handleError(err))",
  lang: "typescript",
  paths: ["src/api"],
  dryRun: true  // ë¨¼ì € ë¯¸ë¦¬ë³´ê¸°
})
```

### ì‚¬ë¡€ 2: ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê°€ì ¸ì˜¤ê¸° ì°¾ê¸°

**LSPë¥¼ ì‚¬ìš©í•œ ì°¸ì¡° ì°¾ê¸°**:

```typescript
// ê° ê°€ì ¸ì˜¤ê¸°ë§ˆë‹¤
lsp_find_references({
  filePath: "src/utils.ts",
  line: 1,  // importê°€ ìˆëŠ” ë¼ì¸
  character: 10
})

// 1ê°œ ì°¸ì¡°ë§Œ ë°˜í™˜(ê°€ì ¸ì˜¤ê¸° ìì²´)í•˜ë©´ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ
```

### ì‚¬ë¡€ 3: êµ¬ì„± ë³€ìˆ˜ ì´ë¦„ ë³€ê²½

**1ë‹¨ê³„: ì´ë¦„ ë³€ê²½ í™•ì¸**

```typescript
lsp_prepare_rename({
  filePath: "src/config.ts",
  line: 10,
  character: 4
})
```

**2ë‹¨ê³„: ì´ë¦„ ë³€ê²½ ì‹¤í–‰**

```typescript
lsp_rename({
  filePath: "src/config.ts",
  line: 10,
  character: 4,
  newName: "API_BASE_URL"
})
```

## ì´ ê³¼ì • ìš”ì•½

ì´ ê³¼ì •ì—ì„œëŠ” oh-my-opencodeì˜ LSP ë„êµ¬ì™€ AST-Grep ë„êµ¬ë¥¼ ì†Œê°œí–ˆìŠµë‹ˆë‹¤:

**LSP ë„êµ¬**:
- IDE ìˆ˜ì¤€ì˜ ì½”ë“œ ì´í•´ ë° ì¡°ì‘ ê¸°ëŠ¥ ì œê³µ
- ì •ì˜ë¡œ ì´ë™, ì°¸ì¡° ì°¾ê¸°, ì§„ë‹¨ ê°€ì ¸ì˜¤ê¸°, ê¸°í˜¸ ì´ë¦„ ë³€ê²½ ì§€ì›
- í”„ë¡œì íŠ¸ êµ¬ì„±ëœ LSP ì„œë²„ ì‚¬ìš©, IDE ë™ì‘ê³¼ ì¼ì¹˜

**AST-Grep ë„êµ¬**:
- AST ê¸°ë°˜ êµ¬ì¡°í™”ëœ ì½”ë“œ íŒ¨í„´ ë§¤ì¹­
- ë©”íƒ€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•œ ìœ ì—°í•œ ë§¤ì¹­ ì§€ì›
- ì¼ê´„ ëŒ€ì²´ ë° ë¦¬íŒ©í† ë§ ì§€ì›

**ëª¨ë²” ì‚¬ë¡€**:
- ì˜ë¯¸ ì´í•´ê°€ í•„ìš”í•œ ì‹œë‚˜ë¦¬ì˜¤ì— LSP ì‚¬ìš©
- êµ¬ì¡°í™”ëœ ì½”ë“œ ë¦¬íŒ©í† ë§ì— AST-Grep ì‚¬ìš©
- ëŒ€ì²´ ì „ì— dryRunìœ¼ë¡œ ë¯¸ë¦¬ë³´ê¸°

## ë‹¤ìŒ ê³¼ì • ì˜ˆê³ 

> ë‹¤ìŒ ê³¼ì •ì—ì„œëŠ” **[Categoriesì™€ Skills: ë™ì  ì—ì´ì „íŠ¸ ì¡°í•©](../categories-skills/)**ì„ í•™ìŠµí•©ë‹ˆë‹¤.
>
> í•™ìŠµí•  ë‚´ìš©:
> - Categoriesë¥¼ ì‚¬ìš©í•˜ì—¬ ìµœì  ëª¨ë¸ ìë™ ì„ íƒ ë°©ë²•
> - ë‹¤ë¥¸ Skillsë¥¼ ì¡°í•©í•˜ì—¬ ì „ë¬¸ ì—ì´ì „íŠ¸ ìƒì„± ë°©ë²•
> - v3.0 ìƒˆë¡œìš´ ê¸°ëŠ¥ì˜ ì‹¤ì œ ì ìš© ì‹œë‚˜ë¦¬ì˜¤

---

## ë¶€ë¡: ì†ŒìŠ¤ ì½”ë“œ ì°¸ì¡°

<details>
<summary><strong>í´ë¦­í•˜ì—¬ ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜ í¼ì¹˜ê¸°</strong></summary>

> ì—…ë°ì´íŠ¸: 2026-01-26

### LSP ë„êµ¬

| ê¸°ëŠ¥ | íŒŒì¼ ê²½ë¡œ | ë¼ì¸ |
|--- | --- | ---|
| LSP ë„êµ¬ ì •ì˜ | [`src/tools/lsp/tools.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/tools/lsp/tools.ts) | 29-261 |
| LSP í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ | [`src/tools/lsp/client.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/tools/lsp/client.ts) | 1-596 |
| LSP ìƒìˆ˜ ì •ì˜ | [`src/tools/lsp/constants.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/tools/lsp/constants.ts) | 1-391 |
| LSP íƒ€ì… ì •ì˜ | [`src/tools/lsp/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/tools/lsp/types.ts) | 1-246 |

### AST-Grep ë„êµ¬

| ê¸°ëŠ¥ | íŒŒì¼ ê²½ë¡œ | ë¼ì¸ |
|--- | --- | ---|
|--- | --- | ---|
|--- | --- | ---|
|--- | --- | ---|
|--- | --- | ---|

**í•µì‹¬ ìƒìˆ˜**:
- `DEFAULT_MAX_REFERENCES = 200` - ìµœëŒ€ ë°˜í™˜ ì°¸ì¡° ìˆ˜
- `DEFAULT_MAX_SYMBOLS = 200` - ìµœëŒ€ ë°˜í™˜ ê¸°í˜¸ ìˆ˜
- `DEFAULT_MAX_DIAGNOSTICS = 200` - ìµœëŒ€ ë°˜í™˜ ì§„ë‹¨ ìˆ˜
- `CLI_LANGUAGES` - 25ê°œ ì§€ì› ì–¸ì–´ ëª©ë¡
- `DEFAULT_MAX_MATCHES = 500` - AST-Grep ìµœëŒ€ ë§¤ì¹­ ìˆ˜

**í•µì‹¬ ë„êµ¬ í•¨ìˆ˜**:
- `withLspClient()` - LSP í´ë¼ì´ì–¸íŠ¸ ê°€ì ¸ì˜¤ê¸° ë° ì‘ì—… ì‹¤í–‰
- `runSg()` - AST-Grep CLI ëª…ë ¹ ì‹¤í–‰
- `formatLocation()` - ìœ„ì¹˜ ì •ë³´ í¬ë§·íŒ…
- `formatDiagnostic()` - ì§„ë‹¨ ì •ë³´ í¬ë§·íŒ…

**ì§€ì› LSP ì„œë²„**(ì¼ë¶€):
- TypeScript: `typescript-language-server`
- Python: `basedpyright`, `pyright`, `ty`, `ruff`
- Go: `gopls`
- Rust: `rust-analyzer`
- C/C++: `clangd`

</details>
