---
title: "–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –ø–∞–º—è—Ç–∏ –∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º—É –ø–æ–∏—Å–∫—É | –£—á–µ–±–Ω–∏–∫ Clawdbot"
sidebarTitle: "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–∏—Å–∫ –ø–∞–º—è—Ç–∏"
subtitle: "–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –ø–∞–º—è—Ç–∏ –∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º—É –ø–æ–∏—Å–∫—É"
description: "–£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏ Clawdbot, –≤–∫–ª—é—á–∞—è –≤–µ–∫—Ç–æ—Ä–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é, –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ FTS5, –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ Embedding. –û—Å–≤–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏ –ò–ò –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞."
tags:
  - "memory"
  - "vector-search"
  - "embedding"
  - "sqlite-vec"
prerequisite:
  - "start-gateway-startup"
  - "advanced-models-auth"
order: 260
---

# –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –ø–∞–º—è—Ç–∏ –∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º—É –ø–æ–∏—Å–∫—É

## –ß—Ç–æ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ:

- –ü–æ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤ –∏ –º–µ—Ö–∞–Ω–∏–∑–º –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –ø–∞–º—è—Ç–∏ Clawdbot
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (OpenAI, Gemini, –ª–æ–∫–∞–ª—å–Ω—ã–π)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (BM25 + –≤–µ–∫—Ç–æ—Ä–Ω—ã–π) –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
- –£–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω–¥–µ–∫—Å–∞–º–∏ –ø–∞–º—è—Ç–∏ –∏ –ø–æ–∏—Å–∫–æ–º —á–µ—Ä–µ–∑ CLI
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫—ç—à Embedding –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

## –í–∞—à–∞ —Ç–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–í—ã –º–æ–∂–µ—Ç–µ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å —ç—Ç–∏–º–∏ —Å–∏—Ç—É–∞—Ü–∏—è–º–∏:

- –ò–ò "–∑–∞–±—ã–≤–∞–µ—Ç" —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –±–µ—Å–µ–¥ –≤ –Ω–æ–≤—ã—Ö —Å–µ—Å—Å–∏—è—Ö
- –í—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –ò–ò –∑–∞–ø–æ–º–∏–Ω–∞–ª –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- –í—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –ò–ò "—É—á–∏—Ç—å—Å—è" –∏ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ü—Ä–∏ –ø–æ–∏—Å–∫–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –±–µ—Å–µ–¥ –Ω–µ —É–¥–∞—ë—Ç—Å—è –Ω–∞–π—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —Ç–µ—Ö–Ω–∏–∫—É

**–°–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏** –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç—Ç–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ü—Ä–∏–º–µ—Ä | –ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è |
|--- | --- | ---|
| –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è | "–Ø –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü, –∑–∞–ø–æ–º–Ω–∏ —ç—Ç–æ" | MEMORY.md |
| –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ | "–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏ –∑–∞–¥–∞—á–∏" | memory/YYYY-MM-DD.md |
| –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π | "–ö–∞–∫–æ–π –±—ã–ª API endpoint, –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ–±—Å—É–∂–¥–∞–ª–∏ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑?" | –í–µ–∫—Ç–æ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å |
| –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ | "Gateway —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 18789" | MEMORY.md |

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø–∞–º—è—Ç–∏

Clawdbot –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤–∞ —É—Ä–æ–≤–Ω—è –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç—å—é:

| –£—Ä–æ–≤–µ–Ω—å | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ú–æ–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ |
|--- | --- | --- | ---|
| **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å** | `MEMORY.md` | –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è, –≤–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç—ã | –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏ |
| **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∂—É—Ä–Ω–∞–ª** | `memory/YYYY-MM-DD.md` | –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏, –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –∏ –≤—á–µ—Ä–∞—à–Ω–∏–π |

::: info –ü–æ—á–µ–º—É –¥–≤–∞ —É—Ä–æ–≤–Ω—è?
`MEMORY.md` –ø–æ—Ö–æ–∂ –Ω–∞ "–±–∞–∑—É –∑–Ω–∞–Ω–∏–π" –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Å–µ—Å—Å–∏—é, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –≥—Ä—É–ø–ø–æ–≤—ã–µ –±–µ—Å–µ–¥—ã. `memory/*.md` ‚Äî —ç—Ç–æ "–¥–Ω–µ–≤–Ω–∏–∫", –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –æ–±–ª–µ–≥—á–µ–Ω–∏—è —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
:::

### –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

```mermaid
graph LR
    A[Memory Files] --> B[Chunking<br/>~400 tokens]
    B --> C[Embedding Provider]
    C --> D{Provider Type}
    D -->|OpenAI/Gemini| E[Remote API]
    D -->|Local| F[node-llama-cpp]
    E --> G[SQLite Index]
    F --> G
    G --> H[Vector Search]
    G --> I[FTS5 BM25]
    H --> J[Hybrid Merge]
    I --> J
    J --> K[Ranked Results]
```

### –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫: BM25 + –í–µ–∫—Ç–æ—Ä–Ω—ã–π

–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Ö–æ—Ä–æ—à –≤ "—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏", –Ω–æ —Å–ª–∞–± –≤ "—Ç–æ—á–Ω–æ–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏":

| –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞ | –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ | BM25 –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π | –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ |
|--- | --- | --- | ---|
| "IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞" | ‚ùå –°–ª–∞–±—ã–π | ‚úÖ –°–∏–ª—å–Ω—ã–π | ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π |
| "–ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å Gateway" | ‚úÖ –°–∏–ª—å–Ω—ã–π | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π | ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π |
| "API endpoint a828e60" | ‚ùå –°–ª–∞–±—ã–π | ‚úÖ –°–∏–ª—å–Ω—ã–π | ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π |

**–§–æ—Ä–º—É–ª–∞ —Å–ª–∏—è–Ω–∏—è**:
```javascript
finalScore = vectorWeight √ó vectorScore + textWeight √ó textScore
```

- `vectorWeight + textWeight` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –¥–æ 1.0
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 70% –≤–µ–∫—Ç–æ—Ä + 30% –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `agents.defaults.memorySearch.query.hybrid.*`

---

## üéí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å:

::: warning –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- [ ] Gateway –∑–∞–ø—É—â–µ–Ω ( [–ó–∞–ø—É—Å—Ç–∏—Ç—å Gateway](../../start/gateway-startup/) )
- [ ] –ú–æ–¥–µ–ª—å –ò–ò –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ ( [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–µ–ª–∏ –ò–ò](../models-auth/) )
- [ ] –í—ã —É–º–µ–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Ñ–∞–π–ª—ã Markdown
:::

::: tip –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenAI –∏–ª–∏ Gemini embeddings (–±—ã—Å—Ç—Ä—ã–µ –∏ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞)
- –õ–æ–∫–∞–ª—å–Ω—ã–µ embeddings —Ç—Ä–µ–±—É—é—Ç `pnpm rebuild node-llama-cpp`
- –ü–µ—Ä–≤–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç, –Ω–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±—ã—Å—Ç—Ä—ã
:::

---

## –°–ª–µ–¥—É–π—Ç–µ —à–∞–≥–∞–º

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã –ø–∞–º—è—Ç–∏

**–ü–æ—á–µ–º—É**: –ò–ò –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã, —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–º—è—Ç–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã –≤ —Ä–∞–±–æ—á–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ –∞–≥–µ–Ω—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `~/clawd`):

```bash
# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–∞–º—è—Ç–∏
cat > ~/clawd/MEMORY.md << 'EOF'
# –õ–∏—á–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è

- –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –≤ –ø–∏—Ç–∞–Ω–∏–∏: –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü, –Ω–µ –ª—é–±–ª—é –æ—Å—Ç—Ä—É—é –µ–¥—É
- –†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è: —Å 9 –¥–æ 18
- –ß–∞—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã: `clawdbot gateway status`

# –í–∞–∂–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- –ü–æ—Ä—Ç Gateway: 18789
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL 15
EOF

# –°–æ–∑–¥–∞—Ç—å –∂—É—Ä–Ω–∞–ª —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–Ω—è
cat > ~/clawd/memory/$(date +%Y-%m-%d).md << 'EOF'
# –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å–µ–≥–æ–¥–Ω—è

- –ó–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Gateway
- –ò–∑—É—á–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏
- –ó–∞–¥–∞—á–∏: –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π
EOF
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤
tree ~/clawd/
# –∏–ª–∏
ls -la ~/clawd/
ls -la ~/clawd/memory/

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞
~/clawd/
‚îú‚îÄ‚îÄ MEMORY.md
‚îî‚îÄ‚îÄ memory/
    ‚îî‚îÄ‚îÄ 2026-01-27.md
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–∞–º—è—Ç–∏

**–ü–æ—á–µ–º—É**: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ Embedding –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞

```bash
# –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
clawdbot memory status

# –ì–ª—É–±–æ–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)
clawdbot memory status --deep

# –ì–ª—É–±–æ–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ + –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
clawdbot memory status --deep --index
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**:

```bash
‚úì Memory Search enabled
  Store: ~/.clawdbot/memory/main.sqlite
  Provider: openai
  Model: text-embedding-3-small
  Fallback: openai
  Hybrid: enabled (vectorWeight: 0.7, textWeight: 0.3)
  Cache: enabled (maxEntries: 50000)
  Sources: memory
  Indexed: 2 files, 5 chunks
```

::: tip –ì–ª—É–±–æ–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- `--deep` –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, –¥–æ—Å—Ç—É–ø–Ω—ã –ª–∏ embeddings OpenAI/Gemini/Local
- `--index` —Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ "–≥—Ä—è–∑–Ω–æ–≥–æ" –∏–Ω–¥–µ–∫—Å–∞
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç
:::

### –®–∞–≥ 3: –í—ã–∑–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é

**–ü–æ—á–µ–º—É**: –û–±–µ—Å–ø–µ—á–∏—Ç—å, —á—Ç–æ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–∞–º—è—Ç–∏ –±—É–¥—É—Ç –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã

```bash
# –í—ã–∑–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é
clawdbot memory index

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –∂—É—Ä–Ω–∞–ª–æ–º
clawdbot memory index --verbose

# –¢–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
clawdbot memory index --agent main
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**:

```bash
Indexing memory for agent: main
  Provider: openai (text-embedding-3-small)
  Sources: memory
  - MEMORY.md (2 chunks)
  - memory/2026-01-27.md (3 chunks)
‚úì Indexed 2 files, 5 chunks
```

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫

**–ü–æ—á–µ–º—É**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –∏ –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

```bash
# –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫
clawdbot memory search "–≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü"

# –ü–æ–∏—Å–∫ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å BM25)
clawdbot memory search "–ø–æ—Ä—Ç Gateway"

# –ù–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π)
clawdbot memory search "—á—Ç–æ —è –ª—é–±–ª—é –µ—Å—Ç—å"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
clawdbot memory search "Gateway" --verbose
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**:

```bash
Searching memory for: "–≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü"

Results (2):

[1] MEMORY.md:3-5 (score: 0.842)
  - –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –≤ –ø–∏—Ç–∞–Ω–∏–∏: –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü, –Ω–µ –ª—é–±–ª—é –æ—Å—Ç—Ä—É—é –µ–¥—É

[2] memory/2026-01-27.md:1-3 (score: 0.615)
  - –ó–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Gateway
  - –ò–∑—É—á–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ Embedding

**–ü–æ—á–µ–º—É**: –í—ã–±—Ä–∞—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π (—É–¥–∞–ª—ë–Ω–Ω—ã–π vs –ª–æ–∫–∞–ª—å–Ω—ã–π)

#### –í–∞—Ä–∏–∞–Ω—Ç A: OpenAI embeddings (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `~/.clawdbot/clawdbot.json`:

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "enabled": true,
        "provider": "openai",
        "model": "text-embedding-3-small",
        "fallback": "openai",
        "remote": {
          "apiKey": "YOUR_OPENAI_API_KEY",
          "batch": {
            "enabled": true,
            "concurrency": 2
          }
        }
      }
    }
  }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë—ã—Å—Ç—Ä—ã–π –∏ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–∫–µ—Ç–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é (—ç–∫–æ–Ω–æ–º–∏—á–Ω–æ)
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

#### –í–∞—Ä–∏–∞–Ω—Ç B: Gemini embeddings

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "provider": "gemini",
        "model": "gemini-embedding-001",
        "remote": {
          "apiKey": "YOUR_GEMINI_API_KEY"
        },
        "fallback": "openai"
      }
    }
  }
}
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: –õ–æ–∫–∞–ª—å–Ω—ã–µ embeddings (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏)

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "provider": "local",
        "local": {
          "modelPath": "hf:ggml-org/embeddinggemma-300M-GGUF/embeddinggemma-300M-Q8_0.gguf",
          "modelCacheDir": "~/.cache/embeddings"
        },
        "fallback": "none"
      }
    }
  }
}
```

**–ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è**:

```bash
# –ü–µ—Ä–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö embeddings —Ç—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä–∫–∏
pnpm approve-builds
# –í—ã–±—Ä–∞—Ç—å node-llama-cpp
pnpm rebuild node-llama-cpp
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**:

```bash
‚úì node-llama-cpp installed
‚úì Local embedding model ready
```

::: warning –õ–æ–∫–∞–ª—å–Ω—ã–µ embeddings
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º–æ–¥–µ–ª—å –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ (~600MB)
- –¢—Ä–µ–±—É–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ node-llama-cpp (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–π —Å—Ä–µ–¥—ã)
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ, –Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
:::

### –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Å–∞ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

**–ü–æ—á–µ–º—É**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–ø–æ—Ä—Ü–∏—é –≤–µ—Å–æ–≤ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "query": {
          "hybrid": {
            "enabled": true,
            "vectorWeight": 0.7,
            "textWeight": 0.3,
            "candidateMultiplier": 4
          }
        }
      }
    }
  }
}
```

**–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ |
|--- | --- | --- | ---|
| `vectorWeight` | 0,7 | –í–µ—Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ | –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 0,8 –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ "–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ" |
| `textWeight` | 0,3 | –í–µ—Å –ø–æ–∏—Å–∫–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º | –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 0,5 –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ "–∫–æ–¥/ID" |
| `candidateMultiplier` | 4 | –ú–Ω–æ–∂–∏—Ç–µ–ª—å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ | –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 6 –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Ç—ã |

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤**:

```bash
# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å
clawdbot memory search "–º–µ—Ç–æ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Gateway"
# vectorWeight: 0,7 ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
# textWeight: 0,5 ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ "—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å", "Gateway"

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å
clawdbot memory search "API endpoint a828e60"
# vectorWeight: 0,3 ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—é
# textWeight: 0,7 ‚Üí —Ç–æ—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ "a828e60"
```

### –®–∞–≥ 7: –í–∫–ª—é—á–∏—Ç—å —É—Å–∫–æ—Ä–µ–Ω–∏–µ SQLite-vec

**–ü–æ—á–µ–º—É**: –í—ã–ø–æ–ª–Ω–∏—Ç—å pushdown –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ SQLite, –∏–∑–±–µ–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö embeddings

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```json
{
  "agents": {
    "defaults": {
      "memorySearch": {
        "store": {
          "vector": {
            "enabled": true,
            "extensionPath": "/path/to/sqlite-vec"
          }
        }
      }
    }
  }
}
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å sqlite-vec**:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
clawdbot memory status --deep

# –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ
‚úì SQLite-vec extension loaded
  Vector table: chunks_vec
```

::: info SQLite-vec
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏—é –Ω–∞ JS (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—É—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–±–æ—Ä–æ–∫ –∏–ª–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫
:::

---

## –¢–æ—á–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚úÖ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤—ã—à–µ —à–∞–≥–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:

| –≠–ª–µ–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ | –ú–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
|--- | --- | ---|
| –§–∞–π–ª—ã –ø–∞–º—è—Ç–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç | `ls ~/clawd/` | MEMORY.md –∏ –∫–∞—Ç–∞–ª–æ–≥ memory/ —Å—É—â–µ—Å—Ç–≤—É—é—Ç |
| –ò–Ω–¥–µ–∫—Å —Å–æ–∑–¥–∞–Ω | `clawdbot memory status` | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç Indexed > 0 chunks |
| –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç | `clawdbot memory search "..."` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã |
| Provider —Ä–∞–±–æ—Ç–∞–µ—Ç | `clawdbot memory status --deep` | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø Provider |

---

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –°–±–æ–π –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ Embedding

**–°–∏–º–ø—Ç–æ–º**:

```bash
‚úó Memory Search disabled
  Error: No API key found for provider
```

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat ~/.clawdbot/clawdbot.json | grep -A 5 "memorySearch"

# –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ apiKey
# –ò–ª–∏ –∑–∞–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export OPENAI_API_KEY="sk-..."
export GEMINI_API_KEY="..."
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ embeddings

**–°–∏–º–ø—Ç–æ–º**:

```bash
‚úó Local embedding provider failed
  Error: Cannot find module 'node-llama-cpp'
```

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –û–¥–æ–±—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É
pnpm approve-builds

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
pnpm rebuild node-llama-cpp
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ò–Ω–¥–µ–∫—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º**:

```bash
# MEMORY.md –±—ã–ª –∏–∑–º–µ–Ω—ë–Ω
# –ù–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –≤—Å—ë –µ—â—ë —Å—Ç–∞—Ä—ã–µ
```

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –°–ø–æ—Å–æ–± 1: –í—ã–∑–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é
clawdbot memory index

# –°–ø–æ—Å–æ–± 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Gateway (–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é onSessionStart)
clawdbot gateway restart

# –°–ø–æ—Å–æ–± 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤
clawdbot memory status --verbose
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å "Watch: true"
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ù–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞

**–°–∏–º–ø—Ç–æ–º**: –ü–æ–∏—Å–∫ "Gateway" –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "–ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–±–æ—Ç—ã"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**:

1. **–ù–µ—É–º–µ—Å—Ç–Ω—ã–µ –≥–∏–±—Ä–∏–¥–Ω—ã–µ –≤–µ—Å–∞**:
   - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å ("–∫–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å") ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å `vectorWeight`
   - –ó–∞–ø—Ä–æ—Å –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º ("API endpoint") ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å `textWeight`

2. **–ò–Ω–¥–µ–∫—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ –æ–±–Ω–æ–≤–ª—ë–Ω**:
   ```bash
   # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
   rm ~/.clawdbot/memory/main.sqlite
   clawdbot memory index
   ```

3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç—å—é —á–∞–Ω–∫–æ–≤**:
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 400 —Ç–æ–∫–µ–Ω–æ–≤, –º–æ–∂–µ—Ç –æ–±—Ä–µ–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `agents.defaults.memorySearch.chunking.tokens`

---

## –ò—Ç–æ–≥–∏ —É—Ä–æ–∫–∞

–ù–∞ —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã —É–∑–Ω–∞–ª–∏:

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø–∞–º—è—Ç–∏**
   - –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (MEMORY.md + memory/*.md)
   - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å + –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ FTS5
   - –ì–∏–±—Ä–∏–¥–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ (BM25 + –≤–µ–∫—Ç–æ—Ä–Ω—ã–π)

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ Embedding**
   - –¢—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞: OpenAI/Gemini/–ª–æ–∫–∞–ª—å–Ω—ã–π
   - –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–Ω–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
   - –ú–µ—Ö–∞–Ω–∏–∑–º fallback

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ CLI**
   - `clawdbot memory status` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   - `clawdbot memory index` –≤—ã–∑–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
   - `clawdbot memory search` –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫

4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ SQLite-vec
   - –ö—ç—à Embedding
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–∏–±—Ä–∏–¥–Ω—ã—Ö –≤–µ—Å–æ–≤

---

## –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫

> –í —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ –º—ã –∏–∑—É—á–∏–º **[–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—è Sandbox](../security-sandbox/)**.
>
> –í—ã —É–∑–Ω–∞–µ—Ç–µ:
> - –ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º –∏ allowlist
> - –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Å—Å–∏–π Sandbox
> - –ú–µ—Ö–∞–Ω–∏–∑–º —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è Exec
> - Docker-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
> - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Tailscale

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É

<details>
<summary><strong>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞</strong></summary>

> –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2026-01-27

| –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É | –ù–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ |
|--- | --- | ---|
| –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–º—è—Ç–∏ | [`src/memory/manager.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/manager.ts) | 1-200 |
| –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ | [`src/memory/hybrid.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/hybrid.ts) | 1-112 |
| –ü–æ—Å—Ç–∞–≤—â–∏–∫ Embedding | [`src/memory/embeddings.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/embeddings.ts) | 1-80 |
| OpenAI embeddings | [`src/memory/embeddings-openai.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/embeddings-openai.ts) | –í–µ—Å—å —Ñ–∞–π–ª |
| Gemini embeddings | [`src/memory/embeddings-gemini.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/embeddings-gemini.ts) | –í–µ—Å—å —Ñ–∞–π–ª |
| –õ–æ–∫–∞–ª—å–Ω—ã–µ embeddings | [`src/memory/node-llama.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/node-llama.ts) | –í–µ—Å—å —Ñ–∞–π–ª |
| SQLite-vec | [`src/memory/sqlite-vec.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/sqlite-vec.ts) | –í–µ—Å—å —Ñ–∞–π–ª |
| –ü–∞–∫–µ—Ç–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (OpenAI) | [`src/memory/batch-openai.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/batch-openai.ts) | –í–µ—Å—å —Ñ–∞–π–ª |
| –ü–∞–∫–µ—Ç–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (Gemini) | [`src/memory/batch-gemini.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/batch-gemini.ts) | –í–µ—Å—å —Ñ–∞–π–ª |
| –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–∏—Å–∫–∞ | [`src/memory/manager-search.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/manager-search.ts) | –í–µ—Å—å —Ñ–∞–π–ª |
| Memory Schema | [`src/memory/memory-schema.ts`](https://github.com/clawdbot/clawdbot/blob/main/src/memory/memory-schema.ts) | –í–µ—Å—å —Ñ–∞–π–ª |

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**:
- `agents.defaults.memorySearch.enabled`: –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø–æ–∏—Å–∫ –ø–∞–º—è—Ç–∏
- `agents.defaults.memorySearch.provider`: –ø–æ—Å—Ç–∞–≤—â–∏–∫ Embedding ("openai", "gemini", "local")
- `agents.defaults.memorySearch.query.hybrid.vectorWeight`: –≤–µ—Å –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0,7)
- `agents.defaults.memorySearch.query.hybrid.textWeight`: –≤–µ—Å –ø–æ–∏—Å–∫–∞ BM25 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0,3)
- `agents.defaults.memorySearch.cache.enabled`: –∫—ç—à Embedding (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
- `agents.defaults.memorySearch.store.vector.enabled`: —É—Å–∫–æ—Ä–µ–Ω–∏–µ SQLite-vec (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- `mergeHybridResults()`: —Å–ª–∏—è–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö + BM25 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (`src/memory/hybrid.ts:39-111`)
- `bm25RankToScore()`: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–Ω–≥–∞ BM25 –≤ –±–∞–ª–ª (`src/memory/hybrid.ts:34-37`)
- `createEmbeddingProvider()`: —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ Embedding (`src/memory/embeddings.ts`)
- `getMemorySearchManager()`: –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ–∏—Å–∫–∞ –ø–∞–º—è—Ç–∏ (`src/memory/search-manager.ts`)

**–ö–æ–º–∞–Ω–¥—ã CLI**:
- `clawdbot memory status`: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`src/cli/commands/memory-cli.ts`)
- `clawdbot memory index`: –≤—ã–∑–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é (`src/cli/commands/memory-cli.ts`)
- `clawdbot memory search`: –∏—Å–∫–∞—Ç—å –≤ –ø–∞–º—è—Ç–∏ (`src/cli/commands/memory-cli.ts`)

</details>
