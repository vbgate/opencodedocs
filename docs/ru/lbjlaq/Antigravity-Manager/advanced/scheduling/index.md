---
title: "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π: –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ | Antigravity-Manager"
sidebarTitle: "–°–¥–µ–ª–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º–∏"
subtitle: "–í—ã—Å–æ–∫–æ–¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"
description: "–ò–∑—É—á–∏—Ç–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã—Å–æ–∫–æ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ Antigravity Manager. –û—Å–≤–æ–π—Ç–µ –ª–∏–ø–∫–∏–µ —Å–µ—Å—Å–∏–∏, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∏ –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ —Å–±–æ—è—Ö, –ø–æ–≤—ã—à–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã."
tags:
  - "—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å"
  - "–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"
  - "–ª–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è"
  - "—Ä–æ—Ç–∞—Ü–∏—è —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π"
  - "–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö"
prerequisite:
  - "start-add-account"
  - "start-proxy-and-first-client"
  - "advanced-config"
order: 3
---
# –í—ã—Å–æ–∫–æ–¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –†–æ—Ç–∞—Ü–∏—è, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏, –ª–∏–ø–∫–∏–µ —Å–µ—Å—Å–∏–∏ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö

–ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Antigravity Tools –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ AI-—à–ª—é–∑–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –≤—ã –Ω–µ–∏–∑–±–µ–∂–Ω–æ —Å—Ç–æ–ª–∫–Ω—ë—Ç–µ—Å—å —Å –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –ø—Ä–æ–±–ª–µ–º–æ–π: —á–µ–º –º–µ–Ω—å—à–µ —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π, —Ç–µ–º —á–∞—â–µ 429/401/invalid_grant, —á–µ–º –±–æ–ª—å—à–µ —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π, —Ç–µ–º –º–µ–Ω–µ–µ –ø–æ–Ω—è—Ç–Ω–æ ¬´–∫–∞–∫–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å —Ä–∞–±–æ—Ç–∞–µ—Ç¬ª, –∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫–µ—à –ø–∞–¥–∞–µ—Ç.

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –±—É–¥–µ—Ç —á—ë—Ç–∫–æ –æ–±—ä—è—Å–Ω–µ–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –∫–∞–∫ –æ–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å, —á—Ç–æ —Ç–∞–∫–æ–µ ¬´–ª–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è¬ª, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è, –∏ –∫–∞–∫ —Å –ø–æ–º–æ—â—å—é ¬´—Ä–µ–∂–∏–º–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏¬ª —Å–¥–µ–ª–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–º.

## –ß—Ç–æ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è

- –ü–æ–Ω—è—Ç—å, —á—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –¥–µ–ª–∞—é—Ç —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è Antigravity Tools –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- –ó–Ω–∞—Ç—å, –∫–∞–∫ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è ¬´–æ—Ç–ø–µ—á–∞—Ç–æ–∫ —Å–µ—Å—Å–∏–∏ (session_id)¬ª –∏ –∫–∞–∫ –æ–Ω –≤–ª–∏—è–µ—Ç –Ω–∞ –ª–∏–ø–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å ¬´—Ä–µ–∂–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏¬ª –≤ GUI –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –ª–æ–≥–∏–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–Ω –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç
- –ü—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ 429/5xx/invalid_grant –∑–Ω–∞—Ç—å, –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–º–µ—Ç–∏—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã, –∫–∞–∫ –ø–æ–≤—Ç–æ—Ä–∏—Ç –ø–æ–ø—ã—Ç–∫—É –∏ –∫–æ–≥–¥–∞ —Ä–æ—Ç–∏—Ä—É–µ—Ç

## –í–∞—à–∞ —Ç–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

- Claude Code –∏–ª–∏ OpenAI SDK –≤–Ω–µ–∑–∞–ø–Ω–æ –¥–∞—é—Ç 429 –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ, –∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–µ –º–µ–Ω—è—é—Ç —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫–µ—à –ø–∞–¥–∞–µ—Ç
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç –∑–∞–¥–∞—á–∏, —á–∞—Å—Ç–æ ¬´–ø–æ–ø–∏—Ä–∞—é—Ç—Å—è¬ª –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ —Å—Ç–∞—Ç—É—Å—ã —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –í—ã —Ö–æ—Ç–∏—Ç–µ —É—Å—Ç—Ä–∞–Ω—è—Ç—å –Ω–µ–ø–æ–ª–∞–¥–∫–∏, –Ω–æ –Ω–µ –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∑–∞–ø—Ä–æ—Å
- –í—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ ¬´—Å–∞–º—É—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å¬ª, –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–æ—Ç–∏—Ä—É–µ—Ç

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥

- –í–∞–º –Ω—É–∂–Ω–æ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å ¬´—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (–º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫)¬ª –∏ ¬´–ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –∫–µ—à (–æ–¥–Ω–∞ —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å)¬ª
- –í—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –¥–∏–∞–ª–æ–≥ –∫–∞–∫ –º–æ–∂–Ω–æ –¥–æ–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –æ–¥–Ω—É –∏ —Ç—É –∂–µ —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å (—É–º–µ–Ω—å—à–∞—è –∫–æ–ª–µ–±–∞–Ω–∏—è Prompt Caching)
- –í—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–∞/—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–≤ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ–¥–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏

## üéí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

1) –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –º–∏–Ω–∏–º—É–º 2 –¥–æ—Å—Ç—É–ø–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (—á–µ–º –º–µ–Ω—å—à–µ –ø—É–ª —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π, —Ç–µ–º –º–µ–Ω—å—à–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ —Ä–æ—Ç–∞—Ü–∏–∏)
2) –°–ª—É–∂–±–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –∑–∞–ø—É—â–µ–Ω–∞ (–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ¬´API Proxy¬ª –≤–∏–¥–µ–Ω —Å—Ç–∞—Ç—É—Å Running)
3) –í—ã –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é)

:::tip –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ —É—Ä–æ–∫ –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–ï—Å–ª–∏ –≤—ã –µ—â—ë –Ω–µ –∑–Ω–∞–∫–æ–º—ã —Å `gui_config.json` –∏ –∫–∞–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≥–æ—Ä—è—á–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —Å–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ **[–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é: AppConfig/ProxyConfig, –º–µ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫ –∏ —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –≥–æ—Ä—è—á–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è](/ru/lbjlaq/Antigravity-Manager/advanced/config/)**.
:::

## –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è: —á–µ—Ä–µ–∑ –∫–∞–∫–∏–µ ¬´—É—Ä–æ–≤–Ω–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è¬ª –ø—Ä–æ–π–¥—ë—Ç –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å

–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ ¬´–æ–¥–∏–Ω–æ—á–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å¬ª, –∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤, –Ω–∞–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞:

1) **SessionManager —Å–Ω–∞—á–∞–ª–∞ –¥–∞—ë—Ç –∑–∞–ø—Ä–æ—Å—É –æ—Ç–ø–µ—á–∞—Ç–æ–∫ —Å–µ—Å—Å–∏–∏ (session_id)**
2) **–ü—Ä–∏ –∫–∞–∂–¥–æ–π –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–µ Handlers —Ç—Ä–µ–±—É—é—Ç, —á—Ç–æ–±—ã TokenManager –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–æ—Ç–∏—Ä–æ–≤–∞–ª** (`attempt > 0`)
3) **TokenManager –∑–∞—Ç–µ–º –≤—ã–±–∏—Ä–∞–µ—Ç —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –ø–æ: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å ‚Üí –ª–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è ‚Üí –æ–∫–Ω–æ 60s ‚Üí —Ä–æ—Ç–∞—Ü–∏—è**
4) **–ü—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ 429/5xx –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ —á–∞—Å—Ç–æ—Ç—ã**, –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –≤—ã–±–æ—Ä–µ —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Ç–∞–∫–∏–µ —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –±—É–¥—É—Ç –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–ø—É—â–µ–Ω—ã

### –ß—Ç–æ —Ç–∞–∫–æ–µ ¬´–æ—Ç–ø–µ—á–∞—Ç–æ–∫ —Å–µ—Å—Å–∏–∏ (session_id)¬ª?

**–û—Ç–ø–µ—á–∞—Ç–æ–∫ —Å–µ—Å—Å–∏–∏** ‚Äî —ç—Ç–æ ¬´–ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π Session Key¬ª, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –¥–∏–∞–ª–æ–≥–∞ –∫ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏.

–í –∑–∞–ø—Ä–æ—Å–∞—Ö Claude –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

1) `metadata.user_id` (—è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω–æ –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –Ω–µ –ø—É—Å—Ç–æ –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–µ—Ñ–∏–∫—Å–∞ `"session-"`)
2) –ü–µ—Ä–≤–æ–µ ¬´–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª–∏–Ω–Ω–æ–µ¬ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ SHA256, –∑–∞—Ç–µ–º —É—Å–µ–∫–∞–µ—Ç—Å—è –¥–æ `sid-xxxxxxxxxxxxxxxx`

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: `src-tauri/src/proxy/session_manager.rs` (—É Claude/OpenAI/Gemini –µ—Å—Ç—å —Å–≤–æ—è –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è).

:::info –ú–∞–ª–µ–Ω—å–∫–∞—è –¥–µ—Ç–∞–ª—å: –ø–æ—á–µ–º—É —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–µ—Ä–≤–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ?
–í –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ —è–≤–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–æ ¬´—Ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–µ —Å–º–µ—à–∏–≤–∞—è –∏–º—è –º–æ–¥–µ–ª–∏ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏¬ª, —Ü–µ–ª—å ‚Äî –∑–∞—Å—Ç–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ session_id, —Ç–µ–º —Å–∞–º—ã–º –ø–æ–≤—ã—à–∞—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫–µ—à.
:::

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã–±–æ—Ä–∞ —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ TokenManager

–û—Å–Ω–æ–≤–Ω–æ–π –≤—Ö–æ–¥ TokenManager:

- `TokenManager::get_token(quota_group, force_rotate, session_id, target_model)`

–ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:

1) **–†–µ–∂–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ (Fixed Account)**: –µ—Å–ª–∏ –≤ GUI –≤–∫–ª—é—á—ë–Ω ¬´—Ä–µ–∂–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏¬ª (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–Ω—Ç–∞–π–º–∞), –∏ —ç—Ç–∞ —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —á–∞—Å—Ç–æ—Ç–æ–π, –Ω–µ –∑–∞—â–∏—â–µ–Ω–∞ –∫–≤–æ—Ç–æ–π, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –Ω–∞–ø—Ä—è–º—É—é.
2) **–õ–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è (Session Binding)**: –µ—Å–ª–∏ –µ—Å—Ç—å `session_id` –∏ —Ä–µ–∂–∏–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ `PerformanceFirst`, –±—É–¥–µ—Ç —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è –∫ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏.
3) **–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ 60s**: –µ—Å–ª–∏ `session_id` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ (–∏–ª–∏ –ø—Ä–∏–≤—è–∑–∫–∞ –µ—â—ë –Ω–µ —É—Å–ø–µ—à–Ω–∞), –≤ –Ω–µ `PerformanceFirst` –±—É–¥–µ—Ç –∫–∞–∫ –º–æ–∂–Ω–æ –¥–æ–ª—å—à–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è ¬´–ø–æ—Å–ª–µ–¥–Ω—è—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å¬ª –≤ —Ç–µ—á–µ–Ω–∏–µ 60 —Å–µ–∫—É–Ω–¥.
4) **–†–æ—Ç–∞—Ü–∏—è (Round-robin)**: –µ—Å–ª–∏ –Ω–∏ –æ–¥–Ω–æ –∏–∑ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ, —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É —Å–∞–º–æ–≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–µ–º—É –∏–Ω–¥–µ–∫—Å—É —Ä–æ—Ç–∞—Ü–∏–∏.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å—Ç—å –¥–≤–∞ ¬´–Ω–µ–≤–∏–¥–∏–º—ã—Ö –ø—Ä–∞–≤–∏–ª–∞¬ª, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏–ª—å–Ω–æ –≤–ª–∏—è—é—Ç –Ω–∞ –æ—â—É—â–µ–Ω–∏—è:

- **–£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è**: ULTRA > PRO > FREE, –≤ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Äî —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º –æ—Å—Ç–∞—Ç–∫–æ–º –∫–≤–æ—Ç—ã.
- **–°–±–æ–π –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã**: —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø—ã—Ç–∞–ª–∏—Å—å –∏ –Ω–µ—É—Å–ø–µ—à–Ω–æ, –≤–æ–π–¥—É—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é `attempted`; –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ –∫–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —á–∞—Å—Ç–æ—Ç–æ–π —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã.

### –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Ç—Ä–µ–º—è —Ä–µ–∂–∏–º–∞–º–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ: `CacheFirst` / `Balance` / `PerformanceFirst`.

–í–∑—è–≤ –∑–∞ –æ—Å–Ω–æ–≤—É ¬´—Ä–µ–∞–ª—å–Ω—É—é –≤–µ—Ç–∫—É TokenManager –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞¬ª, –∏—Ö –∫–ª—é—á–µ–≤–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–π: **–≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –ª–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è + –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–∫–Ω–∞ 60s**.

- `PerformanceFirst`: –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ª–∏–ø–∫—É—é —Å–µ—Å—Å–∏—é –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–∫–Ω–∞ 60s, –Ω–∞–ø—Ä—è–º—É—é –∏–¥—ë—Ç –ø–æ —Ä–æ—Ç–∞—Ü–∏–∏ (–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —á–∞—Å—Ç–æ—Ç–æ–π/–∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –∫–≤–æ—Ç–æ–π —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏).
- `CacheFirst` / `Balance`: –æ–±–∞ –≤–∫–ª—é—á–∞—é—Ç –ª–∏–ø–∫—É—é —Å–µ—Å—Å–∏—é –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–∫–Ω–∞ 60s.

:::warning –û max_wait_seconds
–í–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ/—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –µ—Å—Ç—å `max_wait_seconds`, –∏ –≤ UI –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ `CacheFirst`. –ù–æ —Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞ —Ç–æ–ª—å–∫–æ –≤–µ—Ç–≤–∏—Ç—Å—è –ø–æ `mode`, –Ω–µ —á–∏—Ç–∞–µ—Ç `max_wait_seconds`.
:::

### –ö–∞–∫ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∏ ¬´–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è¬ª —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è

–í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö OpenAI/Gemini/Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Ö–æ–∂–∏–π —Ä–µ–∂–∏–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫:

- –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞: `force_rotate = false`
- –í—Ç–æ—Ä–∞—è –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ: `force_rotate = true` (`attempt > 0`), TokenManager –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–∏–ø–∫–æ—Å—Ç–∏, –Ω–∞–ø—Ä—è–º—É—é –Ω–∞–π–¥—ë—Ç —Å–ª–µ–¥—É—é—â—É—é –¥–æ—Å—Ç—É–ø–Ω—É—é —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å

–ü—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ –æ—à–∏–±–æ–∫ 429/529/503/500 –∏ —Ç. –¥.:

- –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–∑–æ–≤–µ—Ç `token_manager.mark_rate_limited(...)`, —á—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å —ç—Ç—É —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –∫–∞–∫ ¬´–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é —á–∞—Å—Ç–æ—Ç–æ–π/–ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—É—é¬ª, –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –±—É–¥—É—Ç –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –µ—ë.
- –í –ø—É—Ç–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å OpenAI —Ç–∞–∫–∂–µ –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è —Ä–∞–∑–æ–±—Ä–∞—Ç—å `RetryInfo.retryDelay` –∏–ª–∏ `quotaResetDelay` –∏–∑ JSON –æ—à–∏–±–∫–∏, –ø–æ–¥–æ–∂–¥–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è, –∑–∞—Ç–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—É—é –ø–æ–ø—ã—Ç–∫—É.

## –°–ª–µ–¥—É–π—Ç–µ –∑–∞ –º–Ω–æ–π: –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ ¬´—É–ø—Ä–∞–≤–ª—è–µ–º—ã–π¬ª

### –®–∞–≥ 1: –°–Ω–∞—á–∞–ª–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ —É –≤–∞—Å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å ¬´–ø—É–ª —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π¬ª

**–ü–æ—á–µ–º—É**
–ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ –≤ –ø—É–ª–µ —Ç–æ–ª—å–∫–æ 1 —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å, –≤—ã–±–∏—Ä–∞—Ç—å –Ω–µ –∏–∑ —á–µ–≥–æ. –ú–Ω–æ–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã ¬´—Ä–æ—Ç–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç/–ª–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è –Ω–µ –æ—â—É—â–∞–µ—Ç—Å—è¬ª –∏–º–µ—é—Ç –∫–æ—Ä–Ω–µ–º —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π.

**–î–µ–π—Å—Ç–≤–∏—è**
–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É ¬´Accounts¬ª, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–æ—Å—Ç—É–ø–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (–Ω–µ disabled / proxy disabled).

**–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –º–∏–Ω–∏–º—É–º 2 —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –º–æ–≥—É—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–≤–æ—Ç—É, –∞ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ `active_accounts` –Ω–µ —Ä–∞–≤–Ω–æ 0.

### –®–∞–≥ 2: –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ GUI

**–ü–æ—á–µ–º—É**
–†–µ–∂–∏–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –±—É–¥–µ—Ç –ª–∏ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –¥–∏–∞–ª–æ–≥ –∫–∞–∫ –º–æ–∂–Ω–æ –¥–æ–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å, –∏–ª–∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ —Ä–æ—Ç–∞—Ü–∏—é.

**–î–µ–π—Å—Ç–≤–∏—è**
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É ¬´API Proxy¬ª, –Ω–∞–π–¥–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É ¬´–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–æ—Ç–∞—Ü–∏—è —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π¬ª, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —Ä–µ–∂–∏–º–æ–≤:

- `Balance`: –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ (–ª–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è + —Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–∏ —Å–±–æ—è—Ö).
- `PerformanceFirst`: –≤—ã—Å–æ–∫–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º, –∫–æ—Ä–æ—Ç–∫–∏–µ –∑–∞–¥–∞—á–∏, –≤–∞–º –≤–∞–∂–Ω–µ–µ –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, —á–µ–º –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –∫–µ—à, –≤—ã–±–∏—Ä–∞–π—Ç–µ —ç—Ç–æ—Ç.
- `CacheFirst`: –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –¥–∏–∞–ª–æ–≥ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å, –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –µ–≥–æ (—Ç–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞ –º–∞–ª–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç `Balance`).

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç:

```json
{
  "proxy": {
    "scheduling": {
      "mode": "Balance",
      "max_wait_seconds": 60
    }
  }
}
```

**–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ —Å—Ä–∞–∑—É –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `gui_config.json`, –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–π —Å–ª—É–∂–±–µ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –≤—Å—Ç—É–ø–∞–µ—Ç –≤ —Å–∏–ª—É –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞).

### –®–∞–≥ 3: –í–∫–ª—é—á–∏—Ç–µ ¬´—Ä–µ–∂–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏¬ª (–æ—Ç–∫–ª—é—á–∏—Ç–µ —Ä–æ—Ç–∞—Ü–∏—é)

**–ü–æ—á–µ–º—É**
–ü—Ä–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–µ–ø–æ–ª–∞–¥–æ–∫/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ü–≤–µ—Ç–∞/–∏–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ ¬´–ø—Ä–∏–±–∏—Ç—å¬ª –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É, —Ä–µ–∂–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ ‚Äî —Å–∞–º—ã–π –ø—Ä—è–º–æ–π —Å–ø–æ—Å–æ–±.

**–î–µ–π—Å—Ç–≤–∏—è**
–í —Ç–æ–π –∂–µ –∫–∞—Ä—Ç–æ—á–∫–µ –æ—Ç–∫—Ä–æ–π—Ç–µ ¬´–†–µ–∂–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏¬ª, –∑–∞—Ç–µ–º –≤—ã–±–µ—Ä–∏—Ç–µ —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ.

–ù–µ –∑–∞–±—É–¥—å—Ç–µ: —ç—Ç–æ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Å–ª—É–∂–±–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ Running.

**–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å; –µ—Å–ª–∏ –æ–Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —á–∞—Å—Ç–æ—Ç–æ–π –∏–ª–∏ –∑–∞—â–∏—â–µ–Ω–∞ –∫–≤–æ—Ç–æ–π, –æ—Ç–∫–∞—Ç–∏—Ç—Å—è –∫ —Ä–æ—Ç–∞—Ü–∏–∏.

:::info –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å ‚Äî —ç—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–Ω—Ç–∞–π–º–∞
–†–µ–∂–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ ‚Äî —ç—Ç–æ **—Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–Ω—Ç–∞–π–º–∞** (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ GUI –∏–ª–∏ API), –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `gui_config.json`. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–ª—É–∂–±—ã –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –≤–µ—Ä–Ω—ë—Ç—Å—è –≤ –ø—É—Å—Ç–æ–µ (–≤–µ—Ä–Ω—ë—Ç—Å—è –≤ —Ä–µ–∂–∏–º —Ä–æ—Ç–∞—Ü–∏–∏).
:::

### –®–∞–≥ 4: –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—á–∏—Å—Ç–∏—Ç–µ ¬´–ø—Ä–∏–≤—è–∑–∫—É —Å–µ—Å—Å–∏–∏¬ª

**–ü–æ—á–µ–º—É**
–õ–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç `session_id -> account_id` –≤ –ø–∞–º—è—Ç–∏. –ï—Å–ª–∏ –≤—ã –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ —Ä–∞–∑–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—É–ª–æ–≤ —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤), —Å—Ç–∞—Ä–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å –≤–∞–º –Ω–∞–±–ª—é–¥–∞—Ç—å.

**–î–µ–π—Å—Ç–≤–∏—è**
–í –∫–∞—Ä—Ç–æ—á–∫–µ ¬´–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–æ—Ç–∞—Ü–∏—è —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π¬ª –Ω–∞–∂–º–∏—Ç–µ ¬´–û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏¬ª –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É.

**–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: —Å—Ç–∞—Ä—ã–µ —Å–µ—Å—Å–∏–∏ –±—É–¥—É—Ç —Å–Ω–æ–≤–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (—Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å —Å–Ω–æ–≤–∞ –ø—Ä–∏–≤—è–∂–µ—Ç—Å—è).

### –®–∞–≥ 5: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å ¬´–∫–∞–∫–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç¬ª

**–ü–æ—á–µ–º—É**
–í—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º, —Å–∞–º—ã–π –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –ø–æ–ª—É—á–∏—Ç—å ¬´–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–µ–∫—É—â–µ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏¬ª —Å —Å–µ—Ä–≤–µ—Ä–∞.

**–î–µ–π—Å—Ç–≤–∏—è**
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–µ –ø–æ—Ç–æ–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º—É—é —Å OpenAI –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É, –∑–∞—Ç–µ–º –Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `X-Account-Email` –≤ –æ—Ç–≤–µ—Ç–µ.

```bash
  # –ü—Ä–∏–º–µ—Ä: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å OpenAI Chat Completions
  # –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: model –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω/–º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à–µ–π —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
curl -i "http://127.0.0.1:8045/v1/chat/completions" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-REPLACE_ME" \
  -d '{
    "model": "gemini-3-pro-high",
    "stream": false,
    "messages": [{"role": "user", "content": "hello"}]
  }'
```

**–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –æ—Ç–≤–µ—Ç–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–ø—Ä–∏–º–µ—Ä):

```text
X-Account-Email: example@gmail.com
X-Mapped-Model: gemini-3-pro-high
```

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ ‚úÖ

- –í—ã –º–æ–∂–µ—Ç–µ —á—ë—Ç–∫–æ —Å–∫–∞–∑–∞—Ç—å, –∫–∞–∫–æ–π –∏–∑ —Ç—Ä—ë—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤: ¬´—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å¬ª, ¬´–ª–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è¬ª, ¬´—Ä–æ—Ç–∞—Ü–∏—è¬ª –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –¥—Ä—É–≥–æ–π
- –í—ã –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –ø–æ–ª—É—á–∞–µ—Ç—Å—è `session_id` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç `metadata.user_id`, –∏–Ω–∞—á–µ —Ö–µ—à –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è)
- –ü—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ 429/5xx –≤—ã –º–æ–∂–µ—Ç–µ –æ–∂–∏–¥–∞—Ç—å: —Å–∏—Å—Ç–µ–º–∞ —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø–∏—à–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã, –∑–∞—Ç–µ–º —Å–º–µ–Ω–∏—Ç —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç –ø–æ–ø—ã—Ç–∫—É
- –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `X-Account-Email` –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –∫–∞–∫–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∑–∞–ø—Ä–æ—Å

## –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö

1) **–ï—Å–ª–∏ –≤ –ø—É–ª–µ —Ç–æ–ª—å–∫–æ 1 —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å, –Ω–µ –æ–∂–∏–¥–∞–π—Ç–µ, —á—Ç–æ ¬´—Ä–æ—Ç–∞—Ü–∏—è —Å–ø–∞—Å—ë—Ç –≤–∞—Å¬ª**
–†–æ—Ç–∞—Ü–∏—è ‚Äî —ç—Ç–æ ¬´–≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å¬ª, –µ—Å–ª–∏ –≤ –ø—É–ª–µ –Ω–µ—Ç –≤—Ç–æ—Ä–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏, 429/invalid_grant –±—É–¥–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å —á–∞—â–µ.

2) **`CacheFirst` ‚Äî —ç—Ç–æ –Ω–µ ¬´–∂–¥–∞—Ç—å –≤—Å–µ–≥–¥–∞, –ø–æ–∫–∞ –Ω–µ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º¬ª**
–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞ –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ —á–∞—Å—Ç–æ—Ç—ã —Å–∫–ª–æ–Ω—è–µ—Ç—Å—è –∫ —Ä–∞–∑–≤—è–∑—ã–≤–∞–Ω–∏—é –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—é —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏, –∞ –Ω–µ –∫ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–º—É –±–ª–æ–∫–∏—Ä—É—é—â–µ–º—É –æ–∂–∏–¥–∞–Ω–∏—é.

3) **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π**
–ï—Å–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —á–∞—Å—Ç–æ—Ç–æ–π –∏–ª–∏ –∑–∞—â–∏—â–µ–Ω–∞ –∫–≤–æ—Ç–æ–π, —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞—Ç–∏—Ç—Å—è –∫ —Ä–æ—Ç–∞—Ü–∏–∏.

## –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —É—Ä–æ–∫–∞

- –¶–µ–ø–æ—á–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–≤–ª–µ–∫–∞–µ—Ç `session_id` ‚Üí `TokenManager::get_token` –≤—ã–±–∏—Ä–∞–µ—Ç —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å ‚Üí –ø—Ä–∏ –æ—à–∏–±–∫–µ `attempt > 0` –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è
- –î–≤–∞ –≤–∞—à–∏—Ö —Å–∞–º—ã—Ö —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è: —Ä–µ–∂–∏–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–≤–∫–ª—é—á–∞—Ç—å –ª–∏ –ª–∏–ø–∫—É—é —Å–µ—Å—Å–∏—é/–ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 60s) + —Ä–µ–∂–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ (–Ω–∞–ø—Ä—è–º—É—é —É–∫–∞–∑–∞—Ç—å —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å)
- 429/5xx –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∞–Ω—ã –∫–∞–∫ ¬´—Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã¬ª, –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —ç—Ç–∞ —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–∞, –ø–æ–∫–∞ –Ω–µ –∏—Å—Ç–µ—á—ë—Ç –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–∫–∞

> –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫ –º—ã –ø–æ—Å–º–æ—Ç—Ä–∏–º **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –º–æ–¥–µ–ª–µ–π**: –∫–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å ¬´—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –≤–Ω–µ—à–Ω–µ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–µ–π¬ª, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–µ –∑–Ω–∞–∫–∏/–ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ —É—Å—Ç—Ä–∞–Ω—è—Ç—å –Ω–µ–ø–æ–ª–∞–¥–∫–∏.

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –°—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

<details>
<summary><strong>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞</strong></summary>

> –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 2026-01-23

| –§—É–Ω–∫—Ü–∏—è | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É | –ù–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ |
|--- | --- | ---|
| –†–µ–∂–∏–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (StickySessionConfig) | [`src-tauri/src/proxy/sticky_config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/sticky_config.rs#L1-L36) | 1-36 |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–ø–µ—á–∞—Ç–∫–∞ —Å–µ—Å—Å–∏–∏ (Claude/OpenAI/Gemini) | [`src-tauri/src/proxy/session_manager.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/session_manager.rs#L1-L159) | 1-159 |
| TokenManager: –ø–æ–ª—è —Ä–µ–∂–∏–º–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è | [`src-tauri/src/proxy/token_manager.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/token_manager.rs#L27-L50) | 27-50 |
| TokenManager: –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å/–ª–∏–ø–∫–∞—è —Å–µ—Å—Å–∏—è/–æ–∫–Ω–æ 60s/—Ä–æ—Ç–∞—Ü–∏—è/–∑–∞—â–∏—Ç–∞ –∫–≤–æ—Ç—ã) | [`src-tauri/src/proxy/token_manager.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/token_manager.rs#L470-L940) | 470-940 |
| TokenManager: invalid_grrant –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –∏–∑ –ø—É–ª–∞ | [`src-tauri/src/proxy/token_manager.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/token_manager.rs#L868-L878) | 868-878 |
| TokenManager: –∑–∞–ø–∏—Å—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –∏ –æ—á–∏—Å—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ API | [`src-tauri/src/proxy/token_manager.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/token_manager.rs#L1087-L1147) | 1087-1147 |
| TokenManager: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è / –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏–≤—è–∑–æ–∫ —Å–µ—Å—Å–∏–∏ / —Å–µ—Ç—Ç–µ—Ä —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ | [`src-tauri/src/proxy/token_manager.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/token_manager.rs#L1419-L1461) | 1419-1461 |
| ProxyConfig: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | [`src-tauri/src/proxy/config.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/config.rs#L174-L257) | 174-257 |
| –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–∫—Å–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è | [`src-tauri/src/commands/proxy.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/proxy.rs#L70-L100) | 70-100 |
| –ö–æ–º–∞–Ω–¥—ã Tauri, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º (get/update/clear bindings/fixed account) | [`src-tauri/src/commands/proxy.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/commands/proxy.rs#L478-L551) | 478-551 |
| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ OpenAI: session_id + –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–µ | [`src-tauri/src/proxy/handlers/openai.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/openai.rs#L160-L182) | 160-182 |
| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ OpenAI: –∑–∞–ø–∏—Å—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã 429/5xx + —Ä–∞–∑–±–æ—Ä –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ | [`src-tauri/src/proxy/handlers/openai.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/openai.rs#L349-L367) | 349-367 |
| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Gemini: session_id + –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–µ | [`src-tauri/src/proxy/handlers/gemini.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/gemini.rs#L62-L88) | 62-88 |
| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Gemini: –∑–∞–ø–∏—Å—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã 429/5xx –∏ —Ä–æ—Ç–∞—Ü–∏—è | [`src-tauri/src/proxy/handlers/gemini.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/gemini.rs#L279-L299) | 279-299 |
| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Claude: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ session_id –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –≤ TokenManager | [`src-tauri/src/proxy/handlers/claude.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/claude.rs#L517-L524) | 517-524 |
| –†–∞–∑–±–æ—Ä –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ 429 (RetryInfo.retryDelay / quotaResetDelay) | [`src-tauri/src/proxy/upstream/retry.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/upstream/retry.rs#L37-L66) | 37-66 |
| –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏—á–∏–Ω –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –∏ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –æ—Ç–∫–∞—Ç (RateLimitTracker) | [`src-tauri/src/proxy/rate_limit.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/rate_limit.rs#L154-L279) | 154-279 |

**–ö–ª—é—á–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
- `StickySessionConfig`: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (`mode`, `max_wait_seconds`)
- `TokenManager`: –ø—É–ª —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π, –ø—Ä–∏–≤—è–∑–∫–∞ —Å–µ—Å—Å–∏–π, —Ä–µ–∂–∏–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏, —Ç—Ä–µ–∫–µ—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã
- `SessionManager`: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ `session_id` –∏–∑ –∑–∞–ø—Ä–æ—Å–∞

</details>
