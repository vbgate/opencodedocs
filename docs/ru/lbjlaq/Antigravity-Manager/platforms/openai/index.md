---
title: "OpenAI API: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è | Antigravity-Manager"
sidebarTitle: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OpenAI SDK –∑–∞ 5 –º–∏–Ω—É—Ç"
subtitle: "OpenAI API: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
description: "–ò–∑—É—á–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è API, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Å OpenAI. –û—Å–≤–æ–π—Ç–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫—É base_url –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ 401/404/429, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Antigravity Tools."
tags:
  - "OpenAI"
  - "API Proxy"
  - "Chat Completions"
  - "Responses"
  - "Antigravity Tools"
prerequisite:
  - "start-proxy-and-first-client"
  - "start-add-account"
order: 1
---

# API, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å OpenAI: –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ /v1/chat/completions –∏ /v1/responses

–í—ã –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç **API, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å OpenAI**, —á—Ç–æ–±—ã –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π OpenAI SDK/–∫–ª–∏–µ–Ω—Ç –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —à–ª—é–∑—É Antigravity Tools, —Å —É–ø–æ—Ä–æ–º –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é `/v1/chat/completions` –∏ `/v1/responses`, –∏ –Ω–∞—É—á–∏—Ç–µ—Å—å –±—ã—Å—Ç—Ä–æ —É—Å—Ç—Ä–∞–Ω—è—Ç—å –Ω–µ–ø–æ–ª–∞–¥–∫–∏ —Å –ø–æ–º–æ—â—å—é –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –æ—Ç–≤–µ—Ç–∞.

## –ß–µ–º—É –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å

- –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —à–ª—é–∑—É Antigravity Tools —Å –ø–æ–º–æ—â—å—é OpenAI SDK (–∏–ª–∏ curl)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `/v1/chat/completions` (–≤–∫–ª—é—á–∞—è `stream: true`) –∏ `/v1/responses`
- –ü–æ–Ω–∏–º–∞—Ç—å —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π `/v1/models` –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–≤–µ—Ç–∞ `X-Mapped-Model`
- –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ 401/404/429 –∑–Ω–∞—Ç—å, —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

## –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ú–Ω–æ–≥–∏–µ –∫–ª–∏–µ–Ω—Ç—ã/SDK —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ OpenAI: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è JSON, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–æ—Ç–æ–∫–∞ SSE.
–¶–µ–ª—å Antigravity Tools ‚Äî –Ω–µ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –≤–∞—Å –∏–∑–º–µ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç, –∞ –ø–æ–∑–≤–æ–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É ¬´–¥—É–º–∞—Ç—å, —á—Ç–æ –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç OpenAI¬ª, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—è –∑–∞–ø—Ä–æ—Å –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≤—ã–∑–æ–≤ –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è, –∞ –∑–∞—Ç–µ–º –ø—Ä–µ–æ–±—Ä–∞–∑—É—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ñ–æ—Ä–º–∞—Ç OpenAI.

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥

- –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö —Ç–æ–ª—å–∫–æ OpenAI (–ø–ª–∞–≥–∏–Ω—ã IDE, —Å–∫—Ä–∏–ø—Ç—ã, –±–æ—Ç—ã, SDK), –∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ –ø–∏—Å–∞—Ç—å –Ω–æ–≤—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
- –í—ã —Ö–æ—Ç–∏—Ç–µ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `base_url` –≤ —à–ª—é–∑ (–ª–æ–∫–∞–ª—å–Ω—ã–π –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏), –∞ –∑–∞—Ç–µ–º –ø–æ–∑–≤–æ–ª–∏—Ç—å —à–ª—é–∑—É –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∞–∫–∫–∞—É–Ω—Ç–æ–≤, –ø–æ–≤—Ç–æ—Ä–∞–º–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

## üéí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

::: warning –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- –í—ã —É–∂–µ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–∏—Å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ¬´API Proxy¬ª Antigravity Tools –∏ –∑–∞–ø–∏—Å–∞–ª–∏ –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `8045`)
- –í—ã —É–∂–µ –¥–æ–±–∞–≤–∏–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –¥–æ—Å—Ç—É–ø–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç, –∏–Ω–∞—á–µ –ø—Ä–æ–∫—Å–∏ –Ω–µ –ø–æ–ª—É—á–∏—Ç —Ç–æ–∫–µ–Ω –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
:::

::: info –ö–∞–∫ –ø—Ä–∏–Ω–µ—Å—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é?
–ö–æ–≥–¥–∞ –≤—ã –≤–∫–ª—é—á–∞–µ—Ç–µ `proxy.auth_mode` –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ `proxy.api_key`, –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å API Key.

–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û Antigravity Tools –±—É–¥–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ —á–∏—Ç–∞—Ç—å `Authorization`, —Ç–∞–∫–∂–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å `x-api-key`, `x-goog-api-key`. (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è: `src-tauri/src/proxy/middleware/auth.rs`)
:::

## –ß—Ç–æ —Ç–∞–∫–æ–µ API, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å OpenAI?

**API, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å OpenAI** ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ HTTP –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ JSON/SSE, –∫–æ—Ç–æ—Ä—ã–µ ¬´–≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ OpenAI¬ª. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π —à–ª—é–∑ –≤ —Ñ–æ—Ä–º–∞—Ç–µ OpenAI, —à–ª—é–∑ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∑–∞–ø—Ä–æ—Å –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≤—ã–∑–æ–≤ –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è, –∞ –∑–∞—Ç–µ–º –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ—Ç–≤–µ—Ç –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞ OpenAI, —á—Ç–æ–±—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π OpenAI SDK –º–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

### –û–±–∑–æ—Ä —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫ (—Å–≤—è–∑–∞–Ω–æ —Å —ç—Ç–∏–º —É—Ä–æ–∫–æ–º)

| –ö–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∫–æ–¥–∞ |
| --- | --- | --- |
| `POST /v1/chat/completions` | Chat Completions (–≤–∫–ª—é—á–∞—è –ø–æ—Ç–æ–∫) | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –≤ `src-tauri/src/proxy/server.rs`; `src-tauri/src/proxy/handlers/openai.rs` |
| `POST /v1/completions` | Legacy Completions (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫) | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –≤ `src-tauri/src/proxy/server.rs` |
| `POST /v1/responses` | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Responses/Codex CLI (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫) | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –≤ `src-tauri/src/proxy/server.rs` (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Codex CLI) |
| `GET /v1/models` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π (–≤–∫–ª—é—á–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ + –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é) | `src-tauri/src/proxy/handlers/openai.rs` + `src-tauri/src/proxy/common/model_mapping.rs` |

## –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –®–∞–≥ 1: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∂–∏–≤ (/healthz + /v1/models)

**–ó–∞—á–µ–º**
–°–Ω–∞—á–∞–ª–∞ –∏—Å–∫–ª—é—á–∏—Ç–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ç–∏–ø–∞ ¬´—Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω/–ø–æ—Ä—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–æ–º¬ª.

```bash
 # 1) –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
curl -s http://127.0.0.1:8045/healthz

 # 2) –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
curl -s http://127.0.0.1:8045/v1/models
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: `/healthz` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ `{"status":"ok"}`; `/v1/models` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"object":"list","data":[...]}`.

### –®–∞–≥ 2: –í—ã–∑–æ–≤ /v1/chat/completions —Å –ø–æ–º–æ—â—å—é OpenAI Python SDK

**–ó–∞—á–µ–º**
–≠—Ç–æ—Ç —à–∞–≥ –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –≤—Å—è —Ü–µ–ø–æ—á–∫–∞ ¬´OpenAI SDK ‚Üí –ª–æ–∫–∞–ª—å–Ω—ã–π —à–ª—é–∑ ‚Üí –≤—ã—à–µ—Å—Ç–æ—è—â–∏–π —É—Ä–æ–≤–µ–Ω—å ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ OpenAI¬ª –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ.

```python
import openai

client = openai.OpenAI(
    api_key="sk-antigravity",
    base_url="http://127.0.0.1:8045/v1",
)

response = client.chat.completions.create(
    model="gemini-3-flash",
    messages=[{"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç, –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Å—è"}],
)

print(response.choices[0].message.content)
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –¢–µ—Ä–º–∏–Ω–∞–ª –ø–µ—á–∞—Ç–∞–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –º–æ–¥–µ–ª–∏.

### –®–∞–≥ 3: –í–∫–ª—é—á–∏—Ç–µ –ø–æ—Ç–æ–∫, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ—Ç–æ–∫–æ–≤—ã–π –≤–æ–∑–≤—Ä–∞—Ç SSE

**–ó–∞—á–µ–º**
–ú–Ω–æ–≥–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ SSE OpenAI (`Content-Type: text/event-stream`). –≠—Ç–æ—Ç —à–∞–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –ø–æ—Ç–æ–∫–æ–≤–∞—è —Ü–µ–ø–æ—á–∫–∞ –∏ —Ñ–æ—Ä–º–∞—Ç —Å–æ–±—ã—Ç–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã.

```bash
curl -N http://127.0.0.1:8045/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gemini-3-flash",
    "stream": true,
    "messages": [
      {"role": "user", "content": "–û–±—ä—è—Å–Ω–∏ –≤ —Ç—Ä—ë—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö, —á—Ç–æ —Ç–∞–∫–æ–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—à–ª—é–∑"}
    ]
  }'
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –¢–µ—Ä–º–∏–Ω–∞–ª –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `data: { ... }`, –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è `data: [DONE]`.

### –®–∞–≥ 4: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /v1/responses (—Å—Ç–∏–ª—å Codex/Responses) –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞

**–ó–∞—á–µ–º**
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `/v1/responses` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ–ª—è `instructions`, `input` –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞. –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Ç–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∫ `messages` –∏ –∑–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –Ω–∞–±–æ—Ä –ª–æ–≥–∏–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è. (–û–±—Ä–∞–±–æ—Ç—á–∏–∫: `src-tauri/src/proxy/handlers/openai.rs`)

```bash
curl -s http://127.0.0.1:8045/v1/responses \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gemini-3-flash",
    "instructions": "–í—ã —Å—Ç—Ä–æ–≥–∏–π –∫–æ–¥-—Ä–µ–≤—å—é–µ—Ä.",
    "input": "–£–∫–∞–∂–∏ –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—É—é –æ—à–∏–±–∫—É –≤ —Å–ª–µ–¥—É—é—â–µ–º –∫–æ–¥–µ:\n\nfunction add(a, b) { return a - b }"
  }'
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞ –≤ —Å—Ç–∏–ª–µ OpenAI (—ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ—Ç–≤–µ—Ç Gemini –≤ `choices[].message.content`).

### –®–∞–≥ 5: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ (—Å–º–æ—Ç—Ä–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–≤–µ—Ç–∞ X-Mapped-Model)

**–ó–∞—á–µ–º**
`model`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–∏—à–µ—Ç–µ –≤ –∫–ª–∏–µ–Ω—Ç–µ, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —è–≤–ª—è–µ—Ç—Å—è ¬´—Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª—å—é¬ª, –∫–æ—Ç–æ—Ä–∞—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è. –®–ª—é–∑ —Å–Ω–∞—á–∞–ª–∞ –¥–µ–ª–∞–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (–≤–∫–ª—é—á–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ/–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–µ –∑–Ω–∞–∫–∏, —Å–º. [–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤ –∏ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏](/ru/lbjlaq/Antigravity-Manager/advanced/model-router/)), –∞ –∑–∞—Ç–µ–º –ø–æ–º–µ—â–∞–µ—Ç –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –≤–∞—à–µ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–µ–ø–æ–ª–∞–¥–æ–∫.

```bash
curl -i http://127.0.0.1:8045/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o",
    "messages": [{"role": "user", "content": "–ø—Ä–∏–≤–µ—Ç"}]
  }'
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –í –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è `X-Mapped-Model: ...` (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —Å `gemini-2.5-flash`), –∏, –≤–æ–∑–º–æ–∂–Ω–æ, —Ç–∞–∫–∂–µ `X-Account-Email: ...`.

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ ‚úÖ

- `GET /healthz` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status":"ok"}` (–∏–ª–∏ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã–π JSON)
- `GET /v1/models` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `object=list` –∏ `data` ‚Äî —ç—Ç–æ –º–∞—Å—Å–∏–≤
- –ù–µ–ø–æ—Ç–æ–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å `/v1/chat/completions` –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å `choices[0].message.content`
- –ü—Ä–∏ `stream: true` –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å SSE –∏ –æ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è `[DONE]`
- `curl -i` –º–æ–∂–µ—Ç —É–≤–∏–¥–µ—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–≤–µ—Ç–∞ `X-Mapped-Model`

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1) –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Base URLÂØºËá¥ 404 (–Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ)

- –í –ø—Ä–∏–º–µ—Ä–µ OpenAI SDK `base_url` –¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `/v1` (—Å–º. –ø—Ä–∏–º–µ—Ä Python –≤ README –ø—Ä–æ–µ–∫—Ç–∞).
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–ª–∏–µ–Ω—Ç—ã ¬´–¥—É–±–ª–∏—Ä—É—é—Ç –ø—É—Ç—å¬ª. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ README —è–≤–Ω–æ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è: Kilo Code –≤ —Ä–µ–∂–∏–º–µ OpenAI –º–æ–∂–µ—Ç —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Ç—å —Ç–∏–ø–∞ `/v1/chat/completions/responses`, —á—Ç–æ –≤—ã–∑–æ–≤–µ—Ç 404.

### 2) 401: –Ω–µ –≤—ã—à–µ—Å—Ç–æ—è—â–∏–π —É—Ä–æ–≤–µ–Ω—å –æ—Ç–∫–∞–∑–∞–ª, –∞ –≤—ã –Ω–µ –ø—Ä–∏–Ω–µ—Å–ª–∏ key –∏–ª–∏ —Ä–µ–∂–∏–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

–ö–æ–≥–¥–∞ ¬´—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º¬ª —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ `off`, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞: `Authorization: Bearer <proxy.api_key>`, —Ç–∞–∫–∂–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å `x-api-key`, `x-goog-api-key`. (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è: `src-tauri/src/proxy/middleware/auth.rs`)

::: tip –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ —Ä–µ–∂–∏–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
`auth_mode = auto` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ—à–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ `allow_lan_access`:
- `allow_lan_access = true` ‚Üí —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º ‚Äî `all_except_health` (–∫—Ä–æ–º–µ `/healthz` —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- `allow_lan_access = false` ‚Üí —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º ‚Äî `off` (–ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
:::

### 3) 429/503/529: –ø—Ä–æ–∫—Å–∏ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å + —Ä–æ—Ç–∞—Ü–∏—é –∞–∫–∫–∞—É–Ω—Ç–æ–≤, –Ω–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç ¬´–ø—É–ª –∏—Å—á–µ—Ä–ø–∞–Ω¬ª

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ OpenAI –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫ (–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä–æ–º –ø—É–ª–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤), –ø—Ä–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ—à–∏–±–∫–∞—Ö –±—É–¥–µ—Ç –æ–∂–∏–¥–∞—Ç—å/—Ä–æ—Ç–∞—Ü–∏—é –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ –ø–æ–≤—Ç–æ—Ä. (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è: `src-tauri/src/proxy/handlers/openai.rs`)

## –ò—Ç–æ–≥ —É—Ä–æ–∫–∞

- `/v1/chat/completions` ‚Äî —ç—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, `stream: true` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SSE
- `/v1/responses` –∏ `/v1/completions` –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ—Ç –∂–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –∫–ª—é—á ‚Äî —Å–Ω–∞—á–∞–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫–∞–∫ `messages`
- `X-Mapped-Model` –ø–æ–º–æ–≥–∞–µ—Ç –≤–∞–º –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è ¬´–∏–º—è –º–æ–¥–µ–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞ ‚Üí —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å¬ª

## –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–∫–∞

> –í —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ –º—ã –ø—Ä–æ–¥–æ–ª–∂–∏–º —Å–º–æ—Ç—Ä–µ—Ç—å **API, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å Anthropic: /v1/messages –∏ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã Claude Code** (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –≥–ª–∞–≤–∞: `platforms-anthropic`).

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É

<details>
<summary><strong>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞</strong></summary>

> –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2026-01-23

| –§—É–Ω–∫—Ü–∏—è | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É | –°—Ç—Ä–æ–∫–∏ |
| --- | --- | --- |
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ OpenAI (–≤–∫–ª—é—á–∞—è /v1/responses) | [`src-tauri/src/proxy/server.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/server.rs#L120-L194) | 120-194 |
| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Chat Completions (–≤–∫–ª—é—á–∞—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ Responses) | [`src-tauri/src/proxy/handlers/openai.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/openai.rs#L70-L462) | 70-462 |
| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ /v1/completions –∏ /v1/responses (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è Codex/Responses + –ø–æ–≤—Ç–æ—Ä/—Ä–æ—Ç–∞—Ü–∏—è) | [`src-tauri/src/proxy/handlers/openai.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/openai.rs#L464-L1080) | 464-1080 |
| –í–æ–∑–≤—Ä–∞—Ç /v1/models (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π) | [`src-tauri/src/proxy/handlers/openai.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/openai.rs#L1082-L1102) | 1082-1102 |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ OpenAI (messages/instructions/input/size/quality) | [`src-tauri/src/proxy/mappers/openai/models.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/mappers/openai/models.rs#L7-L38) | 7-38 |
| –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ OpenAI -> Gemini (systemInstruction/thinkingConfig/tools) | [`src-tauri/src/proxy/mappers/openai/request.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/mappers/openai/request.rs#L6-L553) | 6-553 |
| –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ Gemini -> OpenAI (choices/usageMetadata) | [`src-tauri/src/proxy/mappers/openai/response.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/mappers/openai/response.rs#L5-L214) | 5-214 |
| –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤ (—Ç–æ—á–Ω—ã–π > –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π > –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) | [`src-tauri/src/proxy/common/model_mapping.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/common/model_mapping.rs#L180-L228) | 180-228 |
| –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Authorization/x-api-key/x-goog-api-key) | [`src-tauri/src/proxy/middleware/auth.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/middleware/auth.rs#L15-L77) | 15-77 |

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**:
- `MAX_RETRY_ATTEMPTS = 3`: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ OpenAI (–≤–∫–ª—é—á–∞—è —Ä–æ—Ç–∞—Ü–∏—é) (—Å–º. `src-tauri/src/proxy/handlers/openai.rs`)

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- `transform_openai_request(...)`: –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ OpenAI –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∑–∞–ø—Ä–æ—Å –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è (—Å–º. `src-tauri/src/proxy/mappers/openai/request.rs`)
- `transform_openai_response(...)`: –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ—Ç–≤–µ—Ç –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è –≤ `choices`/`usage` OpenAI (—Å–º. `src-tauri/src/proxy/mappers/openai/response.rs`)

</details>
