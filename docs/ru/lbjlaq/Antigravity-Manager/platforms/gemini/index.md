---
title: "Gemini API: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —à–ª—é–∑–∞ | Antigravity-Manager"
subtitle: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ API Gemini: –ü—É—Å—Ç—å Google SDK –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —à–ª—é–∑—É"
sidebarTitle: "–ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É Gemini"
description: "–ò–∑—É—á–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —à–ª—é–∑–∞ Gemini Antigravity-Manager. –ß–µ—Ä–µ–∑ –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É /v1beta/models –æ—Å–≤–æ–∏—Ç–µ –≤—ã–∑–æ–≤—ã generateContent –∏ streamGenerateContent –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å –ø–æ–º–æ—â—å—é cURL –∏ Python."
tags:
  - "Gemini"
  - "Google SDK"
  - "API Proxy"
  - "v1beta"
prerequisite:
  - "start-proxy-and-first-client"
  - "start-add-account"
order: 3
---

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ API Gemini: –ü—É—Å—Ç—å Google SDK –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —à–ª—é–∑—É

## –ß–µ–º—É –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ Gemini, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–µ Antigravity Tools (`/v1beta/models/*`) –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É—Ç–∏ –≤ —Å—Ç–∏–ª–µ Google `:generateContent` / `:streamGenerateContent` –¥–ª—è –≤—ã–∑–æ–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —à–ª—é–∑–∞
- –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Proxy –ø–æ–Ω–∏–º–∞—Ç—å, –ø–æ—á–µ–º—É `x-goog-api-key` –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

## –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–í—ã –º–æ–≥–ª–∏ —É–∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏, –Ω–æ –∫–∞–∫ –¥–æ—à–ª–∏ –¥–æ Gemini, –Ω–∞—á–∞–ª–∏ –∑–∞—Å—Ç—Ä–µ–≤–∞—Ç—å:

- Google SDK –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–∑—ã–≤–∞–µ—Ç `generativelanguage.googleapis.com`, –∫–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –≤–∞—à `http://127.0.0.1:<port>`?
- –ü—É—Ç—å Gemini —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–æ–µ—Ç–æ—á–∏–µ (`models/<model>:generateContent`), –º–Ω–æ–≥–∏–µ –∫–ª–∏–µ–Ω—Ç—ã —Å—Ä–∞–∑—É —Å–∫–ª–µ–∏–≤–∞—é—Ç –∏ –ø–æ–ª—É—á–∞—é—Ç 404
- –í—ã –≤–∫–ª—é—á–∏–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø—Ä–æ–∫—Å–∏, –Ω–æ Google-–∫–ª–∏–µ–Ω—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `x-api-key`, –≤ –∏—Ç–æ–≥–µ –≤—Å–µ–≥–¥–∞ 401

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥

- –í—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ¬´–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª Gemini¬ª, –∞ –Ω–µ —Å–ª–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ OpenAI/Anthropic
- –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç –≤ —Å—Ç–∏–ª–µ Google/—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π Gemini, –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —à–ª—é–∑

## üéí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

::: warning –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- –í—ã —É–∂–µ –¥–æ–±–∞–≤–∏–ª–∏ —Ö–æ—Ç—è –±—ã 1 –∞–∫–∫–∞—É–Ω—Ç –≤ App (–∏–Ω–∞—á–µ –±—ç–∫–µ–Ω–¥ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è)
- –í—ã —É–∂–µ –∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å–ª—É–∂–±—É –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –∏ –∑–Ω–∞–µ—Ç–µ –ø–æ—Ä—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `8045`)
:::

## –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

Antigravity Tools —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ –ø—É—Ç–∏ Gemini –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ Axum:

- –°–ø–∏—Å–æ–∫: `GET /v1beta/models`
- –í—ã–∑–æ–≤: `POST /v1beta/models/<model>:generateContent`
- –ü–æ—Ç–æ–∫: `POST /v1beta/models/<model>:streamGenerateContent`

–ë—ç–∫–µ–Ω–¥ –æ–±–µ—Ä–Ω—ë—Ç –≤–∞—à –Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Ç–µ–ª–∞ Gemini —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π v1internal (–≤—Å—Ç–∞–≤–∏—Ç `project`, `requestId`, `requestType` –∏ —Ç.–¥.), –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –Ω–∞ –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è v1internal (–∏ –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∞–∫–∫–∞—É–Ω—Ç–∞). (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/mappers/gemini/wrapper.rs`, `src-tauri/src/proxy/upstream/client.rs`)

::: info –ü–æ—á–µ–º—É –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö —É—á–µ–±–Ω–∏–∫–∞ base URL —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç 127.0.0.1?
–í –ø—Ä–∏–º–µ—Ä–∞—Ö –±—ã—Å—Ç—Ä–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ App –∂—ë—Å—Ç–∫–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `127.0.0.1`, –ø—Ä–∏—á–∏–Ω–∞ ‚Äî ¬´–∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è IPv6 –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ä–µ–¥–∞—Ö¬ª. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src/pages/ApiProxy.tsx`)
:::

## –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –®–∞–≥ 1: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ —à–ª—é–∑ –æ–Ω–ª–∞–π–Ω (/healthz)

**–ó–∞—á–µ–º**
–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –æ–Ω–ª–∞–π–Ω, –∑–∞—Ç–µ–º —É—Å—Ç—Ä–∞–Ω—è–π—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º/–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, —ç—Ç–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

::: code-group

```bash [macOS/Linux]
curl -s "http://127.0.0.1:8045/healthz"
```

```powershell [Windows]
Invoke-RestMethod "http://127.0.0.1:8045/healthz"
```

:::

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JSON, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π `{"status":"ok"}` (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/server.rs`).

### –®–∞–≥ 2: –ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –º–æ–¥–µ–ª–∏ Gemini (/v1beta/models)

**–ó–∞—á–µ–º**
–í–∞–º –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å ¬´–∫–∞–∫–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–æ–¥–µ–ª–∏ —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ—Ç—Å—è¬ª, –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ `<model>` –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –Ω–∞ —ç—Ç–æ.

```bash
curl -s "http://127.0.0.1:8045/v1beta/models" | head
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –í –æ—Ç–≤–µ—Ç–µ –µ—Å—Ç—å –º–∞—Å—Å–∏–≤ `models`, `name` –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ—Ö–æ–∂ –Ω–∞ `models/<id>` (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/handlers/gemini.rs`).

::: tip –í–∞–∂–Ω–æ
–ö–∞–∫–æ–π –ø–æ–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –º–æ–¥–µ–ª–∏?
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–µ `displayName` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `gemini-2.0-flash`)
- ‚úÖ –ò–ª–∏ —É–±–µ—Ä–∏—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å `models/` –∏–∑ –ø–æ–ª—è `name`
- ‚ùå –ù–µ –∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é –ø–æ–ª–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `name` (—ç—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –æ—à–∏–±–∫–µ –ø—É—Ç–∏)

–ï—Å–ª–∏ –≤—ã —Å–∫–æ–ø–∏—Ä—É–µ—Ç–µ –ø–æ–ª–µ `name` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `models/gemini-2.0-flash`) –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–æ–¥–µ–ª–∏, –ø—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞ —Å—Ç–∞–Ω–µ—Ç `/v1beta/models/models/gemini-2.0-flash:generateContent`, —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/common/model_mapping.rs`)
:::

::: warning –í–∞–∂–Ω–æ
–¢–µ–∫—É—â–∏–π `/v1beta/models` ‚Äî —ç—Ç–æ –≤–æ–∑–≤—Ä–∞—Ç, ¬´–∫–æ—Ç–æ—Ä—ã–π –º–∞—Å–∫–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –∫–∞–∫ —Å–ø–∏—Å–æ–∫ Gemini¬ª, –∞ –Ω–µ —Ä–µ–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/handlers/gemini.rs`)
:::

### –®–∞–≥ 3: –í—ã–∑–æ–≤ generateContent (–ø—É—Ç—å —Å –¥–≤–æ–µ—Ç–æ—á–∏–µ–º)

**–ó–∞—á–µ–º**
–ö–ª—é—á –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ REST API Gemini ‚Äî —ç—Ç–æ ¬´action —Å –¥–≤–æ–µ—Ç–æ—á–∏–µ–º¬ª —Ç–∏–ø–∞ `:generateContent`. –ë—ç–∫–µ–Ω–¥ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç `model:method` –≤ —Ç–æ–º –∂–µ –º–∞—Ä—à—Ä—É—Ç–µ. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/handlers/gemini.rs`)

```bash
curl -s \
  -H "Content-Type: application/json" \
  -X POST "http://127.0.0.1:8045/v1beta/models/<modelId>:generateContent" \
  -d '{
    "contents": [
      {"role": "user", "parts": [{"text": "Hello"}]}
    ]
  }'
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –í JSON –æ—Ç–≤–µ—Ç–∞ –µ—Å—Ç—å `candidates` (–∏–ª–∏ —Å–Ω–∞—Ä—É–∂–∏ –µ—Å—Ç—å `response.candidates`, –ø—Ä–æ–∫—Å–∏ —Ä–∞—Å–ø–∞–∫—É–µ—Ç).

### –®–∞–≥ 4: –í—ã–∑–æ–≤ streamGenerateContent (SSE)

**–ó–∞—á–µ–º**
–ü–æ—Ç–æ–∫ –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª–µ–Ω –¥–ª—è ¬´–¥–ª–∏–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞/–±–æ–ª—å—à–æ–π –º–æ–¥–µ–ª–∏¬ª; –ø—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –≤—ã—à–µ—Å—Ç–æ—è—â–∏–π SSE –≤–∞—à–µ–º—É –∫–ª–∏–µ–Ω—Ç—É –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `Content-Type: text/event-stream`. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/handlers/gemini.rs`)

```bash
curl -N \
  -H "Content-Type: application/json" \
  -X POST "http://127.0.0.1:8045/v1beta/models/<modelId>:streamGenerateContent" \
  -d '{
    "contents": [
      {"role": "user", "parts": [{"text": "Tell me a short story"}]}
    ]
  }'
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –¢–µ—Ä–º–∏–Ω–∞–ª –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç—Ä–æ–∫–∏ SSE –≤ —Ñ–æ—Ä–º–µ `data: {...}`, –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –≤ –∫–æ–Ω—Ü–µ –ø–æ—è–≤–∏—Ç—Å—è `data: [DONE]` (—É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–Ω–µ—Ü –ø–æ—Ç–æ–∫–∞).

::: tip –í–Ω–∏–º–∞–Ω–∏–µ
`data: [DONE]` ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–Ω–∞–∫ –æ–∫–æ–Ω—á–∞–Ω–∏—è SSE, –Ω–æ **–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—è–≤–∏—Ç—Å—è**:
- –ï—Å–ª–∏ –≤—ã—à–µ—Å—Ç–æ—è—â–∏–π —É—Ä–æ–≤–µ–Ω—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `[DONE]`, –ø—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –µ–≥–æ
- –ï—Å–ª–∏ –≤—ã—à–µ—Å—Ç–æ—è—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∞–Ω–æ–º–∞–ª—å–Ω–æ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è, —Ç–∞–π–º-–∞—É—Ç –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥—Ä—É–≥–∏–µ —Å–∏–≥–Ω–∞–ª—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è, –ø—Ä–æ–∫—Å–∏ –Ω–µ –±—É–¥–µ—Ç –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å `[DONE]`

–ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞ –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É SSE: –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ `data: [DONE]` –∏–ª–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å—á–∏—Ç–∞—Ç—å –ø–æ—Ç–æ–∫ –æ–∫–æ–Ω—á–µ–Ω–Ω—ã–º. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/handlers/gemini.rs`)
:::

### –®–∞–≥ 5: –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Google Python SDK –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —à–ª—é–∑—É

**–ó–∞—á–µ–º**
–≠—Ç–æ –ø—É—Ç—å –ø—Ä–∏–º–µ—Ä–∞ ¬´–±—ã—Å—Ç—Ä–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è¬ª, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –≤ UI –ø—Ä–æ–µ–∫—Ç–∞: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–∫–µ—Ç Google Generative AI Python, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å `api_endpoint` –Ω–∞ –≤–∞—à –∞–¥—Ä–µ—Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src/pages/ApiProxy.tsx`)

```python
#–ù—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: pip install google-generativeai
import google.generativeai as genai

genai.configure(
    api_key="YOUR_PROXY_API_KEY",
    transport='rest',
    client_options={'api_endpoint': 'http://127.0.0.1:8045'}
)

model = genai.GenerativeModel('<modelId>')
response = model.generate_content("Hello")
print(response.text)
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–æ–¥–∏—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –º–æ–¥–µ–ª–∏.

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ ‚úÖ

- `/healthz` –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å `{"status":"ok"}`
- `/v1beta/models` –º–æ–∂–µ—Ç –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –º–æ–¥–µ–ª–∏ (–º–∏–Ω–∏–º—É–º 1)
- `:generateContent` –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å `candidates`
- `:streamGenerateContent` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Content-Type: text/event-stream` –∏ –º–æ–∂–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—ã–¥–∞–≤–∞—Ç—å –ø–æ—Ç–æ–∫

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

- **401 –≤—Å–µ–≥–¥–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç**: –ï—Å–ª–∏ –≤—ã –≤–∫–ª—é—á–∏–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –Ω–æ `proxy.api_key` –ø—É—Å—Ç, –±—ç–∫–µ–Ω–¥ –Ω–∞–ø—Ä—è–º—É—é –æ—Ç–∫–ª–æ–Ω–∏—Ç –∑–∞–ø—Ä–æ—Å. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/middleware/auth.rs`)
- **–ö–∞–∫–æ–π key –Ω–µ—Å—Ç–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ**: –ü—Ä–æ–∫—Å–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç `Authorization`, `x-api-key`, `x-goog-api-key`. –ü–æ—ç—Ç–æ–º—É ¬´–∫–ª–∏–µ–Ω—Ç –≤ —Å—Ç–∏–ª–µ Google —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `x-goog-api-key`¬ª —Ç–æ–∂–µ –ø—Ä–æ–π–¥—ë—Ç. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/middleware/auth.rs`)
- **countTokens –≤—Å–µ–≥–¥–∞ 0**: –¢–µ–∫—É—â–∏–π `POST /v1beta/models/<model>/countTokens` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `{"totalTokens":0}`, —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è-–∑–∞–≥–ª—É—à–∫–∞. (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/handlers/gemini.rs`)

## –ò—Ç–æ–≥ —É—Ä–æ–∫–∞

- –í—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å –∫ `/v1beta/models/*`, –∞ –Ω–µ `/v1/*`
- –ö–ª—é—á–µ–≤–∞—è –∑–∞–ø–∏—Å—å –ø—É—Ç–∏ ‚Äî `models/<modelId>:generateContent` / `:streamGenerateContent`
- –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, `x-goog-api-key` ‚Äî —ç—Ç–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∫—Å–∏ —è–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç

## –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–∫–∞

> –í —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ –º—ã –∏–∑—É—á–∏–º **[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Imagen 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ size/quality OpenAI Images](../imagen/)**.

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É

<details>
<summary><strong>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞</strong></summary>

> –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2026-01-23

| –§—É–Ω–∫—Ü–∏—è | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É | –°—Ç—Ä–æ–∫–∏ |
|--- | --- | ---|
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ Gemini (/v1beta/models/*) | [`src-tauri/src/proxy/server.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/server.rs#L170-L181) | 170-181 |
| –†–∞–∑–±–æ—Ä –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –º–æ–¥–µ–ª–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (–ø–æ—á–µ–º—É –ø—Ä–µ—Ñ–∏–∫—Å `models/` –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –º–∞—Ä—à—Ä—É—Ç–∞) | [`src-tauri/src/proxy/common/model_mapping.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/common/model_mapping.rs#L58-L77) | 58-77 |
| –†–∞–∑–±–æ—Ä `model:method` + –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ generate/stream | [`src-tauri/src/proxy/handlers/gemini.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/gemini.rs#L14-L337) | 14-337 |
| –õ–æ–≥–∏–∫–∞ –ø–æ—Ç–æ–∫–∞ SSE (–ø–µ—Ä–µ—Å—ã–ª–∫–∞ `[DONE]`, –∞ –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è) | [`src-tauri/src/proxy/handlers/gemini.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/gemini.rs#L161-L183) | 161-183 |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ `/v1beta/models` (–º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ –º–æ–¥–µ–ª–µ–π) | [`src-tauri/src/proxy/handlers/gemini.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/handlers/gemini.rs#L39-L71) | 39-71 |
|--- | --- | ---|
|--- | --- | ---|
| –ü—Ä–∏–º–µ—Ä Python SDK Google (`api_endpoint` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —à–ª—é–∑) | [`src/pages/ApiProxy.tsx`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src/pages/ApiProxy.tsx#L692-L734) | 692-734 |
| –û—Ç–ø–µ—á–∞—Ç–æ–∫ —Å–µ—Å—Å–∏–∏ Gemini (–ª–∏–ø–∫–æ—Å—Ç—å/–∫—ç—à –∏—Å–ø–æ–ª—å–∑—É–µ—Ç session_id) | [`src-tauri/src/proxy/session_manager.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/session_manager.rs#L121-L158) | 121-158 |
| –û–±—ë—Ä—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ v1internal Gemini (–≤—Å—Ç–∞–≤–∫–∞ project/requestId/requestType –∏ —Ç.–¥.) | [`src-tauri/src/proxy/mappers/gemini/wrapper.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/mappers/gemini/wrapper.rs#L5-L160) | 5-160 |
| –ö–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ –≤—ã—à–µ—Å—Ç–æ—è—â–µ–≥–æ —É—Ä–æ–≤–Ω—è v1internal –∏ fallback | [`src-tauri/src/proxy/upstream/client.rs`](https://github.com/lbjlaq/Antigravity-Manager/blob/main/src-tauri/src/proxy/upstream/client.rs#L8-L182) | 8-182 |

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**:
- `MAX_RETRY_ATTEMPTS = 3`: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–æ—Ç–∞—Ü–∏–π –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ Gemini (–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: `src-tauri/src/proxy/handlers/gemini.rs`)

</details>
