---
title: "–†–µ–∂–∏–º —Å–æ–∫—Ä—ã—Ç–∏—è: –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞—Å—á—ë—Ç–∞ —à–∏—Ä–∏–Ω—ã | opencode-md-table-formatter"
sidebarTitle: "–†–∞—Å—á—ë—Ç —à–∏—Ä–∏–Ω—ã –∑–∞ —Ç—Ä–∏ —à–∞–≥–∞"
subtitle: "–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Ä–µ–∂–∏–º–∞ —Å–æ–∫—Ä—ã—Ç–∏—è: –ø–æ—á–µ–º—É —Ä–∞—Å—á—ë—Ç —à–∏—Ä–∏–Ω—ã —Ç–∞–∫ –≤–∞–∂–µ–Ω"
description: "–£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–∂–∏–º —Å–æ–∫—Ä—ã—Ç–∏—è –≤ OpenCode. –û—Å–≤–æ–π—Ç–µ –º–µ—Ç–æ–¥ —Ä–∞—Å—á—ë—Ç–∞ —à–∏—Ä–∏–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, —É–∑–Ω–∞–π—Ç–µ –æ —Å—Ç—Ä–∏–ø–ø–∏–Ω–≥–µ Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏, –∑–∞—â–∏—Ç–µ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Bun.stringWidth."
tags:
  - "concealment-mode"
  - "–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è —à–∏—Ä–∏–Ω–∞"
  - "—Å—Ç—Ä–∏–ø–ø–∏–Ω–≥ Markdown"
  - "Bun.stringWidth"
prerequisite:
  - "start-features"
order: 30
---

# –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Ä–µ–∂–∏–º–∞ —Å–æ–∫—Ä—ã—Ç–∏—è: –ø–æ—á–µ–º—É —Ä–∞—Å—á—ë—Ç —à–∏—Ä–∏–Ω—ã —Ç–∞–∫ –≤–∞–∂–µ–Ω

::: info –ß–µ–º—É –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å –ø–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è
- –ü–æ–π–º—ë—Ç–µ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–∂–∏–º —Å–æ–∫—Ä—ã—Ç–∏—è –≤ OpenCode
- –£–∑–Ω–∞–µ—Ç–µ, –ø–æ—á–µ–º—É –æ–±—ã—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—é—Ç —Å–±–æ–π –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–∏ –≤ —Ä–µ–∂–∏–º–µ —Å–æ–∫—Ä—ã—Ç–∏—è
- –û—Å–≤–æ–∏—Ç–µ –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á—ë—Ç–∞ —à–∏—Ä–∏–Ω—ã –ø–ª–∞–≥–∏–Ω–∞ (—Ç—Ä–∏ —à–∞–≥–∞)
- –ü–æ–π–º—ë—Ç–µ —Ä–æ–ª—å `Bun.stringWidth`
:::

## –í–∞—à–∞ —Ç–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–í—ã –ø–∏—à–µ—Ç–µ –∫–æ–¥ –≤ OpenCode, –∏ AI —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –∫—Ä–∞—Å–∏–≤—É—é —Ç–∞–±–ª–∏—Ü—É:

```markdown
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--- | ---|
| **name** | string | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| age | number | –í–æ–∑—Ä–∞—Å—Ç |
```

–í –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –≤—Å—ë –≤—ã–≥–ª—è–¥–∏—Ç —Ä–æ–≤–Ω–æ. –ù–æ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤ —Ä–µ–∂–∏–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è:

```
| –ü–æ–ª–µ     | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ   |
|---|--- | ---|
| name | string | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |    ‚Üê –ü–æ—á–µ–º—É –∫–æ—Ä–æ—á–µ?
| age      | number | –í–æ–∑—Ä–∞—Å—Ç   |
```

–í —á—ë–º –ø—Ä–æ–±–ª–µ–º–∞? **–†–µ–∂–∏–º —Å–æ–∫—Ä—ã—Ç–∏—è**.

## –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ–∂–∏–º —Å–æ–∫—Ä—ã—Ç–∏—è

OpenCode –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–∞–µ—Ç **—Ä–µ–∂–∏–º —Å–æ–∫—Ä—ã—Ç–∏—è (Concealment Mode)**, –∫–æ—Ç–æ—Ä—ã–π —Å–∫—Ä—ã–≤–∞–µ—Ç —Å–∏–º–≤–æ–ª—ã Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ:

| –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ —Å–æ–∫—Ä—ã—Ç–∏—è |
|---|--- |
| `**–∂–∏—Ä–Ω—ã–π**` | –∂–∏—Ä–Ω—ã–π (4 —Å–∏–º–≤–æ–ª–∞) |
| `*–∫—É—Ä—Å–∏–≤*` | –∫—É—Ä—Å–∏–≤ (6 —Å–∏–º–≤–æ–ª–æ–≤) |
| `~~–∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π~~` | –∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π (11 —Å–∏–º–≤–æ–ª–æ–≤) |
| `` `–∫–æ–¥` `` | `–∫–æ–¥` (4 —Å–∏–º–≤–æ–ª–∞ + —Ñ–æ–Ω–æ–≤—ã–π —Ü–≤–µ—Ç) |

::: tip –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∂–∏–º–∞ —Å–æ–∫—Ä—ã—Ç–∏—è
–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–∏, –∞ –Ω–µ –æ—Ç–≤–ª–µ–∫–∞—Ç—å—Å—è –Ω–∞ –∫—É—á—É `**` –∏ `*` —Å–∏–º–≤–æ–ª–æ–≤.
:::

## –ü–æ—á–µ–º—É –æ–±—ã—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—é—Ç —Å–±–æ–π

–û–±—ã—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ —à–∏—Ä–∏–Ω—ã —Å—á–∏—Ç–∞—é—Ç `**name**` –∫–∞–∫ 8 —Å–∏–º–≤–æ–ª–æ–≤:

```
** n a m e ** = 8 —Å–∏–º–≤–æ–ª–æ–≤
```

–ù–æ –≤ —Ä–µ–∂–∏–º–µ —Å–æ–∫—Ä—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç `name` ‚Äî –≤—Å–µ–≥–æ 4 —Å–∏–º–≤–æ–ª–∞.

–†–µ–∑—É–ª—å—Ç–∞—Ç: –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø–æ 8 —Å–∏–º–≤–æ–ª–∞–º, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç 4 —Å–∏–º–≤–æ–ª–∞ ‚Äî —Ç–∞–±–ª–∏—Ü–∞, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è.

## –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è: —Ä–∞—Å—á—ë—Ç "–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–π —à–∏—Ä–∏–Ω—ã", –∞ –Ω–µ "–¥–ª–∏–Ω—ã —Å–∏–º–≤–æ–ª–æ–≤"

–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è –ø–ª–∞–≥–∏–Ω–∞: **—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å —à–∏—Ä–∏–Ω—É, –∫–æ—Ç–æ—Ä—É—é –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∞ –Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞**.

–ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–ª–∏—Ç—Å—è –Ω–∞ —Ç—Ä–∏ —à–∞–≥–∞:

```
–®–∞–≥ 1: –ó–∞—â–∏—Ç–∞ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ (—Å–∏–º–≤–æ–ª—ã –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ –Ω–µ —Å—Ç—Ä–∏–ø–∞—é—Ç—Å—è)
–®–∞–≥ 2: –°—Ç—Ä–∏–ø–ø–∏–Ω–≥ Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏ (**„ÄÅ*„ÄÅ~~ –∏ —Ç.–¥.)
–®–∞–≥ 3: –†–∞—Å—á—ë—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —à–∏—Ä–∏–Ω—ã —Å –ø–æ–º–æ—â—å—é Bun.stringWidth
```

## –ü—Ä–∞–∫—Ç–∏–∫–∞: –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç—Ä—ë—Ö—à–∞–≥–æ–≤–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞

### –®–∞–≥ 1: –ó–∞—â–∏—Ç–∞ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞

**–ü–æ—á–µ–º—É**

Markdown-—Ä–∞–∑–º–µ—Ç–∫–∞ –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞ (–≤ –æ–±—Ä–∞—Ç–Ω—ã—Ö –∫–∞–≤—ã—á–∫–∞—Ö) —è–≤–ª—è–µ—Ç—Å—è "–ª–∏—Ç–µ—Ä–∞–ª–æ–º" ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç `**bold**` ‚Äî –≤—Å–µ 8 —Å–∏–º–≤–æ–ª–æ–≤, –∞ –Ω–µ `bold` ‚Äî 4 —Å–∏–º–≤–æ–ª–∞.

–ü–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–¥ —Å—Ç—Ä–∏–ø–ø–∏–Ω–≥–æ–º Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏ –Ω—É–∂–Ω–æ "—Å–ø—Ä—è—Ç–∞—Ç—å" —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ**

```typescript
// –®–∞–≥ 1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –∑–∞—â–∏—Ç–∞ —Å—Ç—Ä–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞
const codeBlocks: string[] = []
let textWithPlaceholders = text.replace(/`(.+?)`/g, (match, content) => {
  codeBlocks.push(content)
  return `\x00CODE${codeBlocks.length - 1}\x00`
})
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**

| –í—Ö–æ–¥ | –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ | –ú–∞—Å—Å–∏–≤ codeBlocks |
|---|---|---|
| `` `**bold**` `` | `\x00CODE0\x00` | `["**bold**"]` |
| `` `a` and `b` `` | `\x00CODE0\x00 and \x00CODE1\x00` | `["a", "b"]` |

–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤–∏–¥–∞ `\x00CODE0\x00` –∑–∞–º–µ–Ω—è—é—Ç –±–ª–æ–∫–∏ –∫–æ–¥–∞, —á—Ç–æ–±—ã –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º —Å—Ç—Ä–∏–ø–ø–∏–Ω–≥–µ Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏ –æ–Ω–∏ –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∏.

### –®–∞–≥ 2: –°—Ç—Ä–∏–ø–ø–∏–Ω–≥ Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏

**–ü–æ—á–µ–º—É**

–í —Ä–µ–∂–∏–º–µ —Å–æ–∫—Ä—ã—Ç–∏—è `**–∂–∏—Ä–Ω—ã–π**` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ `–∂–∏—Ä–Ω—ã–π`, `*–∫—É—Ä—Å–∏–≤*` ‚Äî –∫–∞–∫ `–∫—É—Ä—Å–∏–≤`. –ü—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ —à–∏—Ä–∏–Ω—ã —ç—Ç–∏ —Å–∏–º–≤–æ–ª—ã –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ**

```typescript
// –®–∞–≥ 2: –°—Ç—Ä–∏–ø–ø–∏–Ω–≥ Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏ –∏–∑ –Ω–µ-–∫–æ–¥–æ–≤—ã—Ö —á–∞—Å—Ç–µ–π
let visualText = textWithPlaceholders
let previousText = ""

while (visualText !== previousText) {
  previousText = visualText
  visualText = visualText
    .replace(/\*\*\*(.+?)\*\*\*/g, "$1") // ***–∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤*** ‚Üí —Ç–µ–∫—Å—Ç
    .replace(/\*\*(.+?)\*\*/g, "$1")     // **–∂–∏—Ä–Ω—ã–π** ‚Üí –∂–∏—Ä–Ω—ã–π
    .replace(/\*(.+?)\*/g, "$1")         // *–∫—É—Ä—Å–∏–≤* ‚Üí –∫—É—Ä—Å–∏–≤
    .replace(/~~(.+?)~~/g, "$1")         // ~~–∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π~~ ‚Üí –∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π
    .replace(/!\[([^\]]*)\]\(([^)]+)\)/g, "$1")     // ![alt](url) ‚Üí alt
    .replace(/\[([^\]]+)\]\(([^)]+)\)/g, "$1 ($2)") // [text](url) ‚Üí text (url)
}
```

**–ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ü–∏–∫–ª while?**

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, `***–∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤***`:

```
–†–∞—É–Ω–¥ 1: ***–∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤*** ‚Üí **–∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤** (—É–¥–∞–ª–µ–Ω—ã –≤–Ω–µ—à–Ω–∏–µ ***)
–†–∞—É–Ω–¥ 2: **–∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤** ‚Üí *–∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤* (—É–¥–∞–ª–µ–Ω—ã **)
–†–∞—É–Ω–¥ 3: *–∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤* ‚Üí –∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤ (—É–¥–∞–ª–µ–Ω—ã *)
–†–∞—É–Ω–¥ 4: –∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤ = –∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –≤—ã—Ö–æ–¥ –∏–∑ —Ü–∏–∫–ª–∞)
```

::: details –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Å—Å—ã–ª–æ–∫
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** `![alt](url)`: OpenCode –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ alt-—Ç–µ–∫—Å—Ç, –ø–æ—ç—Ç–æ–º—É –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ `alt`
- **–°—Å—ã–ª–∫–∏** `[text](url)`: –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ `text (url)`, —Å–æ—Ö—Ä–∞–Ω—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± URL
:::

### –®–∞–≥ 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ + —Ä–∞—Å—á—ë—Ç —à–∏—Ä–∏–Ω—ã

**–ü–æ—á–µ–º—É**

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –º–µ—Å—Ç–æ, –∞ –∑–∞—Ç–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—É—é —à–∏—Ä–∏–Ω—É —Å –ø–æ–º–æ—â—å—é `Bun.stringWidth`.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ**

```typescript
// –®–∞–≥ 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞
visualText = visualText.replace(/\x00CODE(\d+)\x00/g, (match, index) => {
  return codeBlocks[parseInt(index)]
})

return Bun.stringWidth(visualText)
```

**–ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Bun.stringWidth?**

`Bun.stringWidth` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç:

| –¢–∏–ø —Å–∏–º–≤–æ–ª–æ–≤ | –ü—Ä–∏–º–µ—Ä | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è —à–∏—Ä–∏–Ω–∞ |
|---|---|---|---|
| ASCII | `abc` | 3 | 3 |
| –ö–∏—Ç–∞–π—Å–∫–∏–µ | `‰Ω†Â•Ω` | 2 | 4 (–∫–∞–∂–¥—ã–π –∑–∞–Ω–∏–º–∞–µ—Ç 2 –∫–ª–µ—Ç–∫–∏) |
| –≠–º–æ–¥–∑–∏ | `üòÄ` | 1 | 2 (–∑–∞–Ω–∏–º–∞–µ—Ç 2 –∫–ª–µ—Ç–∫–∏) |
| –ù—É–ª–µ–≤–æ–π —à–∏—Ä–∏–Ω—ã | `a\u200Bb` | 3 | 2 (–Ω—É–ª–µ–≤–æ–π —à–∏—Ä–∏–Ω—ã –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ—Å—Ç–æ) |

–û–±—ã—á–Ω—ã–π `text.length` –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤, –Ω–æ –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —ç—Ç–∏–º–∏ –æ—Å–æ–±—ã–º–∏ —Å–ª—É—á–∞—è–º–∏.

## –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —è—á–µ–π–∫–∏: `` **`code`** and *text* ``

**–®–∞–≥ 1: –ó–∞—â–∏—Ç–∞ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞**

```
–í—Ö–æ–¥: **`code`** and *text*
–í—ã—Ö–æ–¥: **\x00CODE0\x00** and *text*
codeBlocks = ["code"]
```

**–®–∞–≥ 2: –°—Ç—Ä–∏–ø–ø–∏–Ω–≥ Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏**

```
–†–∞—É–Ω–¥ 1: **\x00CODE0\x00** and *text* ‚Üí \x00CODE0\x00 and text
–†–∞—É–Ω–¥ 2: –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –≤—ã—Ö–æ–¥
```

**–®–∞–≥ 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ + —Ä–∞—Å—á—ë—Ç —à–∏—Ä–∏–Ω—ã**

```
–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: code and text
–®–∏—Ä–∏–Ω–∞: Bun.stringWidth("code and text") = 13
```

–í –∏—Ç–æ–≥–µ –ø–ª–∞–≥–∏–Ω –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —ç—Ç—É —è—á–µ–π–∫—É –ø–æ —à–∏—Ä–∏–Ω–µ 13 —Å–∏–º–≤–æ–ª–æ–≤, –∞ –Ω–µ –ø–æ 22 —Å–∏–º–≤–æ–ª–∞–º –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞.

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

–ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞ –≤—ã –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å –æ—Ç–≤–µ—á–∞—Ç—å:

- [ ] –ö–∞–∫–∏–µ —Å–∏–º–≤–æ–ª—ã —Å–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–∂–∏–º —Å–æ–∫—Ä—ã—Ç–∏—è? (–û—Ç–≤–µ—Ç: `**`, `*`, `~~` –∏ –¥—Ä—É–≥–∏–µ —Å–∏–º–≤–æ–ª—ã Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏)
- [ ] –ó–∞—á–µ–º —Å–Ω–∞—á–∞–ª–∞ –∑–∞—â–∏—â–∞—Ç—å –±–ª–æ–∫–∏ –∫–æ–¥–∞? (–û—Ç–≤–µ—Ç: —Å–∏–º–≤–æ–ª—ã –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ —è–≤–ª—è—é—Ç—Å—è –ª–∏—Ç–µ—Ä–∞–ª–∞–º–∏ –∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã)
- [ ] –ü–æ—á–µ–º—É –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ü–∏–∫–ª while? (–û—Ç–≤–µ—Ç: –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `***–∂–∏—Ä–Ω—ã–π –∫—É—Ä—Å–∏–≤***`)
- [ ] –ß–µ–º `Bun.stringWidth` –ª—É—á—à–µ `text.length`? (–û—Ç–≤–µ—Ç: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—É—é —à–∏—Ä–∏–Ω—É –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤, —ç–º–æ–¥–∑–∏ –∏ –Ω—É–ª–µ–≤–æ–π —à–∏—Ä–∏–Ω—ã)

## –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è

::: warning –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏—è
**–ó–∞–±–ª—É–∂–¥–µ–Ω–∏–µ**: `**` –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ —Ç–æ–∂–µ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ

**–§–∞–∫—Ç**: –ù–µ—Ç. –ü–ª–∞–≥–∏–Ω —Å–Ω–∞—á–∞–ª–∞ –∑–∞—â–∏—â–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤, –∑–∞—Ç–µ–º —É–¥–∞–ª—è–µ—Ç —Å–∏–º–≤–æ–ª—ã –∏–∑ –æ—Å—Ç–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏ –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–ª–æ–∫–∏ –∫–æ–¥–∞.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `` `**bold**` `` –∏–º–µ–µ—Ç —à–∏—Ä–∏–Ω—É 8 (–∫–∞–∫ `**bold**`), –∞ –Ω–µ 4 (–∫–∞–∫ `bold`).
:::

## –†–µ–∑—é–º–µ —É—Ä–æ–∫–∞

| –®–∞–≥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤–æ–π –∫–æ–¥ |
|---|---|---|
| –ó–∞—â–∏—Ç–∞ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ | –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ | `text.replace(/\`(.+?)\`/g, ...)` |
| –£–¥–∞–ª–µ–Ω–∏–µ Markdown | –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –≤ —Ä–µ–∂–∏–º–µ —Å–æ–∫—Ä—ã—Ç–∏—è | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–º–µ–Ω—ã —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π |
| –†–∞—Å—á—ë—Ç —à–∏—Ä–∏–Ω—ã | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤: –∫–∏—Ç–∞–π—Å–∫–∏–µ, —ç–º–æ–¥–∑–∏ –∏ —Ç.–¥. | `Bun.stringWidth()` |

## –ê–Ω–æ–Ω—Å —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–∫–∞

> –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫ ‚Äî **[–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü](../table-spec/)**.
>
> –í—ã —É–∑–Ω–∞–µ—Ç–µ:
> - –ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –º–æ–∂–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å
> - 4 –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü
> - –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏ "–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∞—è —Ç–∞–±–ª–∏—Ü–∞"

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É

<details>
<summary><strong>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É</strong></summary>

> –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2026-01-26

| –§—É–Ω–∫—Ü–∏—è | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É | –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫ |
|---|---|---|
| –í—Ö–æ–¥ —Ä–∞—Å—á—ë—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–π —à–∏—Ä–∏–Ω—ã | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L151-L159) | 151-159 |
| –ó–∞—â–∏—Ç–∞ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L168-L173) | 168-173 |
| –£–¥–∞–ª–µ–Ω–∏–µ Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L175-L188) | 175-188 |
| –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L190-L193) | 190-193 |
| –í—ã–∑–æ–≤ Bun.stringWidth | [`index.ts`](https://github.com/franlol/opencode-md-table-formatter/blob/main/index.ts#L195) | 195 |

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- `calculateDisplayWidth()`: –í—Ö–æ–¥ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–∞—Å—á—ë—Ç–∞ —à–∏—Ä–∏–Ω—ã
- `getStringWidth()`: –û—Å–Ω–æ–≤–Ω–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏ –∏ —Ä–∞—Å—á—ë—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–π —à–∏—Ä–∏–Ω—ã

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**:
- `\x00CODE{n}\x00`: –§–æ—Ä–º–∞—Ç –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞ –¥–ª—è –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞

</details>
