---
title: "–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É Gateway WebSocket API | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ Clawdbot"
sidebarTitle: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞"
subtitle: "–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É Gateway WebSocket API"
description: "–ò–∑—É—á–∏—Ç–µ –ø–æ–ª–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Clawdbot Gateway WebSocket, –≤–∫–ª—é—á–∞—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Ñ–æ—Ä–º–∞—Ç —Ñ—Ä–µ–π–º–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π, –º–æ–¥–µ–ª—å –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç, push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π, —Å–∏—Å—Ç–µ–º—É —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∏ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã. –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API –∏ –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞, –ø–æ–º–æ–≥–∞—è –±—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ —Å Gateway."
tags:
  - "API"
  - "WebSocket"
  - "–ø—Ä–æ—Ç–æ–∫–æ–ª"
  - "—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫"
prerequisite:
  - "start-gateway-startup"
  - "advanced-session-management"
order: 350
---

# –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É Gateway WebSocket API

## –ß–µ–º—É –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å

- üì° –£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É Gateway WebSocket
- üîÑ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã
- üì° –ü–æ–ª—É—á–∞—Ç—å —Å–æ–±—ã—Ç–∏—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Å–µ—Ä–≤–µ—Ä–æ–º
- üîê –ü–æ–Ω–∏–º–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- üõ†Ô∏è –í—ã–∑—ã–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã Gateway
- üìñ –ü–æ–Ω–∏–º–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ñ—Ä–µ–π–º–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

## –¢—Ä—É–¥–Ω–æ—Å—Ç–∏, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤—ã —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç–µ—Å—å

–í–æ–∑–º–æ–∂–Ω–æ, –≤—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏) –∏ –≤–∞–º –Ω—É–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å Clawdbot Gateway. –ü—Ä–æ—Ç–æ–∫–æ–ª WebSocket Gateway –∫–∞–∂–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º, –∏ –≤–∞–º –Ω—É–∂–Ω–æ:

- –£–∑–Ω–∞—Ç—å, –∫–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- –ü–æ–Ω—è—Ç—å —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞
- –ó–Ω–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏ –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Å–µ—Ä–≤–µ—Ä–æ–º
- –ü–æ–Ω–∏–º–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

**–•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å**: –ø—Ä–æ—Ç–æ–∫–æ–ª Gateway WebSocket API —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –æ—á–µ–Ω—å —á–µ—Ç–∫–æ, –∏ —ç—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –≤–∞–º –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫.

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥

::: info –ü—Ä–∏–º–µ–Ω–∏–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ:
- –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Gateway
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å WebChat –∏–ª–∏ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Gateway –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É
- –û—Ç–ª–∞–¥–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å Gateway
:::

## –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

Clawdbot Gateway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª WebSocket –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–≤—è–∑–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–æ—Ç–æ–∫–æ–ª –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ñ—Ä–µ–π–º–∞—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –∏ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ —Ç—Ä–∏ —Ç–∏–ø–∞:

1. **–§—Ä–µ–π–º –∑–∞–ø—Ä–æ—Å–∞ (Request Frame)**: –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å
2. **–§—Ä–µ–π–º –æ—Ç–≤–µ—Ç–∞ (Response Frame)**: —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç
3. **–§—Ä–µ–π–º —Å–æ–±—ã—Ç–∏—è (Event Frame)**: —Å–µ—Ä–≤–µ—Ä –∞–∫—Ç–∏–≤–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è

::: tip –§–∏–ª–æ—Å–æ—Ñ–∏—è –¥–∏–∑–∞–π–Ω–∞
–ü—Ä–æ—Ç–æ–∫–æ–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å "–∑–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç" + —Ä–µ–∂–∏–º "push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å–æ–±—ã—Ç–∏–π":
- –ö–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã
- –°–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–±—ã—Ç–∏—è –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ WebSocket
:::

## –†—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è WebSocket

Gateway –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç `ws://127.0.0.1:18789` (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é).

::: code-group

```javascript [JavaScript]
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è WebSocket
const ws = new WebSocket('ws://127.0.0.1:18789/v1/connect');

ws.onopen = () => {
  console.log('WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω');
};
```

```python [Python]
import asyncio
import websockets

async def connect():
    uri = "ws://127.0.0.1:18789/v1/connect"
    async with websockets.connect(uri) as websocket:
        print("WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω")
```

```bash [Bash]
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ wscat
wscat -c ws://127.0.0.1:18789/v1/connect
```

:::

### –®–∞–≥ 2: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –≤–µ—Ä—Å–∏–∏.

```json
{
  "minProtocol": 1,
  "maxProtocol": 3,
  "client": {
    "id": "my-app-v1",
    "displayName": "My Custom Client",
    "version": "1.0.0",
    "platform": "web",
    "mode": "operator",
    "instanceId": "unique-instance-id"
  },
  "caps": [],
  "commands": [],
  "auth": {
    "token": "your-token-here"
  }
}
```

**–ó–∞—á–µ–º**: —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è —Å–æ–æ–±—â–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—É:
- –î–∏–∞–ø–∞–∑–æ–Ω –≤–µ—Ä—Å–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º
- –û—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ
- –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (token –∏–ª–∏ password)

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**: —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ `hello-ok`

```json
{
  "type": "hello-ok",
  "protocol": 3,
  "server": {
    "version": "v2026.1.24",
    "commit": "abc123",
    "host": "my-mac",
    "connId": "conn-123456"
  },
  "features": {
    "methods": ["agent", "send", "chat.send", ...],
    "events": ["agent.event", "chat.event", ...]
  },
  "snapshot": {
    "presence": [...],
    "health": {...},
    "stateVersion": {...},
    "uptimeMs": 12345678
  },
  "auth": {
    "deviceToken": "device-token-here",
    "role": "operator",
    "scopes": ["operator.read", "operator.write"]
  },
  "policy": {
    "maxPayload": 1048576,
    "maxBufferedBytes": 10485760,
    "tickIntervalMs": 30000
  }
}
```

::: info –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π Hello-Ok
- `protocol`: –≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Å–µ—Ä–≤–µ—Ä–æ–º
- `server.version`: –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ Gateway
- `features.methods`: —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- `features.events`: —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
- `snapshot`: —Å–Ω–∏–º–æ–∫ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `auth.scopes`: –æ–±–ª–∞—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—É
- `policy.maxPayload`: –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `policy.tickIntervalMs`: –∏–Ω—Ç–µ—Ä–≤–∞–ª heartbeat
:::

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:

```json
{
  "type": "req",
  "id": "req-1",
  "method": "health",
  "params": {}
}
```

**–ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å**:

```json
{
  "type": "res",
  "id": "req-1",
  "ok": true,
  "payload": {
    "status": "ok",
    "uptimeMs": 12345678
  }
}
```

## –§–æ—Ä–º–∞—Ç —Ñ—Ä–µ–π–º–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π

### –§—Ä–µ–π–º –∑–∞–ø—Ä–æ—Å–∞ (Request Frame)

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–º, —Å–ª–µ–¥—É—é—Ç —Ñ–æ—Ä–º–∞—Ç—É —Ñ—Ä–µ–π–º–∞ –∑–∞–ø—Ä–æ—Å–∞:

```json
{
  "type": "req",
  "id": "unique-request-id",
  "method": "method.name",
  "params": {
    // –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞
  }
}
```

| –ü–æ–ª–µ | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- | --- |
| `type` | string | –î–∞ | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `"req"` |
| `id` | string | –î–∞ | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ |
| `method` | string | –î–∞ | –ò–º—è –º–µ—Ç–æ–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `"agent"`, `"send"` |
| `params` | object | –ù–µ—Ç | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–µ—Ç–æ–¥–∞ |

::: warning –í–∞–∂–Ω–æ—Å—Ç—å ID –∑–∞–ø—Ä–æ—Å–∞
–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `id`. –°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `id` –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ —Å –∑–∞–ø—Ä–æ—Å–æ–º. –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ `id`, –æ—Ç–≤–µ—Ç—ã –Ω–µ —Å–º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω—ã.
:::

### –§—Ä–µ–π–º –æ—Ç–≤–µ—Ç–∞ (Response Frame)

–°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—Ä–µ–π–º –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å:

```json
{
  "type": "res",
  "id": "unique-request-id",
  "ok": true,
  "payload": {
    // –¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞
  },
  "error": {
    // –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ (—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ ok=false)
  }
}
```

| –ü–æ–ª–µ | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- | --- |
| `type` | string | –î–∞ | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `"res"` |
| `id` | string | –î–∞ | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π ID –∑–∞–ø—Ä–æ—Å–∞ |
| `ok` | boolean | –î–∞ | –£—Å–ø–µ—à–µ–Ω –ª–∏ –∑–∞–ø—Ä–æ—Å |
| `payload` | any | –ù–µ—Ç | –î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ |
| `error` | object | –ù–µ—Ç | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ |

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**:

```json
{
  "type": "res",
  "id": "req-1",
  "ok": true,
  "payload": {
    "agents": [
      { "id": "agent-1", "name": "Default Agent" }
    ]
  }
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–æ–π**:

```json
{
  "type": "res",
  "id": "req-1",
  "ok": false,
  "error": {
    "code": "INVALID_REQUEST",
    "message": "Missing required parameter: message",
    "retryable": false
  }
}
```

### –§—Ä–µ–π–º —Å–æ–±—ã—Ç–∏—è (Event Frame)

–°–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–±—ã—Ç–∏—è –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞:

```json
{
  "type": "event",
  "event": "event.name",
  "payload": {
    // –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
  },
  "seq": 123,
  "stateVersion": {
    "presence": 456,
    "health": 789
  }
}
```

| –ü–æ–ª–µ | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- | --- |
| `type` | string | –î–∞ | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `"event"` |
| `event` | string | –î–∞ | –ò–º—è —Å–æ–±—ã—Ç–∏—è |
| `payload` | any | –ù–µ—Ç | –î–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è |
| `seq` | number | –ù–µ—Ç | –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä —Å–æ–±—ã—Ç–∏—è |
| `stateVersion` | object | –ù–µ—Ç | –ù–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è |

**–ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π**:

```json
// –°–æ–±—ã—Ç–∏–µ heartbeat
{
  "type": "event",
  "event": "tick",
  "payload": {
    "ts": 1706707200000
  }
}

// –°–æ–±—ã—Ç–∏–µ Agent
{
  "type": "event",
  "event": "agent.event",
  "payload": {
    "runId": "run-123",
    "seq": 0,
    "stream": "thinking",
    "ts": 1706707200000,
    "data": {
      "content": "–†–∞–∑–º—ã—à–ª—è—é..."
    }
  }
}

// –°–æ–±—ã—Ç–∏–µ —á–∞—Ç–∞
{
  "type": "event",
  "event": "chat.event",
  "payload": {
    "runId": "run-123",
    "sessionKey": "main",
    "seq": 1,
    "state": "delta",
    "message": {
      "role": "assistant",
      "content": "–ü—Ä–∏–≤–µ—Ç!"
    }
  }
}

// –°–æ–±—ã—Ç–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
{
  "type": "event",
  "event": "shutdown",
  "payload": {
    "reason": "–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã",
    "restartExpectedMs": 5000
  }
}
```

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

### –°–ø–æ—Å–æ–±—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

Gateway –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏ —Å–ø–æ—Å–æ–±–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:

#### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è:

```json
{
  "auth": {
    "token": "your-security-token"
  }
}
```

–¢–æ–∫–µ–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```json
{
  "gateway": {
    "auth": {
      "mode": "token",
      "token": "your-secret-token-here"
    }
  }
}
```

#### 2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ø–∞—Ä–æ–ª—é

```json
{
  "auth": {
    "password": "your-password"
  }
}
```

–ü–∞—Ä–æ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```json
{
  "gateway": {
    "auth": {
      "mode": "password",
      "password": "your-password-here"
    }
  }
}
```

#### 3. Tailscale Identity (—Å–µ—Ç–µ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Tailscale Serve/Funnel –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ Tailscale Identity:

```json
{
  "client": {
    "mode": "operator"
  },
  "device": {
    "id": "device-id",
    "publicKey": "public-key",
    "signature": "signature",
    "signedAt": 1706707200000
  }
}
```

### –û–±–ª–∞—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (Scopes)

–ü–æ—Å–ª–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞–±–æ—Ä –æ–±–ª–∞—Å—Ç–µ–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

| –û–±–ª–∞—Å—Ç—å | –†–∞–∑—Ä–µ—à–µ–Ω–∏—è | –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã |
| --- | --- | --- |
| `operator.admin` | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | –í—Å–µ –º–µ—Ç–æ–¥—ã, –≤–∫–ª—é—á–∞—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, Wizard, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —Ç.–¥. |
| `operator.write` | –ó–∞–ø–∏—Å—å | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, –≤—ã–∑–æ–≤ Agent, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –∏ —Ç.–¥. |
| `operator.read` | –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ | –ó–∞–ø—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ª–æ–≥–æ–≤, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ç.–¥. |
| `operator.approvals` | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è | –ú–µ—Ç–æ–¥—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º Exec |
| `operator.pairing` | –°–æ–ø—Ä—è–∂–µ–Ω–∏–µ | –ú–µ—Ç–æ–¥—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Å–æ–ø—Ä—è–∂–µ–Ω–∏–µ–º —É–∑–ª–æ–≤ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ |

::: info –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ. –ï—Å–ª–∏ —É –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π, –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω:

```json
{
  "type": "res",
  "id": "req-1",
  "ok": false,
  "error": {
    "code": "INVALID_REQUEST",
    "message": "missing scope: operator.admin"
  }
}
```
:::

### –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π

–ü–æ–º–∏–º–æ –æ–±–ª–∞—Å—Ç–µ–π, –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π:

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è |
| --- | --- | --- |
| `operator` | –û–ø–µ—Ä–∞—Ç–æ—Ä | –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã Operator |
| `node` | –£–∑–µ–ª —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ | –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –º–µ—Ç–æ–¥—ã, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è Node |
| `device` | –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º |

–†–æ–ª—å —É–∑–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–ø—Ä—è–∂–µ–Ω–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É —É–∑–ª–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ Gateway.

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

### –ú–µ—Ç–æ–¥—ã Agent

#### `agent` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è Agent

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ AI Agent –∏ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ—Ç–æ–∫–æ–≤—ã–π –æ—Ç–≤–µ—Ç.

```json
{
  "type": "req",
  "id": "req-1",
  "method": "agent",
  "params": {
    "message": "–ü—Ä–∏–≤–µ—Ç, –ø–æ–º–æ–≥–∏ –º–Ω–µ –Ω–∞–ø–∏—Å–∞—Ç—å Hello World",
    "agentId": "default",
    "sessionId": "main",
    "idempotencyKey": "msg-123"
  }
}
```

**–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- | --- |
| `message` | string | –î–∞ | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `agentId` | string | –ù–µ—Ç | ID Agent, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Agent |
| `sessionId` | string | –ù–µ—Ç | ID —Å–µ—Å—Å–∏–∏ |
| `sessionKey` | string | –ù–µ—Ç | –ö–ª—é—á —Å–µ—Å—Å–∏–∏ |
| `to` | string | –ù–µ—Ç | –¶–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∫–∏ (–∫–∞–Ω–∞–ª) |
| `channel` | string | –ù–µ—Ç | –ò–º—è –∫–∞–Ω–∞–ª–∞ |
| `accountId` | string | –ù–µ—Ç | ID –∞–∫–∫–∞—É–Ω—Ç–∞ |
| `thinking` | string | –ù–µ—Ç | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è |
| `deliver` | boolean | –ù–µ—Ç | –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏ –≤ –∫–∞–Ω–∞–ª |
| `attachments` | array | –ù–µ—Ç | –°–ø–∏—Å–æ–∫ –≤–ª–æ–∂–µ–Ω–∏–π |
| `timeout` | number | –ù–µ—Ç | –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã) |
| `lane` | string | –ù–µ—Ç | –ö–∞–Ω–∞–ª –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| `extraSystemPrompt` | string | –ù–µ—Ç | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç |
| `idempotencyKey` | string | –î–∞ | –ö–ª—é—á –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è |

**–û—Ç–≤–µ—Ç**:

–û—Ç–≤–µ—Ç Agent –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–º —á–µ—Ä–µ–∑ —Ñ—Ä–µ–π–º—ã —Å–æ–±—ã—Ç–∏–π:

```json
// —Å–æ–±—ã—Ç–∏–µ thinking
{
  "type": "event",
  "event": "agent.event",
  "payload": {
    "runId": "run-123",
    "seq": 0,
    "stream": "thinking",
    "ts": 1706707200000,
    "data": {
      "content": "–†–∞–∑–º—ã—à–ª—è—é..."
    }
  }
}

// —Å–æ–±—ã—Ç–∏–µ message
{
  "type": "event",
  "event": "agent.event",
  "payload": {
    "runId": "run-123",
    "seq": 1,
    "stream": "message",
    "ts": 1706707200000,
    "data": {
      "role": "assistant",
      "content": "–ü—Ä–∏–≤–µ—Ç! –í–æ—Ç Hello World..."
    }
  }
}
```

#### `agent.wait` - –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Agent

–û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ Agent.

```json
{
  "type": "req",
  "id": "req-2",
  "method": "agent.wait",
  "params": {
    "runId": "run-123",
    "timeoutMs": 30000
  }
}
```

### –ú–µ—Ç–æ–¥—ã Send

#### `send` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª.

```json
{
  "type": "req",
  "id": "req-3",
  "method": "send",
  "params": {
    "to": "+1234567890",
    "message": "Hello from Clawdbot!",
    "channel": "whatsapp",
    "idempotencyKey": "send-123"
  }
}
```

**–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- | --- |
| `to` | string | –î–∞ | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞—Ç–µ–ª—è (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ç.–¥.) |
| `message` | string | –î–∞ | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è |
| `mediaUrl` | string | –ù–µ—Ç | URL –º–µ–¥–∏–∞ |
| `mediaUrls` | array | –ù–µ—Ç | –°–ø–∏—Å–æ–∫ URL –º–µ–¥–∏–∞ |
| `channel` | string | –ù–µ—Ç | –ò–º—è –∫–∞–Ω–∞–ª–∞ |
| `accountId` | string | –ù–µ—Ç | ID –∞–∫–∫–∞—É–Ω—Ç–∞ |
| `sessionKey` | string | –ù–µ—Ç | –ö–ª—é—á —Å–µ—Å—Å–∏–∏ (–¥–ª—è –∑–µ—Ä–∫–∞–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞) |
| `idempotencyKey` | string | –î–∞ | –ö–ª—é—á –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ |

### –ú–µ—Ç–æ–¥—ã Poll

#### `poll` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞

–°–æ–∑–¥–∞–µ—Ç –æ–ø—Ä–æ—Å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –∫–∞–Ω–∞–ª.

```json
{
  "type": "req",
  "id": "req-4",
  "method": "poll",
  "params": {
    "to": "+1234567890",
    "question": "–ö–∞–∫–æ–π –≤–∞—à –ª—é–±–∏–º—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è?",
    "options": ["Python", "JavaScript", "Go", "Rust"],
    "maxSelections": 1,
    "durationHours": 24,
    "channel": "telegram",
    "idempotencyKey": "poll-123"
  }
}
```

### –ú–µ—Ç–æ–¥—ã Sessions

#### `sessions.list` - –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π.

```json
{
  "type": "req",
  "id": "req-5",
  "method": "sessions.list",
  "params": {
    "limit": 50,
    "activeMinutes": 60,
    "includeDerivedTitles": true,
    "includeLastMessage": true
  }
}
```

**–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- | --- |
| `limit` | number | –ù–µ—Ç | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |
| `activeMinutes` | number | –ù–µ—Ç | –§–∏–ª—å—Ç—Ä –Ω–µ–¥–∞–≤–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π (–º–∏–Ω—É—Ç—ã) |
| `includeGlobal` | boolean | –ù–µ—Ç | –í–∫–ª—é—á–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏ |
| `includeUnknown` | boolean | –ù–µ—Ç | –í–∫–ª—é—á–∏—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å–µ—Å—Å–∏–∏ |
| `includeDerivedTitles` | boolean | –ù–µ—Ç | –í—ã–≤–æ–¥–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è |
| `includeLastMessage` | boolean | –ù–µ—Ç | –í–∫–ª—é—á–∏—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è |
| `label` | string | –ù–µ—Ç | –§–∏–ª—å—Ç—Ä –ø–æ –º–µ—Ç–∫–µ |
| `agentId` | string | –ù–µ—Ç | –§–∏–ª—å—Ç—Ä –ø–æ ID Agent |
| `search` | string | –ù–µ—Ç | –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –ø–æ–∏—Å–∫–∞ |

#### `sessions.patch` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Å—Å–∏–∏

–ò–∑–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Å—Å–∏–∏.

```json
{
  "type": "req",
  "id": "req-6",
  "method": "sessions.patch",
  "params": {
    "key": "main",
    "label": "Main Session",
    "thinkingLevel": "minimal",
    "responseUsage": "tokens",
    "model": "claude-sonnet-4-20250514"
  }
}
```

#### `sessions.reset` - –°–±—Ä–æ—Å —Å–µ—Å—Å–∏–∏

–û—á–∏—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–µ—Å—Å–∏–∏.

```json
{
  "type": "req",
  "id": "req-7",
  "method": "sessions.reset",
  "params": {
    "key": "main"
  }
}
```

#### `sessions.delete` - –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

–£–¥–∞–ª—è–µ—Ç —Å–µ—Å—Å–∏—é –∏ –µ–µ –∏—Å—Ç–æ—Ä–∏—é.

```json
{
  "type": "req",
  "id": "req-8",
  "method": "sessions.delete",
  "params": {
    "key": "session-123",
    "deleteTranscript": true
  }
}
```

#### `sessions.compact` - –°–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–µ—Å—Å–∏–∏

–°–∂–∏–º–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–µ—Å—Å–∏–∏ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

```json
{
  "type": "req",
  "id": "req-9",
  "method": "sessions.compact",
  "params": {
    "key": "main",
    "maxLines": 100
  }
}
```

### –ú–µ—Ç–æ–¥—ã Config

#### `config.get` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

```json
{
  "type": "req",
  "id": "req-10",
  "method": "config.get",
  "params": {}
}
```

#### `config.set` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

```json
{
  "type": "req",
  "id": "req-11",
  "method": "config.set",
  "params": {
    "raw": "{\"agent\":{\"model\":\"claude-sonnet-4-20250514\"}}",
    "baseHash": "previous-config-hash"
  }
}
```

#### `config.apply` - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

–ü—Ä–∏–º–µ–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç Gateway.

```json
{
  "type": "req",
  "id": "req-12",
  "method": "config.apply",
  "params": {
    "raw": "{\"agent\":{\"model\":\"claude-sonnet-4-20250514\"}}",
    "baseHash": "previous-config-hash",
    "restartDelayMs": 1000
  }
}
```

#### `config.schema` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ö–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü–æ–ª—É—á–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

```json
{
  "type": "req",
  "id": "req-13",
  "method": "config.schema",
  "params": {}
}
```

### –ú–µ—Ç–æ–¥—ã Channels

#### `channels.status` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤

–ü–æ–ª—É—á–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤.

```json
{
  "type": "req",
  "id": "req-14",
  "method": "channels.status",
  "params": {
    "probe": true,
    "timeoutMs": 5000
  }
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:

```json
{
  "type": "res",
  "id": "req-14",
  "ok": true,
  "payload": {
    "ts": 1706707200000,
    "channelOrder": ["whatsapp", "telegram", "slack"],
    "channelLabels": {
      "whatsapp": "WhatsApp",
      "telegram": "Telegram",
      "slack": "Slack"
    },
    "channelAccounts": {
      "whatsapp": [
        {
          "accountId": "wa-123",
          "enabled": true,
          "linked": true,
          "connected": true,
          "lastConnectedAt": 1706707200000
        }
      ]
    }
  }
}
```

#### `channels.logout` - –í—ã—Ö–æ–¥ –∏–∑ –∫–∞–Ω–∞–ª–∞

–í—ã–ø–æ–ª–Ω—è–µ—Ç –≤—ã—Ö–æ–¥ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞.

```json
{
  "type": "req",
  "id": "req-15",
  "method": "channels.logout",
  "params": {
    "channel": "whatsapp",
    "accountId": "wa-123"
  }
}
```

### –ú–µ—Ç–æ–¥—ã Models

#### `models.list` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö AI –º–æ–¥–µ–ª–µ–π.

```json
{
  "type": "req",
  "id": "req-16",
  "method": "models.list",
  "params": {}
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:

```json
{
  "type": "res",
  "id": "req-16",
  "ok": true,
  "payload": {
    "models": [
      {
        "id": "claude-sonnet-4-20250514",
        "name": "Claude Sonnet 4",
        "provider": "anthropic",
        "contextWindow": 200000,
        "reasoning": true
      },
      {
        "id": "gpt-4o",
        "name": "GPT-4o",
        "provider": "openai",
        "contextWindow": 128000,
        "reasoning": false
      }
    ]
  }
}
```

### –ú–µ—Ç–æ–¥—ã Agents

#### `agents.list` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö Agent

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö Agent.

```json
{
  "type": "req",
  "id": "req-17",
  "method": "agents.list",
  "params": {}
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:

```json
{
  "type": "res",
  "id": "req-17",
  "ok": true,
  "payload": {
    "defaultId": "default",
    "mainKey": "main",
    "scope": "per-sender",
    "agents": [
      {
        "id": "default",
        "name": "Default Agent",
        "identity": {
          "name": "Clawdbot",
          "theme": "default",
          "emoji": "ü§ñ"
        }
      }
    ]
  }
}
```

### –ú–µ—Ç–æ–¥—ã Cron

#### `cron.list` - –°–ø–∏—Å–æ–∫ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.

```json
{
  "type": "req",
  "id": "req-18",
  "method": "cron.list",
  "params": {
    "includeDisabled": true
  }
}
```

#### `cron.add` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏

–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∑–∞–¥–∞—á—É.

```json
{
  "type": "req",
  "id": "req-19",
  "method": "cron.add",
  "params": {
    "name": "–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç",
    "description": "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –≤ 8 —É—Ç—Ä–∞",
    "enabled": true,
    "schedule": {
      "kind": "cron",
      "expr": "0 8 * * *",
      "tz": "Asia/Shanghai"
    },
    "sessionTarget": "main",
    "wakeMode": "now",
    "payload": {
      "kind": "agentTurn",
      "message": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π —Ä–∞–±–æ—á–∏–π –æ—Ç—á–µ—Ç",
      "channel": "last"
    }
  }
}
```

#### `cron.run` - –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏

–í—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å–∫–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∑–∞–¥–∞—á—É.

```json
{
  "type": "req",
  "id": "req-20",
  "method": "cron.run",
  "params": {
    "id": "cron-123",
    "mode": "force"
  }
}
```

### –ú–µ—Ç–æ–¥—ã Nodes

#### `nodes.list` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É–∑–ª–æ–≤

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–ø—Ä—è–∂–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤.

```json
{
  "type": "req",
  "id": "req-21",
  "method": "nodes.list",
  "params": {}
}
```

#### `nodes.describe` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É–∑–ª–µ

–ü–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É–∫–∞–∑–∞–Ω–Ω–æ–º —É–∑–ª–µ.

```json
{
  "type": "req",
  "id": "req-22",
  "method": "nodes.describe",
  "params": {
    "nodeId": "ios-node-123"
  }
}
```

#### `nodes.invoke` - –í—ã–∑–æ–≤ –∫–æ–º–∞–Ω–¥—ã —É–∑–ª–∞

–í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –Ω–∞ —É–∑–ª–µ.

```json
{
  "type": "req",
  "id": "req-23",
  "method": "nodes.invoke",
  "params": {
    "nodeId": "ios-node-123",
    "command": "camera.snap",
    "params": {
      "quality": "high"
    },
    "timeoutMs": 10000,
    "idempotencyKey": "invoke-123"
  }
}
```

#### `nodes.pair.list` - –°–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤, –æ–∂–∏–¥–∞—é—â–∏—Ö —Å–æ–ø—Ä—è–∂–µ–Ω–∏—è

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–æ–ø—Ä—è–∂–µ–Ω–∏–µ —É–∑–ª–æ–≤.

```json
{
  "type": "req",
  "id": "req-24",
  "method": "nodes.pair.list",
  "params": {}
}
```

#### `nodes.pair.approve` - –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–ø—Ä—è–∂–µ–Ω–∏—è —É–∑–ª–∞

–£—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–ø—Ä—è–∂–µ–Ω–∏–µ —É–∑–ª–∞.

```json
{
  "type": "req",
  "id": "req-25",
  "method": "nodes.pair.approve",
  "params": {
    "requestId": "pair-req-123"
  }
}
```

#### `nodes.pair.reject` - –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–æ–ø—Ä—è–∂–µ–Ω–∏—è —É–∑–ª–∞

–û—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–ø—Ä—è–∂–µ–Ω–∏–µ —É–∑–ª–∞.

```json
{
  "type": "req",
  "id": "req-26",
  "method": "nodes.pair.reject",
  "params": {
    "requestId": "pair-req-123"
  }
}
```

#### `nodes.rename` - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —É–∑–ª–∞

–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç —É–∑–µ–ª.

```json
{
  "type": "req",
  "id": "req-27",
  "method": "nodes.rename",
  "params": {
    "nodeId": "ios-node-123",
    "displayName": "My iPhone"
  }
}
```

### –ú–µ—Ç–æ–¥—ã Logs

#### `logs.tail` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤

–ü–æ–ª—É—á–∞–µ—Ç –ª–æ–≥–∏ Gateway.

```json
{
  "type": "req",
  "id": "req-28",
  "method": "logs.tail",
  "params": {
    "cursor": 0,
    "limit": 100,
    "maxBytes": 100000
  }
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:

```json
{
  "type": "res",
  "id": "req-28",
  "ok": true,
  "payload": {
    "file": "/path/to/gateway.log",
    "cursor": 123456,
    "size": 4567890,
    "lines": [
      "[2025-01-27 10:00:00] INFO: Starting Gateway...",
      "[2025-01-27 10:00:01] INFO: Connected to WhatsApp"
    ],
    "truncated": false
  }
}
```

### –ú–µ—Ç–æ–¥—ã Skills

#### `skills.status` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞–≤—ã–∫–æ–≤

–ü–æ–ª—É—á–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞–≤—ã–∫–æ–≤.

```json
{
  "type": "req",
  "id": "req-29",
  "method": "skills.status",
  "params": {}
}
```

#### `skills.bins` - –°–ø–∏—Å–æ–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫ –Ω–∞–≤—ã–∫–æ–≤

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –Ω–∞–≤—ã–∫–æ–≤.

```json
{
  "type": "req",
  "id": "req-30",
  "method": "skills.bins",
  "params": {}
}
```

#### `skills.install` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–≤—ã–∫–∞

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π –Ω–∞–≤—ã–∫.

```json
{
  "type": "req",
  "id": "req-31",
  "method": "skills.install",
  "params": {
    "name": "my-custom-skill",
    "installId": "install-123",
    "timeoutMs": 60000
  }
}
```

### –ú–µ—Ç–æ–¥—ã WebChat

#### `chat.send` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ (WebChat)

–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ —á–∞—Ç–∞ –¥–ª—è WebChat.

```json
{
  "type": "req",
  "id": "req-32",
  "method": "chat.send",
  "params": {
    "sessionKey": "main",
    "message": "Hello from WebChat!",
    "thinking": "–û—Ç–≤–µ—á–∞—é...",
    "deliver": true,
    "idempotencyKey": "chat-123"
  }
}
```

#### `chat.history` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞

–ü–æ–ª—É—á–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏.

```json
{
  "type": "req",
  "id": "req-33",
  "method": "chat.history",
  "params": {
    "sessionKey": "main",
    "limit": 50
  }
}
```

#### `chat.abort` - –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —á–∞—Ç–∞

–ü—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —á–∞—Ç.

```json
{
  "type": "req",
  "id": "req-34",
  "method": "chat.abort",
  "params": {
    "sessionKey": "main",
    "runId": "run-123"
  }
}
```

### –ú–µ—Ç–æ–¥—ã Wizard

#### `wizard.start` - –ó–∞–ø—É—Å–∫ –º–∞—Å—Ç–µ—Ä–∞

–ó–∞–ø—É—Å–∫–∞–µ—Ç –º–∞—Å—Ç–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

```json
{
  "type": "req",
  "id": "req-35",
  "method": "wizard.start",
  "params": {}
}
```

#### `wizard.next` - –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –º–∞—Å—Ç–µ—Ä–∞

–í—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –º–∞—Å—Ç–µ—Ä–∞.

```json
{
  "type": "req",
  "id": "req-36",
  "method": "wizard.next",
  "params": {
    "stepId": "step-1",
    "response": {
      "selectedOption": "option-1"
    }
  }
}
```

#### `wizard.cancel` - –û—Ç–º–µ–Ω–∞ –º–∞—Å—Ç–µ—Ä–∞

–û—Ç–º–µ–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–π –º–∞—Å—Ç–µ—Ä.

```json
{
  "type": "req",
  "id": "req-37",
  "method": "wizard.cancel",
  "params": {}
}
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### `status` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

–ü–æ–ª—É—á–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã Gateway.

```json
{
  "type": "req",
  "id": "req-38",
  "method": "status",
  "params": {}
}
```

#### `last-heartbeat` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ heartbeat

–ü–æ–ª—É—á–∞–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ heartbeat Gateway.

```json
{
  "type": "req",
  "id": "req-39",
  "method": "last-heartbeat",
  "params": {}
}
```

### –ú–µ—Ç–æ–¥—ã Usage

#### `usage.status` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤.

```json
{
  "type": "req",
  "id": "req-40",
  "method": "usage.status",
  "params": {}
}
```

#### `usage.cost` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞—Ç—Ä–∞—Ç

–ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –≤—ã–∑–æ–≤—ã API.

```json
{
  "type": "req",
  "id": "req-41",
  "method": "usage.cost",
  "params": {}
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ö–æ–¥—ã –æ—à–∏–±–æ–∫

–í—Å–µ –æ—Ç–≤–µ—Ç—ã —Å –æ—à–∏–±–∫–∞–º–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–¥ –æ—à–∏–±–∫–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ:

| –ö–æ–¥ –æ—à–∏–±–∫–∏ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å |
| --- | --- | --- |
| `NOT_LINKED` | –£–∑–µ–ª –Ω–µ —Å–≤—è–∑–∞–Ω | –î–∞ |
| `NOT_PAIRED` | –£–∑–µ–ª –Ω–µ —Å–æ–ø—Ä—è–∂–µ–Ω | –ù–µ—Ç |
| `AGENT_TIMEOUT` | –¢–∞–π–º-–∞—É—Ç Agent | –î–∞ |
| `INVALID_REQUEST` | –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –∑–∞–ø—Ä–æ—Å | –ù–µ—Ç |
| `UNAVAILABLE` | –°–ª—É–∂–±–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ | –î–∞ |

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–æ–π

```json
{
  "type": "res",
  "id": "req-1",
  "ok": false,
  "error": {
    "code": "AGENT_TIMEOUT",
    "message": "Agent response timeout",
    "retryable": true,
    "retryAfterMs": 5000
  }
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ `retryable`**: –µ—Å–ª–∏ `true`, –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –ø–æ—Å–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏ `retryAfterMs`
2. **–ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏**: –∑–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ `code` –∏ `message` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: `INVALID_REQUEST` –æ–±—ã—á–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ—É–¥–∞—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**: `NOT_LINKED` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ä–∞–∑—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

## –ú–µ—Ö–∞–Ω–∏–∑–º heartbeat

Gateway –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è heartbeat:

```json
{
  "type": "event",
  "event": "tick",
  "payload": {
    "ts": 1706707200000
  }
}
```

::: tip –û–±—Ä–∞–±–æ—Ç–∫–∞ heartbeat
–ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω:
1. –ü—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è `tick`
2. –û–±–Ω–æ–≤–ª—è—Ç—å –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ heartbeat
3. –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ heartbeat –±–æ–ª–µ–µ `3 * tickIntervalMs`, —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
:::

## –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä

### –ü—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ JavaScript

```javascript
const WebSocket = require('ws');

class GatewayClient {
  constructor(url, token) {
    this.url = url;
    this.token = token;
    this.ws = null;
    this.requestId = 0;
    this.pendingRequests = new Map();
  }

  connect() {
    return new Promise((resolve, reject) => {
      this.ws = new WebSocket(this.url);

      this.ws.on('open', () => {
        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è
        this.sendHandshake();
        resolve();
      });

      this.ws.on('message', (data) => {
        this.handleMessage(JSON.parse(data));
      });

      this.ws.on('error', (error) => {
        reject(error);
      });

      this.ws.on('close', () => {
        console.log('WebSocket –æ—Ç–∫–ª—é—á–µ–Ω');
      });
    });
  }

  sendHandshake() {
    this.ws.send(JSON.stringify({
      minProtocol: 1,
      maxProtocol: 3,
      client: {
        id: 'my-client',
        displayName: 'My Gateway Client',
        version: '1.0.0',
        platform: 'node',
        mode: 'operator'
      },
      auth: {
        token: this.token
      }
    }));
  }

  async request(method, params = {}) {
    const id = `req-${++this.requestId}`;
    
    return new Promise((resolve, reject) => {
      this.pendingRequests.set(id, { resolve, reject });
      
      this.ws.send(JSON.stringify({
        type: 'req',
        id,
        method,
        params
      }));

      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º-–∞—É—Ç–∞
      setTimeout(() => {
        this.pendingRequests.delete(id);
        reject(new Error('–¢–∞–π–º-–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞'));
      }, 30000);
    });
  }

  handleMessage(message) {
    if (message.type === 'res') {
      const { id, ok, payload, error } = message;
      const pending = this.pendingRequests.get(id);
      
      if (pending) {
        this.pendingRequests.delete(id);
        if (ok) {
          pending.resolve(payload);
        } else {
          pending.reject(new Error(`${error.code}: ${error.message}`));
        }
      }
    } else if (message.type === 'event') {
      this.handleEvent(message);
    }
  }

  handleEvent(event) {
    console.log('–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ:', event.event, event.payload);
  }

  async sendAgentMessage(message) {
    return this.request('agent', {
      message,
      idempotencyKey: `msg-${Date.now()}`
    });
  }

  async listSessions() {
    return this.request('sessions.list', {
      limit: 50,
      includeLastMessage: true
    });
  }

  async getChannelsStatus() {
    return this.request('channels.status', {
      probe: true
    });
  }
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
(async () => {
  const client = new GatewayClient('ws://127.0.0.1:18789/v1/connect', 'your-token');
  await client.connect();

  // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è Agent
  const response = await client.sendAgentMessage('–ü—Ä–∏–≤–µ—Ç!');
  console.log('–û—Ç–≤–µ—Ç Agent:', response);

  // –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π
  const sessions = await client.listSessions();
  console.log('–°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π:', sessions);

  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤
  const channels = await client.getChannelsStatus();
  console.log('–°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤:', channels);
})();
```

## –ò—Ç–æ–≥ —É—Ä–æ–∫–∞

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª Clawdbot Gateway WebSocket API, –≤–∫–ª—é—á–∞—è:

- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –º–µ—Ö–∞–Ω–∏–∑–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –¢—Ä–∏ —Ç–∏–ø–∞ —Ñ—Ä–µ–π–º–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π (–∑–∞–ø—Ä–æ—Å, –æ—Ç–≤–µ—Ç, —Å–æ–±—ã—Ç–∏–µ)
- ‚úÖ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ (Agent, Send, Sessions, Config –∏ —Ç.–¥.)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- ‚úÖ –ú–µ—Ö–∞–Ω–∏–∑–º heartbeat –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º
- ‚úÖ –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ JavaScript

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–∫–∞

> –ù–∞ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ –º—ã –∏–∑—É—á–∏–º **[–ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](../config-reference/)**.
>
> –í—ã —É–∑–Ω–∞–µ—Ç–µ:
> - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
> - –°—Ö–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
> - –ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞–º–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
> - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É

<details>
<summary><strong>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞</strong></summary>

> –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 2026-01-27

| –§—É–Ω–∫—Ü–∏—è | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É | –ù–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ |
| --- | --- | --- |
| –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä | `src/gateway/protocol/index.ts` | 1-521 |
| –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Ñ—Ä–µ–π–º–æ–≤ | `src/gateway/protocol/schema/frames.ts` | 1-165 |
| –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ | `src/gateway/protocol/schema/protocol-schemas.ts` | 231 |
| –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫ | `src/gateway/protocol/schema/error-codes.ts` | 3-24 |
| –°—Ö–µ–º–∞ Agent | `src/gateway/protocol/schema/agent.ts` | 1-107 |
| –°—Ö–µ–º–∞ Chat/Logs | `src/gateway/protocol/schema/logs-chat.ts` | 1-83 |
| –°—Ö–µ–º–∞ Sessions | `src/gateway/protocol/schema/sessions.ts` | 1-105 |
| –°—Ö–µ–º–∞ Config | `src/gateway/protocol/schema/config.ts` | 1-72 |
| –°—Ö–µ–º–∞ Nodes | `src/gateway/protocol/schema/nodes.ts` | 1-103 |
| –°—Ö–µ–º–∞ Cron | `src/gateway/protocol/schema/cron.ts` | 1-246 |
| –°—Ö–µ–º–∞ Channels | `src/gateway/protocol/schema/channels.ts` | 1-108 |
| –°—Ö–µ–º–∞ Models/Agents/Skills | `src/gateway/protocol/schema/agents-models-skills.ts` | 1-86 |
| –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ | `src/gateway/server-methods.ts` | 1-200 |
| –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π | `src/gateway/server-methods.ts` | 91-144 |
| –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–Ω–∏–º–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è | `src/gateway/protocol/schema/snapshot.ts` | 1-58 |

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**:
- `PROTOCOL_VERSION = 3`: —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- `ErrorCodes`: –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫ (NOT_LINKED, NOT_PAIRED, AGENT_TIMEOUT, INVALID_REQUEST, UNAVAILABLE)

**–ö–ª—é—á–µ–≤—ã–µ —Ç–∏–ø—ã**:
- `GatewayFrame`: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Ç–∏–ø —Ñ—Ä–µ–π–º–æ–≤ Gateway (RequestFrame | ResponseFrame | EventFrame)
- `RequestFrame`: —Ç–∏–ø —Ñ—Ä–µ–π–º–∞ –∑–∞–ø—Ä–æ—Å–∞
- `ResponseFrame`: —Ç–∏–ø —Ñ—Ä–µ–π–º–∞ –æ—Ç–≤–µ—Ç–∞
- `EventFrame`: —Ç–∏–ø —Ñ—Ä–µ–π–º–∞ —Å–æ–±—ã—Ç–∏—è
- `HelloOk`: —Ç–∏–ø –æ—Ç–≤–µ—Ç–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è
- `ErrorShape`: —Ç–∏–ø —Ñ–æ—Ä–º—ã –æ—à–∏–±–∫–∏

</details>
