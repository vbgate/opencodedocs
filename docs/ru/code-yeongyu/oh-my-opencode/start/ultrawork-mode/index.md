---
title: "Режим Ultrawork: активация всех функций одним кликом | oh-my-opencode"
sidebarTitle: "Активация всех функций одним кликом"
subtitle: "Режим Ultrawork: активация всех функций одним кликом"
description: "Изучите режим Ultrawork и ключевые функции oh-my-opencode, включая использование ключевого слова ultrawork, изменения при активации, механизм параллельного исследования, обязательную проверку завершения и взаимодействие агентов для быстрой активации всех продвинутых функций."
tags:
  - "ultrawork"
  - "фоновые задачи"
  - "взаимодействие агентов"
prerequisite:
  - "/ru/code-yeongyu/oh-my-opencode/start/installation/"
  - "/ru/code-yeongyu/oh-my-opencode/start/sisyphus-orchestrator/"
order: 30
---

# Режим Ultrawork: активация всех функций одним кликом

## Что вы сможете сделать после изучения

- Активировать все продвинутые функции oh-my-opencode одной фразой
- Позволить нескольким AI-агентам работать параллельно как настоящая команда
- Избежать ручной настройки нескольких агентов и фоновых задач
- Понять философию дизайна и лучшие практики режима Ultrawork

## Ваши текущие проблемы

Возможно, вы сталкивались с такими ситуациями при разработке:

- **Слишком много функций, не знаете как использовать**: 10 специализированных агентов, фоновые задачи, инструменты LSP, но не знаете как быстро активировать
- **Требуется ручная настройка**: Для каждой сложной задачи нужно вручную указывать агентов, фоновое параллелизм и другие настройки
- **Неэффективное взаимодействие агентов**: Последовательный вызов агентов, тратит время и ресурсы
- **Задачи застревают на полпути**: Агенты не имеют достаточной мотивации и ограничений для завершения задач

Всё это мешает вам использовать истинную мощь oh-my-opencode.

## Основная идея

**Режим Ultrawork** — это механизм "активации всех функций одним кликом" в oh-my-opencode.

::: info Что такое режим Ultrawork?
Режим Ultrawork — это специальный режим работы, активируемый ключевым словом. Когда вы включаете `ultrawork` или сокращение `ulw` в свой запрос, система автоматически активирует все продвинутые функции: параллельные фоновые задачи, глубокое исследование, обязательное завершение, многоагентное взаимодействие и т.д.
:::

### Философия дизайна

Режим Ultrawork основан на следующих основных принципах (из [Ultrawork Manifesto](https://github.com/code-yeongyu/oh-my-opencode/blob/main/docs/ultrawork-manifesto.md)):

| Принцип | Описание |
|---------|----------|
| **Человеческое вмешательство — это сигнал о неудаче** | Если вам нужно постоянно исправлять вывод AI, это означает проблему с дизайном системы |
| **Неразличимый код** | Код, написанный AI, не должен отличаться от кода опытного инженера |
| **Минимизация когнитивной нагрузки** | Вам нужно только сказать "что делать", агенты отвечают за "как делать" |
| **Предсказуемый, устойчивый, делегируемый** | Агенты должны быть стабильны и надежны как компилятор |

### Механизм активации

Когда система обнаруживает ключевое слово `ultrawork` или `ulw`:

1. **Установка режима максимальной точности**: `message.variant = "max"`
2. **Отображение Toast-уведомления**: "Ultrawork Mode Activated - Maximum precision engaged. All agents at your disposal."
3. **Внедрение полных инструкций**: Внедрение в агента более 200 строк инструкций ULTRAWORK, включая:
   - Обязательное определение на 100% перед началом реализации
   - Требование параллельного использования фоновых задач
   - Обязательное использование системы Category + Skills
   - Обязательная проверка завершения (рабочий процесс TDD)
   - Запрет любых оправданий "я не могу"

## Следуйте инструкциям

### Шаг 1: Активация режима Ultrawork

Введите запрос, содержащий ключевое слово `ultrawork` или `ulw` в OpenCode:

```
ultrawork разработать REST API
```

Или более кратко:

```
ulw добавить аутентификацию пользователей
```

**Что вы должны увидеть**:
- В интерфейсе появляется Toast-уведомление: "Ultrawork Mode Activated"
- Ответ агента начинается с "ULTRAWORK MODE ENABLED!"

### Шаг 2: Наблюдение за изменениями поведения агента

После активации режима Ultrawork агент будет:

1. **Параллельно исследовать кодовую базу**
   ```
   delegate_task(agent="explore", prompt="найти существующие паттерны API", background=true)
   delegate_task(agent="explore", prompt="найти инфраструктуру тестирования", background=true)
   delegate_task(agent="librarian", prompt="найти лучшие практики аутентификации", background=true)
   ```

2. **Вызывать агента Plan для создания рабочего плана**
   ```
   delegate_task(subagent_type="plan", prompt="создать подробный план на основе собранного контекста")
   ```

3. **Использовать Category + Skills для выполнения задач**
   ```
   delegate_task(category="visual-engineering", load_skills=["frontend-ui-ux", "playwright"], ...)
   ```

**Что вы должны увидеть**:
- Несколько фоновых задач выполняются одновременно
- Агент активно вызывает специализированных агентов (Oracle, Librarian, Explore)
- Полный план тестирования и разложение работы
- Задача выполняется непрерывно до 100% завершения

### Шаг 3: Проверка завершения задачи

После завершения агент:

1. **Покажет доказательства проверки**: вывод фактически запущенных тестов, описание ручной проверки
2. **Подтвердит завершение всех TODO**: не объявит завершение заранее
3. **Подведёт итоги работы**: перечислит что было сделано и почему

**Что вы должны увидеть**:
- Чёткие результаты тестирования (не "должно работать")
- Все проблемы решены
- Нет незавершённых списков TODO

## Контрольная точка ✅

После выполнения вышеуказанных шагов подтвердите:

- [ ] После ввода `ulw` вы видите Toast-уведомление
- [ ] Ответ агента начинается с "ULTRAWORK MODE ENABLED!"
- [ ] Наблюдается выполнение параллельных фоновых задач
- [ ] Агент использует систему Category + Skills
- [ ] После завершения задачи есть доказательства проверки

Если какой-либо пункт не пройден, проверьте:
- Правильность написания ключевого слова (`ultrawork` или `ulw`)
- Находитесь ли вы в основном сеансе (фоновые задачи не активируют режим)
- Включены ли соответствующие функции в файле конфигурации

## Когда использовать этот метод

| Сценарий | Использовать Ultrawork | Обычный режим |
|----------|------------------------|------------------------------|
| **Сложная новая функция** | ✅ Рекомендуется (требуется многоагентное взаимодействие) | ❌ Может быть недостаточно эффективно |
| **Срочное исправление** | ✅ Рекомендуется (требуется быстрая диагностика и исследование) | ❌ Может пропустить контекст |
| **Простое изменение** | ❌ Избыточно (тратит ресурсы) | ✅ Более подходит |
| **Быстрая проверка идеи** | ❌ Избыточно | ✅ Более подходит |

**Эмпирическое правило**:
- Задача затрагивает несколько модулей или систем → используйте `ulw`
- Требуется глубокое исследование кодовой базы → используйте `ulw`
- Требуется вызов нескольких специализированных агентов → используйте `ulw`
- Небольшое изменение в одном файле → не нужно `ulw`

## Предупреждения

::: warning Меры предосторожности

**1. Не используйте `ulw` в каждом запросе**

Режим Ultrawork внедряет большое количество инструкций, для простых задач это избыточно. Используйте только для действительно сложных задач, требующих многоагентного взаимодействия, параллельного исследования, глубокого анализа.

**2. Фоновые задачи не активируют режим Ultrawork**

Детектор ключевых слов пропускает фоновые сеансы, чтобы избежать ошибочного внедрения режима в подагентов. Режим Ultrawork работает только в основном сеансе.

**3. Убедитесь в правильности конфигурации Provider**

Режим Ultrawork зависит от параллельной работы нескольких AI-моделей. Если некоторые Provider не настроены или недоступны, агент может не вызвать специализированных агентов.
:::

## Итоги урока

Режим Ultrawork активируется ключевым словом и реализует цель дизайна "активация всех функций одной фразой":

- **Простота использования**: просто введите `ulw` для активации
- **Автоматическое взаимодействие**: агенты автоматически вызывают других агентов, параллельно выполняют фоновые задачи
- **Обязательное завершение**: полный механизм проверки обеспечивает 100% завершение
- **Нулевая настройка**: не нужно вручную устанавливать_PRIORITеты агентов, ограничения параллелизма и т.д.

Помните: режим Ultrawork предназначен для того, чтобы агенты работали как настоящая команда, вам нужно только выразить намерение, агенты отвечают за выполнение.

## Предварительный обзор следующего урока

> В следующем уроке мы изучим **[Настройка Provider](../../platforms/provider-setup/)**.
>
> Вы узнаете:
> - Как настроить несколько Provider: Anthropic, OpenAI, Google и т.д.
> - Как стратегия нескольких моделей автоматически понижает и выбирает оптимальную модель
> - Как проверить соединение Provider и использование квот

---

## Приложение: Ссылки на исходный код

<details>
<summary><strong>Нажмите, чтобы раскрыть расположение исходного кода</strong></summary>

> Время обновления: 2026-01-26

| Функция | Путь к файлу | Строки |
|---------|--------------|--------|
| Философия дизайна Ultrawork | [`docs/ultrawork-manifesto.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/docs/ultrawork-manifesto.md) | 1-198 |
| Hook детектора ключевых слов | [`src/hooks/keyword-detector/index.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/hooks/keyword-detector/index.ts) | 12-100 |
| Шаблон инструкций ULTRAWORK | [`src/hooks/keyword-detector/constants.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/hooks/keyword-detector/constants.ts) | 54-280 |
| Логика детектора ключевых слов | [`src/hooks/keyword-detector/detector.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/main/src/hooks/keyword-detector/detector.ts) | 26-53 |

**Ключевые константы**:
- `KEYWORD_DETECTORS`: конфигурация детекторов ключевых слов, включает три режима: ultrawork, search, analyze
- `CODE_BLOCK_PATTERN`: регулярное выражение для кодовых блоков, используется для фильтрации ключевых слов в кодовых блоках
- `INLINE_CODE_PATTERN`: регулярное выражение для встроенного кода, используется для фильтрации ключевых слов во встроенном коде

**Ключевые функции**:
- `createKeywordDetectorHook()`: создаёт Hook детектора ключевых слов, отслеживает событие UserPromptSubmit
- `detectKeywordsWithType()`: обнаруживает ключевые слова в тексте и возвращает тип (ultrawork/search/analyze)
- `getUltraworkMessage()`: генерирует полные инструкции режима ULTRAWORK (выбирает режим Planner или обычный в зависимости от типа агента)
- `removeCodeBlocks()`: удаляет кодовые блоки из текста, чтобы избежать ложного срабатывания ключевых слов в кодовых блоках

**Бизнес-правила**:
| ID правила | Описание правила | Метка |
|------------|------------------|-------|
| BR-4.8.4-1 | При обнаружении "ultrawork" или "ulw" активируется режим Ultrawork | 【Факт】 |
| BR-4.8.4-2 | Режим Ultrawork устанавливает `message.variant = "max"` | 【Факт】 |
| BR-4.8.4-3 | Режим Ultrawork отображает Toast-уведомление: "Ultrawork Mode Activated" | 【Факт】 |
| BR-4.8.4-4 | Фоновые задачи пропускают детекцию ключевых слов, чтобы избежать внедрения режима | 【Факт】 |
| BR-4.8.4-5 | В неосновных сеансах разрешено только ключевое слово ultrawork, блокируется внедрение других режимов | 【Факт】 |

</details>
